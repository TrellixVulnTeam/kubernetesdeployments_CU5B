"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1850],{86456:function(Tt,l,t){t.d(l,{r:function(){return Fe}});var e=t(53907),i=t(30705),h=t(4298),s=t(2784),n=t(77277),R=t(49558),P=t(62833),w=t(10289),u=t(43642),y=t(80079),O=t(90941),K=t(32915),D=t(40562),g=t(21853),T=t(60744),f=t(66569),U=t(30254),p=t(13384),d=t(15933),A=t(58838),N=t(86737),c=t(4989),Z=t(44407),F=t(18628),te=t(84219),we=t(98685),ct=t(39781),nt=t(73689),se=t(48032),ye=t(34505);const Le={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},de={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"]};function V(be,pt){const ze=`linear-gradient(90deg, ${(be.length===1?[be[0],be[0]]:be).join(", ")})`,mt=`${pt},  ${ze}`;return{colors:be,shape:pt,backgroundImage:mt}}const he={home:V(de.teal,Le.wave),documentation:V(de.pinkSea,Le.wave2),tool:V(de.purpleSky,Le.round),service:V(de.marineBlue,Le.wave),website:V(de.veryBlue,Le.wave),library:V(de.rubyRed,Le.wave),other:V(de.darkGrey,Le.wave),app:V(de.toastyOrange,Le.wave),apis:V(de.teal,Le.wave2)},C='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif';function Ke(be){const{palette:pt,fontFamily:vt=C,defaultPageTheme:ze,pageTheme:mt=he}=be;if(!mt[ze])throw new Error(`${ze} is not defined in pageTheme.`);return{palette:pt,props:{MuiGrid:{spacing:2},MuiSwitch:{color:"primary"}},typography:{fontFamily:vt,h5:{fontWeight:700},h4:{fontWeight:700,fontSize:28,marginBottom:6},h3:{fontSize:32,fontWeight:700,marginBottom:6},h2:{fontSize:40,fontWeight:700,marginBottom:8},h1:{fontSize:54,fontWeight:700,marginBottom:10}},page:mt[ze],getPageTheme:({themeId:_t})=>{var Ie;return(Ie=mt[_t])!=null?Ie:mt[ze]}}}function j(be){return{MuiCssBaseline:{"@global":{html:{height:"100%",fontFamily:be.typography.fontFamily},body:{height:"100%",fontFamily:be.typography.fontFamily,"overscroll-behavior-y":"none"},a:{color:"inherit",textDecoration:"none"}}},MuiTableRow:{root:{"&:nth-of-type(odd)":{backgroundColor:be.palette.background.default}},hover:{"&:hover":{cursor:"pointer"}},head:{"&:nth-of-type(odd)":{backgroundColor:be.palette.background.paper}}},MuiTableCell:{root:{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:be.spacing(3,2,3,2.5),borderBottom:0},sizeSmall:{padding:be.spacing(1.5,2,1.5,2.5)},head:{wordBreak:"break-word",overflow:"hidden",color:"rgb(179, 179, 179)",fontWeight:"normal",lineHeight:"1"}},MuiTabs:{root:{minHeight:24}},MuiTab:{root:{color:be.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,se.darken)(be.palette.link,.3),background:(0,se.lighten)(be.palette.link,.95)},[be.breakpoints.up("md")]:{minWidth:120,fontSize:be.typography.pxToRem(14),fontWeight:500}},textColorPrimary:{color:be.palette.link}},MuiTableSortLabel:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"}},active:{fontWeight:"bold",color:"inherit"}},MuiListItemText:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},MuiButton:{text:{padding:void 0}},MuiChip:{root:{backgroundColor:"#D9D9D9",marginRight:be.spacing(1),marginBottom:be.spacing(1),color:be.palette.grey[900]},outlined:{color:be.palette.text.primary},label:{lineHeight:`${be.spacing(2.5)}px`,fontWeight:be.typography.fontWeightMedium,fontSize:`${be.spacing(1.75)}px`},labelSmall:{fontSize:`${be.spacing(1.5)}px`},deleteIcon:{color:be.palette.grey[500],width:`${be.spacing(3)}px`,height:`${be.spacing(3)}px`,margin:`0 ${be.spacing(.75)}px 0 -${be.spacing(.75)}px`},deleteIconSmall:{width:`${be.spacing(2)}px`,height:`${be.spacing(2)}px`,margin:`0 ${be.spacing(.5)}px 0 -${be.spacing(.5)}px`}},MuiCard:{root:{display:"flex",flexDirection:"column"}},MuiCardHeader:{root:{paddingBottom:0}},MuiCardContent:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}},MuiCardActions:{root:{justifyContent:"flex-end"}}}}function It(be){const pt=Ke(be),vt=(0,nt.Z)(pt),ze=j(vt);return{...vt,overrides:ze}}const Be=It({palette:{type:"light",background:{default:"#F8F8F8"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#2E77D0",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#2E77D0"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:ye.Z.A700,navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},defaultPageTheme:"home",pageTheme:he}),L=It({palette:{type:"dark",background:{default:"#333333"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:ye.Z.A700,navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},defaultPageTheme:"home",pageTheme:he});var Y=t(98192),z=t(15222),ge=t(41547),Ue=t(87561);const xe=[(0,i.ni)({api:i.NW,deps:{configApi:i.Ds},factory:({configApi:be})=>e.pM.compile(`${be.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,i.ni)({api:i.$v,deps:{},factory:()=>new e.CX}),(0,i.ni)({api:i.v_,deps:{},factory:()=>new e.gN}),(0,i.ni)({api:i.VE,deps:{alertApi:i.$v},factory:({alertApi:be})=>{const pt=new e.KN(be,new e.gr);return e.Jv.forward(pt,{hidden:!1}),pt}}),(0,i.ni)({api:i.E6,deps:{errorApi:i.VE},factory:({errorApi:be})=>e.CJ.create({errorApi:be})}),(0,i.ni)({api:i.gP,deps:{configApi:i.Ds,identityApi:i.$4,discoveryApi:i.NW},factory:({configApi:be,identityApi:pt,discoveryApi:vt})=>(0,e.jJ)({middleware:[e.II.resolvePluginProtocol({discoveryApi:vt}),e.II.injectIdentityAuth({identityApi:pt,config:be})]})}),(0,i.ni)({api:i.ZM,deps:{},factory:()=>new e.YM}),(0,i.ni)({api:i.Kp,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:be,oauthRequestApi:pt,configApi:vt})=>e.eE.create({discoveryApi:be,oauthRequestApi:pt,environment:vt.getOptionalString("auth.environment")})}),(0,i.ni)({api:i.p_,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:be,oauthRequestApi:pt,configApi:vt})=>e._i.create({discoveryApi:be,oauthRequestApi:pt,environment:vt.getOptionalString("auth.environment")})}),(0,i.ni)({api:i.F4,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:be,oauthRequestApi:pt,configApi:vt})=>e.Td.create({discoveryApi:be,oauthRequestApi:pt,defaultScopes:["read:user"],environment:vt.getOptionalString("auth.environment")})}),(0,i.ni)({api:i.D,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:be,oauthRequestApi:pt,configApi:vt})=>e.sn.create({discoveryApi:be,oauthRequestApi:pt,environment:vt.getOptionalString("auth.environment")})}),(0,i.ni)({api:i.ux,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:be,oauthRequestApi:pt,configApi:vt})=>e.aq.create({discoveryApi:be,oauthRequestApi:pt,environment:vt.getOptionalString("auth.environment")})}),(0,i.ni)({api:i.gW,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:be,oauthRequestApi:pt,configApi:vt})=>e.$_.create({discoveryApi:be,oauthRequestApi:pt,environment:vt.getOptionalString("auth.environment")})}),(0,i.ni)({api:i.bq,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:be,oauthRequestApi:pt,configApi:vt})=>e.xP.create({discoveryApi:be,oauthRequestApi:pt,defaultScopes:["team"],environment:vt.getOptionalString("auth.environment")})}),(0,i.ni)({api:i.uB,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:be,oauthRequestApi:pt,configApi:vt})=>e.uC.create({discoveryApi:be,oauthRequestApi:pt,environment:vt.getOptionalString("auth.environment")})}),(0,i.ni)({api:h.RV,deps:{discovery:i.NW,identity:i.$4,config:i.Ds},factory:({config:be,discovery:pt,identity:vt})=>h.iM.create({config:be,discovery:pt,identity:vt})})];function At({children:be}){return(0,w.GV)()?s.createElement(s.Fragment,null,be):s.createElement(w.VA,null,be)}const nn=()=>s.createElement(R.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}),ut=({step:be,error:pt})=>{let vt="";return be==="load-config"?vt=`The configuration failed to load, someone should have a look at this error: ${pt.message}`:be==="load-chunk"&&(vt=`Lazy loaded chunk failed to load, try to reload the page: ${pt.message}`),s.createElement(At,null,s.createElement(R.mf,{status:"501",statusMessage:vt}))},Kt=({error:be,resetError:pt,plugin:vt})=>s.createElement(R.yu,{title:`Error in ${vt==null?void 0:vt.getId()}`,defaultExpanded:!0,error:be},s.createElement(n.Z,{variant:"outlined",onClick:pt},"Retry")),$t={Progress:R.Ex,Router:P.VK,NotFoundErrorPage:nn,BootErrorPage:ut,ErrorBoundaryFallback:Kt},Pt={brokenImage:y.Z,catalog:F.Z,scaffolder:K.Z,techdocs:D.Z,search:g.Z,chat:T.Z,dashboard:f.Z,docs:U.Z,email:p.Z,github:A.Z,group:te.Z,help:N.Z,"kind:api":d.Z,"kind:component":Z.Z,"kind:domain":u.Z,"kind:group":te.Z,"kind:location":c.Z,"kind:system":O.Z,"kind:user":we.Z,user:we.Z,warning:ct.Z},je=[{id:"light",title:"Light Theme",variant:"light",icon:s.createElement(z.Z,null),Provider:({children:be})=>s.createElement(ge.Z,{theme:Be},s.createElement(Ue.ZP,null,be))},{id:"dark",title:"Dark Theme",variant:"dark",icon:s.createElement(Y.Z,null),Provider:({children:be})=>s.createElement(ge.Z,{theme:L},s.createElement(Ue.ZP,null,be))}];function Fe(be){var pt,vt,ze;return(0,e.bg)({...be,apis:(pt=be==null?void 0:be.apis)!=null?pt:[],bindRoutes:be==null?void 0:be.bindRoutes,components:{...$t,...be==null?void 0:be.components},configLoader:be==null?void 0:be.configLoader,defaultApis:xe,icons:{...Pt,...be==null?void 0:be.icons},plugins:(vt=be==null?void 0:be.plugins)!=null?vt:[],themes:(ze=be==null?void 0:be.themes)!=null?ze:je})}},88285:function(Tt,l,t){t.d(l,{MS:function(){return R},mk:function(){return P},n3:function(){return n}});var e=t(34520),i=t(32272),h=t(96279),s=t.n(h);const n=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");class R{constructor(u){this.discoveryApi=u.discoveryApi,this.fetchApi=u.fetchApi||{fetch:s()}}async getEntityAncestors(u,y){const{kind:O,namespace:K,name:D}=(0,e.of)(u.entityRef);return await this.requestRequired("GET",`/entities/by-name/${encodeURIComponent(O)}/${encodeURIComponent(K)}/${encodeURIComponent(D)}/ancestry`,y)}async getLocationById(u,y){return await this.requestOptional("GET",`/locations/${encodeURIComponent(u)}`,y)}async getEntities(u,y){const{filter:O=[],fields:K=[],offset:D,limit:g,after:T}=u!=null?u:{},f=[];for(const A of[O].flat()){const N=[];for(const[c,Z]of Object.entries(A))for(const F of[Z].flat())F===n?N.push(encodeURIComponent(c)):typeof F=="string"&&N.push(`${encodeURIComponent(c)}=${encodeURIComponent(F)}`);N.length&&f.push(`filter=${N.join(",")}`)}K.length&&f.push(`fields=${K.map(encodeURIComponent).join(",")}`),D!==void 0&&f.push(`offset=${D}`),g!==void 0&&f.push(`limit=${g}`),T!==void 0&&f.push(`after=${encodeURIComponent(T)}`);const U=f.length?`?${f.join("&")}`:"",p=await this.requestRequired("GET",`/entities${U}`,y),d=(A,N)=>{var c,Z;if(((c=A.metadata)==null?void 0:c.name)===void 0||A.kind===void 0||((Z=N.metadata)==null?void 0:Z.name)===void 0||N.kind===void 0)return 0;const F=(0,e.eE)(A),te=(0,e.eE)(N);return F<te?-1:F>te?1:0};return{items:p.sort(d)}}async getEntityByRef(u,y){const{kind:O,namespace:K,name:D}=(0,e.of)(u);return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(O)}/${encodeURIComponent(K)}/${encodeURIComponent(D)}`,y)}async getEntityByName(u,y){const{kind:O,namespace:K="default",name:D}=u;return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(O)}/${encodeURIComponent(K)}/${encodeURIComponent(D)}`,y)}async refreshEntity(u,y){const O=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/refresh`,{headers:{"Content-Type":"application/json",...(y==null?void 0:y.token)&&{Authorization:`Bearer ${y==null?void 0:y.token}`}},method:"POST",body:JSON.stringify({entityRef:u})});if(O.status!==200)throw new Error(await O.text())}async getEntityFacets(u,y){const{filter:O=[],facets:K}=u,D=[];for(const T of[O].flat()){const f=[];for(const[U,p]of Object.entries(T))for(const d of[p].flat())d===n?f.push(encodeURIComponent(U)):typeof d=="string"&&f.push(`${encodeURIComponent(U)}=${encodeURIComponent(d)}`);f.length&&D.push(`filter=${f.join(",")}`)}for(const T of K)D.push(`facet=${encodeURIComponent(T)}`);const g=D.length?`?${D.join("&")}`:"";return await this.requestOptional("GET",`/entity-facets${g}`,y)}async addLocation({type:u="url",target:y,dryRun:O},K){const D=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/locations${O?"?dryRun=true":""}`,{headers:{"Content-Type":"application/json",...(K==null?void 0:K.token)&&{Authorization:`Bearer ${K==null?void 0:K.token}`}},method:"POST",body:JSON.stringify({type:u,target:y})});if(D.status!==201)throw new Error(await D.text());const{location:g,entities:T,exists:f}=await D.json();if(!g)throw new Error(`Location wasn't added: ${y}`);return{location:g,entities:T,exists:f}}async getLocationByRef(u,y){return(await this.requestRequired("GET","/locations",y)).map(K=>K.data).find(K=>u===(0,e.NZ)(K))}async removeLocationById(u,y){await this.requestIgnored("DELETE",`/locations/${encodeURIComponent(u)}`,y)}async removeEntityByUid(u,y){await this.requestIgnored("DELETE",`/entities/by-uid/${encodeURIComponent(u)}`,y)}async requestIgnored(u,y,O){const K=`${await this.discoveryApi.getBaseUrl("catalog")}${y}`,D=O!=null&&O.token?{Authorization:`Bearer ${O.token}`}:{},g=await this.fetchApi.fetch(K,{method:u,headers:D});if(!g.ok)throw await i.VL.fromResponse(g)}async requestRequired(u,y,O){const K=`${await this.discoveryApi.getBaseUrl("catalog")}${y}`,D=O!=null&&O.token?{Authorization:`Bearer ${O.token}`}:{},g=await this.fetchApi.fetch(K,{method:u,headers:D});if(!g.ok)throw await i.VL.fromResponse(g);return await g.json()}async requestOptional(u,y,O){const K=`${await this.discoveryApi.getBaseUrl("catalog")}${y}`,D=O!=null&&O.token?{Authorization:`Bearer ${O.token}`}:{},g=await this.fetchApi.fetch(K,{method:u,headers:D});if(!g.ok){if(g.status===404)return;throw await i.VL.fromResponse(g)}return await g.json()}}const P="backstage.io/catalog-processing"},34520:function(Tt,l,t){t.d(l,{$1:function(){return wn},Dg:function(){return Ce},In:function(){return Fe},KS:function(){return tt},M6:function(){return k},M_:function(){return Je},NZ:function(){return Me},Ou:function(){return G},P1:function(){return m},S4:function(){return cn},Tf:function(){return R},X9:function(){return $e},Zj:function(){return He},_b:function(){return ne},aS:function(){return st},cz:function(){return ht},eE:function(){return ue},hr:function(){return me},iB:function(){return _t},l2:function(){return n},nP:function(){return et},of:function(){return Ie},q1:function(){return I},w$:function(){return Q},wP:function(){return ce},y$:function(){return Pt},zG:function(){return s}});var e=t(76635),i=t.n(e),h=t(53911);const s="default",n="backstage.io/view-url",R="backstage.io/edit-url";class P{constructor(b=s){this.namespace=b}async enforce(b){return b.metadata.namespace?b:lodash.merge({metadata:{namespace:this.namespace}},b)}}class w{static isValidPrefixAndOrSuffix(b,M,B,re){if(typeof b!="string")return!1;const ke=b.split(M);return ke.length===1?re(ke[0]):ke.length===2?B(ke[0])&&re(ke[1]):!1}static isJsonSafe(b){try{return i().isEqual(b,JSON.parse(JSON.stringify(b)))}catch{return!1}}static isValidDnsSubdomain(b){return typeof b=="string"&&b.length>=1&&b.length<=253&&b.split(".").every(w.isValidDnsLabel)}static isValidDnsLabel(b){return typeof b=="string"&&b.length>=1&&b.length<=63&&/^[a-z0-9]+(\-[a-z0-9]+)*$/.test(b)}static isValidTag(b){return typeof b=="string"&&b.length>=1&&b.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(b)}static isValidUrl(b){if(typeof b!="string")return!1;try{return new URL(b),!0}catch{return!1}}static isValidString(b){var M;return typeof b=="string"&&((M=b==null?void 0:b.trim())==null?void 0:M.length)>=1}static isNonEmptyString(b){var M;return typeof b=="string"&&((M=b==null?void 0:b.trim())==null?void 0:M.length)>=1}}var u="http://json-schema.org/draft-07/schema",y="EntityEnvelope",O="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",K=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],D="object",g=["apiVersion","kind","metadata"],T=!0,f={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},U={$schema:u,$id:y,description:O,examples:K,type:D,required:g,additionalProperties:T,properties:f},p="http://json-schema.org/draft-07/schema",d="Entity",A="The parts of the format that's common to all versions/kinds of entity.",N=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],c="object",Z=["apiVersion","kind","metadata"],F=!1,te={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},we={$schema:p,$id:d,description:A,examples:N,type:c,required:Z,additionalProperties:F,properties:te},ct="http://json-schema.org/draft-07/schema",nt="EntityMeta",se="Metadata fields common to all versions/kinds of entity.",ye=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],Le="object",de=["name"],V=!0,he={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1}}}}},C={$schema:ct,$id:nt,description:se,examples:ye,type:Le,required:de,additionalProperties:V,properties:he},Ke="http://json-schema.org/draft-07/schema",j="common",It="object",Be="Common definitions to import from other schemas",L={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","target"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference"}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},Y={$schema:Ke,$id:j,type:It,description:Be,definitions:L};const z=new Map,ge=[U,we,C,Y];function Ue(oe){if(!(oe!=null&&oe.length))throw new TypeError("Unknown error");const b=oe[0];throw new TypeError(`${b.dataPath||"<root>"} ${b.message}${b.params?` - ${Object.entries(b.params).map(([M,B])=>`${M}: ${B}`).join(", ")}`:""}`)}function xe(oe,b={}){var M;const B=(M=b==null?void 0:b.disableCache)!=null?M:!1,re=B?"":JSON.stringify(oe);if(!B){const Rt=z.get(re);if(Rt)return Rt}const ke=At(oe),lt=new h.ZP({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});ke.length&&lt.addSchema(ke,void 0,void 0,!0);const qe=lt.compile(oe);return B||z.set(re,qe),qe}function At(oe){if(typeof oe!="object")return[];const b=new Set;oe.$id&&b.add(oe.$id);const M=new Array,B=[oe];for(;B.length;){const re=B.pop();for(const ke of nn(re))if(!b.has(ke)){b.add(ke);const lt=ge.find(qe=>qe.$id===ke);lt&&(M.push(lt),B.push(lt))}}return M}function*nn(oe){const b=[oe];for(;b.length;){const M=b.pop();if(typeof M=="object"&&M)for(const[B,re]of Object.entries(M))B==="$ref"&&typeof re=="string"?yield re.split("#")[0]:b.push(re)}}function ut(oe){const b=xe(oe||U);return M=>{if(b(M)===!0)return M;throw Ue(b.errors)}}function Kt(oe){const b=xe(oe);return M=>{var B;if(b(M)===!0)return M;const ke=(B=b.errors)==null?void 0:B.filter(lt=>["/kind","/apiVersion"].includes(lt.dataPath));if((ke==null?void 0:ke.length)&&ke.every(lt=>lt.keyword==="enum"))return!1;throw Ue(b.errors)}}function $t(oe){const b=xe(oe||we);return M=>{if(b(M)===!0)return M;throw Ue(b.errors)}}class Pt{static isValidApiVersion(b){return w.isValidPrefixAndOrSuffix(b,"/",w.isValidDnsSubdomain,M=>M.length>=1&&M.length<=63&&/^[a-z0-9A-Z]+$/.test(M))}static isValidKind(b){return typeof b=="string"&&b.length>=1&&b.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(b)}static isValidObjectName(b){return typeof b=="string"&&b.length>=1&&b.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(b)}static isValidNamespace(b){return w.isValidDnsLabel(b)}static isValidLabelKey(b){return w.isValidPrefixAndOrSuffix(b,"/",w.isValidDnsSubdomain,Pt.isValidObjectName)}static isValidLabelValue(b){return b===""||Pt.isValidObjectName(b)}static isValidAnnotationKey(b){return w.isValidPrefixAndOrSuffix(b,"/",w.isValidDnsSubdomain,Pt.isValidObjectName)}static isValidAnnotationValue(b){return typeof b=="string"}}const je={isValidApiVersion:Pt.isValidApiVersion,isValidKind:Pt.isValidKind,isValidEntityName:Pt.isValidObjectName,isValidNamespace:Pt.isValidNamespace,isValidLabelKey:Pt.isValidLabelKey,isValidLabelValue:Pt.isValidLabelValue,isValidAnnotationKey:Pt.isValidAnnotationKey,isValidAnnotationValue:Pt.isValidAnnotationValue,isValidTag:oe=>typeof oe=="string"&&oe.length>=1&&oe.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(oe)};function Fe(oe={}){return{...je,...oe}}class be{constructor(b=Fe()){this.validators=b}async enforce(b){var M,B,re,ke,lt,qe,Rt;function zt(Zt,Rn,Fn){if(Rn==null)throw new Error(`${Zt} must have a value`);let zn;try{zn=Fn(Rn)}catch(Zn){throw new Error(`${Zt} could not be validated, ${Zn}`)}if(!zn){let Zn;switch(Fn.name){case"isValidLabelValue":case"isValidObjectName":Zn="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":Zn="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":Zn="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":Zn="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":Zn="a string";break;case"isValidKind":Zn="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":Zn="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":Zn="a non empty string";break;default:Zn=void 0;break}const oa=Zn?` expected ${Zn} but found "${Rn}".`:"";throw new Error(`"${Zt}" is not valid;${oa} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function an(Zt,Rn,Fn){return Rn===void 0||zt(Zt,Rn,Fn)}zt("apiVersion",b.apiVersion,this.validators.isValidApiVersion),zt("kind",b.kind,this.validators.isValidKind),zt("metadata.name",b.metadata.name,this.validators.isValidEntityName),an("metadata.namespace",b.metadata.namespace,this.validators.isValidNamespace);for(const[Zt,Rn]of Object.entries((M=b.metadata.labels)!=null?M:[]))zt(`labels.${Zt}`,Zt,this.validators.isValidLabelKey),zt(`labels.${Zt}`,Rn,this.validators.isValidLabelValue);for(const[Zt,Rn]of Object.entries((B=b.metadata.annotations)!=null?B:[]))zt(`annotations.${Zt}`,Zt,this.validators.isValidAnnotationKey),zt(`annotations.${Zt}`,Rn,this.validators.isValidAnnotationValue);const Qt=(re=b.metadata.tags)!=null?re:[];for(let Zt=0;Zt<Qt.length;++Zt)zt(`tags.${Zt}`,Qt[Zt],this.validators.isValidTag);const Cn=(ke=b.metadata.links)!=null?ke:[];for(let Zt=0;Zt<Cn.length;++Zt)zt(`links.${Zt}.url`,(lt=Cn[Zt])==null?void 0:lt.url,w.isValidUrl),an(`links.${Zt}.title`,(qe=Cn[Zt])==null?void 0:qe.title,w.isNonEmptyString),an(`links.${Zt}.icon`,(Rt=Cn[Zt])==null?void 0:Rt.icon,Pt.isValidObjectName);return b}}const pt=null;class vt{constructor(b=pt){this.knownFields=b}async enforce(b){for(const M of Object.keys(b))if(!this.knownFields.includes(M))throw new Error(`Unknown field ${M}`);return b}}class ze{async enforce(b){if(!this.validate){const re=new Ajv({allowUnionTypes:!0});this.validate=re.addSchema([Y,C],void 0,void 0,!0).compile(we)}if(this.validate(b)===!0)return b;const[B]=this.validate.errors||[];throw B?new Error(`Malformed envelope, ${B.dataPath||"<root>"} ${B.message}`):new Error("Malformed envelope, Unknown error")}}function mt(oe){let b=oe.indexOf(":");const M=oe.indexOf("/");M!==-1&&M<b&&(b=-1);const B=b===-1?void 0:oe.slice(0,b),re=M===-1?void 0:oe.slice(b+1,M),ke=oe.slice(Math.max(b+1,M+1));if(B===""||re===""||ke==="")throw new TypeError(`Entity reference "${oe}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:B,namespace:re,name:ke}}function _t(oe){return{kind:oe.kind,namespace:oe.metadata.namespace||s,name:oe.metadata.name}}function Ie(oe,b){var M,B,re,ke;if(!oe)throw new Error("Entity reference must not be empty");const lt=b==null?void 0:b.defaultKind,qe=(b==null?void 0:b.defaultNamespace)||s;let Rt,zt,an;if(typeof oe=="string"){const Qt=mt(oe);Rt=(M=Qt.kind)!=null?M:lt,zt=(B=Qt.namespace)!=null?B:qe,an=Qt.name}else Rt=(re=oe.kind)!=null?re:lt,zt=(ke=oe.namespace)!=null?ke:qe,an=oe.name;if(Rt)if(zt){if(!an){const Qt=JSON.stringify(oe);throw new Error(`Entity reference ${Qt} had missing or empty name`)}}else{const Qt=JSON.stringify(oe);throw new Error(`Entity reference ${Qt} had missing or empty namespace`)}else{const Qt=JSON.stringify(oe);throw new Error(`Entity reference ${Qt} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:Rt,namespace:zt,name:an}}function ue(oe){var b,M;let B,re,ke;return"metadata"in oe?(B=oe.kind,re=(b=oe.metadata.namespace)!=null?b:s,ke=oe.metadata.name):(B=oe.kind,re=(M=oe.namespace)!=null?M:s,ke=oe.name),`${B.toLocaleLowerCase("en-US")}:${re.toLocaleLowerCase("en-US")}/${ke.toLocaleLowerCase("en-US")}`}class Ze{constructor(b){this.policies=b}async enforce(b){let M=b;for(const B of this.policies){const re=await B.enforce(M);if(!re)throw new Error(`Policy ${B.constructor.name} did not return a result`);M=re}return M}}class rt{constructor(b){this.policies=b}async enforce(b){for(const M of this.policies){const B=await M.enforce(b);if(B)return B}throw new Error("The entity did not match any known policy")}}const le={allOf(oe){return new Ze(oe)},oneOf(oe){return new rt(oe)}};var ie="http://json-schema.org/draft-07/schema",ve="ApiV1alpha1",fe="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",Ve=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],Et=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],ft={$schema:ie,$id:ve,description:fe,examples:Ve,allOf:Et};function Wt(oe){const b=Kt(oe);return{async check(M){return b(M)===M}}}const Yt=Wt(ft);var ln="http://json-schema.org/draft-07/schema",gn="ComponentV1alpha1",Sn='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',yn=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],Re=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],Xe={$schema:ln,$id:gn,description:Sn,examples:yn,allOf:Re};const dt=Wt(Xe);var Gt="http://json-schema.org/draft-07/schema",Bt="DomainV1alpha1",rn="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",fn=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],Pn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],An={$schema:Gt,$id:Bt,description:rn,examples:fn,allOf:Pn};const _n=Wt(An);var Pe="http://json-schema.org/draft-07/schema",Ae="GroupV1alpha1",_="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",S=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],x=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],ee={$schema:Pe,$id:Ae,description:_,examples:S,allOf:x};const Ee=Wt(ee);var _e="http://json-schema.org/draft-07/schema",We="LocationV1alpha1",yt="A location is a marker that references other places to look for catalog data.",kt=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],Ft=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],bt={$schema:_e,$id:We,description:yt,examples:kt,allOf:Ft};const mn=Wt(bt),cn="ownedBy",wn="ownerOf",Ce="consumesApi",$e="apiConsumedBy",Je="providesApi",He="apiProvidedBy",et="dependsOn",Q="dependencyOf",ne="parentOf",ce="childOf",me="memberOf",tt="hasMember",ht="partOf",st="hasPart";var Dt="http://json-schema.org/draft-07/schema",qt="ResourceV1alpha1",un="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",Ut=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],Lt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],Vt={$schema:Dt,$id:qt,description:un,examples:Ut,allOf:Lt};const on=Wt(Vt);var sn="http://json-schema.org/draft-07/schema",X="SystemV1alpha1",Ne="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",it=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],St=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],at={$schema:sn,$id:X,description:Ne,examples:it,allOf:St};const Ot=Wt(at);var wt="http://json-schema.org/draft-07/schema",hn="UserV1alpha1",pn="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",Xt=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],En=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],J={$schema:wt,$id:hn,description:pn,examples:Xt,allOf:En};const o=Wt(J),m="backstage.io/managed-by-location",I="backstage.io/managed-by-origin-location",k="backstage.io/source-location";function G(oe){if(typeof oe!="string")throw new TypeError(`Unable to parse location ref '${oe}', unexpected argument ${typeof oe}`);const b=oe.indexOf(":");if(b<0)throw new TypeError(`Unable to parse location ref '${oe}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const M=oe.substring(0,b).trim(),B=oe.substring(b+1).trim();if(!M||!B)throw new TypeError(`Unable to parse location ref '${oe}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(M==="http"||M==="https")throw new TypeError(`Invalid location ref '${oe}', please prefix it with 'url:', e.g. 'url:${oe}'`);return{type:M,target:B}}function Me(oe){const{type:b,target:M}=oe;if(b){if(!M)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");return`${b}:${M}`}function Ye(oe){var b,M,B,re,ke;const lt=(ke=(M=(b=oe.metadata)==null?void 0:b.annotations)==null?void 0:M[k])!=null?ke:(re=(B=oe.metadata)==null?void 0:B.annotations)==null?void 0:re[m];if(!lt)throw new Error(`Entity '${ue(oe)}' is missing location`);return G(lt)}},53911:function(Tt,l,t){var e;e={value:!0},e=e=e=e=e=e=e=void 0,e=t(59864).default;var h=t(82481);e={enumerable:!0,get:function(){return h._}},e={enumerable:!0,get:function(){return h.str}},e={enumerable:!0,get:function(){return h.stringify}},e={enumerable:!0,get:function(){return h.nil}},e={enumerable:!0,get:function(){return h.Name}},e={enumerable:!0,get:function(){return h.CodeGen}};const s=t(61889),n=t(57993),R=t(51020),P=["/properties"],w="http://json-schema.org/draft-07/schema";class u extends s.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(O=>this.addVocabulary(O))}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const O=this.opts.$data?this.$dataMetaSchema(R,P):R;this.addMetaSchema(O,w,!1),this.refs["http://json-schema.org/schema"]=w}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(w)?w:void 0)}}l.ZP=u},91475:function(Tt,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getProperty=l.safeStringify=l.stringify=l.strConcat=l.addCodeArg=l.str=l._=l.nil=l._Code=l.Name=l.IDENTIFIER=l._CodeOrName=void 0;class t{}l._CodeOrName=t,l.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class e extends t{constructor(T){if(super(),!l.IDENTIFIER.test(T))throw new Error("CodeGen: name must be a valid identifier");this.str=T}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}l.Name=e;class i extends t{constructor(T){super(),this._items=typeof T=="string"?[T]:T}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const T=this._items[0];return T===""||T==='""'}get str(){var T;return(T=this._str)!==null&&T!==void 0?T:this._str=this._items.reduce((f,U)=>`${f}${U}`,"")}get names(){var T;return(T=this._names)!==null&&T!==void 0?T:this._names=this._items.reduce((f,U)=>(U instanceof e&&(f[U.str]=(f[U.str]||0)+1),f),{})}}l._Code=i,l.nil=new i("");function h(g,...T){const f=[g[0]];let U=0;for(;U<T.length;)R(f,T[U]),f.push(g[++U]);return new i(f)}l._=h;const s=new i("+");function n(g,...T){const f=[K(g[0])];let U=0;for(;U<T.length;)f.push(s),R(f,T[U]),f.push(s,K(g[++U]));return P(f),new i(f)}l.str=n;function R(g,T){T instanceof i?g.push(...T._items):T instanceof e?g.push(T):g.push(y(T))}l.addCodeArg=R;function P(g){let T=1;for(;T<g.length-1;){if(g[T]===s){const f=w(g[T-1],g[T+1]);if(f!==void 0){g.splice(T-1,3,f);continue}g[T++]="+"}T++}}function w(g,T){if(T==='""')return g;if(g==='""')return T;if(typeof g=="string")return T instanceof e||g[g.length-1]!=='"'?void 0:typeof T!="string"?`${g.slice(0,-1)}${T}"`:T[0]==='"'?g.slice(0,-1)+T.slice(1):void 0;if(typeof T=="string"&&T[0]==='"'&&!(g instanceof e))return`"${g}${T.slice(1)}`}function u(g,T){return T.emptyStr()?g:g.emptyStr()?T:n`${g}${T}`}l.strConcat=u;function y(g){return typeof g=="number"||typeof g=="boolean"||g===null?g:K(Array.isArray(g)?g.join(","):g)}function O(g){return new i(K(g))}l.stringify=O;function K(g){return JSON.stringify(g).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}l.safeStringify=K;function D(g){return typeof g=="string"&&l.IDENTIFIER.test(g)?new i(`.${g}`):h`[${g}]`}l.getProperty=D},82481:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.or=l.and=l.not=l.CodeGen=l.operators=l.varKinds=l.ValueScopeName=l.ValueScope=l.Scope=l.Name=l.stringify=l.getProperty=l.nil=l.strConcat=l.str=l._=void 0;const e=t(91475),i=t(66162);var h=t(91475);Object.defineProperty(l,"_",{enumerable:!0,get:function(){return h._}}),Object.defineProperty(l,"str",{enumerable:!0,get:function(){return h.str}}),Object.defineProperty(l,"strConcat",{enumerable:!0,get:function(){return h.strConcat}}),Object.defineProperty(l,"nil",{enumerable:!0,get:function(){return h.nil}}),Object.defineProperty(l,"getProperty",{enumerable:!0,get:function(){return h.getProperty}}),Object.defineProperty(l,"stringify",{enumerable:!0,get:function(){return h.stringify}}),Object.defineProperty(l,"Name",{enumerable:!0,get:function(){return h.Name}});var s=t(66162);Object.defineProperty(l,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(l,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(l,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(l,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),l.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class n{optimizeNodes(){return this}optimizeNames(L,Y){return this}}class R extends n{constructor(L,Y,z){super(),this.varKind=L,this.name=Y,this.rhs=z}render({es5:L,_n:Y}){const z=L?i.varKinds.var:this.varKind,ge=this.rhs===void 0?"":` = ${this.rhs}`;return`${z} ${this.name}${ge};`+Y}optimizeNames(L,Y){if(!!L[this.name.str])return this.rhs&&(this.rhs=ye(this.rhs,L,Y)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class P extends n{constructor(L,Y,z){super(),this.lhs=L,this.rhs=Y,this.sideEffects=z}render({_n:L}){return`${this.lhs} = ${this.rhs};`+L}optimizeNames(L,Y){if(!(this.lhs instanceof e.Name&&!L[this.lhs.str]&&!this.sideEffects))return this.rhs=ye(this.rhs,L,Y),this}get names(){const L=this.lhs instanceof e.Name?{}:{...this.lhs.names};return se(L,this.rhs)}}class w extends P{constructor(L,Y,z,ge){super(L,z,ge),this.op=Y}render({_n:L}){return`${this.lhs} ${this.op}= ${this.rhs};`+L}}class u extends n{constructor(L){super(),this.label=L,this.names={}}render({_n:L}){return`${this.label}:`+L}}class y extends n{constructor(L){super(),this.label=L,this.names={}}render({_n:L}){return`break${this.label?` ${this.label}`:""};`+L}}class O extends n{constructor(L){super(),this.error=L}render({_n:L}){return`throw ${this.error};`+L}get names(){return this.error.names}}class K extends n{constructor(L){super(),this.code=L}render({_n:L}){return`${this.code};`+L}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(L,Y){return this.code=ye(this.code,L,Y),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class D extends n{constructor(L=[]){super(),this.nodes=L}render(L){return this.nodes.reduce((Y,z)=>Y+z.render(L),"")}optimizeNodes(){const{nodes:L}=this;let Y=L.length;for(;Y--;){const z=L[Y].optimizeNodes();Array.isArray(z)?L.splice(Y,1,...z):z?L[Y]=z:L.splice(Y,1)}return L.length>0?this:void 0}optimizeNames(L,Y){const{nodes:z}=this;let ge=z.length;for(;ge--;){const Ue=z[ge];Ue.optimizeNames(L,Y)||(Le(L,Ue.names),z.splice(ge,1))}return z.length>0?this:void 0}get names(){return this.nodes.reduce((L,Y)=>nt(L,Y.names),{})}}class g extends D{render(L){return"{"+L._n+super.render(L)+"}"+L._n}}class T extends D{}class f extends g{}f.kind="else";class U extends g{constructor(L,Y){super(Y),this.condition=L}render(L){let Y=`if(${this.condition})`+super.render(L);return this.else&&(Y+="else "+this.else.render(L)),Y}optimizeNodes(){super.optimizeNodes();const L=this.condition;if(L===!0)return this.nodes;let Y=this.else;if(Y){const z=Y.optimizeNodes();Y=this.else=Array.isArray(z)?new f(z):z}if(Y)return L===!1?Y instanceof U?Y:Y.nodes:this.nodes.length?this:new U(de(L),Y instanceof U?[Y]:Y.nodes);if(!(L===!1||!this.nodes.length))return this}optimizeNames(L,Y){var z;if(this.else=(z=this.else)===null||z===void 0?void 0:z.optimizeNames(L,Y),!!(super.optimizeNames(L,Y)||this.else))return this.condition=ye(this.condition,L,Y),this}get names(){const L=super.names;return se(L,this.condition),this.else&&nt(L,this.else.names),L}}U.kind="if";class p extends g{}p.kind="for";class d extends p{constructor(L){super(),this.iteration=L}render(L){return`for(${this.iteration})`+super.render(L)}optimizeNames(L,Y){if(!!super.optimizeNames(L,Y))return this.iteration=ye(this.iteration,L,Y),this}get names(){return nt(super.names,this.iteration.names)}}class A extends p{constructor(L,Y,z,ge){super(),this.varKind=L,this.name=Y,this.from=z,this.to=ge}render(L){const Y=L.es5?i.varKinds.var:this.varKind,{name:z,from:ge,to:Ue}=this;return`for(${Y} ${z}=${ge}; ${z}<${Ue}; ${z}++)`+super.render(L)}get names(){const L=se(super.names,this.from);return se(L,this.to)}}class N extends p{constructor(L,Y,z,ge){super(),this.loop=L,this.varKind=Y,this.name=z,this.iterable=ge}render(L){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(L)}optimizeNames(L,Y){if(!!super.optimizeNames(L,Y))return this.iterable=ye(this.iterable,L,Y),this}get names(){return nt(super.names,this.iterable.names)}}class c extends g{constructor(L,Y,z){super(),this.name=L,this.args=Y,this.async=z}render(L){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(L)}}c.kind="func";class Z extends D{render(L){return"return "+super.render(L)}}Z.kind="return";class F extends g{render(L){let Y="try"+super.render(L);return this.catch&&(Y+=this.catch.render(L)),this.finally&&(Y+=this.finally.render(L)),Y}optimizeNodes(){var L,Y;return super.optimizeNodes(),(L=this.catch)===null||L===void 0||L.optimizeNodes(),(Y=this.finally)===null||Y===void 0||Y.optimizeNodes(),this}optimizeNames(L,Y){var z,ge;return super.optimizeNames(L,Y),(z=this.catch)===null||z===void 0||z.optimizeNames(L,Y),(ge=this.finally)===null||ge===void 0||ge.optimizeNames(L,Y),this}get names(){const L=super.names;return this.catch&&nt(L,this.catch.names),this.finally&&nt(L,this.finally.names),L}}class te extends g{constructor(L){super(),this.error=L}render(L){return`catch(${this.error})`+super.render(L)}}te.kind="catch";class we extends g{render(L){return"finally"+super.render(L)}}we.kind="finally";class ct{constructor(L,Y={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Y,_n:Y.lines?`
`:""},this._extScope=L,this._scope=new i.Scope({parent:L}),this._nodes=[new T]}toString(){return this._root.render(this.opts)}name(L){return this._scope.name(L)}scopeName(L){return this._extScope.name(L)}scopeValue(L,Y){const z=this._extScope.value(L,Y);return(this._values[z.prefix]||(this._values[z.prefix]=new Set)).add(z),z}getScopeValue(L,Y){return this._extScope.getValue(L,Y)}scopeRefs(L){return this._extScope.scopeRefs(L,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(L,Y,z,ge){const Ue=this._scope.toName(Y);return z!==void 0&&ge&&(this._constants[Ue.str]=z),this._leafNode(new R(L,Ue,z)),Ue}const(L,Y,z){return this._def(i.varKinds.const,L,Y,z)}let(L,Y,z){return this._def(i.varKinds.let,L,Y,z)}var(L,Y,z){return this._def(i.varKinds.var,L,Y,z)}assign(L,Y,z){return this._leafNode(new P(L,Y,z))}add(L,Y){return this._leafNode(new w(L,l.operators.ADD,Y))}code(L){return typeof L=="function"?L():L!==e.nil&&this._leafNode(new K(L)),this}object(...L){const Y=["{"];for(const[z,ge]of L)Y.length>1&&Y.push(","),Y.push(z),(z!==ge||this.opts.es5)&&(Y.push(":"),e.addCodeArg(Y,ge));return Y.push("}"),new e._Code(Y)}if(L,Y,z){if(this._blockNode(new U(L)),Y&&z)this.code(Y).else().code(z).endIf();else if(Y)this.code(Y).endIf();else if(z)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(L){return this._elseNode(new U(L))}else(){return this._elseNode(new f)}endIf(){return this._endBlockNode(U,f)}_for(L,Y){return this._blockNode(L),Y&&this.code(Y).endFor(),this}for(L,Y){return this._for(new d(L),Y)}forRange(L,Y,z,ge,Ue=this.opts.es5?i.varKinds.var:i.varKinds.let){const xe=this._scope.toName(L);return this._for(new A(Ue,xe,Y,z),()=>ge(xe))}forOf(L,Y,z,ge=i.varKinds.const){const Ue=this._scope.toName(L);if(this.opts.es5){const xe=Y instanceof e.Name?Y:this.var("_arr",Y);return this.forRange("_i",0,e._`${xe}.length`,At=>{this.var(Ue,e._`${xe}[${At}]`),z(Ue)})}return this._for(new N("of",ge,Ue,Y),()=>z(Ue))}forIn(L,Y,z,ge=this.opts.es5?i.varKinds.var:i.varKinds.const){if(this.opts.ownProperties)return this.forOf(L,e._`Object.keys(${Y})`,z);const Ue=this._scope.toName(L);return this._for(new N("in",ge,Ue,Y),()=>z(Ue))}endFor(){return this._endBlockNode(p)}label(L){return this._leafNode(new u(L))}break(L){return this._leafNode(new y(L))}return(L){const Y=new Z;if(this._blockNode(Y),this.code(L),Y.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Z)}try(L,Y,z){if(!Y&&!z)throw new Error('CodeGen: "try" without "catch" and "finally"');const ge=new F;if(this._blockNode(ge),this.code(L),Y){const Ue=this.name("e");this._currNode=ge.catch=new te(Ue),Y(Ue)}return z&&(this._currNode=ge.finally=new we,this.code(z)),this._endBlockNode(te,we)}throw(L){return this._leafNode(new O(L))}block(L,Y){return this._blockStarts.push(this._nodes.length),L&&this.code(L).endBlock(Y),this}endBlock(L){const Y=this._blockStarts.pop();if(Y===void 0)throw new Error("CodeGen: not in self-balancing block");const z=this._nodes.length-Y;if(z<0||L!==void 0&&z!==L)throw new Error(`CodeGen: wrong number of nodes: ${z} vs ${L} expected`);return this._nodes.length=Y,this}func(L,Y=e.nil,z,ge){return this._blockNode(new c(L,Y,z)),ge&&this.code(ge).endFunc(),this}endFunc(){return this._endBlockNode(c)}optimize(L=1){for(;L-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(L){return this._currNode.nodes.push(L),this}_blockNode(L){this._currNode.nodes.push(L),this._nodes.push(L)}_endBlockNode(L,Y){const z=this._currNode;if(z instanceof L||Y&&z instanceof Y)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Y?`${L.kind}/${Y.kind}`:L.kind}"`)}_elseNode(L){const Y=this._currNode;if(!(Y instanceof U))throw new Error('CodeGen: "else" without "if"');return this._currNode=Y.else=L,this}get _root(){return this._nodes[0]}get _currNode(){const L=this._nodes;return L[L.length-1]}set _currNode(L){const Y=this._nodes;Y[Y.length-1]=L}}l.CodeGen=ct;function nt(Be,L){for(const Y in L)Be[Y]=(Be[Y]||0)+(L[Y]||0);return Be}function se(Be,L){return L instanceof e._CodeOrName?nt(Be,L.names):Be}function ye(Be,L,Y){if(Be instanceof e.Name)return z(Be);if(!ge(Be))return Be;return new e._Code(Be._items.reduce((Ue,xe)=>(xe instanceof e.Name&&(xe=z(xe)),xe instanceof e._Code?Ue.push(...xe._items):Ue.push(xe),Ue),[]));function z(Ue){const xe=Y[Ue.str];return xe===void 0||L[Ue.str]!==1?Ue:(delete L[Ue.str],xe)}function ge(Ue){return Ue instanceof e._Code&&Ue._items.some(xe=>xe instanceof e.Name&&L[xe.str]===1&&Y[xe.str]!==void 0)}}function Le(Be,L){for(const Y in L)Be[Y]=(Be[Y]||0)-(L[Y]||0)}function de(Be){return typeof Be=="boolean"||typeof Be=="number"||Be===null?!Be:e._`!${It(Be)}`}l.not=de;const V=j(l.operators.AND);function he(...Be){return Be.reduce(V)}l.and=he;const C=j(l.operators.OR);function Ke(...Be){return Be.reduce(C)}l.or=Ke;function j(Be){return(L,Y)=>L===e.nil?Y:Y===e.nil?L:e._`${It(L)} ${Be} ${It(Y)}`}function It(Be){return Be instanceof e.Name?Be:e._`(${Be})`}},66162:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.ValueScope=l.ValueScopeName=l.Scope=l.varKinds=l.UsedValueState=void 0;const e=t(91475);class i extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var h;(function(w){w[w.Started=0]="Started",w[w.Completed=1]="Completed"})(h=l.UsedValueState||(l.UsedValueState={})),l.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class s{constructor({prefixes:u,parent:y}={}){this._names={},this._prefixes=u,this._parent=y}toName(u){return u instanceof e.Name?u:this.name(u)}name(u){return new e.Name(this._newName(u))}_newName(u){const y=this._names[u]||this._nameGroup(u);return`${u}${y.index++}`}_nameGroup(u){var y,O;if(((O=(y=this._parent)===null||y===void 0?void 0:y._prefixes)===null||O===void 0?void 0:O.has(u))||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}l.Scope=s;class n extends e.Name{constructor(u,y){super(y),this.prefix=u}setValue(u,{property:y,itemIndex:O}){this.value=u,this.scopePath=e._`.${new e.Name(y)}[${O}]`}}l.ValueScopeName=n;const R=e._`\n`;class P extends s{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?R:e.nil}}get(){return this._scope}name(u){return new n(u,this._newName(u))}value(u,y){var O;if(y.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const K=this.toName(u),{prefix:D}=K,g=(O=y.key)!==null&&O!==void 0?O:y.ref;let T=this._values[D];if(T){const p=T.get(g);if(p)return p}else T=this._values[D]=new Map;T.set(g,K);const f=this._scope[D]||(this._scope[D]=[]),U=f.length;return f[U]=y.ref,K.setValue(y,{property:D,itemIndex:U}),K}getValue(u,y){const O=this._values[u];if(!!O)return O.get(y)}scopeRefs(u,y=this._values){return this._reduceValues(y,O=>{if(O.scopePath===void 0)throw new Error(`CodeGen: name "${O}" has no value`);return e._`${u}${O.scopePath}`})}scopeCode(u=this._values,y,O){return this._reduceValues(u,K=>{if(K.value===void 0)throw new Error(`CodeGen: name "${K}" has no value`);return K.value.code},y,O)}_reduceValues(u,y,O={},K){let D=e.nil;for(const g in u){const T=u[g];if(!T)continue;const f=O[g]=O[g]||new Map;T.forEach(U=>{if(f.has(U))return;f.set(U,h.Started);let p=y(U);if(p){const d=this.opts.es5?l.varKinds.var:l.varKinds.const;D=e._`${D}${d} ${U} = ${p};${this.opts._n}`}else if(p=K==null?void 0:K(U))D=e._`${D}${p}${this.opts._n}`;else throw new i(U);f.set(U,h.Completed)})}return D}}l.ValueScope=P},59864:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.getData=void 0;const e=t(93277),i=t(1849),h=t(59428),s=t(82481),n=t(99583),R=t(92474);class P{constructor(g,T,f){if(u(g,T,f),this.gen=g.gen,this.allErrors=g.allErrors,this.keyword=f,this.data=g.data,this.schema=g.schema[f],this.$data=T.$data&&g.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=i.schemaRefOrVal(g,this.schema,f,this.$data),this.schemaType=T.schemaType,this.parentSchema=g.schema,this.params={},this.it=g,this.def=T,this.$data)this.schemaCode=g.gen.const("vSchema",K(this.$data,g));else if(this.schemaCode=this.schemaValue,!w(this.schema,T.schemaType,T.allowUndefined))throw new Error(`${f} value must be ${JSON.stringify(T.schemaType)}`);("code"in T?T.trackErrors:T.errors!==!1)&&(this.errsCount=g.gen.const("_errs",n.default.errors))}result(g,T,f){this.gen.if(s.not(g)),f?f():this.error(),T?(this.gen.else(),T(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(g,T){this.result(g,void 0,T)}fail(g){if(g===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(g),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(g){if(!this.$data)return this.fail(g);const{schemaCode:T}=this;this.fail(s._`${T} !== undefined && (${s.or(this.invalid$data(),g)})`)}error(g){(g?h.reportExtraError:h.reportError)(this,this.def.error)}$dataError(){h.reportError(this,this.def.$dataError||h.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');h.resetErrorsCount(this.gen,this.errsCount)}ok(g){this.allErrors||this.gen.if(g)}setParams(g,T){T?Object.assign(this.params,g):this.params=g}block$data(g,T,f=s.nil){this.gen.block(()=>{this.check$data(g,f),T()})}check$data(g=s.nil,T=s.nil){if(!this.$data)return;const{gen:f,schemaCode:U,schemaType:p,def:d}=this;f.if(s.or(s._`${U} === undefined`,T)),g!==s.nil&&f.assign(g,!0),(p.length||d.validateSchema)&&(f.elseIf(this.invalid$data()),this.$dataError(),g!==s.nil&&f.assign(g,!1)),f.else()}invalid$data(){const{gen:g,schemaCode:T,schemaType:f,def:U,it:p}=this;return s.or(d(),A());function d(){if(f.length){if(!(T instanceof s.Name))throw new Error("ajv implementation error");const N=Array.isArray(f)?f:[f];return s._`${e.checkDataTypes(N,T,p.opts.strict,e.DataType.Wrong)}`}return s.nil}function A(){if(U.validateSchema){const N=g.scopeValue("validate$data",{ref:U.validateSchema});return s._`!${N}(${T})`}return s.nil}}subschema(g,T){return R.applySubschema(this.it,g,T)}mergeEvaluated(g,T){const{it:f,gen:U}=this;!f.opts.unevaluated||(f.props!==!0&&g.props!==void 0&&(f.props=i.mergeEvaluated.props(U,g.props,f.props,T)),f.items!==!0&&g.items!==void 0&&(f.items=i.mergeEvaluated.items(U,g.items,f.items,T)))}mergeValidEvaluated(g,T){const{it:f,gen:U}=this;if(f.opts.unevaluated&&(f.props!==!0||f.items!==!0))return U.if(T,()=>this.mergeEvaluated(g,s.Name)),!0}}l.default=P;function w(D,g,T=!1){return!g.length||g.some(f=>f==="array"?Array.isArray(D):f==="object"?D&&typeof D=="object"&&!Array.isArray(D):typeof D==f||T&&typeof D=="undefined")}function u({schema:D,opts:g,self:T},f,U){if(Array.isArray(f.keyword)?!f.keyword.includes(U):f.keyword!==U)throw new Error("ajv implementation error");const p=f.dependencies;if(p!=null&&p.some(d=>!Object.prototype.hasOwnProperty.call(D,d)))throw new Error(`parent schema must have dependencies of ${U}: ${p.join(",")}`);if(f.validateSchema&&!f.validateSchema(D[U])){const A="keyword value is invalid: "+T.errorsText(f.validateSchema.errors);if(g.validateSchema==="log")T.logger.error(A);else throw new Error(A)}}const y=/^\/(?:[^~]|~0|~1)*$/,O=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function K(D,{dataLevel:g,dataNames:T,dataPathArr:f}){let U,p;if(D==="")return n.default.rootData;if(D[0]==="/"){if(!y.test(D))throw new Error(`Invalid JSON-pointer: ${D}`);U=D,p=n.default.rootData}else{const c=O.exec(D);if(!c)throw new Error(`Invalid JSON-pointer: ${D}`);const Z=+c[1];if(U=c[2],U==="#"){if(Z>=g)throw new Error(N("property/index",Z));return f[g-Z]}if(Z>g)throw new Error(N("data",Z));if(p=T[g-Z],!U)return p}let d=p;const A=U.split("/");for(const c of A)c&&(p=s._`${p}${s.getProperty(i.unescapeJsonPointer(c))}`,d=s._`${d} && ${p}`);return d;function N(c,Z){return`Cannot access ${c} ${Z} levels up, current level is ${g}`}}l.getData=K},91079:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.MissingRefError=l.ValidationError=void 0;const e=t(2710);class i extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}l.ValidationError=i;class h extends Error{constructor(n,R,P){super(P||`can't resolve reference ${R} from id ${n}`),this.missingRef=e.resolveUrl(n,R),this.missingSchema=e.normalizeId(e.getFullPath(this.missingRef))}}l.MissingRefError=h,Tt.exports={ValidationError:i,MissingRefError:h}},59428:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.extendErrors=l.resetErrorsCount=l.reportExtraError=l.reportError=l.keyword$DataError=l.keywordError=void 0;const e=t(82481),i=t(99583);l.keywordError={message:({keyword:D})=>e.str`should pass "${D}" keyword validation`},l.keyword$DataError={message:({keyword:D,schemaType:g})=>g?e.str`"${D}" keyword must be ${g} ($data)`:e.str`"${D}" keyword is invalid ($data)`};function h(D,g=l.keywordError,T){const{it:f}=D,{gen:U,compositeRule:p,allErrors:d}=f,A=y(D,g);(T!=null?T:p||d)?P(U,A):w(f,e._`[${A}]`)}l.reportError=h;function s(D,g=l.keywordError){const{it:T}=D,{gen:f,compositeRule:U,allErrors:p}=T,d=y(D,g);P(f,d),U||p||w(T,i.default.vErrors)}l.reportExtraError=s;function n(D,g){D.assign(i.default.errors,g),D.if(e._`${i.default.vErrors} !== null`,()=>D.if(g,()=>D.assign(e._`${i.default.vErrors}.length`,g),()=>D.assign(i.default.vErrors,null)))}l.resetErrorsCount=n;function R({gen:D,keyword:g,schemaValue:T,data:f,errsCount:U,it:p}){if(U===void 0)throw new Error("ajv implementation error");const d=D.name("err");D.forRange("i",U,i.default.errors,A=>{D.const(d,e._`${i.default.vErrors}[${A}]`),D.if(e._`${d}.dataPath === undefined`,()=>D.assign(e._`${d}.dataPath`,e.strConcat(i.default.dataPath,p.errorPath))),D.assign(e._`${d}.schemaPath`,e.str`${p.errSchemaPath}/${g}`),p.opts.verbose&&(D.assign(e._`${d}.schema`,T),D.assign(e._`${d}.data`,f))})}l.extendErrors=R;function P(D,g){const T=D.const("err",g);D.if(e._`${i.default.vErrors} === null`,()=>D.assign(i.default.vErrors,e._`[${T}]`),e._`${i.default.vErrors}.push(${T})`),D.code(e._`${i.default.errors}++`)}function w(D,g){const{gen:T,validateName:f,schemaEnv:U}=D;U.$async?T.throw(e._`new ${D.ValidationError}(${g})`):(T.assign(e._`${f}.errors`,g),T.return(!1))}const u={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema"),instancePath:new e.Name("instancePath")};function y(D,g){const{createErrors:T,opts:f}=D.it;return T===!1?e._`{}`:(f.jtd&&!f.ajvErrors?O:K)(D,g)}function O(D,{message:g}){const{gen:T,keyword:f,it:U}=D,{errorPath:p,errSchemaPath:d,opts:A}=U,N=[[u.instancePath,e.strConcat(i.default.dataPath,p)],[u.schemaPath,e.str`${d}/${f}`]];return A.messages&&N.push([u.message,typeof g=="function"?g(D):g]),T.object(...N)}function K(D,g){const{gen:T,keyword:f,data:U,schemaValue:p,it:d}=D,{topSchemaRef:A,schemaPath:N,errorPath:c,errSchemaPath:Z,propertyName:F,opts:te}=d,{params:we,message:ct}=g,nt=[[u.keyword,f],[i.default.dataPath,e.strConcat(i.default.dataPath,c)],[u.schemaPath,e.str`${Z}/${f}`],[u.params,typeof we=="function"?we(D):we||e._`{}`]];return F&&nt.push([u.propertyName,F]),te.messages&&nt.push([u.message,typeof ct=="function"?ct(D):ct]),te.verbose&&nt.push([u.schema,p],[u.parentSchema,e._`${A}${N}`],[i.default.data,U]),T.object(...nt)}},62902:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.resolveSchema=l.getCompilingSchema=l.resolveRef=l.compileSchema=l.SchemaEnv=void 0;const e=t(82481),i=t(91079),h=t(99583),s=t(2710),n=t(1849),R=t(4371),P=t(12854);class w{constructor(d){var A;this.refs={},this.dynamicAnchors={};let N;typeof d.schema=="object"&&(N=d.schema),this.schema=d.schema,this.root=d.root||this,this.baseId=(A=d.baseId)!==null&&A!==void 0?A:s.normalizeId(N==null?void 0:N.$id),this.localRefs=d.localRefs,this.meta=d.meta,this.$async=N==null?void 0:N.$async,this.refs={}}}l.SchemaEnv=w;function u(p){const d=K.call(this,p);if(d)return d;const A=s.getFullPath(p.root.baseId),{es5:N,lines:c}=this.opts.code,{ownProperties:Z}=this.opts,F=new e.CodeGen(this.scope,{es5:N,lines:c,ownProperties:Z});let te;p.$async&&(te=F.scopeValue("Error",{ref:i.ValidationError,code:e._`require("ajv/dist/compile/error_classes").ValidationError`}));const we=F.scopeName("validate");p.validateName=we;const ct={gen:F,allErrors:this.opts.allErrors,data:h.default.data,parentData:h.default.parentData,parentDataProperty:h.default.parentDataProperty,dataNames:[h.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:F.scopeValue("schema",this.opts.code.source===!0?{ref:p.schema,code:e.stringify(p.schema)}:{ref:p.schema}),validateName:we,ValidationError:te,schema:p.schema,schemaEnv:p,rootId:A,baseId:p.baseId||A,schemaPath:e.nil,errSchemaPath:this.opts.jtd?"":"#",errorPath:e._`""`,opts:this.opts,self:this};let nt;try{this._compilations.add(p),R.validateFunctionCode(ct),F.optimize(this.opts.code.optimize);const se=F.toString();nt=`${F.scopeRefs(h.default.scope)}return ${se}`,this.opts.code.process&&(nt=this.opts.code.process(nt,p));const Le=new Function(`${h.default.self}`,`${h.default.scope}`,nt)(this,this.scope.get());if(this.scope.value(we,{ref:Le}),Le.errors=null,Le.schema=p.schema,Le.schemaEnv=p,p.$async&&(Le.$async=!0),this.opts.code.source===!0&&(Le.source={validateName:we,validateCode:se,scopeValues:F._values}),this.opts.unevaluated){const{props:de,items:V}=ct;Le.evaluated={props:de instanceof e.Name?void 0:de,items:V instanceof e.Name?void 0:V,dynamicProps:de instanceof e.Name,dynamicItems:V instanceof e.Name},Le.source&&(Le.source.evaluated=e.stringify(Le.evaluated))}return p.validate=Le,p}catch(se){throw delete p.validate,delete p.validateName,nt&&this.logger.error("Error compiling schema, function code:",nt),se}finally{this._compilations.delete(p)}}l.compileSchema=u;function y(p,d,A){var N;A=s.resolveUrl(d,A);const c=p.refs[A];if(c)return c;let Z=g.call(this,p,A);if(Z===void 0){const F=(N=p.localRefs)===null||N===void 0?void 0:N[A];F&&(Z=new w({schema:F,root:p,baseId:d}))}if(Z!==void 0)return p.refs[A]=O.call(this,Z)}l.resolveRef=y;function O(p){return s.inlineRef(p.schema,this.opts.inlineRefs)?p.schema:p.validate?p:u.call(this,p)}function K(p){for(const d of this._compilations)if(D(d,p))return d}l.getCompilingSchema=K;function D(p,d){return p.schema===d.schema&&p.root===d.root&&p.baseId===d.baseId}function g(p,d){let A;for(;typeof(A=this.refs[d])=="string";)d=A;return A||this.schemas[d]||T.call(this,p,d)}function T(p,d){const A=P.parse(d),N=s._getFullPath(A);let c=s.getFullPath(p.baseId);if(Object.keys(p.schema).length>0&&N===c)return U.call(this,A,p);const Z=s.normalizeId(N),F=this.refs[Z]||this.schemas[Z];if(typeof F=="string"){const te=T.call(this,p,F);return typeof(te==null?void 0:te.schema)!="object"?void 0:U.call(this,A,te)}if(typeof(F==null?void 0:F.schema)=="object"){if(F.validate||u.call(this,F),Z===s.normalizeId(d)){const{schema:te}=F;return te.$id&&(c=s.resolveUrl(c,te.$id)),new w({schema:te,root:p,baseId:c})}return U.call(this,A,F)}}l.resolveSchema=T;const f=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function U(p,{baseId:d,schema:A,root:N}){var c;if(((c=p.fragment)===null||c===void 0?void 0:c[0])!=="/")return;for(const F of p.fragment.slice(1).split("/")){if(typeof A=="boolean"||(A=A[n.unescapeFragment(F)],A===void 0))return;!f.has(F)&&typeof A=="object"&&A.$id&&(d=s.resolveUrl(d,A.$id))}let Z;if(typeof A!="boolean"&&A.$ref&&!n.schemaHasRulesButRef(A,this.RULES)){const F=s.resolveUrl(d,A.$ref);Z=T.call(this,N,F)}if(Z=Z||new w({schema:A,root:N,baseId:d}),Z.schema!==Z.root.schema)return Z}},99583:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),i={data:new e.Name("data"),valCxt:new e.Name("valCxt"),dataPath:new e.Name("dataPath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};l.default=i},2710:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.getSchemaRefs=l.resolveUrl=l.normalizeId=l._getFullPath=l.getFullPath=l.inlineRef=void 0;const e=t(1849),i=t(69378),h=t(19522),s=t(12854),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function R(U,p=!0){return typeof U=="boolean"?!0:p===!0?!w(U):p?u(U)<=p:!1}l.inlineRef=R;const P=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function w(U){for(const p in U){if(P.has(p))return!0;const d=U[p];if(Array.isArray(d)&&d.some(w)||typeof d=="object"&&w(d))return!0}return!1}function u(U){let p=0;for(const d in U){if(d==="$ref")return 1/0;if(p++,!n.has(d)&&(typeof U[d]=="object"&&e.eachItem(U[d],A=>p+=u(A)),p===1/0))return 1/0}return p}function y(U="",p){p!==!1&&(U=D(U));const d=s.parse(U);return O(d)}l.getFullPath=y;function O(U){return s.serialize(U).split("#")[0]+"#"}l._getFullPath=O;const K=/#\/?$/;function D(U){return U?U.replace(K,""):""}l.normalizeId=D;function g(U,p){return p=D(p),s.resolve(U,p)}l.resolveUrl=g;const T=/^[a-z_][-a-z0-9._]*$/i;function f(U){if(typeof U=="boolean")return{};const p=D(U.$id),d={"":p},A=y(p,!1),N={},c=new Set;return h(U,{allKeys:!0},(te,we,ct,nt)=>{if(nt===void 0)return;const se=A+we;let ye=d[nt];typeof te.$id=="string"&&(ye=Le.call(this,te.$id)),de.call(this,te.$anchor),de.call(this,te.$dynamicAnchor),d[we]=ye;function Le(V){if(V=D(ye?s.resolve(ye,V):V),c.has(V))throw F(V);c.add(V);let he=this.refs[V];return typeof he=="string"&&(he=this.refs[he]),typeof he=="object"?Z(te,he.schema,V):V!==D(se)&&(V[0]==="#"?(Z(te,N[V],V),N[V]=te):this.refs[V]=se),V}function de(V){if(typeof V=="string"){if(!T.test(V))throw new Error(`invalid anchor "${V}"`);Le.call(this,`#${V}`)}}}),N;function Z(te,we,ct){if(we!==void 0&&!i(te,we))throw F(ct)}function F(te){return new Error(`reference "${te}" resolves to more than one schema`)}}l.getSchemaRefs=f},18288:function(Tt,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getRules=l.isJSONType=void 0;const t=["string","number","integer","boolean","null","object","array"],e=new Set(t);function i(s){return typeof s=="string"&&e.has(s)}l.isJSONType=i;function h(){const s={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...s,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},s.number,s.string,s.array,s.object],post:{rules:[]},all:{},keywords:{}}}l.getRules=h},92474:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.applySubschema=l.Type=void 0;const e=t(4371),i=t(1849),h=t(82481);var s;(function(y){y[y.Num=0]="Num",y[y.Str=1]="Str"})(s=l.Type||(l.Type={}));function n(y,O,K){const D=R(y,O);P(D,y,O),w(D,O);const g={...y,...D,items:void 0,props:void 0};return e.subschemaCode(g,K),g}l.applySubschema=n;function R(y,{keyword:O,schemaProp:K,schema:D,schemaPath:g,errSchemaPath:T,topSchemaRef:f}){if(O!==void 0&&D!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(O!==void 0){const U=y.schema[O];return K===void 0?{schema:U,schemaPath:h._`${y.schemaPath}${h.getProperty(O)}`,errSchemaPath:`${y.errSchemaPath}/${O}`}:{schema:U[K],schemaPath:h._`${y.schemaPath}${h.getProperty(O)}${h.getProperty(K)}`,errSchemaPath:`${y.errSchemaPath}/${O}/${i.escapeFragment(K)}`}}if(D!==void 0){if(g===void 0||T===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:D,schemaPath:g,topSchemaRef:f,errSchemaPath:T}}throw new Error('either "keyword" or "schema" must be passed')}function P(y,O,{dataProp:K,dataPropType:D,data:g,dataTypes:T,propertyName:f}){if(g!==void 0&&K!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:U}=O;if(K!==void 0){const{errorPath:d,dataPathArr:A,opts:N}=O,c=U.let("data",h._`${O.data}${h.getProperty(K)}`,!0);p(c),y.errorPath=h.str`${d}${u(K,D,N.jsPropertySyntax)}`,y.parentDataProperty=h._`${K}`,y.dataPathArr=[...A,y.parentDataProperty]}if(g!==void 0){const d=g instanceof h.Name?g:U.let("data",g,!0);p(d),f!==void 0&&(y.propertyName=f)}T&&(y.dataTypes=T);function p(d){y.data=d,y.dataLevel=O.dataLevel+1,y.dataTypes=[],O.definedProperties=new Set,y.parentData=O.data,y.dataNames=[...O.dataNames,d]}}function w(y,{jtdDiscriminator:O,jtdMetadata:K,compositeRule:D,createErrors:g,allErrors:T}){D!==void 0&&(y.compositeRule=D),g!==void 0&&(y.createErrors=g),T!==void 0&&(y.allErrors=T),y.jtdDiscriminator=O,y.jtdMetadata=K}function u(y,O,K){if(y instanceof h.Name){const D=O===s.Num;return K?D?h._`"[" + ${y} + "]"`:h._`"['" + ${y} + "']"`:D?h._`"/" + ${y}`:h._`"/" + ${y}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return K?h.getProperty(y).toString():"/"+i.escapeJsonPointer(y)}},30673:function(Tt,l){Object.defineProperty(l,"__esModule",{value:!0});function t(e){const i=e.length;let h=0,s=0,n;for(;s<i;)h++,n=e.charCodeAt(s++),n>=55296&&n<=56319&&s<i&&(n=e.charCodeAt(s),(n&64512)===56320&&s++);return h}l.default=t},1849:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.func=l.setEvaluated=l.evaluatedPropsToName=l.mergeEvaluated=l.eachItem=l.unescapeJsonPointer=l.escapeJsonPointer=l.escapeFragment=l.unescapeFragment=l.schemaRefOrVal=l.schemaHasRulesButRef=l.schemaHasRules=l.checkUnknownRules=l.alwaysValidSchema=l.toHash=void 0;const e=t(82481),i=t(4371);function h(p){const d={};for(const A of p)d[A]=!0;return d}l.toHash=h;function s(p,d){return typeof d=="boolean"?d:Object.keys(d).length===0?!0:(n(p,d),!R(d,p.self.RULES.all))}l.alwaysValidSchema=s;function n(p,d=p.schema){const{opts:A,self:N}=p;if(!A.strict||typeof d=="boolean")return;const c=N.RULES.keywords;for(const Z in d)c[Z]||i.checkStrictMode(p,`unknown keyword: "${Z}"`)}l.checkUnknownRules=n;function R(p,d){if(typeof p=="boolean")return!p;for(const A in p)if(d[A])return!0;return!1}l.schemaHasRules=R;function P(p,d){if(typeof p=="boolean")return!p;for(const A in p)if(A!=="$ref"&&d.all[A])return!0;return!1}l.schemaHasRulesButRef=P;function w({topSchemaRef:p,schemaPath:d},A,N,c){if(!c){if(typeof A=="number"||typeof A=="boolean")return A;if(typeof A=="string")return e._`${A}`}return e._`${p}${d}${e.getProperty(N)}`}l.schemaRefOrVal=w;function u(p){return K(decodeURIComponent(p))}l.unescapeFragment=u;function y(p){return encodeURIComponent(O(p))}l.escapeFragment=y;function O(p){return typeof p=="number"?`${p}`:p.replace(/~/g,"~0").replace(/\//g,"~1")}l.escapeJsonPointer=O;function K(p){return p.replace(/~1/g,"/").replace(/~0/g,"~")}l.unescapeJsonPointer=K;function D(p,d){if(Array.isArray(p))for(const A of p)d(A);else d(p)}l.eachItem=D;function g({mergeNames:p,mergeToName:d,mergeValues:A,resultToName:N}){return(c,Z,F,te)=>{const we=F===void 0?Z:F instanceof e.Name?(Z instanceof e.Name?p(c,Z,F):d(c,Z,F),F):Z instanceof e.Name?(d(c,F,Z),Z):A(Z,F);return te===e.Name&&!(we instanceof e.Name)?N(c,we):we}}l.mergeEvaluated={props:g({mergeNames:(p,d,A)=>p.if(e._`${A} !== true && ${d} !== undefined`,()=>{p.if(e._`${d} === true`,()=>p.assign(A,!0),()=>p.assign(A,e._`${A} || {}`).code(e._`Object.assign(${A}, ${d})`))}),mergeToName:(p,d,A)=>p.if(e._`${A} !== true`,()=>{d===!0?p.assign(A,!0):(p.assign(A,e._`${A} || {}`),f(p,A,d))}),mergeValues:(p,d)=>p===!0?!0:{...p,...d},resultToName:T}),items:g({mergeNames:(p,d,A)=>p.if(e._`${A} !== true && ${d} !== undefined`,()=>p.assign(A,e._`${d} === true ? true : ${A} > ${d} ? ${A} : ${d}`)),mergeToName:(p,d,A)=>p.if(e._`${A} !== true`,()=>p.assign(A,d===!0?!0:e._`${A} > ${d} ? ${A} : ${d}`)),mergeValues:(p,d)=>p===!0?!0:Math.max(p,d),resultToName:(p,d)=>p.var("items",d)})};function T(p,d){if(d===!0)return p.var("props",!0);const A=p.var("props",e._`{}`);return d!==void 0&&f(p,A,d),A}l.evaluatedPropsToName=T;function f(p,d,A){Object.keys(A).forEach(N=>p.assign(e._`${d}${e.getProperty(N)}`,!0))}l.setEvaluated=f;function U(p,d){return p.scopeValue("func",{ref:d,code:d.code})}l.func=U},66557:function(Tt,l){Object.defineProperty(l,"__esModule",{value:!0}),l.shouldUseRule=l.shouldUseGroup=l.schemaHasRulesForType=void 0;function t({schema:h,self:s},n){const R=s.RULES.types[n];return R&&R!==!0&&e(h,R)}l.schemaHasRulesForType=t;function e(h,s){return s.rules.some(n=>i(h,n))}l.shouldUseGroup=e;function i(h,s){var n;return h[s.keyword]!==void 0||((n=s.definition.implements)===null||n===void 0?void 0:n.some(R=>h[R]!==void 0))}l.shouldUseRule=i},74616:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.boolOrEmptySchema=l.topBoolOrEmptySchema=void 0;const e=t(59428),i=t(82481),h=t(99583),s={message:"boolean schema is false"};function n(w){const{gen:u,schema:y,validateName:O}=w;y===!1?P(w,!1):typeof y=="object"&&y.$async===!0?u.return(h.default.data):(u.assign(i._`${O}.errors`,null),u.return(!0))}l.topBoolOrEmptySchema=n;function R(w,u){const{gen:y,schema:O}=w;O===!1?(y.var(u,!1),P(w)):y.var(u,!0)}l.boolOrEmptySchema=R;function P(w,u){const{gen:y,data:O}=w,K={gen:y,keyword:"false schema",data:O,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:w};e.reportError(K,s,u)}},93277:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.reportTypeError=l.checkDataTypes=l.checkDataType=l.coerceAndCheckDataType=l.getJSONTypes=l.getSchemaTypes=l.DataType=void 0;const e=t(18288),i=t(66557),h=t(59428),s=t(82481),n=t(1849);var R;(function(d){d[d.Correct=0]="Correct",d[d.Wrong=1]="Wrong"})(R=l.DataType||(l.DataType={}));function P(d){const A=w(d.type);if(A.includes("null")){if(d.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!A.length&&d.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');d.nullable===!0&&A.push("null")}return A}l.getSchemaTypes=P;function w(d){const A=Array.isArray(d)?d:d?[d]:[];if(A.every(e.isJSONType))return A;throw new Error("type must be JSONType or JSONType[]: "+A.join(","))}l.getJSONTypes=w;function u(d,A){const{gen:N,data:c,opts:Z}=d,F=O(A,Z.coerceTypes),te=A.length>0&&!(F.length===0&&A.length===1&&i.schemaHasRulesForType(d,A[0]));if(te){const we=T(A,c,Z.strict,R.Wrong);N.if(we,()=>{F.length?K(d,A,F):U(d)})}return te}l.coerceAndCheckDataType=u;const y=new Set(["string","number","integer","boolean","null"]);function O(d,A){return A?d.filter(N=>y.has(N)||A==="array"&&N==="array"):[]}function K(d,A,N){const{gen:c,data:Z,opts:F}=d,te=c.let("dataType",s._`typeof ${Z}`),we=c.let("coerced",s._`undefined`);F.coerceTypes==="array"&&c.if(s._`${te} == 'object' && Array.isArray(${Z}) && ${Z}.length == 1`,()=>c.assign(Z,s._`${Z}[0]`).assign(te,s._`typeof ${Z}`).if(T(A,Z,F.strict),()=>c.assign(we,Z))),c.if(s._`${we} !== undefined`);for(const nt of N)(y.has(nt)||nt==="array"&&F.coerceTypes==="array")&&ct(nt);c.else(),U(d),c.endIf(),c.if(s._`${we} !== undefined`,()=>{c.assign(Z,we),D(d,we)});function ct(nt){switch(nt){case"string":c.elseIf(s._`${te} == "number" || ${te} == "boolean"`).assign(we,s._`"" + ${Z}`).elseIf(s._`${Z} === null`).assign(we,s._`""`);return;case"number":c.elseIf(s._`${te} == "boolean" || ${Z} === null
              || (${te} == "string" && ${Z} && ${Z} == +${Z})`).assign(we,s._`+${Z}`);return;case"integer":c.elseIf(s._`${te} === "boolean" || ${Z} === null
              || (${te} === "string" && ${Z} && ${Z} == +${Z} && !(${Z} % 1))`).assign(we,s._`+${Z}`);return;case"boolean":c.elseIf(s._`${Z} === "false" || ${Z} === 0 || ${Z} === null`).assign(we,!1).elseIf(s._`${Z} === "true" || ${Z} === 1`).assign(we,!0);return;case"null":c.elseIf(s._`${Z} === "" || ${Z} === 0 || ${Z} === false`),c.assign(we,null);return;case"array":c.elseIf(s._`${te} === "string" || ${te} === "number"
              || ${te} === "boolean" || ${Z} === null`).assign(we,s._`[${Z}]`)}}}function D({gen:d,parentData:A,parentDataProperty:N},c){d.if(s._`${A} !== undefined`,()=>d.assign(s._`${A}[${N}]`,c))}function g(d,A,N,c=R.Correct){const Z=c===R.Correct?s.operators.EQ:s.operators.NEQ;let F;switch(d){case"null":return s._`${A} ${Z} null`;case"array":F=s._`Array.isArray(${A})`;break;case"object":F=s._`${A} && typeof ${A} == "object" && !Array.isArray(${A})`;break;case"integer":F=te(s._`!(${A} % 1) && !isNaN(${A})`);break;case"number":F=te();break;default:return s._`typeof ${A} ${Z} ${d}`}return c===R.Correct?F:s.not(F);function te(we=s.nil){return s.and(s._`typeof ${A} == "number"`,we,N?s._`isFinite(${A})`:s.nil)}}l.checkDataType=g;function T(d,A,N,c){if(d.length===1)return g(d[0],A,N,c);let Z;const F=n.toHash(d);if(F.array&&F.object){const te=s._`typeof ${A} != "object"`;Z=F.null?te:s._`!${A} || ${te}`,delete F.null,delete F.array,delete F.object}else Z=s.nil;F.number&&delete F.integer;for(const te in F)Z=s.and(Z,g(te,A,N,c));return Z}l.checkDataTypes=T;const f={message:({schema:d})=>s.str`should be ${d}`,params:({schema:d,schemaValue:A})=>typeof d=="string"?s._`{type: ${d}}`:s._`{type: ${A}}`};function U(d){const A=p(d);h.reportError(A,f)}l.reportTypeError=U;function p(d){const{gen:A,data:N,schema:c}=d,Z=n.schemaRefOrVal(d,c,"type");return{gen:A,keyword:"type",data:N,schema:c.type,schemaCode:Z,schemaValue:Z,parentSchema:c,params:{},it:d}}},35192:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.assignDefaults=void 0;const e=t(82481),i=t(4371);function h(n,R){const{properties:P,items:w}=n.schema;if(R==="object"&&P)for(const u in P)s(n,u,P[u].default);else R==="array"&&Array.isArray(w)&&w.forEach((u,y)=>s(n,y,u.default))}l.assignDefaults=h;function s(n,R,P){const{gen:w,compositeRule:u,data:y,opts:O}=n;if(P===void 0)return;const K=e._`${y}${e.getProperty(R)}`;if(u){i.checkStrictMode(n,`default is ignored for: ${K}`);return}let D=e._`${K} === undefined`;O.useDefaults==="empty"&&(D=e._`${D} || ${K} === null || ${K} === ""`),w.if(D,e._`${K} = ${e.stringify(P)}`)}},4371:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.checkStrictMode=l.schemaCxtHasRules=l.subschemaCode=l.validateFunctionCode=void 0;const e=t(74616),i=t(93277),h=t(40588),s=t(82481),n=t(99583),R=t(2710),P=t(1849);function w(se){if(U(se)&&(d(se),f(se))){K(se);return}u(se,()=>e.topBoolOrEmptySchema(se))}l.validateFunctionCode=w;function u({gen:se,validateName:ye,schema:Le,schemaEnv:de,opts:V},he){V.code.es5?se.func(ye,s._`${n.default.data}, ${n.default.valCxt}`,de.$async,()=>{se.code(s._`"use strict"; ${g(Le,V)}`),O(se,V),se.code(he)}):se.func(ye,s._`${n.default.data}, ${y(V)}`,de.$async,()=>se.code(g(Le,V)).code(he))}function y(se){return s._`{${n.default.dataPath}="", ${n.default.parentData}, ${n.default.parentDataProperty}, ${n.default.rootData}=${n.default.data}${se.dynamicRef?s._`, ${n.default.dynamicAnchors}={}`:s.nil}}={}`}function O(se,ye){se.if(n.default.valCxt,()=>{se.var(n.default.dataPath,s._`${n.default.valCxt}.${n.default.dataPath}`),se.var(n.default.parentData,s._`${n.default.valCxt}.${n.default.parentData}`),se.var(n.default.parentDataProperty,s._`${n.default.valCxt}.${n.default.parentDataProperty}`),se.var(n.default.rootData,s._`${n.default.valCxt}.${n.default.rootData}`),ye.dynamicRef&&se.var(n.default.dynamicAnchors,s._`${n.default.valCxt}.${n.default.dynamicAnchors}`)},()=>{se.var(n.default.dataPath,s._`""`),se.var(n.default.parentData,s._`undefined`),se.var(n.default.parentDataProperty,s._`undefined`),se.var(n.default.rootData,n.default.data),ye.dynamicRef&&se.var(n.default.dynamicAnchors,s._`{}`)})}function K(se){const{schema:ye,opts:Le,gen:de}=se;u(se,()=>{Le.$comment&&ye.$comment&&te(se),c(se),de.let(n.default.vErrors,null),de.let(n.default.errors,0),Le.unevaluated&&D(se),A(se),we(se)})}function D(se){const{gen:ye,validateName:Le}=se;se.evaluated=ye.const("evaluated",s._`${Le}.evaluated`),ye.if(s._`${se.evaluated}.dynamicProps`,()=>ye.assign(s._`${se.evaluated}.props`,s._`undefined`)),ye.if(s._`${se.evaluated}.dynamicItems`,()=>ye.assign(s._`${se.evaluated}.items`,s._`undefined`))}function g(se,ye){return typeof se=="object"&&se.$id&&(ye.code.source||ye.code.process)?s._`/*# sourceURL=${se.$id} */`:s.nil}function T(se,ye){if(U(se)&&(d(se),f(se))){p(se,ye);return}e.boolOrEmptySchema(se,ye)}l.subschemaCode=T;function f({schema:se,self:ye}){if(typeof se=="boolean")return!se;for(const Le in se)if(ye.RULES.all[Le])return!0;return!1}l.schemaCxtHasRules=f;function U(se){return typeof se.schema!="boolean"}function p(se,ye){const{schema:Le,gen:de,opts:V}=se;V.$comment&&Le.$comment&&te(se),Z(se),F(se);const he=de.const("_errs",n.default.errors);A(se,he),de.var(ye,s._`${he} === ${n.default.errors}`)}function d(se){P.checkUnknownRules(se),N(se)}function A(se,ye){if(se.opts.jtd)return h.schemaKeywords(se,[],!1,ye);const Le=i.getSchemaTypes(se.schema),de=i.coerceAndCheckDataType(se,Le);h.schemaKeywords(se,Le,!de,ye)}function N(se){const{schema:ye,errSchemaPath:Le,opts:de,self:V}=se;ye.$ref&&de.ignoreKeywordsWithRef&&P.schemaHasRulesButRef(ye,V.RULES)&&V.logger.warn(`$ref: keywords ignored in schema at path "${Le}"`)}function c(se){const{schema:ye,opts:Le}=se;ye.default!==void 0&&Le.useDefaults&&Le.strict&&nt(se,"default is ignored in the schema root")}function Z(se){se.schema.$id&&(se.baseId=R.resolveUrl(se.baseId,se.schema.$id))}function F(se){if(se.schema.$async&&!se.schemaEnv.$async)throw new Error("async schema in sync schema")}function te({gen:se,schemaEnv:ye,schema:Le,errSchemaPath:de,opts:V}){const he=Le.$comment;if(V.$comment===!0)se.code(s._`${n.default.self}.logger.log(${he})`);else if(typeof V.$comment=="function"){const C=s.str`${de}/$comment`,Ke=se.scopeValue("root",{ref:ye.root});se.code(s._`${n.default.self}.opts.$comment(${he}, ${C}, ${Ke}.schema)`)}}function we(se){const{gen:ye,schemaEnv:Le,validateName:de,ValidationError:V,opts:he}=se;Le.$async?ye.if(s._`${n.default.errors} === 0`,()=>ye.return(n.default.data),()=>ye.throw(s._`new ${V}(${n.default.vErrors})`)):(ye.assign(s._`${de}.errors`,n.default.vErrors),he.unevaluated&&ct(se),ye.return(s._`${n.default.errors} === 0`))}function ct({gen:se,evaluated:ye,props:Le,items:de}){Le instanceof s.Name&&se.assign(s._`${ye}.props`,Le),de instanceof s.Name&&se.assign(s._`${ye}.items`,de)}function nt(se,ye,Le=se.opts.strict){if(!!Le){if(ye=`strict mode: ${ye}`,Le===!0)throw new Error(ye);se.self.logger.warn(ye)}}l.checkStrictMode=nt},40588:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.schemaKeywords=void 0;const e=t(66557),i=t(93277),h=t(35192),s=t(83558),n=t(1849),R=t(4371),P=t(82481),w=t(99583);function u(p,d,A,N){const{gen:c,schema:Z,data:F,allErrors:te,opts:we,self:ct}=p,{RULES:nt}=ct;if(Z.$ref&&(we.ignoreKeywordsWithRef||!n.schemaHasRulesButRef(Z,nt))){c.block(()=>s.keywordCode(p,"$ref",nt.all.$ref.definition));return}we.jtd||O(p,d),c.block(()=>{for(const ye of nt.rules)se(ye);se(nt.post)});function se(ye){!e.shouldUseGroup(Z,ye)||(ye.type?(c.if(i.checkDataType(ye.type,F,we.strict)),y(p,ye),d.length===1&&d[0]===ye.type&&A&&(c.else(),i.reportTypeError(p)),c.endIf()):y(p,ye),te||c.if(P._`${w.default.errors} === ${N||0}`))}}l.schemaKeywords=u;function y(p,d){const{gen:A,schema:N,opts:{useDefaults:c}}=p;c&&h.assignDefaults(p,d.type),A.block(()=>{for(const Z of d.rules)e.shouldUseRule(N,Z)&&s.keywordCode(p,Z.keyword,Z.definition,d.type)})}function O(p,d){p.schemaEnv.meta||!p.opts.strictTypes||(K(p,d),p.opts.allowUnionTypes||D(p,d),g(p,p.dataTypes))}function K(p,d){if(!!d.length){if(!p.dataTypes.length){p.dataTypes=d;return}d.forEach(A=>{f(p.dataTypes,A)||U(p,`type "${A}" not allowed by context "${p.dataTypes.join(",")}"`)}),p.dataTypes=p.dataTypes.filter(A=>f(d,A))}}function D(p,d){d.length>1&&!(d.length===2&&d.includes("null"))&&U(p,"use allowUnionTypes to allow union type keyword")}function g(p,d){const A=p.self.RULES.all;for(const N in A){const c=A[N];if(typeof c=="object"&&e.shouldUseRule(p.schema,c)){const{type:Z}=c.definition;Z.length&&!Z.some(F=>T(d,F))&&U(p,`missing type "${Z.join(",")}" for keyword "${N}"`)}}}function T(p,d){return p.includes(d)||d==="number"&&p.includes("integer")}function f(p,d){return p.includes(d)||d==="integer"&&p.includes("number")}function U(p,d){d+=` at "${p.schemaEnv.baseId+p.errSchemaPath}" (strictTypes)`,R.checkStrictMode(p,d,p.opts.strictTypes)}},83558:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.keywordCode=void 0;const e=t(59864),i=t(59428),h=t(9280),s=t(82481),n=t(99583);function R(D,g,T,f){const U=new e.default(D,T,g);"code"in T?T.code(U,f):U.$data&&T.validate?w(U,T):"macro"in T?P(U,T):(T.compile||T.validate)&&w(U,T)}l.keywordCode=R;function P(D,g){const{gen:T,keyword:f,schema:U,parentSchema:p,it:d}=D,A=g.macro.call(d.self,U,p,d),N=K(T,f,A);d.opts.validateSchema!==!1&&d.self.validateSchema(A,!0);const c=T.name("valid");D.subschema({schema:A,schemaPath:s.nil,errSchemaPath:`${d.errSchemaPath}/${f}`,topSchemaRef:N,compositeRule:!0},c),D.pass(c,()=>D.error(!0))}function w(D,g){var T;const{gen:f,keyword:U,schema:p,parentSchema:d,$data:A,it:N}=D;O(N,g);const c=!A&&g.compile?g.compile.call(N.self,p,d,N):g.validate,Z=K(f,U,c),F=f.let("valid");D.block$data(F,te),D.ok((T=g.valid)!==null&&T!==void 0?T:F);function te(){if(g.errors===!1)nt(),g.modifying&&u(D),se(()=>D.error());else{const ye=g.async?we():ct();g.modifying&&u(D),se(()=>y(D,ye))}}function we(){const ye=f.let("ruleErrs",null);return f.try(()=>nt(s._`await `),Le=>f.assign(F,!1).if(s._`${Le} instanceof ${N.ValidationError}`,()=>f.assign(ye,s._`${Le}.errors`),()=>f.throw(Le))),ye}function ct(){const ye=s._`${Z}.errors`;return f.assign(ye,null),nt(s.nil),ye}function nt(ye=g.async?s._`await `:s.nil){const Le=N.opts.passContext?n.default.this:n.default.self,de=!("compile"in g&&!A||g.schema===!1);f.assign(F,s._`${ye}${h.callValidateCode(D,Z,Le,de)}`,g.modifying)}function se(ye){var Le;f.if(s.not((Le=g.valid)!==null&&Le!==void 0?Le:F),ye)}}function u(D){const{gen:g,data:T,it:f}=D;g.if(f.parentData,()=>g.assign(T,s._`${f.parentData}[${f.parentDataProperty}]`))}function y(D,g){const{gen:T}=D;T.if(s._`Array.isArray(${g})`,()=>{T.assign(n.default.vErrors,s._`${n.default.vErrors} === null ? ${g} : ${n.default.vErrors}.concat(${g})`).assign(n.default.errors,s._`${n.default.vErrors}.length`),i.extendErrors(D)},()=>D.error())}function O({schemaEnv:D},g){if(g.async&&!D.$async)throw new Error("async keyword in sync schema")}function K(D,g,T){if(T===void 0)throw new Error(`keyword "${g}" failed to compile`);return D.scopeValue("keyword",typeof T=="function"?{ref:T}:{ref:T,code:s.stringify(T)})}},61889:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.CodeGen=l.Name=l.nil=l.stringify=l.str=l._=l.KeywordCxt=void 0;const e=t(59864);l.KeywordCxt=e.default;var i=t(82481);Object.defineProperty(l,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(l,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(l,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(l,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(l,"Name",{enumerable:!0,get:function(){return i.Name}}),Object.defineProperty(l,"CodeGen",{enumerable:!0,get:function(){return i.CodeGen}});const h=t(91079),s=t(18288),n=t(62902),R=t(82481),P=t(2710),w=t(93277),u=t(1849),y=t(85310),O=["removeAdditional","useDefaults","coerceTypes"],K=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),D={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",schemaId:"JSON Schema draft-04 is not supported in Ajv v7.",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",strictNumbers:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key."},g={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function T(de){var V,he,C,Ke,j,It,Be,L,Y,z,ge,Ue;const xe=(V=de.strict)!==null&&V!==void 0?V:!0,At=xe?"log":!1,nn=(he=de.code)===null||he===void 0?void 0:he.optimize,ut=nn===!0||nn===void 0?1:nn||0;return{strict:xe,strictTypes:(C=de.strictTypes)!==null&&C!==void 0?C:At,strictTuples:(Ke=de.strictTuples)!==null&&Ke!==void 0?Ke:At,code:de.code?{...de.code,optimize:ut}:{optimize:ut},loopRequired:(j=de.loopRequired)!==null&&j!==void 0?j:1/0,loopEnum:(It=de.loopEnum)!==null&&It!==void 0?It:1/0,meta:(Be=de.meta)!==null&&Be!==void 0?Be:!0,messages:(L=de.messages)!==null&&L!==void 0?L:!0,inlineRefs:(Y=de.inlineRefs)!==null&&Y!==void 0?Y:!0,addUsedSchema:(z=de.addUsedSchema)!==null&&z!==void 0?z:!0,validateSchema:(ge=de.validateSchema)!==null&&ge!==void 0?ge:!0,validateFormats:(Ue=de.validateFormats)!==null&&Ue!==void 0?Ue:!0}}class f{constructor(V={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,V=this.opts={...V,...T(V)};const{es5:he,lines:C}=this.opts.code;this.scope=new R.ValueScope({scope:{},prefixes:K,es5:he,lines:C}),this.logger=F(V.logger);const Ke=V.validateFormats;V.validateFormats=!1,this.RULES=s.getRules(),U.call(this,D,V,"NOT SUPPORTED"),U.call(this,g,V,"DEPRECATED","warn"),this._metaOpts=c.call(this),V.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),V.keywords&&N.call(this,V.keywords),typeof V.meta=="object"&&this.addMetaSchema(V.meta),d.call(this),V.validateFormats=Ke}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:V,meta:he}=this.opts;he&&V&&this.addMetaSchema(y,y.$id,!1)}defaultMeta(){const{meta:V}=this.opts;return this.opts.defaultMeta=typeof V=="object"?V.$id||V:void 0}validate(V,he){let C;if(typeof V=="string"){if(C=this.getSchema(V),!C)throw new Error(`no schema with key or ref "${V}"`)}else C=this.compile(V);const Ke=C(he);return"$async"in C||(this.errors=C.errors),Ke}compile(V,he){const C=this._addSchema(V,he);return C.validate||this._compileSchemaEnv(C)}compileAsync(V,he){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:C}=this.opts;return Ke.call(this,V,he);async function Ke(z,ge){await j.call(this,z.$schema);const Ue=this._addSchema(z,ge);return Ue.validate||It.call(this,Ue)}async function j(z){z&&!this.getSchema(z)&&await Ke.call(this,{$ref:z},!0)}async function It(z){try{return this._compileSchemaEnv(z)}catch(ge){if(!(ge instanceof h.MissingRefError))throw ge;return Be.call(this,ge),await L.call(this,ge.missingSchema),It.call(this,z)}}function Be({missingSchema:z,missingRef:ge}){if(this.refs[z])throw new Error(`AnySchema ${z} is loaded but ${ge} cannot be resolved`)}async function L(z){const ge=await Y.call(this,z);this.refs[z]||await j.call(this,ge.$schema),this.refs[z]||this.addSchema(ge,z,he)}async function Y(z){const ge=this._loading[z];if(ge)return ge;try{return await(this._loading[z]=C(z))}finally{delete this._loading[z]}}}addSchema(V,he,C,Ke=this.opts.validateSchema){if(Array.isArray(V)){for(const It of V)this.addSchema(It,void 0,C,Ke);return this}let j;if(typeof V=="object"&&(j=V.$id,j!==void 0&&typeof j!="string"))throw new Error("schema id must be string");return he=P.normalizeId(he||j),this._checkUnique(he),this.schemas[he]=this._addSchema(V,C,Ke,!0),this}addMetaSchema(V,he,C=this.opts.validateSchema){return this.addSchema(V,he,!0,C),this}validateSchema(V,he){if(typeof V=="boolean")return!0;let C;if(C=V.$schema,C!==void 0&&typeof C!="string")throw new Error("$schema must be a string");if(C=C||this.opts.defaultMeta||this.defaultMeta(),!C)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Ke=this.validate(C,V);if(!Ke&&he){const j="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(j);else throw new Error(j)}return Ke}getSchema(V){let he;for(;typeof(he=p.call(this,V))=="string";)V=he;if(he===void 0){const C=new n.SchemaEnv({schema:{}});if(he=n.resolveSchema.call(this,C,V),!he)return;this.refs[V]=he}return he.validate||this._compileSchemaEnv(he)}removeSchema(V){if(V instanceof RegExp)return this._removeAllSchemas(this.schemas,V),this._removeAllSchemas(this.refs,V),this;switch(typeof V){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const he=p.call(this,V);return typeof he=="object"&&this._cache.delete(he.schema),delete this.schemas[V],delete this.refs[V],this}case"object":{const he=V;this._cache.delete(he);let C=V.$id;return C&&(C=P.normalizeId(C),delete this.schemas[C],delete this.refs[C]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(V){for(const he of V)this.addKeyword(he);return this}addKeyword(V,he){let C;if(typeof V=="string")C=V,typeof he=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),he.keyword=C);else if(typeof V=="object"&&he===void 0){if(he=V,C=he.keyword,Array.isArray(C)&&!C.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(we.call(this,C,he),!he)return u.eachItem(C,j=>ct.call(this,j)),this;se.call(this,he);const Ke={...he,type:w.getJSONTypes(he.type),schemaType:w.getJSONTypes(he.schemaType)};return u.eachItem(C,Ke.type.length===0?j=>ct.call(this,j,Ke):j=>Ke.type.forEach(It=>ct.call(this,j,Ke,It))),this}getKeyword(V){const he=this.RULES.all[V];return typeof he=="object"?he.definition:!!he}removeKeyword(V){const{RULES:he}=this;delete he.keywords[V],delete he.all[V];for(const C of he.rules){const Ke=C.rules.findIndex(j=>j.keyword===V);Ke>=0&&C.rules.splice(Ke,1)}return this}addFormat(V,he){return typeof he=="string"&&(he=new RegExp(he)),this.formats[V]=he,this}errorsText(V=this.errors,{separator:he=", ",dataVar:C="data"}={}){return!V||V.length===0?"No errors":V.map(Ke=>`${C}${Ke.dataPath} ${Ke.message}`).reduce((Ke,j)=>Ke+he+j)}$dataMetaSchema(V,he){const C=this.RULES.all;V=JSON.parse(JSON.stringify(V));for(const Ke of he){const j=Ke.split("/").slice(1);let It=V;for(const Be of j)It=It[Be];for(const Be in C){const L=C[Be];if(typeof L!="object")continue;const{$data:Y}=L.definition,z=It[Be];Y&&z&&(It[Be]=Le(z))}}return V}_removeAllSchemas(V,he){for(const C in V){const Ke=V[C];(!he||he.test(C))&&(typeof Ke=="string"?delete V[C]:Ke&&!Ke.meta&&(this._cache.delete(Ke.schema),delete V[C]))}}_addSchema(V,he,C=this.opts.validateSchema,Ke=this.opts.addUsedSchema){if(typeof V!="object"){if(this.opts.jtd)throw new Error("schema must be object");if(typeof V!="boolean")throw new Error("schema must be object or boolean")}let j=this._cache.get(V);if(j!==void 0)return j;const It=P.getSchemaRefs.call(this,V);j=new n.SchemaEnv({schema:V,meta:he,localRefs:It}),this._cache.set(j.schema,j);const Be=j.baseId;return Ke&&!Be.startsWith("#")&&(Be&&this._checkUnique(Be),this.refs[Be]=j),C&&this.validateSchema(V,!0),j}_checkUnique(V){if(this.schemas[V]||this.refs[V])throw new Error(`schema with key or id "${V}" already exists`)}_compileSchemaEnv(V){if(V.meta?this._compileMetaSchema(V):n.compileSchema.call(this,V),!V.validate)throw new Error("ajv implementation error");return V.validate}_compileMetaSchema(V){const he=this.opts;this.opts=this._metaOpts;try{n.compileSchema.call(this,V)}finally{this.opts=he}}}l.default=f,f.ValidationError=h.ValidationError,f.MissingRefError=h.MissingRefError;function U(de,V,he,C="error"){for(const Ke in de){const j=Ke;j in V&&this.logger[C](`${he}: option ${Ke}. ${de[j]}`)}}function p(de){return de=P.normalizeId(de),this.schemas[de]||this.refs[de]}function d(){const de=this.opts.schemas;if(!!de)if(Array.isArray(de))this.addSchema(de);else for(const V in de)this.addSchema(de[V],V)}function A(){for(const de in this.opts.formats){const V=this.opts.formats[de];V&&this.addFormat(de,V)}}function N(de){if(Array.isArray(de)){this.addVocabulary(de);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const V in de){const he=de[V];he.keyword||(he.keyword=V),this.addKeyword(he)}}function c(){const de={...this.opts};for(const V of O)delete de[V];return de}const Z={log(){},warn(){},error(){}};function F(de){if(de===!1)return Z;if(de===void 0)return console;if(de.log&&de.warn&&de.error)return de;throw new Error("logger must implement log, warn and error methods")}const te=/^[a-z_$][a-z0-9_$:-]*$/i;function we(de,V){const{RULES:he}=this;if(u.eachItem(de,C=>{if(he.keywords[C])throw new Error(`Keyword ${C} is already defined`);if(!te.test(C))throw new Error(`Keyword ${C} has invalid name`)}),!!V&&V.$data&&!("code"in V||"validate"in V))throw new Error('$data keyword must have "code" or "validate" function')}function ct(de,V,he){var C;const Ke=V==null?void 0:V.post;if(he&&Ke)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:j}=this;let It=Ke?j.post:j.rules.find(({type:L})=>L===he);if(It||(It={type:he,rules:[]},j.rules.push(It)),j.keywords[de]=!0,!V)return;const Be={keyword:de,definition:{...V,type:w.getJSONTypes(V.type),schemaType:w.getJSONTypes(V.schemaType)}};V.before?nt.call(this,It,Be,V.before):It.rules.push(Be),j.all[de]=Be,(C=V.implements)===null||C===void 0||C.forEach(L=>this.addKeyword(L))}function nt(de,V,he){const C=de.rules.findIndex(Ke=>Ke.keyword===he);C>=0?de.rules.splice(C,0,V):(de.rules.push(V),this.logger.warn(`rule ${he} is not defined`))}function se(de){let{metaSchema:V}=de;V!==void 0&&(de.$data&&this.opts.$data&&(V=Le(V)),de.validateSchema=this.compile(V,!0))}const ye={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Le(de){return{anyOf:[de,ye]}}},52251:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),i=t(92474),h=t(1849),s=t(4371),R={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:P}})=>e.str`should NOT have more than ${P} items`,params:({params:{len:P}})=>e._`{limit: ${P}}`},code(P){const{gen:w,schema:u,parentSchema:y,data:O,it:K}=P,{items:D}=y;if(!Array.isArray(D)){s.checkStrictMode(K,'"additionalItems" is ignored when "items" is not an array of schemas');return}K.items=!0;const g=w.const("len",e._`${O}.length`);if(u===!1)P.setParams({len:D.length}),P.pass(e._`${g} <= ${D.length}`);else if(typeof u=="object"&&!h.alwaysValidSchema(K,u)){const f=w.var("valid",e._`${g} <= ${D.length}`);w.if(e.not(f),()=>T(f)),P.ok(f)}function T(f){w.forRange("i",D.length,g,U=>{P.subschema({keyword:"additionalItems",dataProp:U,dataPropType:i.Type.Num},f),K.allErrors||w.if(e.not(f),()=>w.break())})}}};l.default=R},17831:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(9280),i=t(82481),h=t(99583),s=t(92474),n=t(1849),P={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"should NOT have additional properties",params:({params:w})=>i._`{additionalProperty: ${w.additionalProperty}}`},code(w){const{gen:u,schema:y,parentSchema:O,data:K,errsCount:D,it:g}=w;if(!D)throw new Error("ajv implementation error");const{allErrors:T,opts:f}=g;if(g.props=!0,f.removeAdditional!=="all"&&n.alwaysValidSchema(g,y))return;const U=e.allSchemaProperties(O.properties),p=e.allSchemaProperties(O.patternProperties);d(),w.ok(i._`${D} === ${h.default.errors}`);function d(){u.forIn("key",K,F=>{!U.length&&!p.length?c(F):u.if(A(F),()=>c(F))})}function A(F){let te;if(U.length>8){const we=n.schemaRefOrVal(g,O.properties,"properties");te=e.isOwnProperty(u,we,F)}else U.length?te=i.or(...U.map(we=>i._`${F} === ${we}`)):te=i.nil;return p.length&&(te=i.or(te,...p.map(we=>i._`${e.usePattern(u,we)}.test(${F})`))),i.not(te)}function N(F){u.code(i._`delete ${K}[${F}]`)}function c(F){if(f.removeAdditional==="all"||f.removeAdditional&&y===!1){N(F);return}if(y===!1){w.setParams({additionalProperty:F}),w.error(),T||u.break();return}if(typeof y=="object"&&!n.alwaysValidSchema(g,y)){const te=u.name("valid");f.removeAdditional==="failing"?(Z(F,te,!1),u.if(i.not(te),()=>{w.reset(),N(F)})):(Z(F,te),T||u.if(i.not(te),()=>u.break()))}}function Z(F,te,we){const ct={keyword:"additionalProperties",dataProp:F,dataPropType:s.Type.Str};we===!1&&Object.assign(ct,{compositeRule:!0,createErrors:!1,allErrors:!1}),w.subschema(ct,te)}}};l.default=P},15319:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(1849),i={keyword:"allOf",schemaType:"array",code(h){const{gen:s,schema:n,it:R}=h;if(!Array.isArray(n))throw new Error("ajv implementation error");const P=s.name("valid");n.forEach((w,u)=>{if(e.alwaysValidSchema(R,w))return;const y=h.subschema({keyword:"allOf",schemaProp:u},P);h.ok(P),h.mergeEvaluated(y)})}};l.default=i},60513:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(9280),i={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:e.validateUnion,error:{message:"should match some schema in anyOf"}};l.default=i},51622:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),i=t(92474),h=t(1849),s=t(4371),R={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:P,max:w}})=>w===void 0?e.str`should contain at least ${P} valid item(s)`:e.str`should contain at least ${P} and no more than ${w} valid item(s)`,params:({params:{min:P,max:w}})=>w===void 0?e._`{minContains: ${P}}`:e._`{minContains: ${P}, maxContains: ${w}}`},code(P){const{gen:w,schema:u,parentSchema:y,data:O,it:K}=P;let D,g;const{minContains:T,maxContains:f}=y;K.opts.next?(D=T===void 0?1:T,g=f):D=1;const U=w.const("len",e._`${O}.length`);if(P.setParams({min:D,max:g}),g===void 0&&D===0){s.checkStrictMode(K,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(g!==void 0&&D>g){s.checkStrictMode(K,'"minContains" > "maxContains" is always invalid'),P.fail();return}if(h.alwaysValidSchema(K,u)){let N=e._`${U} >= ${D}`;g!==void 0&&(N=e._`${N} && ${U} <= ${g}`),P.pass(N);return}K.items=!0;const p=w.name("valid");if(g===void 0&&D===1)d(p,()=>w.if(p,()=>w.break()));else{w.let(p,!1);const N=w.name("_valid"),c=w.let("count",0);d(N,()=>w.if(N,()=>A(c)))}P.result(p,()=>P.reset());function d(N,c){w.forRange("i",0,U,Z=>{P.subschema({keyword:"contains",dataProp:Z,dataPropType:i.Type.Num,compositeRule:!0},N),c()})}function A(N){w.code(e._`${N}++`),g===void 0?w.if(e._`${N} >= ${D}`,()=>w.assign(p,!0).break()):(w.if(e._`${N} > ${g}`,()=>w.assign(p,!1).break()),D===1?w.assign(p,!0):w.if(e._`${N} >= ${D}`,()=>w.assign(p,!0)))}}};l.default=R},8524:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.validateSchemaDeps=l.validatePropertyDeps=l.error=void 0;const e=t(82481),i=t(1849),h=t(9280);l.error={message:({params:{property:w,depsCount:u,deps:y}})=>{const O=u===1?"property":"properties";return e.str`should have ${O} ${y} when property ${w} is present`},params:({params:{property:w,depsCount:u,deps:y,missingProperty:O}})=>e._`{property: ${w},
    missingProperty: ${O},
    depsCount: ${u},
    deps: ${y}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:l.error,code(w){const[u,y]=n(w);R(w,u),P(w,y)}};function n({schema:w}){const u={},y={};for(const O in w){if(O==="__proto__")continue;const K=Array.isArray(w[O])?u:y;K[O]=w[O]}return[u,y]}function R(w,u=w.schema){const{gen:y,data:O,it:K}=w;if(Object.keys(u).length===0)return;const D=y.let("missing");for(const g in u){const T=u[g];if(T.length===0)continue;const f=h.propertyInData(y,O,g,K.opts.ownProperties);w.setParams({property:g,depsCount:T.length,deps:T.join(", ")}),K.allErrors?y.if(f,()=>{for(const U of T)h.checkReportMissingProp(w,U)}):(y.if(e._`${f} && (${h.checkMissingProp(w,T,D)})`),h.reportMissingProp(w,D),y.else())}}l.validatePropertyDeps=R;function P(w,u=w.schema){const{gen:y,data:O,keyword:K,it:D}=w,g=y.name("valid");for(const T in u)i.alwaysValidSchema(D,u[T])||(y.if(h.propertyInData(y,O,T,D.opts.ownProperties),()=>{const f=w.subschema({keyword:K,schemaProp:T},g);w.mergeValidEvaluated(f,g)},()=>y.var(g,!0)),w.ok(g))}l.validateSchemaDeps=P,l.default=s},74413:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),i=t(1849),h=t(4371),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:P})=>e.str`should match "${P.ifClause}" schema`,params:({params:P})=>e._`{failingKeyword: ${P.ifClause}}`},code(P){const{gen:w,parentSchema:u,it:y}=P;u.then===void 0&&u.else===void 0&&h.checkStrictMode(y,'"if" without "then" and "else" is ignored');const O=R(y,"then"),K=R(y,"else");if(!O&&!K)return;const D=w.let("valid",!0),g=w.name("_valid");if(T(),P.reset(),O&&K){const U=w.let("ifClause");P.setParams({ifClause:U}),w.if(g,f("then",U),f("else",U))}else O?w.if(g,f("then")):w.if(e.not(g),f("else"));P.pass(D,()=>P.error(!0));function T(){const U=P.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},g);P.mergeEvaluated(U)}function f(U,p){return()=>{const d=P.subschema({keyword:U},g);w.assign(D,g),P.mergeValidEvaluated(d,D),p?w.assign(p,e._`${U}`):P.setParams({ifClause:U})}}}};function R(P,w){const u=P.schema[w];return u!==void 0&&!i.alwaysValidSchema(P,u)}l.default=n},14226:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(52251),i=t(3042),h=t(51622),s=t(8524),n=t(53261),R=t(17831),P=t(81734),w=t(47673),u=t(73270),y=t(60513),O=t(84959),K=t(15319),D=t(74413),g=t(5095),T=[u.default,y.default,O.default,K.default,D.default,g.default,e.default,i.default,h.default,n.default,R.default,s.default,P.default,w.default];l.default=T},3042:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),i=t(1849),h=t(4371),s=t(9280),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(P){const{gen:w,schema:u,it:y}=P;if(Array.isArray(u))y.opts.unevaluated&&u.length&&y.items!==!0&&(y.items=i.mergeEvaluated.items(w,u.length,y.items)),O(u);else{if(y.items=!0,i.alwaysValidSchema(y,u))return;P.ok(s.validateArray(P))}function O(K){const{parentSchema:D,data:g}=P;if(y.opts.strictTuples&&!R(K.length,D)){const U=`"items" is ${K.length}-tuple, but minItems or maxItems/additionalItems are not specified or different`;h.checkStrictMode(y,U,y.opts.strictTuples)}const T=w.name("valid"),f=w.const("len",e._`${g}.length`);K.forEach((U,p)=>{i.alwaysValidSchema(y,U)||(w.if(e._`${f} > ${p}`,()=>P.subschema({keyword:"items",schemaProp:p,dataProp:p},T)),P.ok(T))})}}};function R(P,w){return P===w.minItems&&(P===w.maxItems||w.additionalItems===!1)}l.default=n},73270:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(1849),i={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(h){const{gen:s,schema:n,it:R}=h;if(e.alwaysValidSchema(R,n)){h.fail();return}const P=s.name("valid");h.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},P),h.result(P,()=>h.error(),()=>h.reset())},error:{message:"should NOT be valid"}};l.default=i},84959:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),i=t(1849),s={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"should match exactly one schema in oneOf",params:({params:n})=>e._`{passingSchemas: ${n.passing}}`},code(n){const{gen:R,schema:P,it:w}=n;if(!Array.isArray(P))throw new Error("ajv implementation error");const u=P,y=R.let("valid",!1),O=R.let("passing",null),K=R.name("_valid");n.setParams({passing:O}),R.block(D),n.result(y,()=>n.reset(),()=>n.error(!0));function D(){u.forEach((g,T)=>{let f;i.alwaysValidSchema(w,g)?R.var(K,!0):f=n.subschema({keyword:"oneOf",schemaProp:T,compositeRule:!0},K),T>0&&R.if(e._`${K} && ${y}`).assign(y,!1).assign(O,e._`[${O}, ${T}]`).else(),R.if(K,()=>{R.assign(y,!0),R.assign(O,T),f&&n.mergeEvaluated(f,e.Name)})})}}};l.default=s},47673:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(9280),i=t(82481),h=t(92474),s=t(4371),n=t(1849),R={keyword:"patternProperties",type:"object",schemaType:"object",code(P){const{gen:w,schema:u,data:y,parentSchema:O,it:K}=P,{opts:D}=K,g=e.schemaProperties(K,u);if(g.length===0)return;const T=D.strict&&!D.allowMatchingProperties&&O.properties,f=w.name("valid");K.props!==!0&&!(K.props instanceof i.Name)&&(K.props=n.evaluatedPropsToName(w,K.props));const{props:U}=K;p();function p(){for(const N of g)T&&d(N),K.allErrors?A(N):(w.var(f,!0),A(N),w.if(f))}function d(N){for(const c in T)new RegExp(N).test(c)&&s.checkStrictMode(K,`property ${c} matches pattern ${N} (use allowMatchingProperties)`)}function A(N){w.forIn("key",y,c=>{w.if(i._`${e.usePattern(w,N)}.test(${c})`,()=>{P.subschema({keyword:"patternProperties",schemaProp:N,dataProp:c,dataPropType:h.Type.Str},f),K.opts.unevaluated&&U!==!0?w.assign(i._`${U}[${c}]`,!0):K.allErrors||w.if(i.not(f),()=>w.break())})})}}};l.default=R},81734:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(59864),i=t(9280),h=t(1849),s=t(17831),n={keyword:"properties",type:"object",schemaType:"object",code(R){const{gen:P,schema:w,parentSchema:u,data:y,it:O}=R;O.opts.removeAdditional==="all"&&u.additionalProperties===void 0&&s.default.code(new e.default(O,s.default,"additionalProperties"));const K=i.allSchemaProperties(w);for(const U of K)O.definedProperties.add(U);O.opts.unevaluated&&K.length&&O.props!==!0&&(O.props=h.mergeEvaluated.props(P,h.toHash(K),O.props));const D=K.filter(U=>!h.alwaysValidSchema(O,w[U]));if(D.length===0)return;const g=P.name("valid");for(const U of D)T(U)?f(U):(P.if(i.propertyInData(P,y,U,O.opts.ownProperties)),f(U),O.allErrors||P.else().var(g,!0),P.endIf()),R.it.definedProperties.add(U),R.ok(g);function T(U){return O.opts.useDefaults&&!O.compositeRule&&w[U].default!==void 0}function f(U){R.subschema({keyword:"properties",schemaProp:U,dataProp:U},g)}}};l.default=n},53261:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),i=t(1849),s={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:({params:n})=>e.str`property name '${n.propertyName}' is invalid`,params:({params:n})=>e._`{propertyName: ${n.propertyName}}`},code(n){const{gen:R,schema:P,data:w,it:u}=n;if(i.alwaysValidSchema(u,P))return;const y=R.name("valid");R.forIn("key",w,O=>{n.setParams({propertyName:O}),n.subschema({keyword:"propertyNames",data:O,dataTypes:["string"],propertyName:O,compositeRule:!0},y),R.if(e.not(y),()=>{n.error(!0),u.allErrors||R.break()})}),n.ok(y)}};l.default=s},5095:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(4371),i={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:h,parentSchema:s,it:n}){s.if===void 0&&e.checkStrictMode(n,`"${h}" without "if" is ignored`)}};l.default=i},9280:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.validateUnion=l.validateArray=l.usePattern=l.callValidateCode=l.schemaProperties=l.allSchemaProperties=l.noPropertyInData=l.propertyInData=l.isOwnProperty=l.hasPropFunc=l.reportMissingProp=l.checkMissingProp=l.checkReportMissingProp=void 0;const e=t(82481),i=t(1849),h=t(92474),s=t(99583);function n(p,d){const{gen:A,data:N,it:c}=p;A.if(O(A,N,d,c.opts.ownProperties),()=>{p.setParams({missingProperty:e._`${d}`},!0),p.error()})}l.checkReportMissingProp=n;function R({gen:p,data:d,it:{opts:A}},N,c){return e.or(...N.map(Z=>e.and(O(p,d,Z,A.ownProperties),e._`${c} = ${Z}`)))}l.checkMissingProp=R;function P(p,d){p.setParams({missingProperty:d},!0),p.error()}l.reportMissingProp=P;function w(p){return p.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:e._`Object.prototype.hasOwnProperty`})}l.hasPropFunc=w;function u(p,d,A){return e._`${w(p)}.call(${d}, ${A})`}l.isOwnProperty=u;function y(p,d,A,N){const c=e._`${d}${e.getProperty(A)} !== undefined`;return N?e._`${c} && ${u(p,d,A)}`:c}l.propertyInData=y;function O(p,d,A,N){const c=e._`${d}${e.getProperty(A)} === undefined`;return N?e.or(c,e.not(u(p,d,A))):c}l.noPropertyInData=O;function K(p){return p?Object.keys(p).filter(d=>d!=="__proto__"):[]}l.allSchemaProperties=K;function D(p,d){return K(d).filter(A=>!i.alwaysValidSchema(p,d[A]))}l.schemaProperties=D;function g({schemaCode:p,data:d,it:{gen:A,topSchemaRef:N,schemaPath:c,errorPath:Z},it:F},te,we,ct){const nt=ct?e._`${p}, ${d}, ${N}${c}`:d,se=[[s.default.dataPath,e.strConcat(s.default.dataPath,Z)],[s.default.parentData,F.parentData],[s.default.parentDataProperty,F.parentDataProperty],[s.default.rootData,s.default.rootData]];F.opts.dynamicRef&&se.push([s.default.dynamicAnchors,s.default.dynamicAnchors]);const ye=e._`${nt}, ${A.object(...se)}`;return we!==e.nil?e._`${te}.call(${we}, ${ye})`:e._`${te}(${ye})`}l.callValidateCode=g;function T(p,d){return p.scopeValue("pattern",{key:d,ref:new RegExp(d,"u"),code:e._`new RegExp(${d}, "u")`})}l.usePattern=T;function f(p){const{gen:d,data:A,keyword:N,it:c}=p,Z=d.name("valid");if(c.allErrors){const te=d.let("valid",!0);return F(()=>d.assign(te,!1)),te}return d.var(Z,!0),F(()=>d.break()),Z;function F(te){const we=d.const("len",e._`${A}.length`);d.forRange("i",0,we,ct=>{p.subschema({keyword:N,dataProp:ct,dataPropType:h.Type.Num},Z),d.if(e.not(Z),te)})}}l.validateArray=f;function U(p){const{gen:d,schema:A,keyword:N,it:c}=p;if(!Array.isArray(A))throw new Error("ajv implementation error");if(A.some(we=>i.alwaysValidSchema(c,we))&&!c.opts.unevaluated)return;const F=d.let("valid",!1),te=d.name("_valid");d.block(()=>A.forEach((we,ct)=>{const nt=p.subschema({keyword:N,schemaProp:ct,compositeRule:!0},te);d.assign(F,e._`${F} || ${te}`),p.mergeValidEvaluated(nt,te)||d.if(e.not(F))})),p.result(F,()=>p.reset(),()=>p.error(!0))}l.validateUnion=U},5671:function(Tt,l){Object.defineProperty(l,"__esModule",{value:!0});const t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};l.default=t},10356:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(5671),i=t(24302),h=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,i.default];l.default=h},24302:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0}),l.callRef=l.getValidate=void 0;const e=t(91079),i=t(9280),h=t(82481),s=t(99583),n=t(62902),R=t(1849),P={keyword:"$ref",schemaType:"string",code(y){const{gen:O,schema:K,it:D}=y,{baseId:g,schemaEnv:T,validateName:f,opts:U,self:p}=D;if(K==="#"||K==="#/")return A();const d=n.resolveRef.call(p,T.root,g,K);if(d===void 0)throw new e.MissingRefError(g,K);if(d instanceof n.SchemaEnv)return N(d);return c(d);function A(){if(T===T.root)return u(y,f,T,T.$async);const Z=O.scopeValue("root",{ref:T.root});return u(y,h._`${Z}.validate`,T.root,T.root.$async)}function N(Z){const F=w(y,Z);u(y,F,Z,Z.$async)}function c(Z){const F=O.scopeValue("schema",U.code.source===!0?{ref:Z,code:h.stringify(Z)}:{ref:Z}),te=O.name("valid"),we=y.subschema({schema:Z,dataTypes:[],schemaPath:h.nil,topSchemaRef:F,errSchemaPath:K},te);y.mergeEvaluated(we),y.ok(te)}}};function w(y,O){const{gen:K}=y;return O.validate?K.scopeValue("validate",{ref:O.validate}):h._`${K.scopeValue("wrapper",{ref:O})}.validate`}l.getValidate=w;function u(y,O,K,D){const{gen:g,it:T}=y,{allErrors:f,schemaEnv:U,opts:p}=T,d=p.passContext?s.default.this:h.nil;D?A():N();function A(){if(!U.$async)throw new Error("async schema referenced by sync schema");const F=g.let("valid");g.try(()=>{g.code(h._`await ${i.callValidateCode(y,O,d)}`),Z(O),f||g.assign(F,!0)},te=>{g.if(h._`!(${te} instanceof ${T.ValidationError})`,()=>g.throw(te)),c(te),f||g.assign(F,!1)}),y.ok(F)}function N(){y.result(i.callValidateCode(y,O,d),()=>Z(O),()=>c(O))}function c(F){const te=h._`${F}.errors`;g.assign(s.default.vErrors,h._`${s.default.vErrors} === null ? ${te} : ${s.default.vErrors}.concat(${te})`),g.assign(s.default.errors,h._`${s.default.vErrors}.length`)}function Z(F){var te;if(!T.opts.unevaluated)return;const we=(te=K==null?void 0:K.validate)===null||te===void 0?void 0:te.evaluated;if(T.props!==!0)if(we&&!we.dynamicProps)we.props!==void 0&&(T.props=R.mergeEvaluated.props(g,we.props,T.props));else{const ct=g.var("props",h._`${F}.evaluated.props`);T.props=R.mergeEvaluated.props(g,ct,T.props,h.Name)}if(T.items!==!0)if(we&&!we.dynamicItems)we.items!==void 0&&(T.items=R.mergeEvaluated.items(g,we.items,T.items));else{const ct=g.var("items",h._`${F}.evaluated.items`);T.items=R.mergeEvaluated.items(g,ct,T.items,h.Name)}}}l.callRef=u,l.default=P},57993:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(10356),i=t(16282),h=t(14226),s=t(6989),n=t(68373),R=[e.default,i.default,h.default,s.default,n.metadataVocabulary,n.contentVocabulary];l.default=R},43202:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),h={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:s})=>e.str`should match format "${s}"`,params:({schemaCode:s})=>e._`{format: ${s}}`},code(s,n){const{gen:R,data:P,$data:w,schema:u,schemaCode:y,it:O}=s,{opts:K,errSchemaPath:D,schemaEnv:g,self:T}=O;if(!K.validateFormats)return;w?f():U();function f(){const p=R.scopeValue("formats",{ref:T.formats,code:K.code.formats}),d=R.const("fDef",e._`${p}[${y}]`),A=R.let("fType"),N=R.let("format");R.if(e._`typeof ${d} == "object" && !(${d} instanceof RegExp)`,()=>R.assign(A,e._`${d}.type || "string"`).assign(N,e._`${d}.validate`),()=>R.assign(A,e._`"string"`).assign(N,d)),s.fail$data(e.or(c(),Z()));function c(){return K.strict===!1?e.nil:e._`${y} && !${N}`}function Z(){const F=g.$async?e._`(${d}.async ? await ${N}(${P}) : ${N}(${P}))`:e._`${N}(${P})`,te=e._`(typeof ${N} == "function" ? ${F} : ${N}.test(${P}))`;return e._`${N} && ${N} !== true && ${A} === ${n} && !${te}`}}function U(){const p=T.formats[u];if(!p){c();return}if(p===!0)return;const[d,A,N]=Z(p);d===n&&s.pass(F());function c(){if(K.strict===!1){T.logger.warn(te());return}throw new Error(te());function te(){return`unknown format "${u}" ignored in schema at path "${D}"`}}function Z(te){const we=R.scopeValue("formats",{key:u,ref:te,code:K.code.formats?e._`${K.code.formats}${e.getProperty(u)}`:void 0});return typeof te=="object"&&!(te instanceof RegExp)?[te.type||"string",te.validate,e._`${we}.validate`]:["string",te,we]}function F(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!g.$async)throw new Error("async format in sync schema");return e._`await ${N}(${P})`}return typeof A=="function"?e._`${N}(${P})`:e._`${N}.test(${P})`}}}};l.default=h},6989:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const i=[t(43202).default];l.default=i},68373:function(Tt,l){Object.defineProperty(l,"__esModule",{value:!0}),l.contentVocabulary=l.metadataVocabulary=void 0,l.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],l.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},80750:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),i=t(69378),s={keyword:"const",$data:!0,error:{message:"should be equal to constant",params:({schemaCode:n})=>e._`{allowedValue: ${n}}`},code(n){const R=n.gen.scopeValue("func",{ref:i,code:e._`require("ajv/dist/compile/equal")`});n.fail$data(e._`!${R}(${n.data}, ${n.schemaCode})`)}};l.default=s},28109:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),i=t(69378),s={keyword:"enum",schemaType:"array",$data:!0,error:{message:"should be equal to one of the allowed values",params:({schemaCode:n})=>e._`{allowedValues: ${n}}`},code(n){const{gen:R,data:P,$data:w,schema:u,schemaCode:y,it:O}=n;if(!w&&u.length===0)throw new Error("enum must have non-empty array");const K=u.length>=O.opts.loopEnum,D=n.gen.scopeValue("func",{ref:i,code:e._`require("ajv/dist/compile/equal")`});let g;if(K||w)g=R.let("valid"),n.block$data(g,T);else{if(!Array.isArray(u))throw new Error("ajv implementation error");const U=R.const("vSchema",y);g=e.or(...u.map((p,d)=>f(U,d)))}n.pass(g);function T(){R.assign(g,!1),R.forOf("v",y,U=>R.if(e._`${D}(${P}, ${U})`,()=>R.assign(g,!0).break()))}function f(U,p){const d=u[p];return d&&typeof d=="object"?e._`${D}(${P}, ${U}[${p}])`:e._`${P} === ${d}`}}};l.default=s},16282:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(41619),i=t(24923),h=t(34660),s=t(72326),n=t(69354),R=t(60881),P=t(42632),w=t(41985),u=t(80750),y=t(28109),O=[e.default,i.default,h.default,s.default,n.default,R.default,P.default,w.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,y.default];l.default=O},42632:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),h={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:n}){const R=s==="maxItems"?"more":"fewer";return e.str`should NOT have ${R} than ${n} items`},params:({schemaCode:s})=>e._`{limit: ${s}}`},code(s){const{keyword:n,data:R,schemaCode:P}=s,w=n==="maxItems"?e.operators.GT:e.operators.LT;s.fail$data(e._`${R}.length ${w} ${P}`)}};l.default=h},34660:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),i=t(30673),s={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:R}){const P=n==="maxLength"?"more":"fewer";return e.str`should NOT have ${P} than ${R} characters`},params:({schemaCode:n})=>e._`{limit: ${n}}`},code(n){const{keyword:R,data:P,schemaCode:w,it:u}=n,y=R==="maxLength"?e.operators.GT:e.operators.LT;let O;if(u.opts.unicode===!1)O=e._`${P}.length`;else{const K=n.gen.scopeValue("func",{ref:i.default,code:e._`require("ajv/dist/compile/ucs2length").default`});O=e._`${K}(${P})`}n.fail$data(e._`${O} ${y} ${w}`)}};l.default=s},41619:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),i=e.operators,h={maximum:{okStr:"<=",ok:i.LTE,fail:i.GT},minimum:{okStr:">=",ok:i.GTE,fail:i.LT},exclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},exclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}},s={message:({keyword:R,schemaCode:P})=>e.str`should be ${h[R].okStr} ${P}`,params:({keyword:R,schemaCode:P})=>e._`{comparison: ${h[R].okStr}, limit: ${P}}`},n={keyword:Object.keys(h),type:"number",schemaType:"number",$data:!0,error:s,code(R){const{keyword:P,data:w,schemaCode:u}=R;R.fail$data(e._`${w} ${h[P].fail} ${u} || isNaN(${w})`)}};l.default=n},69354:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),h={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:n}){const R=s==="maxProperties"?"more":"fewer";return e.str`should NOT have ${R} than ${n} items`},params:({schemaCode:s})=>e._`{limit: ${s}}`},code(s){const{keyword:n,data:R,schemaCode:P}=s,w=n==="maxProperties"?e.operators.GT:e.operators.LT;s.fail$data(e._`Object.keys(${R}).length ${w} ${P}`)}};l.default=h},24923:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(82481),h={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:s})=>e.str`should be multiple of ${s}`,params:({schemaCode:s})=>e._`{multipleOf: ${s}}`},code(s){const{gen:n,data:R,schemaCode:P,it:w}=s,u=w.opts.multipleOfPrecision,y=n.let("res"),O=u?e._`Math.abs(Math.round(${y}) - ${y}) > 1e-${u}`:e._`${y} !== parseInt(${y})`;s.fail$data(e._`(${P} === 0 || (${y} = ${R}/${P}, ${O}))`)}};l.default=h},72326:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(9280),i=t(82481),s={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>i.str`should match pattern "${n}"`,params:({schemaCode:n})=>i._`{pattern: ${n}}`},code(n){const{gen:R,data:P,$data:w,schema:u,schemaCode:y}=n,O=w?i._`(new RegExp(${y}, "u"))`:e.usePattern(R,u);n.fail$data(i._`!${O}.test(${P})`)}};l.default=s},60881:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(9280),i=t(82481),h=t(4371),n={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:R}})=>i.str`should have required property '${R}'`,params:({params:{missingProperty:R}})=>i._`{missingProperty: ${R}}`},code(R){const{gen:P,schema:w,schemaCode:u,data:y,$data:O,it:K}=R,{opts:D}=K;if(!O&&w.length===0)return;const g=w.length>=D.loopRequired;if(K.allErrors?T():f(),D.strictRequired){const d=R.parentSchema.properties,{definedProperties:A}=R.it;for(const N of w)if((d==null?void 0:d[N])===void 0&&!A.has(N)){const c=K.schemaEnv.baseId+K.errSchemaPath,Z=`required property "${N}" is not defined at "${c}" (strictRequired)`;h.checkStrictMode(K,Z,K.opts.strictRequired)}}function T(){if(g||O)R.block$data(i.nil,U);else for(const d of w)e.checkReportMissingProp(R,d)}function f(){const d=P.let("missing");if(g||O){const A=P.let("valid",!0);R.block$data(A,()=>p(d,A)),R.ok(A)}else P.if(e.checkMissingProp(R,w,d)),e.reportMissingProp(R,d),P.else()}function U(){P.forOf("prop",u,d=>{R.setParams({missingProperty:d}),P.if(e.noPropertyInData(P,y,d,D.ownProperties),()=>R.error())})}function p(d,A){R.setParams({missingProperty:d}),P.forOf(d,u,()=>{P.assign(A,e.propertyInData(P,y,d,D.ownProperties)),P.if(i.not(A),()=>{R.error(),P.break()})},i.nil)}}};l.default=n},41985:function(Tt,l,t){Object.defineProperty(l,"__esModule",{value:!0});const e=t(93277),i=t(82481),h=t(69378),n={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:R,j:P}})=>i.str`should NOT have duplicate items (items ## ${P} and ${R} are identical)`,params:({params:{i:R,j:P}})=>i._`{i: ${R}, j: ${P}}`},code(R){const{gen:P,data:w,$data:u,schema:y,parentSchema:O,schemaCode:K,it:D}=R;if(!u&&!y)return;const g=P.let("valid"),T=O.items?e.getSchemaTypes(O.items):[];R.block$data(g,f,i._`${K} === false`),R.ok(g);function f(){const A=P.let("i",i._`${w}.length`),N=P.let("j");R.setParams({i:A,j:N}),P.assign(g,!0),P.if(i._`${A} > 1`,()=>(U()?p:d)(A,N))}function U(){return T.length>0&&!T.some(A=>A==="object"||A==="array")}function p(A,N){const c=P.name("item"),Z=e.checkDataTypes(T,c,D.opts.strict,e.DataType.Wrong),F=P.const("indices",i._`{}`);P.for(i._`;${A}--;`,()=>{P.let(c,i._`${w}[${A}]`),P.if(Z,i._`continue`),T.length>1&&P.if(i._`typeof ${c} == "string"`,i._`${c} += "_"`),P.if(i._`typeof ${F}[${c}] == "number"`,()=>{P.assign(N,i._`${F}[${c}]`),R.error(),P.assign(g,!1).break()}).code(i._`${F}[${c}] = ${A}`)})}function d(A,N){const c=R.gen.scopeValue("func",{ref:h,code:i._`require("ajv/dist/compile/equal")`}),Z=P.name("outer");P.label(Z).for(i._`;${A}--;`,()=>P.for(i._`${N} = ${A}; ${N}--;`,()=>P.if(i._`${c}(${w}[${A}], ${w}[${N}])`,()=>{R.error(),P.assign(g,!1).break(Z)})))}}};l.default=n},53907:function(Tt,l,t){t.d(l,{CX:function(){return ie},uC:function(){return le},xP:function(){return Ze},KN:function(){return Wt},gr:function(){return Yt},II:function(){return rn},wQ:function(){return En},Td:function(){return z},aq:function(){return Ue},eE:function(){return nn},_i:function(){return vt},gN:function(){return ve},YM:function(){return _n},sn:function(){return Pt},$_:function(){return Ie},Jv:function(){return ln},pM:function(){return ft},CJ:function(){return Ae},jJ:function(){return yn},bg:function(){return Xt}});var e=t(2784),i=t(13980),h=t.n(i),s=t(18473),n=t(82394),R=t.n(n),P=t(30705),w=t(30195),u=t(9850),y=t.n(u),O=t(12782),K=t.n(O);const D=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function g(J){return typeof J=="object"&&J!==null&&!Array.isArray(J)}function T(J){if(J===null)return"null";if(Array.isArray(J))return"array";const o=typeof J;return o==="number"&&isNaN(J)?"nan":o==="string"&&J===""?"empty-string":o}const f={type(J,o,m,I){return`Invalid type in config for key '${J}' in '${o}', got ${m}, wanted ${I}`},missing(J){return`Missing required config value at '${J}'`},convert(J,o,m){return`Unable to convert config value for key '${J}' in '${o}' to a ${m}`}};class U{constructor(o,m="mock-config",I,k=""){this.data=o,this.context=m,this.fallback=I,this.prefix=k,this.notifiedFilteredKeys=new Set}static fromConfigs(o){return o.length===0?new U(void 0):o.reduce((m,{data:I,context:k,filteredKeys:G,deprecatedKeys:Me})=>{const Ye=new U(I,k,m);if(Ye.filteredKeys=G,Me)for(const{key:oe,description:b}of Me)console.warn(`The configuration key '${oe}' of ${k} is deprecated and may be removed soon. ${b||""}`);return Ye},void 0)}has(o){var m,I;return this.readValue(o)!==void 0?!0:(I=(m=this.fallback)==null?void 0:m.has(o))!=null?I:!1}keys(){var o,m;const I=this.data?Object.keys(this.data):[],k=(m=(o=this.fallback)==null?void 0:o.keys())!=null?m:[];return[...new Set([...I,...k])]}get(o){const m=this.getOptional(o);if(m===void 0)throw new Error(f.missing(this.fullKey(o!=null?o:"")));return m}getOptional(o){var m,I;const k=y()(this.readValue(o)),G=(m=this.fallback)==null?void 0:m.getOptional(o);return k===void 0?G:G===void 0?k:K()({},{value:G},{value:k},(Me,Ye)=>!g(Ye)||!g(Me)?Ye:void 0).value}getConfig(o){const m=this.getOptionalConfig(o);if(m===void 0)throw new Error(f.missing(this.fullKey(o)));return m}getOptionalConfig(o){var m;const I=this.readValue(o),k=(m=this.fallback)==null?void 0:m.getOptionalConfig(o);if(g(I))return this.copy(I,o,k);if(I!==void 0)throw new TypeError(f.type(this.fullKey(o),this.context,T(I),"object"));return k}getConfigArray(o){const m=this.getOptionalConfigArray(o);if(m===void 0)throw new Error(f.missing(this.fullKey(o)));return m}getOptionalConfigArray(o){var m;const I=this.readConfigValue(o,k=>{if(!Array.isArray(k))return{expected:"object-array"};for(const[G,Me]of k.entries())if(!g(Me))return{expected:"object-array",value:Me,key:`${o}[${G}]`};return!0});if(!!I)return I.map((k,G)=>this.copy(k,`${o}[${G}]`))}getNumber(o){const m=this.getOptionalNumber(o);if(m===void 0)throw new Error(f.missing(this.fullKey(o)));return m}getOptionalNumber(o){const m=this.readConfigValue(o,k=>typeof k=="number"||typeof k=="string"||{expected:"number"});if(typeof m=="number"||m===void 0)return m;const I=Number(m);if(!Number.isFinite(I))throw new Error(f.convert(this.fullKey(o),this.context,"number"));return I}getBoolean(o){const m=this.getOptionalBoolean(o);if(m===void 0)throw new Error(f.missing(this.fullKey(o)));return m}getOptionalBoolean(o){return this.readConfigValue(o,m=>typeof m=="boolean"||{expected:"boolean"})}getString(o){const m=this.getOptionalString(o);if(m===void 0)throw new Error(f.missing(this.fullKey(o)));return m}getOptionalString(o){return this.readConfigValue(o,m=>typeof m=="string"&&m!==""||{expected:"string"})}getStringArray(o){const m=this.getOptionalStringArray(o);if(m===void 0)throw new Error(f.missing(this.fullKey(o)));return m}getOptionalStringArray(o){return this.readConfigValue(o,m=>{if(!Array.isArray(m))return{expected:"string-array"};for(const[I,k]of m.entries())if(typeof k!="string"||k==="")return{expected:"string-array",value:k,key:`${o}[${I}]`};return!0})}fullKey(o){return`${this.prefix}${this.prefix?".":""}${o}`}copy(o,m,I){const k=new U(o,this.context,I,this.fullKey(m));return k.filteredKeys=this.filteredKeys,k}readConfigValue(o,m){var I,k;const G=this.readValue(o);if(G===void 0)return(k=this.fallback)==null?void 0:k.readConfigValue(o,m);const Me=m(G);if(Me!==!0){const{key:Ye=o,value:oe=G,expected:b}=Me;throw new TypeError(f.type(this.fullKey(Ye),this.context,T(oe),b))}return G}readValue(o){const m=o?o.split("."):[];for(const k of m)if(!D.test(k))throw new TypeError(`Invalid config key '${o}'`);if(this.data===void 0)return;let I=this.data;for(const[k,G]of m.entries())if(g(I))I=I[G];else if(I!==void 0){const Me=this.fullKey(m.slice(0,k).join("."));throw new TypeError(f.type(Me,this.context,T(I),"object"))}return I}}var p=t(10289),d=t(64279),A=t(72164);class N{constructor(...o){this.holders=o}get(o){for(const m of this.holders){const I=m.get(o);if(I)return I}}}const c=(0,s.CT)("api-context"),Z=J=>{var o;const{apis:m,children:I}=J,k=(o=(0,e.useContext)(c))==null?void 0:o.atVersion(1),G=k?new N(m,k):m;return e.createElement(c.Provider,{value:(0,s.EI)({1:G}),children:I})};Z.propTypes={apis:h().shape({get:h().func.isRequired}).isRequired,children:h().node};class F{constructor(o){this.factories=o,this.apis=new Map}static validateFactories(o,m){for(const I of m){const k=[I],G=new Set;for(;k.length;){const Me=k.shift(),Ye=o.get(Me);if(!!Ye)for(const oe of Object.values(Ye.deps)){if(oe.id===I.id)throw new Error(`Circular dependency of api factory for ${I}`);G.has(oe)||(G.add(oe),k.push(oe))}}}}get(o){return this.load(o)}load(o,m=[]){const I=this.apis.get(o.id);if(I)return I;const k=this.factories.get(o);if(!k)return;if(m.includes(k.api))throw new Error(`Circular dependency of api factory for ${k.api}`);const G=this.loadDeps(o,k.deps,[...m,k.api]),Me=k.factory(G);return this.apis.set(o.id,Me),Me}loadDeps(o,m,I){const k={};for(const G in m)if(m.hasOwnProperty(G)){const Me=m[G],Ye=this.load(Me,I);if(!Ye)throw new Error(`No API factory available for dependency ${Me} of dependent ${o}`);k[G]=Ye}return k}}var te=(J=>(J[J.default=10]="default",J[J.app=50]="app",J[J.static=100]="static",J))(te||{});class we{constructor(){this.factories=new Map}register(o,m){const I=te[o],k=this.factories.get(m.api.id);return k&&k.priority>=I?!1:(this.factories.set(m.api.id,{priority:I,factory:m}),!0)}get(o){const m=this.factories.get(o.id);if(!!m)return m.factory}getAllApis(){const o=new Set;for(const{factory:m}of this.factories.values())o.add(m.api);return o}}function ct(J){return new Promise((o,m)=>{const I=J.width||500,k=J.height||700,G=window.screen.width/2-I/2,Me=window.screen.height/2-k/2,Ye=window.open(J.url,J.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${I},height=${k},top=${Me},left=${G}`);let oe="";if(!Ye||typeof Ye.closed=="undefined"||Ye.closed){const re=new Error("Failed to open auth popup.");re.name="PopupRejectedError",m(re);return}const b=re=>{if(re.source!==Ye||re.origin!==J.origin)return;const{data:ke}=re;if(ke.type==="config_info"){oe=ke.targetOrigin;return}if(ke.type!=="authorization_response")return;const lt=ke;if("error"in lt){const qe=new Error(lt.error.message);qe.name=lt.error.name,m(qe)}else o(lt.response);B()},M=setInterval(()=>{if(Ye.closed){const re=`Login failed, ${oe&&oe!==window.location.origin?`Incorrect app origin, expected ${oe}`:"popup was closed"}`,ke=new Error(re);ke.name="PopupClosedError",m(ke),B()}},100);function B(){window.removeEventListener("message",b),clearInterval(M)}window.addEventListener("message",b)})}function nt(J){return[...J].join(" ")}class se{constructor(o){const{discoveryApi:m,environment:I,provider:k,joinScopes:G=nt,oauthRequestApi:Me,sessionTransform:Ye=oe=>oe}=o;this.authRequester=Me.createAuthRequester({provider:k,onAuthRequest:oe=>this.showPopup(oe)}),this.discoveryApi=m,this.environment=I,this.provider=k,this.joinScopesFunc=G,this.sessionTransform=Ye}async createSession(o){return o.instantPopup?this.showPopup(o.scopes):this.authRequester(o.scopes)}async refreshSession(){const o=await fetch(await this.buildUrl("/refresh",{optional:!0}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(I=>{throw new Error(`Auth refresh request failed, ${I}`)});if(!o.ok){const I=new Error(`Auth refresh request failed, ${o.statusText}`);throw I.status=o.status,I}const m=await o.json();if(m.error){const I=new Error(m.error.message);throw m.error.name&&(I.name=m.error.name),I}return await this.sessionTransform(m)}async removeSession(){const o=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(m=>{throw new Error(`Logout request failed, ${m}`)});if(!o.ok){const m=new Error(`Logout request failed, ${o.statusText}`);throw m.status=o.status,m}}async showPopup(o){const m=this.joinScopesFunc(o),I=await this.buildUrl("/start",{scope:m,origin:location.origin}),k=await ct({url:I,name:`${this.provider.title} Login`,origin:new URL(I).origin,width:450,height:730});return await this.sessionTransform(k)}async buildUrl(o,m){const I=await this.discoveryApi.getBaseUrl("auth"),k=this.buildQueryString({...m,env:this.environment});return`${I}/${this.provider.id}${o}${k}`}buildQueryString(o){if(!o)return"";const m=Object.entries(o).map(([I,k])=>{if(typeof k=="string")return`${encodeURIComponent(I)}=${encodeURIComponent(k)}`;if(k)return encodeURIComponent(I)}).filter(Boolean).join("&");return m?`?${m}`:""}}class ye{constructor(o){const{discoveryApi:m,environment:I,provider:k}=o;this.discoveryApi=m,this.environment=I,this.provider=k}async createSession(){const o=await this.buildUrl("/start"),m=await ct({url:o,name:`${this.provider.title} Login`,origin:new URL(o).origin,width:450,height:730});return{...m,id:m.profile.email}}async refreshSession(){}async removeSession(){const o=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(m=>{throw new Error(`Logout request failed, ${m}`)});if(!o.ok){const m=new Error(`Logout request failed, ${o.statusText}`);throw m.status=o.status,m}}async buildUrl(o){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${o}?env=${this.environment}`}}function Le(J,o){for(const m of o)if(!J.has(m))return!1;return!0}class de{constructor(o){this.options=o}sessionExistsAndHasScope(o,m){if(!o)return!1;if(!m||this.options.sessionScopes===void 0)return!0;const I=this.options.sessionScopes(o);return Le(I,m)}getExtendedScope(o,m){const I=new Set(this.options.defaultScopes);if(o&&this.options.sessionScopes!==void 0){const k=this.options.sessionScopes(o);for(const G of k)I.add(G)}if(m)for(const k of m)I.add(k);return I}}class V{constructor(){this.isClosed=!1,this.observable=new(R())(o=>this.isClosed?(this.terminatingError?o.error(this.terminatingError):o.complete(),()=>{}):(this.subscribers.add(o),()=>{this.subscribers.delete(o)})),this.subscribers=new Set}[Symbol.observable](){return this}get closed(){return this.isClosed}next(o){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(m=>m.next(o))}error(o){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=o,this.subscribers.forEach(m=>m.error(o))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(o=>o.complete())}subscribe(o,m,I){const k=typeof o=="function"?{next:o,error:m,complete:I}:o;return this.observable.subscribe(k)}}class he{constructor(o){this.subscribers=new Set,this.isClosed=!1,this.currentValue=o,this.terminatingError=void 0,this.observable=new(R())(m=>this.isClosed?(this.terminatingError?m.error(this.terminatingError):m.complete(),()=>{}):(m.next(this.currentValue),this.subscribers.add(m),()=>{this.subscribers.delete(m)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(o){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=o,this.subscribers.forEach(m=>m.next(o))}error(o){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=o,this.subscribers.forEach(m=>m.error(o))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(o=>o.complete())}subscribe(o,m,I){const k=typeof o=="function"?{next:o,error:m,complete:I}:o;return this.observable.subscribe(k)}}class C{constructor(){this.subject=new he(P.sM.SignedOut),this.signedIn=!1}setIsSignedIn(o){this.signedIn!==o&&(this.signedIn=o,this.subject.next(this.signedIn?P.sM.SignedIn:P.sM.SignedOut))}sessionState$(){return this.subject}}class Ke{constructor(o){this.stateTracker=new C;const{connector:m,defaultScopes:I=new Set,sessionScopes:k,sessionShouldRefresh:G}=o;this.connector=m,this.sessionScopesFunc=k,this.sessionShouldRefreshFunc=G,this.helper=new de({sessionScopes:k,defaultScopes:I})}async getSession(o){if(this.helper.sessionExistsAndHasScope(this.currentSession,o.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const I=await this.collapsedSessionRefresh(),k=this.sessionScopesFunc(this.currentSession),G=this.sessionScopesFunc(I);return Le(G,k)&&(this.currentSession=I),I}catch(I){if(o.optional)return;throw I}}if(!this.currentSession&&!o.instantPopup)try{const m=await this.collapsedSessionRefresh();return this.currentSession=m,this.getSession(o)}catch{}if(!o.optional)return this.currentSession=await this.connector.createSession({...o,scopes:this.helper.getExtendedScope(this.currentSession,o.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession();try{const o=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),o}finally{delete this.refreshPromise}}}class j{constructor(o){this.stateTracker=new C;const{connector:m,defaultScopes:I=new Set,sessionScopes:k}=o;this.connector=m,this.helper=new de({sessionScopes:k,defaultScopes:I})}setSession(o){this.currentSession=o,this.stateTracker.setIsSignedIn(Boolean(o))}async getSession(o){if(this.helper.sessionExistsAndHasScope(this.currentSession,o.scopes))return this.currentSession;if(!o.optional)return this.currentSession=await this.connector.createSession({...o,scopes:this.helper.getExtendedScope(this.currentSession,o.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}class It{constructor(o){const{manager:m,storageKey:I,schema:k,sessionScopes:G,sessionShouldRefresh:Me=()=>!1}=o;this.manager=m,this.storageKey=I,this.schema=k,this.sessionShouldRefreshFunc=Me,this.helper=new de({sessionScopes:G,defaultScopes:new Set})}setSession(o){this.manager.setSession(o),this.saveSession(o)}async getSession(o){const{scopes:m}=o,I=this.loadSession();if(this.helper.sessionExistsAndHasScope(I,m)&&!this.sessionShouldRefreshFunc(I))return this.manager.setSession(I),I;const k=await this.manager.getSession(o);return this.saveSession(k),k}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const o=localStorage.getItem(this.storageKey);if(o){const m=JSON.parse(o,(I,k)=>(k==null?void 0:k.__type)==="Set"?new Set(k.__value):k);try{return this.schema.parse(m)}catch(I){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${I}`),I}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(o){if(o===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(o)}catch(m){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${m}`);return}localStorage.setItem(this.storageKey,JSON.stringify(o,(m,I)=>I instanceof Set?{__type:"Set",__value:Array.from(I)}:I))}}const Be={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class L{static create(o){const{discoveryApi:m,environment:I="development",provider:k=Be,oauthRequestApi:G,defaultScopes:Me=[],scopeTransform:Ye=M=>M}=o,oe=new se({discoveryApi:m,environment:I,provider:k,oauthRequestApi:G,sessionTransform(M){return{...M,providerInfo:{idToken:M.providerInfo.idToken,accessToken:M.providerInfo.accessToken,scopes:L.normalizeScopes(Ye,M.providerInfo.scope),expiresAt:new Date(Date.now()+M.providerInfo.expiresInSeconds*1e3)}}}}),b=new Ke({connector:oe,defaultScopes:new Set(Me),sessionScopes:M=>M.providerInfo.scopes,sessionShouldRefresh:M=>(M.providerInfo.expiresAt.getTime()-Date.now())/1e3<60*5});return new L({sessionManager:b,scopeTransform:Ye})}constructor(o){this.sessionManager=o.sessionManager,this.scopeTransform=o.scopeTransform}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(o,m){var I;const k=L.normalizeScopes(this.scopeTransform,o),G=await this.sessionManager.getSession({...m,scopes:k});return(I=G==null?void 0:G.providerInfo.accessToken)!=null?I:""}async getIdToken(o={}){var m;const I=await this.sessionManager.getSession(o);return(m=I==null?void 0:I.providerInfo.idToken)!=null?m:""}async getBackstageIdentity(o={}){const m=await this.sessionManager.getSession(o);return m==null?void 0:m.backstageIdentity}async getProfile(o={}){const m=await this.sessionManager.getSession(o);return m==null?void 0:m.profile}static normalizeScopes(o,m){if(!m)return new Set;const I=Array.isArray(m)?m:m.split(/[\s|,]/).filter(Boolean);return new Set(o(I))}}const Y={id:"github",title:"GitHub",icon:()=>null};class z{static create(o){const{discoveryApi:m,environment:I="development",provider:k=Y,oauthRequestApi:G,defaultScopes:Me=["read:user"]}=o;return L.create({discoveryApi:m,oauthRequestApi:G,provider:k,environment:I,defaultScopes:Me})}}const ge={id:"gitlab",title:"GitLab",icon:()=>null};class Ue{static create(o){const{discoveryApi:m,environment:I="development",provider:k=ge,oauthRequestApi:G,defaultScopes:Me=["read_user"]}=o;return L.create({discoveryApi:m,oauthRequestApi:G,provider:k,environment:I,defaultScopes:Me})}}const xe={id:"google",title:"Google",icon:()=>null},At="https://www.googleapis.com/auth/";class nn{static create(o){const{discoveryApi:m,oauthRequestApi:I,environment:k="development",provider:G=xe,defaultScopes:Me=["openid",`${At}userinfo.email`,`${At}userinfo.profile`]}=o;return L.create({discoveryApi:m,oauthRequestApi:I,provider:G,environment:k,defaultScopes:Me,scopeTransform(Ye){return Ye.map(oe=>oe==="openid"?oe:oe==="profile"||oe==="email"?`${At}userinfo.${oe}`:oe.startsWith(At)?oe:`${At}${oe}`)}})}}const ut={id:"okta",title:"Okta",icon:()=>null},Kt=new Set(["openid","profile","email","phone","address","groups","offline_access"]),$t="okta.";class Pt{static create(o){const{discoveryApi:m,environment:I="development",provider:k=ut,oauthRequestApi:G,defaultScopes:Me=["openid","email","profile","offline_access"]}=o;return L.create({discoveryApi:m,oauthRequestApi:G,provider:k,environment:I,defaultScopes:Me,scopeTransform(Ye){return Ye.map(oe=>Kt.has(oe)||oe.startsWith($t)?oe:`${$t}${oe}`)}})}}const je=w.z.object({profile:w.z.object({email:w.z.string().optional(),displayName:w.z.string().optional(),picture:w.z.string().optional()}),backstageIdentity:w.z.object({id:w.z.string(),token:w.z.string(),identity:w.z.object({type:w.z.literal("user"),userEntityRef:w.z.string(),ownershipEntityRefs:w.z.array(w.z.string())})})}),Fe={id:"saml",title:"SAML",icon:()=>null};class be{constructor(o){this.sessionManager=o}static create(o){const{discoveryApi:m,environment:I="development",provider:k=Fe}=o,G=new ye({discoveryApi:m,environment:I,provider:k}),Me=new j({connector:G}),Ye=new It({manager:Me,storageKey:`${k.id}Session`,schema:je});return new be(Ye)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(o={}){const m=await this.sessionManager.getSession(o);return m==null?void 0:m.backstageIdentity}async getProfile(o={}){const m=await this.sessionManager.getSession(o);return m==null?void 0:m.profile}}const pt={id:"microsoft",title:"Microsoft",icon:()=>null};class vt{static create(o){const{environment:m="development",provider:I=pt,oauthRequestApi:k,discoveryApi:G,defaultScopes:Me=["openid","offline_access","profile","email","User.Read"]}=o;return L.create({discoveryApi:G,oauthRequestApi:k,provider:I,environment:m,defaultScopes:Me})}}const ze={id:"onelogin",title:"onelogin",icon:()=>null},mt=new Set(["openid","profile","email","phone","address","groups","offline_access"]),_t="onelogin.";class Ie{static create(o){const{discoveryApi:m,environment:I="development",provider:k=ze,oauthRequestApi:G}=o;return L.create({discoveryApi:m,oauthRequestApi:G,provider:k,environment:I,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(Me){return Me.map(Ye=>mt.has(Ye)||Ye.startsWith(_t)?Ye:`${_t}${Ye}`)}})}}const ue={id:"bitbucket",title:"Bitbucket",icon:()=>null};class Ze{static create(o){const{discoveryApi:m,environment:I="development",provider:k=ue,oauthRequestApi:G,defaultScopes:Me=["team"]}=o;return L.create({discoveryApi:m,oauthRequestApi:G,provider:k,environment:I,defaultScopes:Me})}}const rt={id:"atlassian",title:"Atlassian",icon:()=>null};class le{static create(o){const{discoveryApi:m,environment:I="development",provider:k=rt,oauthRequestApi:G}=o;return L.create({discoveryApi:m,oauthRequestApi:G,provider:k,environment:I})}}class ie{constructor(){this.subject=new V}post(o){this.subject.next(o)}alert$(){return this.subject}}class ve{captureEvent(o){}}const fe="theme";class Ve{constructor(o){this.themes=o,this.subject=new he(void 0)}static createWithStorage(o){var m;const I=new Ve(o);if(!window.localStorage)return I;const k=(m=window.localStorage.getItem(fe))!=null?m:void 0;return I.setActiveThemeId(k),I.activeThemeId$().subscribe(G=>{G?window.localStorage.setItem(fe,G):window.localStorage.removeItem(fe)}),window.addEventListener("storage",G=>{var Me;if(G.key===fe){const Ye=(Me=localStorage.getItem(fe))!=null?Me:void 0;I.setActiveThemeId(Ye)}}),I}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(o){this.activeThemeId=o,this.subject.next(o)}}const Et="Invalid discovery URL pattern,";class ft{constructor(o){this.parts=o}static compile(o){const m=o.split(/\{\{\s*pluginId\s*\}\}/),I=m.join("pluginId");let k;try{k=new URL(I)}catch{throw new Error(`${Et} URL '${I}' is invalid`)}if(k.hash)throw new Error(`${Et} URL must not have a hash`);if(k.search)throw new Error(`${Et} URL must not have a query`);if(I.endsWith("/"))throw new Error(`${Et} URL must not end with a slash`);return new ft(m)}async getBaseUrl(o){return this.parts.join(o)}}class Wt{constructor(o,m){this.alertApi=o,this.errorApi=m}post(o,m){return m!=null&&m.hidden||this.alertApi.post({message:o.message,severity:"error"}),this.errorApi.post(o,m)}error$(){return this.errorApi.error$()}}class Yt{constructor(){this.subject=new V}post(o,m){this.subject.next({error:o,context:m})}error$(){return this.subject}}class ln{static forward(o,m){window.addEventListener("unhandledrejection",I=>{o.post(I.reason,m)})}}function gn(J){if(J.length<3)throw new Error(`The '${J}' feature flag must have a minimum length of three characters.`);if(J.length>150)throw new Error(`The '${J}' feature flag must not exceed 150 characters.`);if(!J.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${J}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class Sn{constructor(){this.registeredFeatureFlags=[]}registerFlag(o){gn(o.name),this.registeredFeatureFlags.push(o)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(o){return this.flags||(this.flags=this.load()),this.flags.get(o)===P.CL.Active}save(o){this.flags||(this.flags=this.load()),o.merge||this.flags.clear();for(const[I,k]of Object.entries(o.states))this.flags.set(I,k);const m=Array.from(this.flags.entries()).filter(([,I])=>I===P.CL.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(m)))}load(){try{const o=window.localStorage.getItem("featureFlags");if(!o)return new Map;const m=JSON.parse(o);if(typeof m!="object"||m===null||Array.isArray(m))return new Map;const I=Object.entries(m).filter(([k,G])=>(gn(k),G===P.CL.Active));return new Map(I)}catch{return new Map}}}function yn(J){var o;let m=J.baseImplementation||t.g.fetch;const I=[(o=J.middleware)!=null?o:[]].flat().reverse();for(const k of I)m=k.apply(m);return{fetch:m}}class Re{constructor(o,m,I,k){this.identityApi=o,this.allowUrl=m,this.headerName=I,this.headerValue=k}static create(o){var m,I;const k=Xe(o),G=((m=o.header)==null?void 0:m.name)||"authorization",Me=((I=o.header)==null?void 0:I.value)||(Ye=>`Bearer ${Ye}`);return new Re(o.identityApi,k,G,Me)}apply(o){return async(m,I)=>{const k=new Request(m,I),{token:G}=await this.identityApi.getCredentials();return k.headers.get(this.headerName)||typeof G!="string"||!G||!this.allowUrl(k.url)?o(m,I):(k.headers.set(this.headerName,this.headerValue(G)),o(k))}}}function Xe(J){return J.allowUrl?J.allowUrl:J.urlPrefixAllowlist?dt(J.urlPrefixAllowlist):J.config?dt([J.config.getString("backend.baseUrl")]):()=>!1}function dt(J){const o=J.map(m=>m.replace(/\/$/,""));return m=>o.some(I=>m===I||m.startsWith(`${I}/`))}function Gt(J,o){return!o||o==="/"?J:`${J.replace(/\/$/,"")}/${o.replace(/^\//,"")}`}class Bt{constructor(o){this.discoveryApi=o}apply(o){return async(m,I)=>{const k=new Request(m,I),G="plugin://";if(!k.url.startsWith(G))return o(m,I);const{hostname:Me,pathname:Ye,search:oe,hash:b,username:M,password:B}=new URL(`http://${k.url.substring(G.length)}`);let re=await this.discoveryApi.getBaseUrl(Me);if(M||B){const lt=new URL(re),qe=`${M}${B?`:${B}`:""}@`;re=`${lt.protocol}//${qe}${lt.host}${lt.pathname}`}const ke=`${Gt(re,Ye)}${oe}${b}`;return o(ke,k)}}}class rn{static resolvePluginProtocol(o){return new Bt(o.discoveryApi)}static injectIdentityAuth(o){return Re.create(o)}constructor(){}}function fn(J,o){for(const m of o)if(!J.has(m))return!1;return!0}function Pn(J,...o){const m=new Set(J);for(const I of o)for(const k of I)m.add(k);return m}class An{constructor(){this.requests=[],this.subject=new he(this.getCurrentPending())}request(o){return new Promise((m,I)=>{this.requests.push({scopes:o,resolve:m,reject:I}),this.subject.next(this.getCurrentPending())})}resolve(o,m){this.requests=this.requests.filter(I=>fn(o,I.scopes)?(I.resolve(m),!1):!0),this.subject.next(this.getCurrentPending())}reject(o){this.requests.forEach(m=>m.reject(o)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const o=this.requests.length===0?void 0:this.requests.slice(1).reduce((m,I)=>Pn(m,I.scopes),this.requests[0].scopes);return{scopes:o,resolve:m=>{o&&this.resolve(o,m)},reject:m=>{o&&this.reject(m)}}}}class _n{constructor(){this.subject=new he([]),this.currentRequests=[],this.handlerCount=0}createAuthRequester(o){const m=new An,I=this.handlerCount;return this.handlerCount++,m.pending().subscribe({next:k=>{const G=this.currentRequests.slice(),Me=this.makeAuthRequest(k,o);Me?G[I]=Me:delete G[I],this.currentRequests=G,this.subject.next(G.filter(Boolean))}}),k=>m.request(k)}makeAuthRequest(o,m){const{scopes:I}=o;if(!!I)return{provider:m.provider,trigger:async()=>{const k=await m.onAuthRequest(I);o.resolve(k)},reject:()=>{const k=new Error("Login failed, rejected by user");k.name="RejectedError",o.reject(k)}}}authRequest$(){return this.subject}}const Pe=new Map;class Ae{constructor(o,m){this.namespace=o,this.errorApi=m,this.subscribers=new Set,this.observable=new(R())(I=>(this.subscribers.add(I),()=>{this.subscribers.delete(I)}))}static create(o){var m;return new Ae((m=o.namespace)!=null?m:"",o.errorApi)}get(o){return this.snapshot(o).value}snapshot(o){let m,I="absent";try{const k=localStorage.getItem(this.getKeyName(o));k&&(m=JSON.parse(k,(G,Me)=>(typeof Me=="object"&&Me!==null&&Object.freeze(Me),Me)),I="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${o}`))}return{key:o,value:m,presence:I}}forBucket(o){const m=`${this.namespace}/${o}`;return Pe.has(m)||Pe.set(m,new Ae(m,this.errorApi)),Pe.get(m)}async set(o,m){localStorage.setItem(this.getKeyName(o),JSON.stringify(m)),this.notifyChanges(o)}async remove(o){localStorage.removeItem(this.getKeyName(o)),this.notifyChanges(o)}observe$(o){return this.observable.filter(({key:m})=>m===o)}getKeyName(o){return`${this.namespace}/${encodeURIComponent(o)}`}notifyChanges(o){const m=this.snapshot(o);for(const I of this.subscribers)I.next(m)}}function _(J){const o={};for(const I in J.collectors)J.collectors.hasOwnProperty(I)&&(o[I]=J.collectors[I]());const m=[{node:e.Children.toArray(J.root),parent:void 0,contexts:{}}];for(;m.length!==0;){const{node:I,parent:k,contexts:G}=m.shift();e.Children.forEach(I,Me=>{if(!(0,e.isValidElement)(Me))return;const Ye={};for(const oe in o)if(o.hasOwnProperty(oe)){const b=o[oe];Ye[oe]=b.visit(b.accumulator,Me,k,G[oe])}for(const oe of J.discoverers){const b=oe(Me);b&&m.push({node:b,parent:Me,contexts:Ye})}})}return Object.fromEntries(Object.entries(o).map(([I,k])=>[I,k.accumulator]))}function S(J,o){return()=>({accumulator:J(),visit:o})}function x(J){var o;return(o=J.props)==null?void 0:o.children}function ee(J){var o,m,I;if(((o=J.props)==null?void 0:o.path)&&((m=J.props)==null?void 0:m.element))return(I=J.props)==null?void 0:I.element}const Ee=S(()=>new Set,(J,o)=>{const m=(0,P.IY)(o,"core.plugin");m&&J.add(m)}),_e=J=>{const{children:o}=J,m=(0,P.h_)(P.W0),I="with"in J?m.isActive(J.with):!m.isActive(J.without);return e.createElement(e.Fragment,null,I?o:null)};(0,P.R5)(_e,"core.featureFlagged",!0);function We(J){var o;const m=(o=J.props)==null?void 0:o.element;let I=(0,P.IY)(J,"core.mountPoint");return!I&&(0,e.isValidElement)(m)&&(I=(0,P.IY)(m,"core.mountPoint")),I}const yt=S(()=>new Map,(J,o,m,I)=>{var k,G;let Me=I;if((m==null?void 0:m.props.element)===o)return Me;if((0,P.IY)(o,"core.gatherMountPoints")){const oe=(k=o.props)==null?void 0:k.path;if(!oe)throw new Error("Mount point gatherer must have a path");Me=oe}const Ye=We(o);if(Ye){let oe=(G=o.props)==null?void 0:G.path;if(Me&&(oe?Me=void 0:oe=Me),!oe)throw new Error("Mounted routable extension must have a path");J.set(Ye,oe)}return Me}),kt=S(()=>new Map,(J,o,m,I)=>{var k;if((m==null?void 0:m.props.element)===o)return I;let G=I;const Me=We(o);return Me&&(I&&"sticky"in I?(J.set(Me,I.sticky),(k=o.props)!=null&&k.path?G=Me:G=I):(J.set(Me,I),G=Me)),(0,P.IY)(o,"core.gatherMountPoints")?{sticky:G}:G}),Ft={caseSensitive:!1,path:"/*",element:"match-all",routeRefs:new Set},bt=S(()=>Array(),(J,o,m,I)=>{var k,G,Me;const Ye=(k=I==null?void 0:I.children)!=null?k:J;if((m==null?void 0:m.props.element)===o)return I;const oe=(G=o.props)==null?void 0:G.path,b=Boolean((Me=o.props)==null?void 0:Me.caseSensitive),M=We(o);if(M){if(oe){const re={caseSensitive:b,path:oe,element:"mounted",routeRefs:new Set([M]),children:[Ft],plugin:(0,P.IY)(o.props.element,"core.plugin")};return Ye.push(re),re}I==null||I.routeRefs.add(M)}if((0,P.IY)(o,"core.gatherMountPoints")){if(!oe)throw new Error("Mount point gatherer must have a path");const re={caseSensitive:b,path:oe,element:"gathered",routeRefs:new Set,children:[Ft],plugin:I==null?void 0:I.plugin};return Ye.push(re),re}return I}),mn=S(()=>new Set,(J,o)=>{if(o.type===_e){const m=o.props;J.add("with"in m?m.with:m.without)}}),cn=(0,s.uW)("route-ref-type",()=>Symbol("route-ref-type"));function wn(J){return J[cn]==="absolute"}function Ce(J){return J[cn]==="sub"}function $e(J){return J[cn]==="external"}function Je(...J){const o=J.join("/").replace(/\/\/+/g,"/");return o!=="/"&&o.endsWith("/")?o.slice(0,-1):o}function He(J,o,m){let I,k="";if(wn(J))I=J;else if(Ce(J))I=J.parent,k=J.path;else if($e(J)){const Ye=m.get(J);if(!Ye)return[void 0,""];if(wn(Ye))I=Ye;else if(Ce(Ye))I=Ye.parent,k=Ye.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${Ye}`)}else throw J[cn]?new Error(`Unknown or invalid route ref type, ${J[cn]}`):new Error(`Unknown object passed to useRouteRef, got ${J}`);if(!I)return[void 0,""];const G=o.get(I);if(!G)return[void 0,""];const Me=Je(G,k);return[I,Me]}function et(J,o,m,I,k){var G;const Me=(G=(0,p.fp)(k,o))!=null?G:[],Ye=Array();let oe=-1;for(let B=J;B&&(oe=Me.findIndex(re=>re.route.routeRefs.has(B)),oe===-1);B=I.get(B))Ye.unshift(B);Ye.length===0&&(oe-=1);const b=oe===-1?"":Me[oe].pathname,M=Je(...Ye.slice(0,-1).map(B=>{const re=m.get(B);if(!re)throw new Error(`No path for ${B}`);if(re.includes(":"))throw new Error(`Cannot route to ${J} with parent ${B} as it has parameters`);return re}));return b+M}class Q{constructor(o,m,I,k,G){this.routePaths=o,this.routeParents=m,this.routeObjects=I,this.routeBindings=k,this.appBasePath=G}resolve(o,m){const[I,k]=He(o,this.routePaths,this.routeBindings);if(!I)return;let G;typeof m=="string"?G=this.trimPath(m):m.pathname?G={...m,pathname:this.trimPath(m.pathname)}:G=m;const Me=this.appBasePath+et(I,G,this.routePaths,this.routeParents,this.routeObjects);return(...[oe])=>Me+(0,p.Gn)(k,oe)}trimPath(o){return o&&(o.startsWith(this.appBasePath)?o.slice(this.appBasePath.length):o)}}const ne=(0,s.CT)("routing-context"),ce=({routePaths:J,routeParents:o,routeObjects:m,routeBindings:I,basePath:k="",children:G})=>{const Me=new Q(J,o,m,I,k),Ye=(0,s.EI)({1:Me});return e.createElement(ne.Provider,{value:Ye},G)},me=(J,o)=>{var m,I;try{const k=(0,p.fp)(o,{pathname:J}),G=(m=k==null?void 0:k.filter(Ye=>{var oe;return((oe=Ye==null?void 0:Ye.route.routeRefs)==null?void 0:oe.size)>0}).pop())==null?void 0:m.route;if(!G)return{};let Me;return G.routeRefs.size===1&&(Me=G.routeRefs.values().next().value),{extension:"App",pluginId:((I=G.plugin)==null?void 0:I.getId())||"root",...Me?{routeRef:Me.id}:{}}}catch{return{}}},tt=({pathname:J,search:o,hash:m})=>{const I=(0,P.z$)();return(0,e.useEffect)(()=>{I.captureEvent("navigate",`${J}${o}${m}`)},[I,J,o,m]),null},ht=({tree:J})=>{const{pathname:o,search:m,hash:I}=(0,p.TH)(),{routeObjects:k}=(0,e.useMemo)(()=>_({root:J,discoverers:[x,ee],collectors:{routeObjects:bt}}),[J]);return e.createElement(P.fC,{attributes:me(o,k)},e.createElement(tt,{pathname:o,search:m,hash:I}))};function st(J,o){const m=new Set(o.values());m.delete(void 0);for(const I of o.keys()){if(m.has(I))continue;let k=I,G="";for(;k;){const Ye=J.get(k);if(!Ye)throw new Error(`No path for ${k}`);G=`${Ye}${G}`,k=o.get(k)}const Me=G.match(/:(\w+)/g);if(Me){for(let Ye=0;Ye<Me.length;Ye++)for(let oe=Ye+1;oe<Me.length;oe++)if(Me[oe]===Me[Ye])throw new Error(`Parameter ${Me[oe]} is duplicated in path ${G}`)}}}function Dt(J,o){for(const m of o)if(!!m.externalRoutes){for(const[I,k]of Object.entries(m.externalRoutes))if(!k.optional&&!J.has(k))throw new Error(`External route '${I}' of the '${m.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const qt=(0,s.CT)("app-context"),un=({appContext:J,children:o})=>{const m=(0,s.EI)({1:J});return e.createElement(qt.Provider,{value:m,children:o})};function Ut(J){return new Error(`Tried to access IdentityApi ${J} before app was loaded`)}function Lt(J){console.warn(`WARNING: Call to ${J} is deprecated and will break in the future`)}class Vt{constructor(){this.resolveTarget=()=>{},this.waitForTarget=new Promise(o=>{this.resolveTarget=o})}setTarget(o){this.target=o,this.resolveTarget(o)}getUserId(){if(!this.target)throw Ut("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return Lt("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw Ut("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return Lt("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(o=>o.getProfileInfo())}async getBackstageIdentity(){const o=await this.waitForTarget.then(m=>m.getBackstageIdentity());return o.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${o.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),o}async getCredentials(){return this.waitForTarget.then(o=>o.getCredentials())}async getIdToken(){return this.waitForTarget.then(o=>{if(!o.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return Lt("getIdToken"),o.getIdToken()})}async signOut(){await this.waitForTarget.then(o=>o.signOut()),location.reload()}}function on(J,o,m){if(J!==void 0){const k=m.find(G=>G.id===J);if(k)return k}if(o){const k=m.find(G=>G.variant==="dark");if(k)return k}const I=m.find(k=>k.variant==="light");return I||m[0]}const sn=()=>{const J=(0,e.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[o,m]=(0,e.useState)(J.matches);return(0,e.useEffect)(()=>{const I=k=>{m(k.matches)};return J.addListener(I),()=>{J.removeListener(I)}},[J]),o};function X({children:J}){const o=(0,P.h_)(P.hg),m=(0,A.Z)(o.activeThemeId$(),o.getActiveThemeId()),I=Boolean(window.matchMedia)?sn():!1,k=on(m,I,o.getInstalledThemes());if(!k)throw new Error("App has no themes");return e.createElement(k.Provider,{children:J})}const Ne=async(J="__APP_INJECTED_RUNTIME_CONFIG__")=>{const o=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"http://localhost:7007"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"local"},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!o)throw new Error("No static configuration provided");if(!Array.isArray(o))throw new Error("Static configuration has invalid format");const m=o.slice();if(J!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const k=JSON.parse(J);Array.isArray(k)?m.push(...k):m.push({data:k,context:"env"})}catch(k){throw new Error(`Failed to load runtime configuration, ${k}`)}const I=window.__APP_CONFIG__;return I&&m.push({context:"window",data:I}),m};class it{constructor(){this.apis=[]}add(o,m){return this.apis.push([o.id,m]),m}build(){return new St(new Map(this.apis))}}class St{constructor(o){this.apis=o}static builder(){return new it}static from(o){return new St(new Map(o.map(([m,I])=>[m.id,I])))}static with(o,m){return new St(new Map([[o.id,m]]))}with(o,m){return new St(new Map([...this.apis,[o.id,m]]))}get(o){return this.apis.get(o.id)}}function at(J){const o=new Map;return J&&J({bind:(I,k)=>{for(const[G,Me]of Object.entries(k)){const Ye=I[G];if(!Ye)throw new Error(`Key ${G} is not an existing external route`);if(!Me&&!Ye.optional)throw new Error(`External route ${G} is required but was undefined`);Me&&o.set(Ye,Me)}}}),o}function Ot(J){var o;let{pathname:m}=new URL((o=J.getOptionalString("app.baseUrl"))!=null?o:"/","http://dummy.dev");return m=m.replace(/\/*$/,""),m}function wt(J,o,m){var I;const k=Boolean(J),G=(0,d.default)(J||(()=>Promise.resolve([])));let Me;if(k&&G.loading){const{Progress:b}=o;Me=e.createElement(b,null)}else if(G.error){const{BootErrorPage:b}=o;Me=e.createElement(b,{step:"load-config",error:G.error})}const{ThemeProvider:Ye=X}=o;return Me?{node:e.createElement(Z,{apis:St.with(P.hg,m)},e.createElement(Ye,null,Me))}:{api:U.fromConfigs((I=G.value)!=null?I:[])}}class hn{constructor(o){this.app=o}getPlugins(){return this.app.getPlugins()}getSystemIcon(o){return this.app.getSystemIcon(o)}getComponents(){return this.app.getComponents()}}class pn{constructor(o){this.appIdentityProxy=new Vt;var m,I,k,G;this.apis=(m=o.apis)!=null?m:[],this.icons=o.icons,this.plugins=new Set((I=o.plugins)!=null?I:[]),this.components=o.components,this.themes=o.themes,this.configLoader=(k=o.configLoader)!=null?k:Ne,this.defaultApis=(G=o.defaultApis)!=null?G:[],this.bindRoutes=o.bindRoutes,this.apiFactoryRegistry=new we}getPlugins(){return Array.from(this.plugins)}getSystemIcon(o){return this.icons[o]}getComponents(){return this.components}getProvider(){const o=new hn(this);let m=!1;return({children:k})=>{const G=(0,e.useMemo)(()=>Ve.createWithStorage(this.themes),[]),{routePaths:Me,routeParents:Ye,routeObjects:oe,featureFlags:b,routeBindings:M}=(0,e.useMemo)(()=>{const lt=_({root:k,discoverers:[x,ee],collectors:{routePaths:yt,routeParents:kt,routeObjects:bt,collectedPlugins:Ee,featureFlags:mn}});return lt.collectedPlugins.forEach(qe=>this.plugins.add(qe)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...lt,routeBindings:at(this.bindRoutes)}},[k]);m||(m=!0,st(Me,Ye),Dt(M,this.plugins));const B=wt(this.configLoader,this.components,G),re="api"in B;if(re){const{api:lt}=B;this.configApi=lt}if((0,e.useEffect)(()=>{if(re){const lt=this.getApiHolder().get(P.W0);for(const qe of this.plugins.values())if("getFeatureFlags"in qe)for(const Rt of qe.getFeatureFlags())lt.registerFlag({name:Rt.name,pluginId:qe.getId()});else for(const Rt of qe.output())Rt.type==="feature-flag"&&lt.registerFlag({name:Rt.name,pluginId:qe.getId()});for(const qe of b)lt.registerFlag({name:qe,pluginId:""})}},[re,B,b]),"node"in B)return B.node;const{ThemeProvider:ke=X}=this.components;return e.createElement(Z,{apis:this.getApiHolder()},e.createElement(un,{appContext:o},e.createElement(ke,null,e.createElement(ce,{routePaths:Me,routeParents:Ye,routeObjects:oe,routeBindings:M,basePath:Ot(B.api)},k))))}}getRouter(){const{Router:o,SignInPage:m}=this.components,I=({component:G,children:Me})=>{const[Ye,oe]=(0,e.useState)();return Ye?(this.appIdentityProxy.setTarget(Ye),Me):e.createElement(G,{onSignInSuccess:oe})};return({children:G})=>{const Me=(0,P.h_)(P.Ds),Ye=`${Ot(Me)}/*`;return m?e.createElement(o,null,e.createElement(ht,{tree:G}),e.createElement(I,{component:m},e.createElement(p.Z5,null,e.createElement(p.AW,{path:Ye,element:e.createElement(e.Fragment,null,G)})))):(this.appIdentityProxy.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}}),e.createElement(o,null,e.createElement(ht,{tree:G}),e.createElement(p.Z5,null,e.createElement(p.AW,{path:Ye,element:e.createElement(e.Fragment,null,G)}))))}}getApiHolder(){if(this.apiHolder){for(const o of this.plugins)for(const m of o.getApis())this.apiFactoryRegistry.get(m.api)||this.apiFactoryRegistry.register("default",m);return F.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:P.hg,deps:{},factory:()=>Ve.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:P.Ds,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:P.$4,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("default",{api:P.W0,deps:{},factory:()=>new Sn});for(const o of this.defaultApis)this.apiFactoryRegistry.register("default",o);for(const o of this.plugins)for(const m of o.getApis())if(!this.apiFactoryRegistry.register("default",m))throw new Error(`Plugin ${o.getId()} tried to register duplicate or forbidden API factory for ${m.api}`);for(const o of this.apis)if(!this.apiFactoryRegistry.register("app",o))throw new Error(`Duplicate or forbidden API factory for ${o.api} in app`);return F.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new F(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(o){const m=new Set;for(const I of o){const k=I.getId();if(m.has(k))throw new Error(`Duplicate plugin found '${k}'`);m.add(k)}}}function Xt(J){return new pn(J)}const En=J=>{const o=(0,P.qD)(),{NotFoundErrorPage:m}=o.getComponents(),I=(0,P.vJ)(J.children,k=>k.getElements().flatMap(G=>{var Me;let Ye=G.props.path;return Ye===""?[]:(Ye=(Me=Ye==null?void 0:Ye.replace(/\/\*$/,""))!=null?Me:"/",[{path:Ye,element:G,children:G.props.children?[{path:Ye==="/"?"/":"/*",element:G.props.children}]:void 0}])}).sort((G,Me)=>Me.path.localeCompare(G.path)).map(G=>(G.path=G.path==="/"?"/":`${G.path}/*`,G)));return I.push({element:e.createElement(m,null),path:"/*"}),(0,p.V$)(I)}},49558:function(Tt,l,t){t.d(l,{in:function(){return m},qE:function(){return Me},Oo:function(){return oo},zx:function(){return B},hB:function(){return ul},db:function(){return ys},Oi:function(){return ke},VY:function(){return Xa},yW:function(){return ro},XF:function(){return lt},mn:function(){return ca},NX:function(){return Qt},zG:function(){return vs},ub:function(){return Sa},mf:function(){return $i},yu:function(){return Ht},h4:function(){return Qa},M6:function(){return aa},i9:function(){return so},aR:function(){return Jr},rJ:function(){return ka},Oh:function(){return zi},hu:function(){return lo},rU:function(){return b},nU:function(){return vo},SA:function(){return Po},sk:function(){return br},J3:function(){return Ro},Or:function(){return Oo},T3:function(){return qa},g9:function(){return Vi},Ex:function(){return Va},Gk:function(){return vn},tn:function(){return Yr},Ph:function(){return Rr},YE:function(){return xs},lm:function(){return Aa},v7:function(){return Hr},Hz:function(){return dr},R6:function(){return Vr},tR:function(){return As},qn:function(){return Ua},oz:function(){return Ys},BV:function(){return Gs},dh:function(){return Qo},vK:function(){return Jo},Kq:function(){return Ho},wA:function(){return Yo},VC:function(){return Xo},Pd:function(){return Go},xT:function(){return ps},uw:function(){return si},qt:function(){return Ss},oZ:function(){return ll},WD:function(){return Qr},iA:function(){return gi},GB:function(){return xt},po:function(){return Hn},r0:function(){return ur},tA:function(){return gs}});var e=t(2784),i=t(37265),h=t(61837),s=t(87685),n=t(99688),R=t(30705),P=t(19928),w=t.n(P),u=t(79692),y=t(12420),O=t(60364),K=t(41128),D=t(15459),g=t(76600),T=t(41547),f=t(43434),U=t(77277),p=t(86689),d=t(62833),A=t(10289),N=t(80030),c=t(19353),Z=t(95074),F=t(56553),te=t(26639),we=t(39595),ct=t(41156),nt=t(88188),se=t(40007),ye=t(11105),Le=t(97963),de=t(46506),V=t.n(de),he=t(54073),C=t.n(he),Ke=t(10368),j=t(55876),It=t(66481),Be=t(19574),L=t.n(Be),Y=t(72164),z=t(72779),ge=t.n(z),Ue=t(60905),xe=t(90436),At=t.p+"static/missingAnnotation.67f79e98..svg",nn=t.p+"static/noInformation.4b426325..svg",ut=t.p+"static/createComponent.975d1e1e..svg",Kt=t.p+"static/noBuild.1715fa71..svg",$t=t(11776),Pt=t(38402),je=t(49378),Fe=t(27616),be=t(8284),pt=t(70660),vt=t(91750),ze=t(38016),mt=t(85256),_t=t(1292),Ie=t(47093),ue=t(35292),Ze=t(48049),rt=t(51209),le=t(64897),ie=t(96444),ve=t(8629),fe=t(49429),Ve=t(38724),Et=t(79249),ft=t(3806),Wt=t(32272),Yt=t(15277),ln=t.n(Yt),gn=t(29862),Sn=t(80277),yn=t(67358),Re=t(94339),Xe=t(14503),dt=t(24579),Gt=t(32552),Bt=t(95544),rn=t(27597),fn=t(39307),Pn=t(21324),An=t(7089),_n=t(42494),Pe=t(74603),Ae=t(12231),_=t(73698),S=t(72379),x=t(74600),ee=t.n(x),Ee=t(37390),_e=t(97485),We=t(15584),yt=t(89571),kt=t(86136),Ft=t(79784),bt=t(76635),mn=t(19126),cn=t.n(mn),wn=t(80079),Ce=t(18671),$e=t(50023),Je=t(4190),He=t(44882),et=t(57998),Q=t(83543),ne=t(59797),ce=t(26739),me=t(86619),tt=t(98989),ht=t(6487),st=t(99152),Dt=t(21070),qt=t(90324),un=t(98281),Ut=t(33375),Lt=t(44233),Vt=t(27604),on=t(36444),sn=t(37971),X=t(59709),Ne=t(17373),it=t(3702),St=t(93111),at=t(67222),Ot=t(44311),wt=t.p+"static/mic-drop.fe3ef4d0..svg",hn=t(16173),pn=t(30195),Xt=t(63955),En=t(74828),J=t(45455),o=t.n(J);function m(a){const[r,E]=(0,e.useState)([]),v=(0,R.h_)(R.$v);if((0,e.useEffect)(()=>{const q=v.alert$().subscribe(pe=>E(De=>De.concat(pe)));return()=>{q.unsubscribe()}},[v]),r.length===0)return null;const[$]=r,W=()=>{E(q=>q.filter(pe=>pe!==$))};return e.createElement(i.Z,{open:!0,anchorOrigin:{vertical:"top",horizontal:"center"}},e.createElement(n.Z,{action:e.createElement(h.Z,{color:"inherit",size:"small",onClick:W,"data-testid":"error-button-close"},e.createElement(s.Z,null)),severity:$.severity},e.createElement("span",null,$.message.toString(),r.length>1&&e.createElement("em",null,` (${r.length-1} older ${w()("message",r.length-1)})`))))}function I(a){let r=0;for(let v=0;v<a.length;v++)r=a.charCodeAt(v)+((r<<5)-r);let E="#";for(let v=0;v<3;v++)E+=`00${(r>>v*8&255).toString(16)}`.substr(-2);return E}function k(a){var r;return(r=a.match(/\b\w/g))==null?void 0:r.join("").substring(0,2)}const G=(0,u.Z)(a=>(0,y.Z)({avatar:{width:"4rem",height:"4rem",color:"#fff",fontWeight:a.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function Me(a){const{displayName:r,picture:E,customStyles:v}=a,$=G();return e.createElement(f.Z,{alt:r,src:E,className:$.avatar,style:{backgroundColor:I(r||E||""),...v}},r&&k(r))}const Ye=a=>/^([a-z+.-]+):/.test(a),oe=a=>{var r;return a instanceof Array?a.map(oe).join(" ").trim():typeof a=="object"&&a?oe((r=a==null?void 0:a.props)==null?void 0:r.children):["string","number"].includes(typeof a)?String(a):""},b=e.forwardRef(({onClick:a,noTrack:r,...E},v)=>{const $=(0,R.z$)(),W=String(E.to),q=oe(E.children)||W,pe=Ye(W),De=pe&&!!/^https?:/.exec(W),Oe=Qe=>{a==null||a(Qe),r||$.captureEvent("click",q,{attributes:{to:W}})};return pe?e.createElement(p.Z,{ref:v,href:W,onClick:Oe,...De?{target:"_blank",rel:"noopener"}:{},...E}):e.createElement(p.Z,{ref:v,component:d.rU,onClick:Oe,...E})}),M=e.forwardRef((a,r)=>e.createElement(b,{ref:r,...a,color:"initial"})),B=e.forwardRef((a,r)=>e.createElement(U.Z,{ref:r,component:M,...a}));function re(a){const{text:r,tooltipDelay:E=1e3,tooltipText:v="Text copied to clipboard"}=a,$=(0,R.h_)(R.VE),[W,q]=(0,e.useState)(!1),[{error:pe},De]=(0,Z.Z)();(0,e.useEffect)(()=>{pe&&$.post(pe)},[pe,$]);const Oe=Qe=>{Qe.stopPropagation(),q(!0),De(r)};return e.createElement(e.Fragment,null,e.createElement(N.ZP,{id:"copy-test-tooltip",title:v,placement:"top",leaveDelay:E,onClose:()=>q(!1),open:W},e.createElement(h.Z,{onClick:Oe},e.createElement(c.Z,null))))}function ke(a){const{text:r,language:E,showLineNumbers:v=!1,highlightedNumbers:$,customStyle:W,showCopyCodeButton:q=!1}=a,pe=(0,O.Z)(),De=pe.palette.type==="dark"?te.Z:we.Z,Oe=pe.palette.type==="dark"?"#256bf3":"#e6ffed";return e.createElement("div",{style:{position:"relative"}},e.createElement(F.Z,{customStyle:W,language:E,style:De,showLineNumbers:v,wrapLines:!0,lineNumberStyle:{color:pe.palette.textVerySubtle},lineProps:Qe=>$!=null&&$.includes(Qe)?{style:{backgroundColor:Oe}}:{}},r),q&&e.createElement("div",{style:{position:"absolute",top:0,right:0}},e.createElement(re,{text:r})))}function lt(a){const{title:r,to:E}=a,v=(0,ct.Z)($=>$.breakpoints.down("xs"));return E?v?e.createElement(h.Z,{component:d.rU,color:"primary",title:r,size:"small",to:E},e.createElement(nt.Z,null)):e.createElement(U.Z,{component:d.rU,variant:"contained",color:"primary",to:E},r):null}var qe=(a=>(a.TOP_BOTTOM="TB",a.BOTTOM_TOP="BT",a.LEFT_RIGHT="LR",a.RIGHT_LEFT="RL",a))(qe||{}),Rt=(a=>(a.UP_LEFT="UL",a.UP_RIGHT="UR",a.DOWN_LEFT="DL",a.DOWN_RIGHT="DR",a))(Rt||{}),zt=(a=>(a.NETWORK_SIMPLEX="network-simplex",a.TIGHT_TREE="tight-tree",a.LONGEST_PATH="longest-path",a))(zt||{}),an=(a=>(a.LEFT="l",a.RIGHT="r",a.CENTER="c",a))(an||{}),Qt=Object.freeze({__proto__:null,Direction:qe,Alignment:Rt,Ranker:zt,LabelPosition:an});const Cn=(0,u.Z)(a=>({node:{fill:a.palette.primary.light,stroke:a.palette.primary.light},text:{fill:a.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function Zt({node:{id:a}}){const r=Cn(),[E,v]=e.useState(0),[$,W]=e.useState(0),q=e.useRef(null);e.useLayoutEffect(()=>{if(q.current){let{height:Qe,width:gt}=q.current.getBBox();Qe=Math.round(Qe),gt=Math.round(gt),(Qe!==$||gt!==E)&&(v(gt),W(Qe))}},[E,$]);const pe=10,De=E+pe*2,Oe=$+pe*2;return e.createElement("g",null,e.createElement("rect",{className:r.node,width:De,height:Oe,rx:10}),e.createElement("text",{ref:q,className:r.text,y:Oe/2,x:De/2,textAnchor:"middle",alignmentBaseline:"middle"},a))}const Rn="arrow-marker",Fn="node",zn="edge",Zn="label",oa=(0,Ke.Z)(a=>({node:{transition:`${a.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),sa=a=>e.createElement(Zt,{...a});function ya({render:a=sa,setNode:r,node:E}){const{width:v,height:$,x:W=0,y:q=0}=E,pe=E,De=oa(),Oe=e.useRef(null);return e.useLayoutEffect(()=>{if(Oe.current){let{height:Qe,width:gt}=Oe.current.getBBox();Qe=Math.round(Qe),gt=Math.round(gt),(Qe!==$||gt!==v)&&r(E.id,{...E,height:Qe,width:gt})}},[E,v,$,r]),e.createElement("g",{ref:Oe,"data-testid":Fn,className:De.node,transform:`translate(${W-v/2},${q-$/2})`},a({node:pe}))}const va=(0,Ke.Z)(a=>({text:{fill:a.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function Bn({edge:{label:a}}){const r=va();return e.createElement("text",{className:r.text,textAnchor:"middle"},a)}const Mn=(0,Ke.Z)(a=>({path:{strokeWidth:2,stroke:a.palette.textSubtle,fill:"none",transition:`${a.transitions.duration.shortest}ms`},label:{transition:`${a.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),Nn=a=>e.createElement(Bn,{...a}),Xn=j.Z().x(a=>a.x).y(a=>a.y).curve(It.Z);function ta({render:a=Nn,setEdge:r,id:E,edge:v}){const{x:$=0,y:W=0,width:q,height:pe,points:De}=v,Oe=v,Qe=Mn(),gt=e.useRef(null);e.useLayoutEffect(()=>{if(gt.current){let{height:Nt,width:jt}=gt.current.getBBox();Nt=Math.round(Nt),jt=Math.round(jt),(Nt!==pe||jt!==q)&&r(E,{...v,height:Nt,width:jt})}},[v,pe,q,r,E]);let Mt="";if(De){const Nt=De.filter(jt=>L()(jt.x)&&L()(jt.y));Mt=Xn(Nt)||""}return e.createElement(e.Fragment,null,Mt&&e.createElement("path",{"data-testid":zn,className:Qe.path,markerEnd:`url(#${Rn})`,d:Mt}),Oe.label?e.createElement("g",{ref:gt,"data-testid":Zn,className:Qe.label,transform:`translate(${$},${W})`},a({edge:Oe})):null)}const ia="workspace";function ca(a){var r,E;const{edges:v,nodes:$,renderNode:W,direction:q=qe.TOP_BOTTOM,align:pe,nodeMargin:De=50,edgeMargin:Oe=10,rankMargin:Qe=50,paddingX:gt=0,paddingY:Mt=0,acyclicer:Nt,ranker:jt=zt.NETWORK_SIMPLEX,labelPosition:On=an.RIGHT,labelOffset:xn=10,edgeRanks:Gn=1,edgeWeight:jn=1,renderLabel:In,defs:Dn,zoom:$n="enabled",...ea}=a,wa=(0,Le.Z)(),[ma,Fa]=e.useState(100),[Ra,Ka]=e.useState(100),kn=e.useRef(new(V()).graphlib.Graph),[Oa,yr]=e.useState(((r=kn.current.graph())==null?void 0:r.width)||0),[Ia,nr]=e.useState(((E=kn.current.graph())==null?void 0:E.height)||0),[vr,Jn]=e.useState([]),[Ca,Ta]=e.useState([]),fa=Math.max(Oa,ma),Wn=Math.max(Ia,Ra),ra=e.useMemo(()=>C()(Vn=>{if(!Vn)return;const Yn=ye.Z(Vn),Kn=ye.Z(Vn.getElementById(ia));function ga(){Yn.call(se.sP().scaleExtent([1,10]).on("zoom",Pa=>{Pa.transform.x=Math.min(0,Math.max(Pa.transform.x,fa-fa*Pa.transform.k)),Pa.transform.y=Math.min(0,Math.max(Pa.transform.y,Wn-Wn*Pa.transform.k)),Kn.attr("transform",Pa.transform)}))}$n==="enabled"?ga():$n==="enable-on-click"&&Yn.on("click",()=>ga());const{width:Ea,height:ar}=Vn.getBoundingClientRect();ma!==Ea&&Fa(Ea),Ra!==ar&&Ka(ar)},100),[Ra,ma,fa,Wn,$n]),$a=e.useCallback(()=>{const Vn=kn.current.nodes(),Yn=kn.current.edges();Vn.forEach(Kn=>{$.some(Ea=>Ea.id===Kn)||kn.current.removeNode(Kn)}),Yn.forEach(Kn=>{v.some(Ea=>Ea.from===Kn.v&&Ea.to===Kn.w)||kn.current.removeEdge(Kn.v,Kn.w)}),$.forEach(Kn=>{const ga=kn.current.nodes().find(Ea=>Kn.id===Ea);if(ga&&kn.current.node(ga)){const{width:Ea,height:ar,x:Pa,y:ml}=kn.current.node(ga);kn.current.setNode(ga,{...Kn,width:Ea,height:ar,x:Pa,y:ml})}else kn.current.setNode(Kn.id,{...Kn,width:0,height:0})}),v.forEach(Kn=>{kn.current.setEdge(Kn.from,Kn.to,{...Kn,label:Kn.label,width:0,height:0,labelpos:On,labeloffset:xn,weight:jn,minlen:Gn})})},[v,$,On,xn,jn,Gn]),ha=e.useMemo(()=>C()(()=>{V().layout(kn.current);const{height:Vn,width:Yn}=kn.current.graph(),Kn=Math.max(0,Vn||0),ga=Math.max(0,Yn||0);yr(ga),nr(Kn),Jn(kn.current.nodes()),Ta(kn.current.edges())},250,{leading:!0}),[]);e.useEffect(()=>(kn.current.setGraph({rankdir:q,align:pe,nodesep:De,edgesep:Oe,ranksep:Qe,marginx:gt,marginy:Mt,acyclicer:Nt,ranker:jt}),$a(),ha(),ha.cancel),[Nt,pe,q,Oe,gt,Mt,De,Qe,jt,$a,ha]);function za(Vn,Yn){return kn.current.setNode(Vn,Yn),ha(),kn.current}function dl(Vn,Yn){return kn.current.setEdge(Vn,Yn),ha(),kn.current}return e.createElement("svg",{ref:ra,...ea,width:"100%",height:Wn,viewBox:`0 0 ${fa} ${Wn}`},e.createElement("defs",null,e.createElement("marker",{id:Rn,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},e.createElement("path",{fill:wa.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Dn),e.createElement("g",{id:ia},e.createElement("svg",{width:Oa,height:Ia,y:Wn/2-Ia/2,x:fa/2-Oa/2,viewBox:`0 0 ${Oa} ${Ia}`},Ca.map(Vn=>{const Yn=kn.current.edge(Vn);return Yn?e.createElement(ta,{key:`${Vn.v}-${Vn.w}`,id:Vn,setEdge:dl,render:In,edge:Yn}):null}),vr.map(Vn=>{const Yn=kn.current.node(Vn);return Yn?e.createElement(ya,{key:Vn,setNode:za,render:W,node:Yn}):null}))))}const na=(0,u.Z)(a=>{var r;return{root:{padding:a.spacing(0),marginBottom:a.spacing(0),marginTop:a.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:a.spacing(6),marginTop:-a.spacing(3),zIndex:"unset"},icon:{fontSize:20},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap"},message:{display:"flex",alignItems:"center",color:a.palette.banner.text,"& a":{color:a.palette.banner.link}},info:{backgroundColor:a.palette.banner.info},error:{backgroundColor:a.palette.banner.error},warning:{backgroundColor:(r=a.palette.banner.warning)!=null?r:a.palette.banner.error}}},{name:"BackstageDismissableBanner"}),ja=a=>{var r;const{variant:E,message:v,id:$,fixed:W=!1}=a,q=na(),De=useApi(storageApiRef).forBucket("notifications"),Oe=(r=De.snapshot("dismissedBanners").value)!=null?r:[],[Qe,gt]=useState(new Set(Oe)),Mt=useObservable(De.observe$("dismissedBanners"));useEffect(()=>{var jt;if(Mt!=null&&Mt.value){const On=(jt=Mt==null?void 0:Mt.value)!=null?jt:[];gt(new Set(On))}},[Mt==null?void 0:Mt.value]);const Nt=()=>{De.set("dismissedBanners",[...Qe,$])};return React.createElement(Snackbar,{anchorOrigin:W?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!Qe.has($),classes:{root:classNames(q.root,!W&&q.topPosition)}},React.createElement(SnackbarContent,{classes:{root:classNames(q.content,q[E]),message:q.message},message:v,action:[React.createElement(IconButton,{key:"dismiss",title:"Permanently dismiss this message",color:"inherit",onClick:Nt},React.createElement(CloseIcon,{className:q.icon}))]}))},Na=(0,u.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),Wa=({missing:a})=>{const r=Na();switch(a){case"field":return e.createElement("img",{src:At,className:r.generalImg,alt:"annotation is missing"});case"info":return e.createElement("img",{src:nn,alt:"no Information",className:r.generalImg});case"content":return e.createElement("img",{src:ut,alt:"create Component",className:r.generalImg});case"data":return e.createElement("img",{src:Kt,alt:"no Build",className:r.generalImg});default:return null}},_a=(0,u.Z)(a=>({root:{backgroundColor:a.palette.background.default,padding:a.spacing(2,0,0,0)},action:{marginTop:a.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function Sa(a){const{title:r,description:E,missing:v,action:$}=a,W=_a();return e.createElement(Ue.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:W.root,spacing:2},e.createElement(Ue.Z,{item:!0,xs:12,md:6},e.createElement(Ue.Z,{container:!0,direction:"column"},e.createElement(Ue.Z,{item:!0,xs:!0},e.createElement(xe.Z,{variant:"h5"},r)),e.createElement(Ue.Z,{item:!0,xs:!0},e.createElement(xe.Z,{variant:"body1"},E)),e.createElement(Ue.Z,{item:!0,xs:!0,className:W.action},$))),e.createElement(Ue.Z,{item:!0,xs:12,md:6,className:W.imageContainer},e.createElement(Wa,{missing:v})))}const rr=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,or=(0,u.Z)(a=>({code:{borderRadius:6,margin:`${a.spacing(2)}px 0px`,background:a.palette.type==="dark"?"#444":"#fff"}}),{name:"BackstageMissingAnnotationEmptyState"});function br(a){const{annotation:r}=a,E=or(),v=e.createElement(e.Fragment,null,"The ",e.createElement("code",null,r)," annotation is missing. You need to add the annotation to your component if you want to enable this tool.");return e.createElement(Sa,{missing:"field",title:"Missing Annotation",description:v,action:e.createElement(e.Fragment,null,e.createElement(xe.Z,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),e.createElement("div",{className:E.code},e.createElement(ke,{text:rr.replace("ANNOTATION",r),language:"yaml",showLineNumbers:!0,highlightedNumbers:[6,7],customStyle:{background:"inherit",fontSize:"115%"}})),e.createElement(U.Z,{color:"primary",component:b,to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"},"Read more"))})}const H=(a,r)=>(r.palette.type==="light"?K._j:K.$n)(r.palette[a].light,.6),ae=(a,r)=>(r.palette.type==="light"?K.$n:K._j)(r.palette[a].light,.9),Te=(0,u.Z)(a=>({root:{marginRight:a.spacing(1),fill:({severity:r})=>H(r,a)}})),Se=({severity:a})=>{const r=Te({severity:a});return e.createElement(vt.Z,{classes:r})},Ge=({severity:a})=>{const r=Te({severity:a});return e.createElement(ze.Z,{classes:r})},Ct=(0,u.Z)(a=>({panel:{backgroundColor:({severity:r})=>ae(r,a),color:({severity:r})=>H(r,a),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:r})=>H(r,a),fontWeight:"bold"},message:{width:"100%",display:"block",color:({severity:r})=>H(r,a),backgroundColor:({severity:r})=>ae(r,a)},details:{width:"100%",display:"block",color:a.palette.textContrast,backgroundColor:a.palette.background.default,border:`1px solid ${a.palette.border}`,padding:a.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),ot=a=>a.charAt(0).toLocaleUpperCase("en-US")+a.slice(1);function xt(a){const{severity:r="warning",title:E,message:v,children:$,defaultExpanded:W}=a,q=Ct({severity:r}),pe=ot(r)+(E?`: ${E}`:"");return e.createElement(Fe.Z,{defaultExpanded:W!=null?W:!1,className:q.panel,role:"alert"},e.createElement(be.Z,{expandIcon:e.createElement(Ge,{severity:r}),className:q.summary},e.createElement(Se,{severity:r}),e.createElement(xe.Z,{className:q.summaryText,variant:"subtitle1"},pe)),(v||$)&&e.createElement(pt.Z,null,e.createElement(Ue.Z,{container:!0},v&&e.createElement(Ue.Z,{item:!0,xs:12},e.createElement(xe.Z,{className:q.message,variant:"body1"},v)),$&&e.createElement(Ue.Z,{item:!0,xs:12,className:q.details},$))))}const tn=(0,u.Z)(a=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:a.spacing(2)},divider:{margin:a.spacing(2)}}),{name:"BackstageErrorPanel"}),en=({error:a,message:r,stack:E,children:v})=>{const $=tn();return e.createElement($t.Z,{dense:!0},e.createElement(Pt.Z,{alignItems:"flex-start"},e.createElement(je.Z,{classes:{secondary:$.text},primary:"Error",secondary:a}),e.createElement(re,{text:a})),e.createElement(Pt.Z,{alignItems:"flex-start"},e.createElement(je.Z,{classes:{secondary:$.text},primary:"Message",secondary:r}),e.createElement(re,{text:r})),E&&e.createElement(Pt.Z,{alignItems:"flex-start"},e.createElement(je.Z,{classes:{secondary:$.text},primary:"Stack Trace",secondary:E}),e.createElement(re,{text:E})),v)};function Ht(a){const{title:r,error:E,defaultExpanded:v,children:$}=a;return e.createElement(xt,{severity:"error",title:r!=null?r:E.message,defaultExpanded:v},e.createElement(en,{error:E.name,message:E.message,stack:E.stack,children:$}))}const Jt=(0,u.Z)(a=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:a.spacing(2)},divider:{margin:a.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function vn(a){var r;const{title:E,error:v,defaultExpanded:$}=a,W=Jt();if(v.name!=="ResponseError")return e.createElement(Ht,{title:E!=null?E:v.message,defaultExpanded:$,error:v});const{body:q,cause:pe}=v,{request:De,response:Oe}=q,Qe=`${Oe.statusCode}: ${pe.name}`,gt=De&&`${De.method} ${De.url}`,Mt=pe.message.replace(/\\n/g,`
`),Nt=(r=pe.stack)==null?void 0:r.replace(/\\n/g,`
`),jt=JSON.stringify(q,void 0,2);return e.createElement(Ht,{title:E!=null?E:v.message,defaultExpanded:$,error:{name:Qe,message:Mt,stack:Nt}},gt&&e.createElement(Pt.Z,{alignItems:"flex-start"},e.createElement(je.Z,{classes:{secondary:W.text},primary:"Request",secondary:De?`${gt}`:void 0}),e.createElement(re,{text:gt})),e.createElement(e.Fragment,null,e.createElement(mt.Z,{component:"li",className:W.divider}),e.createElement(Pt.Z,{alignItems:"flex-start"},e.createElement(je.Z,{classes:{secondary:W.text},primary:"Full Error as JSON"})),e.createElement(ke,{language:"json",text:jt,showCopyCodeButton:!0})))}function Ln(a){const r=document.createElement("div");return r.setAttribute("id",a),r}function bn(a){document.body.insertBefore(a,document.body.lastElementChild.nextElementSibling)}function dn(a){const r=useRef(null);useEffect(function(){const $=document.querySelector(`#${a}`),W=$||Ln(a);return $||bn(W),W.appendChild(r.current),function(){r.current.remove(),W.childNodes.length===-1&&W.remove()}},[a]);function E(){return r.current||(r.current=document.createElement("div")),r.current}return E()}const Tn="core.calloutSeen";function Un(){const[a,r]=useState(()=>{const v=localStorage.getItem(Tn);return v?JSON.parse(v):{}}),E=useCallback((v,$)=>{const W=localStorage.getItem(Tn),pe={...W?JSON.parse(W):{},[v]:$};r(pe),localStorage.setItem(Tn,JSON.stringify(pe))},[]);return{states:a,setState:E}}function ba(a){const{states:r,setState:E}=Un(),v=useCallback(()=>{E(a,!0)},[E,a]);return{seen:r[a]===!0,markSeen:v}}function ua(a){const{seen:r,markSeen:E}=ba(a);return{show:r===!1,hide:E}}const Qn=(0,u.Z)({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:"2px solid white",zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:"white",zIndex:2003}},{name:"BackstageFeatureCalloutCircular"});function la(a){const{featureId:r,title:E,description:v,children:$}=a,{show:W,hide:q}=ua(r),pe=dn("core.callout"),De=useRef(null),[Oe,Qe]=useState(),gt=Qn(),Mt=useCallback(()=>{if(De.current){const Nt=De.current.getBoundingClientRect(),jt=Math.max(Nt.width,Nt.height),On=800,xn=Nt.x-(jt-Nt.width)/2-On,Gn=Nt.y-(jt-Nt.height)/2-On,jn=jt+2*On,In=450,Dn=Nt.x+Nt.width/2-In,$n=Nt.y-(jt-Nt.height)/2+jt+20;Qe({dotLeft:xn,dotTop:Gn,dotSize:jn,borderWidth:On,textTop:$n,textLeft:Dn,textWidth:In})}},[]);return useEffect(()=>(window.addEventListener("resize",Mt),window.addEventListener("scroll",Mt),()=>{window.removeEventListener("resize",Mt),window.removeEventListener("scroll",Mt)}),[Mt]),useLayoutEffect(Mt,[De.current,Mt]),W?React.createElement(React.Fragment,null,React.createElement("div",{className:gt.featureWrapper,ref:De},$),createPortal(React.createElement("div",{className:gt.backdrop},React.createElement(ClickAwayListener,{onClickAway:q},React.createElement(React.Fragment,null,React.createElement("div",{className:gt.dot,"data-testid":"dot",style:{left:Oe==null?void 0:Oe.dotLeft,top:Oe==null?void 0:Oe.dotTop,width:Oe==null?void 0:Oe.dotSize,height:Oe==null?void 0:Oe.dotSize,borderWidth:Oe==null?void 0:Oe.borderWidth},onClick:q,onKeyDown:q,role:"button",tabIndex:0},React.createElement("div",{className:gt.pulseCircle})),React.createElement("div",{className:gt.text,"data-testid":"text",style:{left:Oe==null?void 0:Oe.textLeft,top:Oe==null?void 0:Oe.textTop,width:Oe==null?void 0:Oe.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},E),React.createElement(Typography,null,v))))),pe)):React.createElement(React.Fragment,null,$)}const da=(0,u.Z)(a=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:"gray",cursor:"default"},primary:{color:a.palette.primary.main},secondary:{color:a.palette.secondary.main},label:{fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function Da({color:a="primary",disabled:r=!1,href:E="#",icon:v=e.createElement(ue.Z,null),label:$,onClick:W,title:q}){const pe=da();return r?e.createElement(p.Z,{title:q,className:ge()(pe.link,pe.disabled),underline:"none"},v,e.createElement("span",{className:pe.label},$)):e.createElement(p.Z,{title:q,className:ge()(pe.link,pe[a]),to:E,component:b,onClick:W},v,e.createElement("span",{className:pe.label},$))}const Ma=(0,u.Z)(a=>({links:{margin:a.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:a.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function aa(a){const{links:r}=a,E=Ma();return e.createElement("nav",{className:E.links},r.map((v,$)=>e.createElement(Da,{key:$+1,...v})))}const qn=a=>{const r=a==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${r}) 0%,
    hsla(0, 0%, ${r}, 0.987) 8.1%,
    hsla(0, 0%, ${r}, 0.951) 15.5%,
    hsla(0, 0%, ${r}, 0.896) 22.5%,
    hsla(0, 0%, ${r}, 0.825) 29%,
    hsla(0, 0%, ${r}, 0.741) 35.3%,
    hsla(0, 0%, ${r}, 0.648) 41.2%,
    hsla(0, 0%, ${r}, 0.55) 47.1%,
    hsla(0, 0%, ${r}, 0.45) 52.9%,
    hsla(0, 0%, ${r}, 0.352) 58.8%,
    hsla(0, 0%, ${r}, 0.259) 64.7%,
    hsla(0, 0%, ${r}, 0.175) 71%,
    hsla(0, 0%, ${r}, 0.104) 77.5%,
    hsla(0, 0%, ${r}, 0.049) 84.5%,
    hsla(0, 0%, ${r}, 0.013) 91.9%,
    hsla(0, 0%, ${r}, 0) 100%
  `},La=100,xa=10,fo=(0,u.Z)(a=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:La,height:`calc(100% + ${xa}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-xa,background:`linear-gradient(90deg, ${qn(a.palette.type)})`},fadeRight:{right:-xa,background:`linear-gradient(270deg, ${qn(a.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-a.spacing(2)},buttonRight:{right:-a.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function ho(a){const[[r,E],v]=React.useState([0,0]);return React.useLayoutEffect(()=>{const $=a.current;if(!$){v([0,0]);return}const W=()=>{const q=$.scrollLeft,pe=$.scrollWidth-$.offsetWidth-$.scrollLeft;v([q,pe])};return W(),$.addEventListener("scroll",W),window.addEventListener("resize",W),()=>{$.removeEventListener("scroll",W),window.removeEventListener("resize",W)}},[a]),[r,E]}function go(a,r,E){const[v,$]=React.useState(0);return React.useLayoutEffect(()=>{if(v===0)return;const W=performance.now(),q=requestAnimationFrame(pe=>{if(!a.current)return;const De=pe-W,Oe=Math.abs(v)*De/r,gt=Math.max(E,Oe)*Math.sign(v);a.current.scrollBy({left:gt});const Mt=v-gt;Math.sign(v)!==Math.sign(Mt)?$(0):$(Mt)});return()=>cancelAnimationFrame(q)},[a,v,r,E]),$}function pl(a){const{scrollStep:r=100,scrollSpeed:E=50,minScrollDistance:v=5,children:$,...W}=a,q=fo(a),pe=React.useRef(),[De,Oe]=ho(pe),Qe=go(pe,E,v),gt=Mt=>{!pe.current||Qe(Mt?r:-r)};return React.createElement("div",{...W,className:q.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:q.container,ref:pe},$),React.createElement("div",{className:classNames(q.fade,q.fadeLeft,{[q.fadeHidden]:De===0})}),React.createElement("div",{className:classNames(q.fade,q.fadeRight,{[q.fadeHidden]:Oe===0})}),De>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>gt(!1),className:classNames(q.button,q.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),Oe>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>gt(!0),className:classNames(q.button,q.buttonRight,{})},React.createElement(ChevronRight,null)))}const Eo=(0,u.Z)({alpha:{color:"#ffffff",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}},{name:"BackstageLifecycle"});function fl(a){const r=Eo(a),{shorthand:E,alpha:v}=a;return E?React.createElement("span",{className:r[v?"alpha":"beta"],style:{fontSize:"120%"}},v?React.createElement(React.Fragment,null,"\u03B1"):React.createElement(React.Fragment,null,"\u03B2")):React.createElement("span",{className:r[v?"alpha":"beta"]},v?"Alpha":"Beta")}const yo=(0,e.lazy)(()=>t.e(4759).then(t.bind(t,44759)).then(a=>({default:a.RealLogViewer})));function vo(a){const{Progress:r}=(0,R.qD)().getComponents();return e.createElement(e.Suspense,{fallback:e.createElement(r,null)},e.createElement(yo,{...a}))}const bo=(0,u.Z)(a=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${a.palette.border}`},"& th, & td":{border:`1px solid ${a.palette.border}`,padding:a.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:a.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:a.palette.background.paper},"& tr":{backgroundColor:a.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:a.palette.background.default},"& a":{color:a.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Co={code:({inline:a,className:r,children:E,...v})=>{const $=String(E).replace(/\n+$/,""),W=/language-(\w+)/.exec(r||"");return!a&&W?e.createElement(ke,{language:W[1],text:$}):e.createElement("code",{className:r,...v},E)}};function Po(a){const{content:r,dialect:E="gfm",linkTarget:v}=a,$=bo();return e.createElement(le.D,{remarkPlugins:E==="gfm"?[ie.Z]:[],className:$.markdown,children:r,components:Co,linkTarget:v})}const _o=(0,u.Z)(a=>({root:{paddingLeft:a.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),So=({request:a,busy:r,setBusy:E})=>{const v=_o(),[$,W]=(0,e.useState)(),q=async()=>{E(!0);try{await a.trigger()}catch(De){W((0,Wt.VZ)(De)?De.message:"An unspecified error occurred")}finally{E(!1)}},pe=a.provider.icon;return e.createElement(Pt.Z,{button:!0,disabled:r,classes:{root:v.root}},e.createElement(ft.Z,null,e.createElement(pe,{fontSize:"large"})),e.createElement(je.Z,{primary:a.provider.title,secondary:$&&e.createElement(xe.Z,{color:"error"},$)}),e.createElement(U.Z,{color:"primary",variant:"contained",onClick:q},"Log in"))},wo=(0,u.Z)(a=>({dialog:{paddingTop:a.spacing(1)},title:{minWidth:0},contentList:{padding:0},actionButtons:{padding:a.spacing(2,0)}}),{name:"OAuthRequestDialog"});function Ro(a){const r=wo(),[E,v]=(0,e.useState)(!1),$=(0,R.h_)(R.ZM),W=(0,Y.Z)((0,e.useMemo)(()=>$.authRequest$(),[$]),[]),q=()=>{W.forEach(pe=>pe.reject())};return e.createElement(ve.Z,{open:Boolean(W.length),fullWidth:!0,maxWidth:"xs",classes:{paper:r.dialog}},e.createElement(Et.Z,{classes:{root:r.title}},"Login Required"),e.createElement(Ve.Z,{dividers:!0,classes:{root:r.contentList}},e.createElement($t.Z,null,W.map(pe=>e.createElement(So,{key:pe.provider.title,request:pe,busy:E,setBusy:v})))),e.createElement(fe.Z,{classes:{root:r.actionButtons}},e.createElement(U.Z,{onClick:q},"Reject All")))}const Ao=(0,u.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function Oo(a){var r;const[E,v]=(0,e.useState)(!1),$=(0,gn.t)(),W=Ao(),q=pe=>{$()&&v(pe)};return e.createElement(N.ZP,{title:(r=a.title)!=null?r:a.text||"",placement:a.placement,disableHoverListener:!E},e.createElement(ln(),{text:a.text,line:a.line,onToggled:q,containerClassName:W.container}))}function Va(a){const[r,E]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{const v=setTimeout(()=>E(!0),250);return()=>clearTimeout(v)},[]),r?e.createElement(yn.Z,{...a,"data-testid":"progress"}):e.createElement("div",{style:{display:"none"}})}const Io=(0,u.Z)(a=>({root:{maxWidth:"fit-content",padding:a.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:a.palette.textSubtle},arrow:{color:a.palette.textSubtle}}),{name:"BackstageBottomLink"});function Cr(a){const{link:r,title:E,onClick:v}=a,$=Io();return e.createElement("div",null,e.createElement(mt.Z,null),e.createElement(b,{to:r,onClick:v,underline:"none"},e.createElement(Bt.Z,{display:"flex",alignItems:"center",className:$.root},e.createElement(Bt.Z,{className:$.boxTitle,fontWeight:"fontWeightBold",m:1},e.createElement(xe.Z,null,e.createElement("strong",null,E))),e.createElement(rn.Z,{className:$.arrow}))))}const To=a=>{const{slackChannel:r}=a;if(r){if(typeof r=="string")return e.createElement(e.Fragment,null,"Please contact ",r," for help.");if(!r.href)return e.createElement(e.Fragment,null,"Please contact ",r.name," for help.")}else return null;return e.createElement(B,{to:r.href,variant:"contained"},r.name)},Pr=class extends e.Component{constructor(r){super(r),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(r,E){console.error(`ErrorBoundary, error: ${r}, info: ${E}`),this.setState({error:r,errorInfo:E})}render(){const{slackChannel:r,children:E}=this.props,{error:v}=this.state;return v?e.createElement(Ht,{title:"Something Went Wrong",error:v},e.createElement(To,{slackChannel:r})):E}},$o=(0,u.Z)(a=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:a.spacing(2,2,2,2.5)},headerTitle:{fontWeight:700},headerSubheader:{paddingTop:a.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),Do=(0,D.Z)(a=>({root:{display:"inline-block",padding:a.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(Xe.Z),_r={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function ka(a){const{title:r,subheader:E,divider:v=!0,deepLink:$,slackChannel:W,errorBoundaryProps:q,variant:pe,children:De,headerStyle:Oe,headerProps:Qe,icon:gt,action:Mt,actionsClassName:Nt,actions:jt,cardClassName:On,actionsTopRight:xn,className:Gn,noPadding:jn,titleTypographyProps:In}=a,Dn=$o();let $n={},ea={};pe&&pe.split(/[\s]+/g).forEach(Ra=>{$n={...$n,..._r.card[Ra]},ea={...ea,..._r.cardContent[Ra]}});const wa=()=>e.createElement("div",{className:Dn.headerSubheader},E&&e.createElement("div",{className:Dn.subheader},E),gt),ma=q||(W?{slackChannel:W}:{});return e.createElement(Re.Z,{style:$n,className:Gn},e.createElement(Pr,{...ma},r&&e.createElement(Gt.Z,{classes:{root:Dn.header,title:Dn.headerTitle,subheader:Dn.headerSubheader,avatar:Dn.headerAvatar,action:Dn.headerAction,content:Dn.headerContent},title:r,subheader:wa(),action:Mt,style:{...Oe},titleTypographyProps:In,...Qe}),xn&&e.createElement(Do,null,xn),v&&e.createElement(mt.Z,null),e.createElement(dt.Z,{className:ge()(On,{[Dn.noPadding]:jn}),style:ea},De),jt&&e.createElement(Xe.Z,{className:Nt},jt),$&&e.createElement(Cr,{...$})))}const Mo=(0,u.Z)(a=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:45,fontWeight:"bold",color:a.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),Sr={fractional:!0,inverse:!1,unit:"%",max:100},wr=({palette:a,value:r,inverse:E,max:v})=>{if(isNaN(r))return"#ddd";const $=v||Sr.max,W=E?$-r:r;return W<$/3?a.status.error:W<$*(2/3)?a.status.warning:a.status.ok};function Lo(a){const[r,E]=useState(null),{getColor:v=wr}=a,$=Mo(a),{palette:W}=useTheme(),{value:q,fractional:pe,inverse:De,unit:Oe,max:Qe,description:gt}={...Sr,...a},Mt=pe?Math.round(q*Qe):q,Nt=Qe!==100?Math.round(q):Mt,[jt,On]=useState(!1);return useEffect(()=>{const xn=r,Gn=()=>On(!0),jn=()=>On(!1);return xn&&gt?(xn.addEventListener("mouseenter",Gn),xn.addEventListener("mouseleave",jn),()=>{xn.removeEventListener("mouseenter",Gn),xn.removeEventListener("mouseleave",jn)}):()=>{On(!1)}},[gt,r]),React.createElement("div",{ref:E,className:$.root},React.createElement(Circle,{strokeLinecap:"butt",percent:Mt,strokeWidth:12,trailWidth:12,strokeColor:v({palette:W,value:Nt,inverse:De,max:Qe}),className:$.circle}),gt&&jt?React.createElement("div",{className:$.description},gt):React.createElement("div",{className:$.overlay},isNaN(q)?"N/A":`${Nt}${Oe}`))}const xo=(0,u.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function hl(a){const r=xo(a),{title:E,subheader:v,progress:$,inverse:W,deepLink:q,description:pe,icon:De,variant:Oe,getColor:Qe}=a,gt={inverse:W,description:pe,getColor:Qe,value:$};return React.createElement("div",{className:r.root},React.createElement(ka,{title:E,subheader:v,deepLink:q,variant:Oe,icon:De},React.createElement(Lo,{...gt})))}function gl(a){const{value:r,getColor:E=wr}=a,{palette:v}=useTheme();if(isNaN(r))return null;let $=Math.round(r*100*100)/100;$>100&&($=100);const W=E({palette:v,value:$,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${$}%`},React.createElement("span",null,React.createElement(Line,{percent:$,strokeWidth:4,trailWidth:4,strokeColor:W})))}const ko=(0,u.Z)(()=>(0,y.Z)({icon:{position:"absolute",right:"4px",pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),Bo=()=>{const a=ko();return e.createElement(S.Z,{className:a.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},Uo=(0,u.Z)(()=>(0,y.Z)({icon:{position:"absolute",right:"4px",pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),Zo=()=>{const a=Uo();return e.createElement(S.Z,{className:a.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},No=(0,D.Z)(a=>(0,y.Z)({root:{"label + &":{marginTop:a.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:a.palette.background.paper,border:"1px solid #ced4da",fontSize:16,padding:"10px 26px 10px 12px",transition:a.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:a.palette.background.paper,borderRadius:4}}}),{name:"BackstageSelectInputBase"})(Pe.Z),Wo=(0,u.Z)(a=>(0,y.Z)({formControl:{margin:`${a.spacing(1)} 0px`,maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:14,fontFamily:a.typography.fontFamily,color:a.palette.text.primary,"&.Mui-focused":{color:a.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function Rr(a){const{multiple:r,items:E,label:v,placeholder:$,selected:W,onChange:q,triggerReset:pe,native:De=!1,disabled:Oe=!1}=a,Qe=Wo(),[gt,Mt]=(0,e.useState)(W||(r?[]:"")),[Nt,jt]=(0,e.useState)(!1);(0,e.useEffect)(()=>{Mt(r?[]:"")},[pe,r]),(0,e.useEffect)(()=>{W!==void 0&&Mt(W)},[W]);const On=In=>{Mt(In.target.value),q(In.target.value)},xn=In=>{if(Oe){In.preventDefault();return}jt(Dn=>r&&!(In.target instanceof HTMLElement)?!0:!Dn)},Gn=()=>{jt(!1)},jn=In=>()=>{const Dn=gt.filter($n=>$n!==In);Mt(Dn),q(Dn)};return e.createElement("div",{className:Qe.root},e.createElement(xe.Z,{variant:"button"},v),e.createElement(_t.Z,{onClickAway:Gn},e.createElement(_n.Z,{className:Qe.formControl},e.createElement(_.Z,{value:gt,native:De,disabled:Oe,"data-testid":"select",displayEmpty:!0,multiple:r,onChange:On,onClick:xn,open:Nt,input:e.createElement(No,null),renderValue:In=>{var Dn;return r&&gt.length!==0?e.createElement("div",{className:Qe.chips},In.map($n=>{var ea,wa;return e.createElement(An.Z,{key:(ea=E.find(ma=>ma.value===$n))==null?void 0:ea.value,label:(wa=E.find(ma=>ma.value===$n))==null?void 0:wa.label,clickable:!0,onDelete:jn($n),className:Qe.chip})})):e.createElement(xe.Z,null,gt.length===0?$||"":(Dn=E.find($n=>$n.value===In))==null?void 0:Dn.label)},IconComponent:()=>Nt?e.createElement(Zo,null):e.createElement(Bo,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},$&&!r&&e.createElement(Ae.Z,{value:[]},$),De?E&&E.map(In=>e.createElement("option",{value:In.value,key:In.value},In.label)):E&&E.map(In=>e.createElement(Ae.Z,{key:In.value,value:In.value},r&&e.createElement(Pn.Z,{color:"primary",checked:gt.includes(In.value)||!1,className:Qe.checkbox}),In.label))))))}const sr=()=>{},Ar=e.createContext({stepperLength:0,stepIndex:0,setStepIndex:sr,stepHistory:[],setStepHistory:sr,onStepChange:sr});function El(a){const{children:r,elevated:E,onStepChange:v,activeStep:$=0}=a,[W,q]=useState($),[pe,De]=useState([0]);useEffect(()=>{q($)},[$]);const Oe=[];let Qe;return Children.forEach(r,gt=>{isValidElement(gt)&&(gt.props.end?Qe=gt:Oe.push(gt))}),React.createElement(React.Fragment,null,React.createElement(Ar.Provider,{value:{stepIndex:W,setStepIndex:q,stepHistory:pe,setStepHistory:De,onStepChange:v,stepperLength:Children.count(r)}},React.createElement(MuiStepper,{activeStep:W,orientation:"vertical",elevation:E?2:0},Oe)),W>=Children.count(r)-1&&Qe)}const Fo=(0,u.Z)(a=>({root:{marginTop:a.spacing(3),"& button":{marginRight:a.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),Ko=({text:a,handleClick:r})=>React.createElement(Button$1,{onClick:r},a||"Reset"),zo=({text:a,handleClick:r,disabled:E,last:v,stepIndex:$})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:E,"data-testid":`nextButton-${$}`,onClick:r},a||(v?"Finish":"Next")),jo=({text:a,handleClick:r,disabled:E,stepIndex:v})=>React.createElement(Button$1,{onClick:r,"data-testid":`backButton-${v}`,disabled:E},a||"Back"),Or=({actions:a={},children:r})=>{const E=Fo(),{stepperLength:v,stepIndex:$,setStepIndex:W,stepHistory:q,setStepHistory:pe,onStepChange:De}=useContext(Ar),Oe=(Nt,jt)=>{jt&&jt(),De&&De($,Nt),W(Nt)},Qe=()=>{const Nt=a.nextStep?a.nextStep($,v-1):$+1;Oe(Nt,a.onNext),pe([...q,Nt])},gt=()=>{q.pop(),Oe(q[q.length-1],a.onBack),pe([...q])},Mt=()=>{Oe(0,a.onRestart),pe([0])};return React.createElement("div",{className:E.root},[void 0,!0].includes(a.showBack)&&$!==0&&React.createElement(jo,{text:a.backText,handleClick:gt,disabled:$===0,stepIndex:$}),[void 0,!0].includes(a.showNext)&&React.createElement(zo,{text:a.nextText,handleClick:Qe,disabled:!!v&&$>=v||!!a.canNext&&!a.canNext(),stepIndex:$}),a.showRestart&&$!==0&&React.createElement(Ko,{text:a.restartText,handleClick:Mt,stepIndex:$}),r)},Vo=(0,u.Z)(a=>({end:{padding:a.spacing(3)}}),{name:"SimpleStepperStep"});function yl(a){const{title:r,children:E,end:v,actions:$,...W}=a,q=Vo();return v?React.createElement("div",{className:q.end},React.createElement(Typography,{variant:"h6"},r),E,React.createElement(Or,{actions:{...$||{},showNext:!1}})):React.createElement(MuiStep,{...W},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},r)),React.createElement(StepContent,null,E,React.createElement(Or,{actions:$})))}const Ba=(0,u.Z)(a=>({status:{fontWeight:500,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:8,borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:a.palette.status.ok}},warning:{"&::before":{backgroundColor:a.palette.status.warning}},error:{"&::before":{backgroundColor:a.palette.status.error}},pending:{"&::before":{backgroundColor:a.palette.status.pending}},running:{"&::before":{backgroundColor:a.palette.status.running}},aborted:{"&::before":{backgroundColor:a.palette.status.aborted}}}),{name:"BackstageStatus"});function Ho(a){const r=Ba(a);return e.createElement("span",{className:ge()(r.status,r.ok),"aria-label":"Status ok","aria-hidden":"true",...a})}function Go(a){const r=Ba(a);return e.createElement("span",{className:ge()(r.status,r.warning),"aria-label":"Status warning","aria-hidden":"true",...a})}function Jo(a){const r=Ba(a);return e.createElement("span",{className:ge()(r.status,r.error),"aria-label":"Status error","aria-hidden":"true",...a})}function Yo(a){const r=Ba(a);return e.createElement("span",{className:ge()(r.status,r.pending),"aria-label":"Status pending","aria-hidden":"true",...a})}function Xo(a){const r=Ba(a);return e.createElement("span",{className:ge()(r.status,r.running),"aria-label":"Status running","aria-hidden":"true",...a})}function Qo(a){const r=Ba(a);return e.createElement("span",{className:ge()(r.status,r.aborted),"aria-label":"Status aborted","aria-hidden":"true",...a})}const qo=a=>(0,y.Z)({root:{fontWeight:"bolder",whiteSpace:"nowrap",paddingRight:a.spacing(4),border:"0",verticalAlign:"top"}}),es={root:{border:"0",verticalAlign:"top"}},ts=a=>(0,y.Z)({root:{listStyle:"none",margin:a.spacing(0,0,-1,0),padding:"0"}}),ns=a=>(0,y.Z)({root:{padding:a.spacing(0,0,1,0)},random:{}}),as=(0,D.Z)(qo,{name:"BackstageMetadataTableTitleCell"})(We.Z),rs=(0,D.Z)(es,{name:"BackstageMetadataTableCell"})(We.Z),os=({dense:a,children:r})=>e.createElement(Ee.Z,{size:a?"small":"medium"},e.createElement(_e.Z,null,r)),ss=({title:a,children:r,...E})=>e.createElement(yt.Z,null,a&&e.createElement(as,null,a),e.createElement(rs,{colSpan:a?1:2,...E},r)),Ir=(0,D.Z)(ts,{name:"BackstageMetadataTableList"})(({classes:a,children:r})=>e.createElement("ul",{className:a.root},r)),Tr=(0,D.Z)(ns,{name:"BackstageMetadataTableListItem"})(({classes:a,children:r})=>e.createElement("li",{className:a.root},r)),$r=(0,y.Z)({root:{margin:"0 0",listStyleType:"none"}}),is=a=>(0,y.Z)({root:{...$r.root,paddingLeft:a.spacing(1)}}),Dr=(0,D.Z)($r,{name:"BackstageStructuredMetadataTableList"})(({classes:a,children:r})=>e.createElement(Ir,{classes:a},r)),Mr=(0,D.Z)(is,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:a,children:r})=>e.createElement(Ir,{classes:a},r));function ls(a,r){const E=a.map((v,$)=>e.createElement(Tr,{key:$},ir(v)));return r?e.createElement(Mr,null,E):e.createElement(Dr,null,E)}function cs(a,r,E){const v=Object.keys(a).map($=>{const W=ir(a[$],!0),q=E&&E.titleFormat?E.titleFormat($):ee()($);return e.createElement(Tr,{key:$},`${q}: `,W)});return r?e.createElement(Mr,null,v):e.createElement(Dr,null,v)}function ir(a,r,E){return e.isValidElement(a)?e.createElement(e.Fragment,null,a):typeof a=="object"&&!Array.isArray(a)?cs(a,r,E):Array.isArray(a)?ls(a,E):typeof a=="boolean"?e.createElement(e.Fragment,null,a?"\u2705":"\u274C"):e.createElement(e.Fragment,null,a)}const us=({value:a,options:r})=>e.createElement(e.Fragment,null,ir(a,r)),ds=({title:a,value:r,options:E})=>e.createElement(ss,{title:E&&E.titleFormat?E.titleFormat(a):ee()(a)},e.createElement(us,{value:r,options:E}));function ms(a,r){return Object.keys(a).map(E=>e.createElement(ds,{key:E,title:E,value:a[E],options:r}))}function ps(a){const{metadata:r,dense:E=!0,options:v}=a,$=ms(r,v||{});return e.createElement(os,{dense:E},$)}function fs(a){return cn().stringify(a,{strictNullHandling:!0})}function Lr(a){return cn().parse(a,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function xr(a,r){return Lr(a)[r]}function hs(a,r,E){const v={...Lr(a),[r]:E};return fs(v)}function gs(a,r=250){const[E,v]=(0,d.lr)(),$=E.toString(),[W,q]=(0,e.useState)(xr($,a));return(0,e.useEffect)(()=>{const pe=xr($,a);q(De=>(0,bt.isEqual)(pe,De)?De:pe)},[$,q,a]),(0,Sn.b)(()=>{const pe=hs($,a,W);$!==pe&&v(pe,{replace:!0})},[v,W,$,a],r),[W,q]}const Es={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/andrewthauer/backstage/blob/master/app-config.yaml"}]}]};function kr(){const r=(0,R.I_)().get(R.Ds),E=r==null?void 0:r.getOptionalConfig("app.support");return E?{url:E.getString("url"),items:E.getConfigArray("items").flatMap(v=>{var $;return{title:v.getString("title"),icon:v.getOptionalString("icon"),links:(($=v.getOptionalConfigArray("links"))!=null?$:[]).flatMap(W=>({url:W.getString("url"),title:W.getString("title")}))}})}:Es}function pa(a,r){const v=(0,R.qD)().getSystemIcon(a);return v?e.createElement(v,{...r}):e.createElement(wn.Z,{...r})}function vl(a){return pa("brokenImage",a)}function ys(a){return pa("catalog",a)}function bl(a){return pa("chat",a)}function Cl(a){return pa("dashboard",a)}function vs(a){return pa("docs",a)}function Pl(a){return pa("email",a)}function _l(a){return pa("github",a)}function Sl(a){return pa("group",a)}function Ha(a){return pa("help",a)}function wl(a){return pa("user",a)}function Rl(a){return pa("warning",a)}const bs=(0,u.Z)({popoverList:{minWidth:260,maxWidth:400}},{name:"BackstageSupportButton"}),Cs=({icon:a})=>{var r;const E=(0,R.qD)(),v=a&&(r=E.getSystemIcon(a))!=null?r:Ha;return e.createElement(v,null)},Ps=({link:a})=>{var r;return e.createElement(b,{to:a.url},(r=a.title)!=null?r:a.url)},_s=({item:a})=>{var r;return e.createElement(Pt.Z,null,e.createElement(kt.Z,null,e.createElement(Cs,{icon:a.icon})),e.createElement(je.Z,{primary:a.title,secondary:(r=a.links)==null?void 0:r.reduce((E,v,$)=>[...E,$>0&&e.createElement("br",{key:$}),e.createElement(Ps,{link:v,key:v.url})],[])}))};function Ss(a){const{title:r,children:E}=a,{items:v}=kr(),[$,W]=(0,e.useState)(!1),[q,pe]=(0,e.useState)(null),De=bs(),Oe=(0,ct.Z)(Mt=>Mt.breakpoints.down("sm")),Qe=Mt=>{pe(Mt.currentTarget),W(!0)},gt=()=>{W(!1)};return e.createElement(e.Fragment,null,e.createElement(Bt.Z,{display:"flex",ml:1},Oe?e.createElement(h.Z,{color:"primary",size:"small",onClick:Qe,"data-testid":"support-button"},e.createElement(Ha,null)):e.createElement(U.Z,{"data-testid":"support-button",color:"primary",onClick:Qe,startIcon:e.createElement(Ha,null)},"Support")),e.createElement(Ft.ZP,{"data-testid":"support-button-popover",open:$,anchorEl:q,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:gt},e.createElement($t.Z,{className:De.popoverList},r&&e.createElement(Pt.Z,{alignItems:"flex-start"},e.createElement(xe.Z,{variant:"subtitle1"},r)),e.Children.map(E,(Mt,Nt)=>e.createElement(Pt.Z,{alignItems:"flex-start",key:`child-${Nt}`},Mt)),v&&v.map((Mt,Nt)=>e.createElement(_s,{item:Mt,key:`item-${Nt}`}))),e.createElement(fe.Z,null,e.createElement(U.Z,{color:"primary",onClick:gt},"Close"))))}const Ga=72,Br=24,Ur=18,Hn={drawerWidthClosed:Ga,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:Ga,iconSize:Ga-Br*2,iconPadding:Br,selectedIndicatorWidth:3,userBadgePadding:Ur,userBadgeDiameter:Ga-Ur*2,mobileSidebarHeight:56},lr={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:Hn.defaultOpenDelayMs+200},ws="@backstage/core/sidebar-intro-dismissed",Aa=(0,e.createContext)({isOpen:!1,setOpen:()=>{}}),cr=(0,e.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),Zr={getSidebarPinState(){let a;try{a=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!a},setSidebarPinState(a){return window.localStorage.setItem("sidebarPinState",JSON.stringify(a))}},Rs=(0,u.Z)(a=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[a.breakpoints.up("sm")]:{paddingLeft:({isPinned:r})=>r?Hn.drawerWidthOpen:Hn.drawerWidthClosed},[a.breakpoints.down("xs")]:{paddingBottom:Hn.mobileSidebarHeight}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Ua=(0,e.createContext)({isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1}),Nr=(0,e.createContext)({content:{contentRef:void 0}});function As(a){const[r,E]=(0,e.useState)(()=>Zr.getSidebarPinState()),v=(0,e.useRef)(null),$=(0,e.useMemo)(()=>({content:{contentRef:v}}),[v]);(0,e.useEffect)(()=>{Zr.setSidebarPinState(r)},[r]);const W=(0,ct.Z)(De=>De.breakpoints.down("xs"),{noSsr:!0}),q=()=>E(!r),pe=Rs({isPinned:r});return e.createElement(Ua.Provider,{value:{isPinned:r,toggleSidebarPinState:q,isMobile:W}},e.createElement(Nr.Provider,{value:$},e.createElement("div",{className:pe.root},a.children)))}function ur(){const{content:a}=(0,e.useContext)(Nr);return{focusContent:(0,e.useCallback)(()=>{var E,v;(v=(E=a==null?void 0:a.contentRef)==null?void 0:E.current)==null||v.focus()},[a]),contentRef:a==null?void 0:a.contentRef}}const Os=(0,u.Z)(a=>({root:{flexGrow:0,margin:a.spacing(0,2),color:a.palette.navigation.color},selected:{color:`${a.palette.navigation.selectedColor}!important`,borderTop:`solid ${Hn.selectedIndicatorWidth}px ${a.palette.navigation.indicator}`,marginTop:"-1px"},label:{display:"none"}})),Is=a=>{const{to:r,label:E,icon:v,value:$}=a,W=Os(),q=(0,A.TH)(),{selectedMenuItemIndex:pe,setSelectedMenuItemIndex:De}=(0,e.useContext)(Fr),Oe=(gt,Mt)=>{De(Mt===pe?-1:Mt)},Qe=$===pe&&pe>=0||$!==pe&&!(pe>=0)&&r===q.pathname;return e.createElement(et.Z,{label:E,icon:v,component:b,to:r||q.pathname,onChange:Oe,value:$,selected:Qe,classes:W})},dr=a=>{const{children:r,to:E,label:v,icon:$,value:W}=a,{isMobile:q}=(0,e.useContext)(Ua);return q?e.createElement(Is,{to:E,label:v,icon:$,value:W}):e.createElement(e.Fragment,null,r)},Wr=(0,u.Z)(a=>({root:{position:"fixed",backgroundColor:a.palette.navigation.background,color:a.palette.navigation.color,bottom:0,left:0,right:0,zIndex:a.zIndex.snackbar,borderTop:"1px solid #383838"},overlay:{background:a.palette.navigation.background,width:"100%",bottom:`${Hn.mobileSidebarHeight}px`,height:`calc(100% - ${Hn.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"},overlayHeader:{display:"flex",color:a.palette.bursts.fontColor,alignItems:"center",justifyContent:"space-between",padding:a.spacing(2,3)},overlayHeaderClose:{color:a.palette.bursts.fontColor},marginMobileSidebar:{marginBottom:`${Hn.mobileSidebarHeight}px`}})),Ts=a=>(0,bt.orderBy)(a,({props:{priority:r}})=>Number.isInteger(r)?r:-1,"desc"),$s=e.createElement(dr).type,Ds=({children:a,label:r="Menu",open:E,onClose:v})=>{const $=Wr();return e.createElement(Je.ZP,{anchor:"bottom",open:E,onClose:v,ModalProps:{BackdropProps:{classes:{root:$.marginMobileSidebar}}},classes:{root:$.marginMobileSidebar,paperAnchorBottom:$.overlay}},e.createElement(Bt.Z,{className:$.overlayHeader},e.createElement(xe.Z,{variant:"h3"},r),e.createElement(h.Z,{onClick:v,classes:{root:$.overlayHeaderClose}},e.createElement(s.Z,null))),e.createElement(Bt.Z,null,a))},Fr=(0,e.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),Ms=a=>{const{children:r}=a,E=Wr(),v=(0,A.TH)(),[$,W]=(0,e.useState)(-1);(0,e.useEffect)(()=>{W(-1)},[v.pathname]);let q=(0,R.vJ)(r,De=>De.getElements().filter(Oe=>Oe.type===$s));if(r)q.length?q=Ts(q):q.push(e.createElement(dr,{key:"default_menu",icon:e.createElement(He.Z,null)},r));else return null;const pe=$>=0&&!q[$].props.to;return e.createElement(Aa.Provider,{value:{isOpen:!0,setOpen:()=>{}}},e.createElement(Fr.Provider,{value:{selectedMenuItemIndex:$,setSelectedMenuItemIndex:W}},e.createElement(Ds,{label:q[$]&&q[$].props.label,open:pe,onClose:()=>W(-1)},q[$]&&q[$].props.children),e.createElement($e.Z,{className:E.root,"data-testid":"mobile-sidebar-root"},q)))},Kr=(0,u.Z)(a=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:a.zIndex.appBar,background:a.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",width:Hn.drawerWidthClosed,transition:a.transitions.create("width",{easing:a.transitions.easing.sharp,duration:a.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}},drawerOpen:{width:Hn.drawerWidthOpen,transition:a.transitions.create("width",{easing:a.transitions.easing.sharp,duration:a.transitions.duration.shorter})},visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),Ls=a=>{const{openDelayMs:r=Hn.defaultOpenDelayMs,closeDelayMs:E=Hn.defaultCloseDelayMs,disableExpandOnHover:v,children:$}=a,W=Kr(),q=(0,ct.Z)(xn=>xn.breakpoints.down("md"),{noSsr:!0}),[pe,De]=(0,e.useState)(0),Oe=(0,e.useRef)(),{isPinned:Qe,toggleSidebarPinState:gt}=(0,e.useContext)(Ua),Mt=()=>{Qe||v||(Oe.current&&(clearTimeout(Oe.current),Oe.current=void 0),pe!==2&&!q&&(Oe.current=window.setTimeout(()=>{Oe.current=void 0,De(2)},r),De(1)))},Nt=()=>{Qe||v||(Oe.current&&(clearTimeout(Oe.current),Oe.current=void 0),pe===1?De(0):pe===2&&(Oe.current=window.setTimeout(()=>{Oe.current=void 0,De(0)},E)))},jt=pe===2&&!q||Qe,On=xn=>{xn?(De(2),gt()):(De(0),gt())};return e.createElement("div",{style:{}},e.createElement(ks,null),e.createElement(Aa.Provider,{value:{isOpen:jt,setOpen:On}},e.createElement("div",{className:W.root,"data-testid":"sidebar-root",onMouseEnter:v?()=>{}:Mt,onFocus:v?()=>{}:Mt,onMouseLeave:v?()=>{}:Nt,onBlur:v?()=>{}:Nt},e.createElement("div",{className:ge()(W.drawer,{[W.drawerOpen]:jt})},$))))},xs=a=>{const{children:r,openDelayMs:E,closeDelayMs:v,disableExpandOnHover:$}=a,{isMobile:W}=(0,e.useContext)(Ua);return W?e.createElement(Ms,null,r):e.createElement(Ls,{openDelayMs:E,closeDelayMs:v,disableExpandOnHover:$},r)};function ks(){const{focusContent:a,contentRef:r}=ur(),E=Kr();return r!=null&&r.current?e.createElement(U.Z,{onClick:a,variant:"contained",className:ge()(E.visuallyHidden)},"Skip to content"):null}function Ja(a,r){const E=new URLSearchParams(r.search).toString(),v=cn().parse(E),$=new URLSearchParams(a.search).toString(),W=cn().parse($);return(0,bt.isEqual)(r.pathname,a.pathname)&&(0,bt.isMatch)(W,v)}const Bs=(0,u.Z)(a=>({item:{height:48,width:"100%","&:hover":{background:"#6f6f6f",color:a.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:a.palette.navigation.color,padding:20,cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:"#FFF"},label:{margin:14,marginLeft:7,fontSize:14},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0"},textContent:{color:a.palette.navigation.color,display:"flex",justifyContent:"center",[a.breakpoints.down("xs")]:{display:"block",paddingLeft:a.spacing(4)},fontSize:"14px"}}),{name:"BackstageSidebarSubmenuItem"}),Al=a=>{const{title:r,to:E,icon:v,dropdownItems:$}=a,W=Bs(),{setIsHoveredOn:q}=useContext(cr),pe=()=>{q(!1)},De=useResolvedPath(E),Oe=useLocation();let Qe=Ja(Oe,De);const[gt,Mt]=useState(!1),Nt=()=>{Mt(!gt)};return $!==void 0?($.some(jt=>{const On=resolvePath(jt.to);return Qe=Ja(Oe,On),Qe}),React.createElement("div",{className:W.itemContainer},React.createElement("button",{onClick:Nt,onTouchStart:jt=>jt.stopPropagation(),className:classNames(W.item,Qe?W.selected:void 0)},React.createElement(v,{fontSize:"small"}),React.createElement(Typography,{variant:"subtitle1",className:W.label},r),gt?React.createElement(ArrowDropUpIcon,{className:W.dropdownArrow}):React.createElement(ArrowDropDownIcon,{className:W.dropdownArrow})),$&&gt&&React.createElement("div",{className:W.dropdown},$.map((jt,On)=>React.createElement(b,{to:jt.to,underline:"none",className:W.dropdownItem,onClick:pe,onTouchStart:xn=>xn.stopPropagation(),key:On},React.createElement(Typography,{className:W.textContent},jt.title)))))):React.createElement("div",{className:W.itemContainer},React.createElement(b,{to:E,underline:"none",className:classNames(W.item,Qe?W.selected:void 0),onClick:pe,onTouchStart:jt=>jt.stopPropagation()},React.createElement(v,{fontSize:"small"}),React.createElement(Typography,{variant:"subtitle1",className:W.label},r)))},Us=a=>(0,u.Z)(r=>{var E,v;return{root:{zIndex:1e3,position:"relative",overflow:"visible",width:r.spacing(7)+1},drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[r.breakpoints.up("sm")]:{marginLeft:a.left,transition:r.transitions.create("margin-left",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(v=(E=r.palette.navigation.submenu)==null?void 0:E.background)!=null?v:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:lr.drawerWidthClosed,transitionDelay:`${lr.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}},drawerOpen:{width:lr.drawerWidthOpen,[r.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:r.spacing(3),left:0,top:0}},title:{fontSize:24,fontWeight:500,color:"#FFF",padding:20,[r.breakpoints.down("xs")]:{display:"none"}}}},{name:"BackstageSidebarSubmenu"}),Zs=a=>{const{isOpen:r}=(0,e.useContext)(Aa),E=r?Hn.drawerWidthOpen:Hn.drawerWidthClosed,v=Us({left:E})(),{isHoveredOn:$}=(0,e.useContext)(cr),[W,q]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{q($)},[$]),e.createElement("div",{className:ge()(v.drawer,{[v.drawerOpen]:W})},e.createElement(xe.Z,{variant:"h5",className:v.title},a.title),a.children)},Ns=(0,u.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),Ws=()=>{const a=Ns();return React.createElement("div",{className:a.iconContainer},React.createElement("div",{className:a.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement("div",null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},Fs=(0,u.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),Ks=()=>{const a=Fs();return React.createElement("div",{className:a.iconContainer},React.createElement("div",{className:a.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement("div",null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},Ya=(0,u.Z)(a=>{var r,E,v,$;const{selectedIndicatorWidth:W,drawerWidthClosed:q,drawerWidthOpen:pe,iconContainerWidth:De}=Hn;return{root:{color:a.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit"},closed:{width:q,justifyContent:"center"},open:{[a.breakpoints.up("sm")]:{width:pe}},highlightable:{"&:hover":{background:(E=(r=a.palette.navigation.navItem)==null?void 0:r.hoverBackground)!=null?E:"#404040"}},highlighted:{background:($=(v=a.palette.navigation.navItem)==null?void 0:v.hoverBackground)!=null?$:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:De,marginRight:-a.spacing(2),display:"flex",alignItems:"center",justifyContent:"center"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:"bold",fontSize:a.typography.fontSize},searchFieldHTMLInput:{padding:a.spacing(2,0,2)},searchContainer:{width:pe-De},secondaryAction:{width:a.spacing(6),textAlign:"center",marginRight:a.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:a.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${W}px ${a.palette.navigation.indicator}`,color:a.palette.navigation.selectedColor},"&$closed":{width:q},"& $closedItemIcon":{paddingRight:W},"& $iconContainer":{marginLeft:-W}}}},{name:"BackstageSidebarItem"}),zs=(a,r)=>(0,R.vJ)(a.props.children,E=>{let v=!1;return E.getElements().forEach(({props:{to:$,dropdownItems:W}})=>{if(!v){if(W!=null&&W.length){W.forEach(({to:q})=>v=v||Ja(r,(0,A.i3)(q)));return}$&&(v=Ja(r,(0,A.i3)($)))}}),v},[r.pathname]);function zr(a){return a.to===void 0}const js=e.createElement(Zs).type,Vs=e.forwardRef(function({to:r,end:E,style:v,className:$,activeStyle:W,caseSensitive:q,activeClassName:pe="active","aria-current":De="page",...Oe},Qe){let{pathname:gt}=(0,A.TH)(),{pathname:Mt}=(0,A.WU)(r);q||(gt=gt.toLocaleLowerCase("en-US"),Mt=Mt.toLocaleLowerCase("en-US"));let Nt=gt===Mt;!Nt&&!E&&(Nt=gt.startsWith(`${Mt}/`));const jt=Nt?De:void 0;return e.createElement(d.rU,{...Oe,to:r,ref:Qe,"aria-current":jt,style:{...v,...Nt?W:void 0},className:ge()([$,Nt?pe:void 0])})}),jr=(0,e.forwardRef)((a,r)=>{const{icon:E,text:v,hasNotifications:$=!1,disableHighlight:W=!1,onClick:q,children:pe,className:De,...Oe}=a,Qe=Ya(),{isOpen:gt}=(0,e.useContext)(Aa),Mt=e.createElement(ce.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!$,className:ge()({[Qe.closedItemIcon]:!gt})},e.createElement(E,{fontSize:"small"})),Nt=e.createElement(e.Fragment,null,e.createElement("div",{"data-testid":"login-button",className:Qe.iconContainer},Mt),v&&e.createElement(xe.Z,{variant:"subtitle2",className:Qe.label},v),e.createElement("div",{className:Qe.secondaryAction},pe)),jt=gt?Nt:Mt,On={onClick:q,className:ge()(De,Qe.root,gt?Qe.open:Qe.closed,zr(a)&&Qe.buttonItem,{[Qe.highlightable]:!W})};return zr(a)?e.createElement("button",{"aria-label":v,...On,ref:r},jt):e.createElement(Vs,{...On,activeClassName:Qe.selected,to:a.to?a.to:"",ref:r,"aria-label":v||a.to,...Oe},jt)}),Hs=({children:a,...r})=>{const E=Ya(),[v,$]=(0,e.useState)(!1),W=(0,A.TH)(),q=zs(a,W),pe=(0,ct.Z)(gt=>gt.breakpoints.down("sm")),De=()=>{$(!0)},Oe=()=>{$(!1)},Qe=()=>pe?v?e.createElement(ne.Z,{fontSize:"small",className:E.submenuArrow}):e.createElement(Q.Z,{fontSize:"small",className:E.submenuArrow}):!v&&e.createElement(tt.Z,{fontSize:"small",className:E.submenuArrow});return e.createElement(cr.Provider,{value:{isHoveredOn:v,setIsHoveredOn:$}},e.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:Oe,onTouchStart:v?Oe:De,onMouseEnter:De,className:ge()(v&&E.highlighted)},e.createElement(jr,{className:q?E.selected:"",...r},Qe()),v&&a))},Vr=(0,e.forwardRef)((a,r)=>{const[E]=(0,R.vJ)(a.children,v=>v.getElements().filter($=>$.type===js));return E?e.createElement(Hs,{...a},E):e.createElement(jr,{...a,ref:r})});function Ol(a){const[r,E]=useState(""),v=Ya(),$=a.icon?a.icon:SearchIcon,W=()=>{a.onSearch(r),E("")},q=Qe=>{Qe.key==="Enter"&&(Qe.preventDefault(),W())},pe=Qe=>{E(Qe.target.value)},De=Qe=>{Qe.preventDefault(),Qe.stopPropagation()},Oe=Qe=>{W(),Qe.preventDefault()};return React.createElement("div",{className:v.searchRoot},React.createElement(Vr,{icon:$,to:a.to,onClick:Oe,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:r,onClick:De,onChange:pe,onKeyDown:q,className:v.searchContainer,InputProps:{disableUnderline:!0,className:v.searchField},inputProps:{className:v.searchFieldHTMLInput}})))}const Gs=(0,g.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),Il=(0,g.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),Hr=(0,g.Z)("hr")({height:1,width:"100%",background:"#383838",border:"none",margin:"12px 0px"},{name:"BackstageSidebarDivider"}),Js=a=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:a.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:a.palette.text.hint,borderRadius:"5px"}}),Ys=(0,g.Z)("div")(({theme:a})=>{const r=Js(a);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":r,"&:hover":r}}),Tl=()=>{const a=Ya(),{isOpen:r,setOpen:E}=useContext(Aa);if(useMediaQuery(W=>W.breakpoints.down("md"),{noSsr:!0}))return null;const $=()=>{E(!r)};return React.createElement("button",{onClick:$,className:a.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement("div",{className:a.arrows},r?React.createElement(Ws,null):React.createElement(Ks,null)))},Xs=(0,u.Z)(a=>({introCard:{color:"#b5b5b5",fontSize:12,width:Hn.drawerWidthOpen,marginTop:18,marginBottom:12,paddingLeft:Hn.iconPadding,paddingRight:Hn.iconPadding},introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:12},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:4,"&:hover":{color:a.palette.linkHover,transition:a.transitions.create("color",{easing:a.transitions.easing.sharp,duration:a.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:12}}),{name:"BackstageSidebarIntro"});function Qs(a){const r=Xs(),{text:E,onClose:v}=a,$=()=>v();return React.createElement("div",{className:r.introCard},React.createElement(Typography,{variant:"subtitle2"},E),React.createElement("div",{className:r.introDismiss},React.createElement(Link$1,{component:"button",onClick:$,underline:"none",className:r.introDismissLink},React.createElement(CloseIcon,{className:r.introDismissIcon}),React.createElement(Typography,{component:"span",className:r.introDismissText},"Dismiss"))))}const Gr=a=>{const{text:r,onDismiss:E}=a,[v,$]=useState(!1),W=()=>{$(!0)};return React.createElement(Collapse,{in:!v,onExited:E},React.createElement(Qs,{text:r,onClose:W}))},ei=null,ti="And your recently viewed plugins will pop up here!";function $l(a){const{isOpen:r}=useContext(Aa),E={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},[v,$]=useLocalStorageValue(ws),{starredItemsDismissed:W,recentlyViewedItemsDismissed:q}=v!=null?v:{},pe=()=>{$(Oe=>({...E,...Oe,starredItemsDismissed:!0}))},De=()=>{$(Oe=>({...E,...Oe,recentlyViewedItemsDismissed:!0}))};return r?React.createElement(React.Fragment,null,!W&&React.createElement(React.Fragment,null,React.createElement(Gr,{text:ei,onDismiss:pe}),React.createElement(Hr,null)),!q&&React.createElement(Gr,{text:ti,onDismiss:De})):null}const ni=(0,u.Z)(a=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:a.spacing(3),paddingBottom:a.spacing(3),paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{paddingLeft:a.spacing(3),paddingRight:a.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function Xa(a){const{className:r,stretch:E,noPadding:v,children:$,...W}=a,{contentRef:q}=ur(),pe=ni();return e.createElement("article",{ref:q,tabIndex:-1,...W,className:ge()(pe.root,r,{[pe.stretch]:E,[pe.noPadding]:v})},$)}const ai=(0,u.Z)(a=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:a.palette.background.paper,paddingLeft:a.spacing(3)},defaultTab:{padding:a.spacing(3,3),...a.typography.caption,textTransform:"uppercase",fontWeight:"bold",color:a.palette.text.secondary},selected:{color:a.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:a.palette.background.default,color:a.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function Jr(a){const{tabs:r,onChange:E,selectedIndex:v}=a,[$,W]=(0,e.useState)(v!=null?v:0),q=ai(),pe=(De,Oe)=>{v===void 0&&W(Oe),E&&E(Oe)};return(0,e.useEffect)(()=>{v!==void 0&&W(v)},[v]),e.createElement("div",{className:q.tabsWrapper},e.createElement(st.Z,{selectionFollowsFocus:!0,indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example",onChange:pe,value:$},r.map((De,Oe)=>e.createElement(ht.Z,{...De.tabProps,"data-testid":`header-tab-${Oe}`,label:De.label,key:De.id,value:Oe,className:q.defaultTab,classes:{selected:q.selected,root:q.tabRoot}}))))}function ri(a){var r,E,v;const $=(0,A.UO)(),q=a.map(({path:Qe,children:gt})=>({caseSensitive:!1,path:`${Qe}/*`,element:gt})).sort((Qe,gt)=>gt.path.replace(/\/\*$/,"").localeCompare(Qe.path.replace(/\/\*$/,""))),pe=(r=(0,A.V$)(q))!=null?r:a[0].children,[De]=(E=(0,A.fp)(q,`/${$["*"]}`))!=null?E:[],Oe=De?a.findIndex(Qe=>`${Qe.path}/*`===De.route.path):0;return{index:Oe===-1?0:Oe,element:pe,route:(v=a[Oe])!=null?v:a[0]}}function Yr(a){const{routes:r}=a,E=(0,A.s0)(),{index:v,route:$,element:W}=ri(r),q=(0,e.useMemo)(()=>r.map(De=>({id:De.path,label:De.title,tabProps:De.tabProps})),[r]),pe=De=>E(r[De].path.replace(/\/\*$/,"").replace(/^\//,""));return e.createElement(e.Fragment,null,e.createElement(Jr,{tabs:q,selectedIndex:v,onChange:pe}),e.createElement(Xa,null,e.createElement(Ce.q,{title:$.title}),W))}const mr=()=>null;(0,R.R5)(mr,"core.gatherMountPoints",!0);function Xr(a){const r=e.createElement(mr,{path:"",title:""},e.createElement("div",null)).type;return e.Children.toArray(a).flatMap(E=>{if(!(0,e.isValidElement)(E))return[];if(E.type===e.Fragment)return Xr(E.props.children);if(E.type!==r)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:v,title:$,children:W,tabProps:q}=E.props;return[{path:v,title:$,children:W,tabProps:q}]})}function Qr(a){const r=Xr(a.children);return e.createElement(Yr,{routes:r})}Qr.Route=mr;const oi=(0,u.Z)(a=>({value:{marginBottom:"6px"},subvalue:{color:a.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function si(a){const{value:r,subvalue:E}=a,v=oi();return e.createElement(e.Fragment,null,e.createElement("div",{className:v.value},r),e.createElement("div",{className:v.subvalue},E))}const ii=(0,u.Z)(a=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:a.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:"60px",justifyContent:"space-between",borderBottom:`1px solid ${a.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:a.spacing(2)}}}),{name:"BackstageTableFilters"}),li=a=>{var r;const E=ii(),{onChangeFilters:v}=a,[$,W]=(0,e.useState)({...a.selectedFilters}),[q,pe]=(0,e.useState)(!1),De=()=>{W({}),pe(Oe=>!Oe)};return(0,e.useEffect)(()=>{v($)},[$,v]),e.createElement("div",{className:E.root},e.createElement("div",{className:E.header},e.createElement("div",{className:E.value},"Filters"),e.createElement(U.Z,{color:"primary",onClick:De},"Clear all")),e.createElement("div",{className:E.filters},((r=a.filters)==null?void 0:r.length)&&a.filters.map(Oe=>e.createElement(Rr,{triggerReset:q,key:Oe.element.label,...Oe.element,selected:$[Oe.element.label],onChange:Qe=>W({...$,[Oe.element.label]:Qe})}))))},ci={Add:(0,e.forwardRef)((a,r)=>e.createElement(Dt.Z,{...a,ref:r})),Check:(0,e.forwardRef)((a,r)=>e.createElement(un.Z,{...a,ref:r})),Clear:(0,e.forwardRef)((a,r)=>e.createElement(Ut.Z,{...a,ref:r})),Delete:(0,e.forwardRef)((a,r)=>e.createElement(Lt.Z,{...a,ref:r})),DetailPanel:(0,e.forwardRef)((a,r)=>e.createElement(rt.Z,{...a,ref:r})),Edit:(0,e.forwardRef)((a,r)=>e.createElement(Vt.Z,{...a,ref:r})),Export:(0,e.forwardRef)((a,r)=>e.createElement(it.Z,{...a,ref:r})),Filter:(0,e.forwardRef)((a,r)=>e.createElement(on.Z,{...a,ref:r})),FirstPage:(0,e.forwardRef)((a,r)=>e.createElement(sn.Z,{...a,ref:r})),LastPage:(0,e.forwardRef)((a,r)=>e.createElement(X.Z,{...a,ref:r})),NextPage:(0,e.forwardRef)((a,r)=>e.createElement(rt.Z,{...a,ref:r})),PreviousPage:(0,e.forwardRef)((a,r)=>e.createElement(Ze.Z,{...a,ref:r})),ResetSearch:(0,e.forwardRef)((a,r)=>e.createElement(Ut.Z,{...a,ref:r})),Search:(0,e.forwardRef)((a,r)=>e.createElement(on.Z,{...a,ref:r})),SortArrow:(0,e.forwardRef)((a,r)=>e.createElement(qt.Z,{...a,ref:r})),ThirdStateCheck:(0,e.forwardRef)((a,r)=>e.createElement(Ne.Z,{...a,ref:r})),ViewColumn:(0,e.forwardRef)((a,r)=>e.createElement(St.Z,{...a,ref:r}))};function qr(a,r){const E=r.split(".");let v=a[E[0]];for(let $=1;$<E.length;++$){if(v===void 0)return v;const W=E[$];v=v[W]}return v}const ui=(0,D.Z)(a=>({header:{padding:a.spacing(1,2,1,2.5),borderTop:`1px solid ${a.palette.grey.A100}`,borderBottom:`1px solid ${a.palette.grey.A100}`,color:a.palette.textSubtle,fontWeight:a.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(at.W$),eo=(0,D.Z)(a=>({root:{padding:a.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:"bold"}},searchField:{paddingRight:a.spacing(2)}}),{name:"BackstageTableToolbar"})(at.UW),di=(0,u.Z)(()=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:"bold",fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),mi=(0,u.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function pi(a,r){return a.map(E=>{const v={};let $=E.cellStyle||{};if(E.highlight)if(v.color=r.palette.textContrast,typeof $=="object")$.fontWeight=r.typography.fontWeightBold;else{const W=$;$=(q,pe,De)=>({...W(q,pe,De),fontWeight:r.typography.fontWeightBold})}return{...E,headerStyle:v,cellStyle:$}})}function fi(a,r){return(0,bt.transform)(a,(E,v,$)=>{(0,bt.isEqual)(v,r[$])||(E[$]=v)})}const to={search:"",filtersOpen:!1,filters:{}};function hi(a){const{toolbarRef:r,setSearch:E,hasFilters:v,selectedFiltersLength:$,toggleFilters:W}=a,q=di(),pe=(0,e.useCallback)(De=>{a.onSearchChanged(De),E(De)},[a,E]);return v?e.createElement("div",{className:q.root},e.createElement("div",{className:q.root},e.createElement(h.Z,{onClick:W,"aria-label":"filter list"},e.createElement(on.Z,null)),e.createElement(xe.Z,{className:q.title},"Filters (",$,")")),e.createElement(eo,{...a,ref:r,onSearchChanged:pe})):e.createElement(eo,{...a,ref:r,onSearchChanged:pe})}function gi(a){const{data:r,columns:E,options:v,title:$,subtitle:W,filters:q,initialState:pe,emptyContent:De,onStateChange:Oe,...Qe}=a,gt=mi(),Mt=(0,O.Z)(),Nt={...to,...pe},[jt,On]=(0,e.useState)(Nt.filtersOpen),xn=(0,e.useCallback)(()=>On(Jn=>!Jn),[On]),[Gn,jn]=(0,e.useState)(0),[In,Dn]=(0,e.useState)(r),[$n,ea]=(0,e.useState)(Nt.filters),wa=pi(E,Mt),[ma,Fa]=(0,e.useState)(Nt.search);(0,e.useEffect)(()=>{if(Oe){const Jn=fi({search:ma,filtersOpen:jt,filters:$n},to);Oe(Jn)}},[ma,jt,$n,Oe]);const Ra={headerStyle:{textTransform:"uppercase"}},Ka=(0,e.useCallback)(Jn=>{var Ca;return(Ca=E.find(Ta=>Ta.title===Jn))==null?void 0:Ca.field},[E]);(0,e.useEffect)(()=>{if(typeof r=="function")return;if(!$n){Dn(r);return}const Jn=Object.values($n);if(r&&Jn.flat().length){const Ca=r.filter(Ta=>!!Object.entries($n).filter(([,fa])=>!!fa.length).every(([fa,Wn])=>{const ra=qr(Ta,Ka(fa));return Array.isArray(ra)&&Array.isArray(Wn)?ra.some($a=>Wn.includes($a)):Array.isArray(ra)?ra.includes(Wn):Array.isArray(Wn)?Wn.includes(ra):ra===Wn}));Dn(Ca)}else Dn(r);jn(Jn.flat().length)},[r,$n,Ka]);const kn=(Jn,Ca)=>{const Ta=Wn=>{const ra=new Set,$a=ha=>{ha!=null&&ra.add(ha)};return Ca&&Ca.forEach(ha=>{const za=qr(ha,Ka(Wn));Array.isArray(za)?za.forEach($a):$a(za)}),ra},fa=Wn=>({placeholder:"All results",label:Wn.column,multiple:Wn.type==="multiple-select",items:[...Ta(Wn.column)].sort().map(ra=>({label:ra,value:ra}))});return Jn.map(Wn=>({type:Wn.type,element:fa(Wn)}))},Oa=!!(q!=null&&q.length),yr=(0,e.useCallback)(Jn=>e.createElement(hi,{setSearch:Fa,hasFilters:Oa,selectedFiltersLength:Gn,toggleFilters:xn,...Jn}),[xn,Oa,Gn,Fa]),Ia=typeof r!="function"&&r.length===0,nr=E.length,vr=(0,e.useCallback)(Jn=>De&&Ia?e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{colSpan:nr},De))):e.createElement(at.os,{...Jn}),[Ia,De,nr]);return e.createElement("div",{className:gt.root},jt&&r&&typeof r!="function"&&(q==null?void 0:q.length)&&e.createElement(li,{filters:kn(q,r),selectedFilters:$n,onChangeFilters:ea}),e.createElement(at.ZP,{components:{Header:ui,Toolbar:yr,Body:vr},options:{...Ra,...v},columns:wa,icons:ci,title:e.createElement(e.Fragment,null,e.createElement(xe.Z,{variant:"h5",component:"h3"},$),W&&e.createElement(xe.Z,{color:"textSecondary",variant:"body1"},W)),data:typeof r=="function"?r:In,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter"}},...Qe}))}function Ei(a,r){if(r<=0)return[a];const E=[];for(let v=0;v<a.length;v+=r)E.push(a.slice(v,v+r));return E}const no=a=>{const{children:r,value:E,index:v,...$}=a;return React.createElement("div",{role:"tabpanel",hidden:E!==v,"aria-labelledby":`scrollable-auto-tab-${v}`,...$},E===v&&React.createElement(Box,{p:3},r))},yi=(0,u.Z)(()=>({root:{color:"#6E6E6E",overflow:"visible",fontSize:"1.5rem",textAlign:"center",borderRadius:"50%",backgroundColor:"#E6E6E6",marginLeft:a=>a.isNext?"auto":"0",marginRight:a=>a.isNext?"0":"10px","&:hover":{backgroundColor:"#E6E6E6",opacity:"1"}}}),{name:"BackstageTabIcon"}),ao=a=>{const r=yi(a),{ariaLabel:E,onClick:v}=a;return React.createElement(IconButton,{onClick:v,className:r.root,size:"small",disableRipple:!0,disableFocusRipple:!0,"aria-label":E},a.children)},vi=(a,r)=>r?a?"20px":"0":"40px",bi=(0,u.Z)(a=>({root:{textTransform:"none",height:"64px",fontWeight:a.typography.fontWeightBold,fontSize:a.typography.pxToRem(13),color:a.palette.textSubtle,marginLeft:r=>vi(r.isFirstNav,r.isFirstIndex),width:"130px",minWidth:"130px","&:hover":{outline:"none",backgroundColor:"transparent",color:a.palette.textSubtle}}})),Ci=a=>{const r=bi(a),{isFirstNav:E,isFirstIndex:v,...$}=a;return React.createElement(Tab,{className:r.root,disableRipple:!0,...$})},Pi=(0,u.Z)(a=>({indicator:{display:"flex",justifyContent:"center",backgroundColor:a.palette.tabbar.indicator,height:"4px"},flexContainer:{alignItems:"center"},root:{"&:last-child":{marginLeft:"auto"}}}),{name:"BackstageTabBar"}),_i=a=>{const r=Pi(a);return React.createElement(Tabs$1,{classes:r,...a,TabIndicatorProps:{children:React.createElement("span",null)}})},Si=(0,u.Z)(a=>({root:{flexGrow:1,width:"100%"},styledTabs:{backgroundColor:a.palette.background.paper},appbar:{boxShadow:"none",backgroundColor:a.palette.background.paper,paddingLeft:"10px",paddingRight:"10px"}}),{name:"BackstageTabs"});function Dl(a){const{tabs:r}=a,E=Si(),[v,$]=useState([0,0]),[W,q]=useState(0),[pe,De]=useState(0),[Oe,Qe]=useState([[]]),gt=useRef(),{width:Mt}=useWindowSize(),Nt=(jn,In)=>{$([W,In])},jt=()=>{q(W-1)},On=()=>{q(W+1)},xn=()=>W+1<Oe.length;useEffect(()=>{const In=W===0?1:2,Dn=gt.current.offsetWidth-20-In*30,$n=v[0]*pe+v[1],ea=Math.floor(Dn/170);De(ea),Qe(Ei(r,ea)),$([Math.floor($n/ea),$n%ea])},[Mt,r]);const Gn=W===v[0]?v[1]:!1;return React.createElement("div",{className:E.root},React.createElement(AppBar,{ref:gt,className:E.appbar,position:"static"},React.createElement("div",null,React.createElement(_i,{value:Gn,onChange:Nt,selectionFollowsFocus:!0},W!==0&&React.createElement(ao,{onClick:jt,ariaLabel:"navigate-before"},React.createElement(NavigateBeforeIcon,null)),Oe[W].map((jn,In)=>React.createElement(Ci,{value:In,isFirstIndex:In===0,isFirstNav:W===0,key:In,icon:jn.icon||void 0,label:jn.label||void 0})),xn()&&React.createElement(ao,{isNext:!0,onClick:On,ariaLabel:"navigate-next"},React.createElement(NavigateNextIcon,null))))),Gn!==!1?Oe[W].map((jn,In)=>React.createElement(no,{key:In,value:In,index:Gn},jn.content)):React.createElement(no,{key:"panel_outside_chunked_array",value:v[1],index:v[1]},Oe[v[0]][v[1]].content))}function wi(a,r){const E=a[a.length-1];if(!!E)return E>=.9?r.palette.status.ok:E>=.5?r.palette.status.warning:r.palette.status.error}function Ml(a){var r;const E=useTheme();return a.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...a},a.title&&React.createElement("title",null,a.title),React.createElement(SparklinesLine,{color:(r=a.color)!=null?r:wi(a.data,E)})):null}const Ri=a=>(0,u.Z)(r=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:r.spacing(2),textAlign:a.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:r.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Ai=({title:a="Unknown page",className:r})=>e.createElement(xe.Z,{variant:"h4",component:"h2",className:r,"data-testid":"header-title"},a);function ro(a){const{description:r,title:E,titleComponent:v=void 0,children:$,textAlign:W="left"}=a,q=Ri({textAlign:W})(),pe=v||e.createElement(Ai,{title:E,className:q.title});return e.createElement(e.Fragment,null,e.createElement(Ce.q,{title:E}),e.createElement("div",{className:q.container},e.createElement("div",{className:q.leftItemsBox},pe,r&&e.createElement(xe.Z,{className:q.description,variant:"body2"},r)),e.createElement("div",{className:q.rightItemsBox},$)))}const Oi=(0,u.Z)(a=>({micDrop:{maxWidth:"60%",position:"absolute",bottom:a.spacing(2),right:a.spacing(2),[a.breakpoints.down("xs")]:{maxWidth:"96%",position:"relative",bottom:"unset",right:"unset",margin:`${a.spacing(10)}px auto ${a.spacing(4)}px`}}}),{name:"BackstageErrorPageMicDrop"}),Ii=()=>{const a=Oi();return e.createElement("img",{src:wt,className:a.micDrop,alt:"Girl dropping mic from her hands"})},Ti=(0,u.Z)(a=>({container:{padding:a.spacing(8),[a.breakpoints.down("xs")]:{padding:a.spacing(2)}},title:{paddingBottom:a.spacing(5),[a.breakpoints.down("xs")]:{paddingBottom:a.spacing(4),fontSize:32}},subtitle:{color:a.palette.textSubtle}}),{name:"BackstageErrorPage"});function $i(a){const{status:r,statusMessage:E,additionalInfo:v,supportUrl:$}=a,W=Ti(),q=(0,A.s0)(),pe=kr();return e.createElement(Ue.Z,{container:!0,spacing:0,className:W.container},e.createElement(Ii,null),e.createElement(Ue.Z,{item:!0,xs:12,sm:8,md:4},e.createElement(xe.Z,{"data-testid":"error",variant:"body1",className:W.subtitle},"ERROR ",r,": ",E),e.createElement(xe.Z,{variant:"body1",className:W.subtitle},v),e.createElement(xe.Z,{variant:"h2",className:W.title},"Looks like someone dropped the mic!"),e.createElement(xe.Z,{variant:"h6"},e.createElement(b,{to:"#","data-testid":"go-back-link",onClick:()=>q(-1)},"Go back"),"... or please"," ",e.createElement(b,{to:$||pe.url},"contact support")," if you think this is a bug.")))}const Di=(0,D.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(xe.Z),pr=(0,D.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(Bt.Z);function oo(a){const{children:r,...E}=a,[v,$]=e.useState(null),W=e.Children.toArray(r),[q,pe,...De]=W,Oe=De.length?De.pop():W[W.length-1],Qe=W.length>3,gt=jt=>{$(jt.currentTarget)},Mt=()=>{$(null)},Nt=Boolean(v);return e.createElement(e.Fragment,null,e.createElement(hn.Z,{"aria-label":"breadcrumb",...E},W.length>1&&e.createElement(pr,{clone:!0},q),W.length>2&&e.createElement(pr,{clone:!0},pe),Qe&&e.createElement(Di,{onClick:gt},"..."),e.createElement(Bt.Z,{style:{fontStyle:"italic"}},Oe)),e.createElement(Ft.ZP,{open:Nt,anchorEl:v,onClose:Mt,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},e.createElement($t.Z,null,De.map((jt,On)=>e.createElement(Pt.Z,{key:On,button:!0},e.createElement(pr,{clone:!0},jt))))))}const Mi=(0,u.Z)(a=>({header:{gridArea:"pageHeader",padding:a.spacing(3),width:"100%",boxShadow:a.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:a.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[a.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto"},title:{color:a.palette.bursts.fontColor,wordBreak:"break-word",fontSize:a.typography.h3.fontSize,marginBottom:0},subtitle:{color:a.palette.bursts.fontColor,opacity:.8,display:"inline-block",marginTop:a.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:a.spacing(1),color:a.palette.bursts.fontColor},breadcrumb:{color:a.palette.bursts.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-a.spacing(.3),marginBottom:a.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-a.spacing(.3),marginBottom:a.spacing(.3)}}),{name:"BackstageHeader"}),Li=({type:a,typeLink:r,classes:E,pageTitle:v})=>a?r?e.createElement(oo,{className:E.breadcrumb},e.createElement(b,{to:r},a),e.createElement(xe.Z,null,v)):e.createElement(xe.Z,{className:E.type},a):null,xi=({pageTitle:a,classes:r,tooltip:E})=>{const v=e.createElement(xe.Z,{className:r.title,variant:"h1"},a);return E?e.createElement(N.ZP,{title:E,placement:"top-start"},v):v},ki=({classes:a,subtitle:r})=>r?typeof r!="string"?e.createElement(e.Fragment,null,r):e.createElement(xe.Z,{className:a.subtitle,variant:"subtitle2",component:"span"},r):null;function Qa(a){const{children:r,pageTitleOverride:E,style:v,subtitle:$,title:W,tooltip:q,type:pe,typeLink:De}=a,Oe=Mi(),gt=(0,R.h_)(R.Ds).getOptionalString("app.title")||"Backstage",Mt=E||W,Nt=W||E,jt=`${Mt} | %s | ${gt}`,On=`${Mt} | ${gt}`;return e.createElement(e.Fragment,null,e.createElement(Ce.q,{titleTemplate:jt,defaultTitle:On}),e.createElement("header",{style:v,className:Oe.header},e.createElement(Bt.Z,{className:Oe.leftItemsBox},e.createElement(Li,{classes:Oe,type:pe,typeLink:De,pageTitle:Nt}),e.createElement(xi,{classes:Oe,pageTitle:Nt,tooltip:q}),e.createElement(ki,{classes:Oe,subtitle:$})),e.createElement(Ue.Z,{container:!0,className:Oe.rightItemsBox,spacing:4},r)))}const Bi=(0,u.Z)(a=>({root:{textAlign:"left"},label:{color:a.palette.common.white,fontWeight:"bold",letterSpacing:0,fontSize:a.typography.fontSize,marginBottom:a.spacing(1)/2,lineHeight:1},value:{color:"rgba(255, 255, 255, 0.8)",fontSize:a.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),Ui=({value:a,className:r})=>e.createElement(xe.Z,{className:r},a);function so(a){const{label:r,value:E,url:v}=a,$=Bi(),W=e.createElement(Ui,{className:$.value,value:E||"<Unknown>"});return e.createElement(Ue.Z,{item:!0},e.createElement("span",{className:$.root},e.createElement(xe.Z,{className:$.label},r),v?e.createElement(b,{to:v},W):W))}const Zi={hour:"2-digit",minute:"2-digit"};function io(a){const r=new Date,E=window.navigator.language,v=[];if(!a.has("homepage.clocks"))return v;const $=a.getConfigArray("homepage.clocks");for(const W of $)if(W.has("label")&&W.has("timezone")){let q=W.getString("label");const pe={timeZone:W.getString("timezone"),...Zi};try{new Date().toLocaleString(E,pe)}catch{console.warn(`The timezone ${pe.timeZone} is invalid. Defaulting to GMT`),pe.timeZone="GMT",q="GMT"}const De=r.toLocaleTimeString(E,pe);v.push({time:De,label:q})}return v}function Ll(a){const r=useApi(configApiRef),E=[],[v,$]=React.useState(E);return React.useEffect(()=>{$(io(r));const W=setInterval(()=>{$(io(r))},1e3);return()=>{clearInterval(W)}},[r]),v.length!==0?React.createElement(React.Fragment,null,v.map(W=>React.createElement(so,{label:W.label,value:W.time,key:W.label}))):null}const Ni=a=>(0,y.Z)({root:{color:a.palette.common.white,padding:a.spacing(2,2,3),backgroundImage:a.palette.bursts.gradient.linear,backgroundPosition:0,backgroundSize:"inherit"}}),Wi=(0,u.Z)(Ni,{name:"BackstageItemCardHeader"});function lo(a){const{title:r,subtitle:E,children:v}=a,$=Wi(a);return e.createElement("div",{className:$.root},E&&e.createElement(xe.Z,{variant:"subtitle2",component:"h3"},E),r&&e.createElement(xe.Z,{variant:"h6",component:"h4"},r),v)}function xl(a){const{description:r,tags:E,title:v,type:$,subtitle:W,label:q,onClick:pe,href:De}=a;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(lo,{title:v,subtitle:W||$})),React.createElement(CardContent,null,E!=null&&E.length?React.createElement(Box,null,E.map((Oe,Qe)=>React.createElement(Chip,{size:"small",label:Oe,key:Qe}))):null,r),React.createElement(CardActions,null,!De&&React.createElement(B,{to:"#",onClick:pe,color:"primary"},q),De&&React.createElement(B,{to:De,color:"primary"},q)))}const Fi=a=>(0,y.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:a.spacing(2)}}),Ki=(0,u.Z)(Fi,{name:"BackstageItemCardGrid"});function zi(a){const{children:r,...E}=a,v=Ki(E);return e.createElement("div",{className:v.root,...E},r)}const ji=(0,u.Z)(()=>({root:({isMobile:a})=>({display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",height:a?"100%":"100vh",overflowY:"auto"})}),{name:"BackstagePage"});function qa(a){const{themeId:r,children:E}=a,{isMobile:v}=(0,e.useContext)(Ua),$=ji({isMobile:v});return e.createElement(T.Z,{theme:W=>({...W,page:W.getPageTheme({themeId:r})})},e.createElement("div",{className:$.root},E))}function Vi(a){const{themeId:r,children:E,...v}=a;return e.createElement(qa,{themeId:r},e.createElement(Qa,{...v}),E)}const Hi=pn.z.object({providerInfo:pn.z.object({}).catchall(pn.z.unknown()).optional(),profile:pn.z.object({email:pn.z.string().optional(),displayName:pn.z.string().optional(),picture:pn.z.string().optional()}),backstageIdentity:pn.z.object({token:pn.z.string(),identity:pn.z.object({type:pn.z.literal("user"),userEntityRef:pn.z.string(),ownershipEntityRefs:pn.z.array(pn.z.string())})})}),co={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function Gi(a){const r=new Date(Date.now()+co.defaultTokenExpiryMillis);if(!a)return r;const[E,v,$]=a.split("."),W=JSON.parse(atob(v));return typeof W.exp!="number"?r:new Date(W.exp*1e3-co.tokenExpiryMarginMillis)}class Ji{constructor(r){this.options=r,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:r}=this.getSessionSync(),E=r.identity.userEntityRef,v=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(E);if(!v)throw new TypeError(`Invalid user entity reference "${E}"`);return v[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const r=this.state.type==="active"?this.state.session:void 0,E=this.fetchSession().then(v=>(this.state={type:"active",session:v,expiresAt:Gi(v.backstageIdentity.token)},v),v=>{throw this.state={type:"failed",error:v},v});return this.state={type:"fetching",promise:E,previous:r},E}async fetchSession(){const r=await this.options.discoveryApi.getBaseUrl("auth"),E=await fetch(`${r}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"});if(!E.ok)throw await ResponseError.fromResponse(E);return Hi.parse(await E.json())}}const kl=a=>{const r=useApi(discoveryApiRef),[{status:E,error:v},{execute:$}]=useAsync(async()=>{const W=new Ji({provider:a.provider,discoveryApi:r});await W.start(),a.onSignInSuccess(W)});return useMountEffect($),E==="loading"?React.createElement(Va,null):v?React.createElement(Ht,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:v}):null};class fr{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const r="user:default/guest";return{type:"user",userEntityRef:r,ownershipEntityRefs:[r]}}async getCredentials(){return{}}async signOut(){}}function Yi(a){const[r,E,v]=a.split(".");return JSON.parse(atob(E))}class hr{constructor(r){this.result=r}getUserId(){return this.result.userId}static fromResult(r){return new hr(r)}async getIdToken(){var r,E;return(E=(r=this.result).getIdToken)==null?void 0:E.call(r)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const r=await this.getIdToken();if(!r){const $=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:$,ownershipEntityRefs:[$]}}const{sub:E,ent:v}=Yi(r);return{type:"user",userEntityRef:E,ownershipEntityRefs:v!=null?v:[]}}async getCredentials(){var r,E;return{token:await((E=(r=this.result).getIdToken)==null?void 0:E.call(r))}}async signOut(){var r,E;return(E=(r=this.result).signOut)==null?void 0:E.call(r)}}class Za{constructor(r,E,v){this.identity=r,this.authApi=E,this.profile=v}static createGuest(){return new fr}static fromLegacy(r){return hr.fromResult(r)}static create(r){return new Za(r.identity,r.authApi,r.profile)}getUserId(){const r=this.identity.userEntityRef,E=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(r);if(!E)throw new TypeError(`Invalid user entity reference "${r}"`);return E[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(r){throw this.profilePromise=void 0,r}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const gr=(0,u.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),er=({children:a})=>{const r=gr();return e.createElement(Ue.Z,{component:"li",item:!0,classes:r},a)},Xi={Component:({config:a,onSignInSuccess:r})=>{const{apiRef:E,title:v,message:$}=a,W=(0,R.h_)(E),q=(0,R.h_)(R.VE),pe=async()=>{try{const De=await W.getBackstageIdentity({instantPopup:!0});if(!De)throw new Error(`The ${v} provider is not configured to support sign-in`);const Oe=await W.getProfile();r(Za.create({identity:De.identity,profile:Oe,authApi:W}))}catch(De){q.post(new Wt.SP("Login failed",De))}};return e.createElement(er,null,e.createElement(ka,{variant:"fullHeight",title:v,actions:e.createElement(U.Z,{color:"primary",variant:"outlined",onClick:pe},"Sign In")},e.createElement(xe.Z,{variant:"body1"},$)))},loader:async(a,r)=>{const E=a.get(r),v=await E.getBackstageIdentity({optional:!0});if(!v)return;const $=await E.getProfile();return Za.create({identity:v.identity,profile:$,authApi:E})}},Qi={Component:({onSignInSuccess:a})=>e.createElement(er,null,e.createElement(ka,{title:"Guest",variant:"fullHeight",actions:e.createElement(U.Z,{color:"primary",variant:"outlined",onClick:()=>a(new fr)},"Enter")},e.createElement(xe.Z,{variant:"body1"},"Enter as a Guest User.",e.createElement("br",null),"You will not have a verified identity,",e.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new fr},qi=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,el=(0,u.Z)(a=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:a.spacing(2)}}),{name:"BackstageCustomProvider"}),uo=a=>{const{ref:r,...E}=a;return{inputRef:r,...E}},tl={Component:({onSignInSuccess:a})=>{const r=el(),{register:E,handleSubmit:v,formState:$}=(0,Xt.cI)({mode:"onChange"}),{errors:W}=$,q=({userId:pe})=>{a(Za.fromLegacy({userId:pe,profile:{email:`${pe}@example.com`}}))};return e.createElement(er,null,e.createElement(ka,{title:"Custom User",variant:"fullHeight"},e.createElement(xe.Z,{variant:"body1"},"Enter your own User ID and credentials.",e.createElement("br",null),"This selection will not be stored."),e.createElement("form",{className:r.form,onSubmit:v(q)},e.createElement(_n.Z,null,e.createElement(me.Z,{...uo(E("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(W.userId)}),W.userId&&e.createElement(En.Z,{error:!0},W.userId.message)),e.createElement(_n.Z,null,e.createElement(me.Z,{...uo(E("idToken",{required:!1,validate:pe=>!pe||qi.test(pe)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(W.idToken)}),W.idToken&&e.createElement(En.Z,{error:!0},W.idToken.message)),e.createElement(U.Z,{type:"submit",color:"primary",variant:"outlined",className:r.button,disabled:!($!=null&&$.isDirty)||!o()(W)},"Continue"))))},loader:async()=>{}};class Er{constructor(r){this.config=r}static from(r){return new Er(r)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const tr="@backstage/core:SignInPage:provider",mo={guest:Qi,custom:tl,common:Xi};function po(a,r){if(a in r)throw new Error(`"${a}" ID is duplicated. IDs of identity providers have to be unique.`)}function nl(a){return a.reduce((E,v)=>{if(typeof v=="string")return po(v,E),E[v]={components:mo[v],id:v},E;const{id:$}=v;return po($,E),E[$]={components:mo.common,id:$,config:v},E},{})}const al=(a,r)=>{const E=useApi(errorApiRef),v=useApiHolder(),[$,W]=useState(!0),q=useCallback(De=>{r(Er.from({identityApi:De,signOut:async()=>{var Oe;localStorage.removeItem(tr),await((Oe=De.signOut)==null?void 0:Oe.call(De))}}))},[r]);useLayoutEffect(()=>{var De;if(!$)return;const Oe=localStorage.getItem(tr);if(Oe===null){W(!1);return}const Qe=a[Oe];if(!Qe){W(!1);return}let gt=!1;return Qe.components.loader(v,(De=Qe.config)==null?void 0:De.apiRef).then(Mt=>{gt||(Mt?q(Mt):W(!1))}).catch(Mt=>{gt||(localStorage.removeItem(tr),E.post(Mt),W(!1))}),()=>{gt=!0}},[$,E,r,v,a,q]);const pe=useMemo(()=>Object.keys(a).map(De=>{const Oe=a[De],{Component:Qe}=Oe.components,gt=Mt=>{localStorage.setItem(tr,Oe.id),q(Mt)};return React.createElement(Qe,{key:Oe.id,config:Oe.config,onSignInSuccess:gt})}),[a,q]);return[$,pe]},rl=({onSignInSuccess:a,providers:r=[],title:E,align:v="left"})=>{const $=useApi(configApiRef),W=gr(),q=nl(r),[pe,De]=al(q,a);return pe?React.createElement(Va,null):React.createElement(qa,{themeId:"home"},React.createElement(Qa,{title:$.getString("app.title")}),React.createElement(Xa,null,E&&React.createElement(ro,{title:E,textAlign:v}),React.createElement(Grid,{container:!0,justifyContent:v==="center"?v:"flex-start",spacing:2,component:"ul",classes:W},De)))},ol=({provider:a,auto:r,onSignInSuccess:E})=>{const v=gr(),$=useApi(a.apiRef),W=useApi(configApiRef),[q,pe]=useState(),[De,Oe]=useState(!1),Qe=async({checkExisting:gt,showPopup:Mt})=>{try{let Nt;if(gt&&(Nt=await $.getBackstageIdentity({optional:!0})),!Nt&&(Mt||r)&&(Oe(!0),Nt=await $.getBackstageIdentity({instantPopup:!0}),!Nt))throw new Error(`The ${a.title} provider is not configured to support sign-in`);if(!Nt){Oe(!0);return}const jt=await $.getProfile();E(Za.create({identity:Nt.identity,authApi:$,profile:jt}))}catch(Nt){pe(Nt),Oe(!0)}};return useMountEffect(()=>Qe({checkExisting:!0})),De?React.createElement(qa,{themeId:"home"},React.createElement(Qa,{title:W.getString("app.title")}),React.createElement(Xa,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:v},React.createElement(er,null,React.createElement(ka,{variant:"fullHeight",title:a.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{Qe({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},a.message),q&&q.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},q.message)))))):React.createElement(Va,null)};function Kl(a){return"provider"in a?React.createElement(ol,{...a}):React.createElement(rl,{...a})}const sl=(0,u.Z)(a=>({root:{padding:a.spacing(0,2,0,2.5),minHeight:a.spacing(3)},indicator:{backgroundColor:a.palette.info.main,height:a.spacing(.3)}}),{name:"BackstageTabbedCard"}),il=(0,D.Z)(a=>({root:{padding:a.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:a.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(Gt.Z);function ll(a){const{slackChannel:r,errorBoundaryProps:E,children:v,title:$,deepLink:W,value:q,onChange:pe}=a,De=sl(),[Oe,Qe]=(0,e.useState)(0),gt=pe||((jt,On)=>Qe(On));let Mt;q?e.Children.map(v,jt=>{e.isValidElement(jt)&&(jt==null?void 0:jt.props.value)===q&&(Mt=jt==null?void 0:jt.props.children)}):e.Children.map(v,(jt,On)=>{e.isValidElement(jt)&&On===Oe&&(Mt=jt==null?void 0:jt.props.children)});const Nt=E||(r?{slackChannel:r}:{});return e.createElement(Re.Z,null,e.createElement(Pr,{...Nt},$&&e.createElement(il,{title:$}),e.createElement(st.Z,{selectionFollowsFocus:!0,classes:De,value:q||Oe,onChange:gt},v),e.createElement(mt.Z,null),e.createElement(dt.Z,null,Mt),W&&e.createElement(Cr,{...W})))}const cl=(0,u.Z)(a=>({root:{minWidth:a.spacing(6),minHeight:a.spacing(3),margin:a.spacing(0,2,0,0),padding:a.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:a.palette.text.primary}},selected:{fontWeight:"bold"}}),{name:"BackstageCardTab"});function ul(a){const{children:r,...E}=a,v=cl();return e.createElement(ht.Z,{disableRipple:!0,classes:v,...E})}},30705:function(Tt,l,t){t.d(l,{$4:function(){return Le},$v:function(){return c},CL:function(){return nt},CO:function(){return ze},D:function(){return f},Ds:function(){return te},E6:function(){return V},F4:function(){return T},IY:function(){return Y},I_:function(){return P},Kp:function(){return g},NT:function(){return xe},NW:function(){return we},Oi:function(){return be},P4:function(){return vt},R5:function(){return L},Rz:function(){return Kt},T0:function(){return O},VE:function(){return ct},W0:function(){return se},ZM:function(){return de},bq:function(){return A},fC:function(){return R},gP:function(){return ye},gW:function(){return d},h_:function(){return w},hg:function(){return F},ni:function(){return K},p_:function(){return p},qD:function(){return j},rx:function(){return rt},sM:function(){return D},tg:function(){return Fe},uB:function(){return N},ux:function(){return U},vJ:function(){return ue},v_:function(){return Z},x8:function(){return je},z$:function(){return Ke}});var e=t(18473),i=t(2784),h=t(10289);const s=(0,e.CT)("analytics-context"),n=()=>{const le=(0,i.useContext)(s);if(le===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const ie=le.atVersion(1);if(ie===void 0)throw new Error("No context found for version 1.");return ie},R=le=>{const{attributes:ie,children:ve}=le,Ve={...n(),...ie},Et=(0,e.EI)({1:Ve});return i.createElement(s.Provider,{value:Et},ve)};function P(){const le=(0,e.Vt)("api-context");if(!le)throw new Error("API context is not available");const ie=le.atVersion(1);if(!ie)throw new Error("ApiContext v1 not available");return ie}function w(le){const ve=P().get(le);if(!ve)throw new Error(`No implementation available for ${le}`);return ve}function u(le){return function(ve){const fe=Et=>{const ft=P(),Wt={};for(const Yt in le)if(le.hasOwnProperty(Yt)){const ln=le[Yt],gn=ft.get(ln);if(!gn)throw new Error(`No implementation available for ${ln}`);Wt[Yt]=gn}return React.createElement(ve,{...Et,...Wt})},Ve=ve.displayName||ve.name||"Component";return fe.displayName=`withApis(${Ve})`,fe}}class y{constructor(ie){if(this.config=ie,!ie.id.split(".").flatMap(fe=>fe.split("-")).every(fe=>fe.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${ie.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function O(le){return new y(le)}function K(le,ie){return"id"in le?{api:le,deps:{},factory:()=>ie}:le}var D=(le=>(le.SignedIn="SignedIn",le.SignedOut="SignedOut",le))(D||{});const g=O({id:"core.auth.google"}),T=O({id:"core.auth.github"}),f=O({id:"core.auth.okta"}),U=O({id:"core.auth.gitlab"}),p=O({id:"core.auth.microsoft"}),d=O({id:"core.auth.onelogin"}),A=O({id:"core.auth.bitbucket"}),N=O({id:"core.auth.atlassian"}),c=O({id:"core.alert"}),Z=O({id:"core.analytics"}),F=O({id:"core.apptheme"}),te=O({id:"core.config"}),we=O({id:"core.discovery"}),ct=O({id:"core.error"});var nt=(le=>(le[le.None=0]="None",le[le.Active=1]="Active",le))(nt||{});const se=O({id:"core.featureflags"}),ye=O({id:"core.fetch"}),Le=O({id:"core.identity"}),de=O({id:"core.oauthrequest"}),V=O({id:"core.storage"});class he{constructor(ie,ve={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=ie,this.context=ve}setContext(ie){this.context=ie}captureEvent(ie,ve,{value:fe,attributes:Ve}={}){try{this.analyticsApi.captureEvent({action:ie,subject:ve,value:fe,attributes:Ve,context:this.context})}catch(Et){console.warn("Error during analytics event capture. %o",Et)}}}function C(){try{return w(Z)}catch{return{captureEvent:()=>{}}}}function Ke(){const le=(0,i.useRef)(null),ie=n(),ve=C();function fe(){return le.current===null&&(le.current=new he(ve)),le.current}const Ve=fe();return Ve.setContext(ie),Ve}const j=()=>{const le=(0,e.Vt)("app-context");if(!le)throw new Error("App context is not available");const ie=le.atVersion(1);if(!ie)throw new Error("AppContext v1 not available");return ie},It=(0,e.uW)("component-data-store",()=>new WeakMap),Be="__backstage_data";function L(le,ie,ve){var fe;const Ve=le;let Et=(fe=Ve[Be])!=null?fe:It.get(le);if(Et||(Et={map:new Map},Object.defineProperty(Ve,Be,{enumerable:!1,configurable:!0,writable:!1,value:Et}),It.set(le,Et)),Et.map.has(ie)){const ft=le.displayName||le.name;throw new Error(`Attempted to attach duplicate data "${ie}" to component "${ft}"`)}Et.map.set(ie,ve)}function Y(le,ie){var ve;if(!le)return;const fe=le.type;if(!fe)return;const Ve=(ve=fe[Be])!=null?ve:It.get(fe);if(!!Ve)return Ve.map.get(ie)}const z=(0,e.uW)("route-ref-type",()=>Symbol("route-ref-type"));var ge;class Ue{constructor(ie,ve){this.id=ie,this.params=ve,this[ge]="absolute"}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}ge=z;function xe(le){var ie;return new Ue(le.id,(ie=le.params)!=null?ie:[])}var At;const nn=/^\w+$/;class ut{constructor(ie,ve,fe,Ve){this.id=ie,this.path=ve,this.parent=fe,this.params=Ve,this[At]="sub"}toString(){return`routeRef{type=sub,id=${this.id}}`}}At=z;function Kt(le){const{id:ie,path:ve,parent:fe}=le,Ve=ve.split("/").filter(Wt=>Wt.startsWith(":")).map(Wt=>Wt.substring(1)),Et=[...fe.params,...Ve];if(fe.params.some(Wt=>Ve.includes(Wt)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!ve.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${ve}'`);if(ve.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${ve}'`);for(const Wt of Ve)if(!nn.test(Wt))throw new Error(`SubRouteRef path has invalid param, got '${Wt}'`);return new ut(ie,ve,fe,Et)}var $t;class Pt{constructor(ie,ve,fe){this.id=ie,this.params=ve,this.optional=fe,this[$t]="external"}toString(){return`routeRef{type=external,id=${this.id}}`}}$t=z;function je(le){var ie;return new Pt(le.id,(ie=le.params)!=null?ie:[],Boolean(le.optional))}function Fe(le){const ie=(0,h.TH)(),ve=(0,e.Vt)("routing-context");if(!ve)throw new Error("Routing context is not available");const fe=ve.atVersion(1),Ve=(0,i.useMemo)(()=>fe&&fe.resolve(le,ie),[fe,le,ie]);if(!ve)throw new Error("useRouteRef used outside of routing context");if(!fe)throw new Error("RoutingContext v1 not available");const Et="optional"in le&&le.optional;if(!Ve&&!Et)throw new Error(`No path for ${le}`);return Ve}function be(le){return(0,h.UO)()}class pt extends i.Component{constructor(){super(...arguments),this.state={error:void 0},this.handleErrorReset=()=>{this.setState({error:void 0})}}static getDerivedStateFromError(ie){return{error:ie}}render(){const{error:ie}=this.state,{app:ve,plugin:fe}=this.props,{ErrorBoundaryFallback:Ve}=ve.getComponents();return ie?i.createElement(Ve,{error:ie,resetError:this.handleErrorReset,plugin:fe}):this.props.children}}function vt(le){const{component:ie,mountPoint:ve,name:fe}=le;return mt({component:{lazy:()=>ie().then(Ve=>{const Et=Wt=>{try{Fe(ve)}catch(Yt){if(typeof Yt=="object"&&Yt!==null){const{message:ln}=Yt;if(typeof ln=="string"&&ln.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${ve} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw Yt}return i.createElement(Ve,{...Wt})},ft=fe||Ve.displayName||Ve.name||"LazyComponent";return Et.displayName=`RoutableExtension(${ft})`,Et},Ve=>ft=>{const Wt=j(),{BootErrorPage:Yt}=Wt.getComponents();return i.createElement(Yt,{step:"load-chunk",error:Ve})})},data:{"core.mountPoint":ve},name:fe})}function ze(le){const{component:ie,name:ve}=le;return mt({component:ie,name:ve})}function mt(le){const{data:ie={},name:ve}=le;ve||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let fe;if("lazy"in le.component){const Et=le.component.lazy;fe=(0,i.lazy)(()=>Et().then(ft=>({default:ft})))}else fe=le.component.sync;const Ve=ve||fe.displayName||fe.name||"Component";return{expose(Et){const ft=Wt=>{const Yt=j(),{Progress:ln}=Yt.getComponents(),gn=ie==null?void 0:ie["core.mountPoint"];return i.createElement(i.Suspense,{fallback:i.createElement(ln,null)},i.createElement(pt,{app:Yt,plugin:Et},i.createElement(R,{attributes:{pluginId:Et.getId(),...ve&&{extension:ve},...gn&&{routeRef:gn.id}}},i.createElement(fe,{...Wt}))))};L(ft,"core.plugin",Et);for(const[Wt,Yt]of Object.entries(ie))L(ft,Wt,Yt);return ft.displayName=`Extension(${Ve})`,ft}}}function _t(le,ie,ve,fe){return i.Children.toArray(le).flatMap(Ve=>{if(!(0,i.isValidElement)(Ve))return[];if(Ve.type===i.Fragment)return _t(Ve.props.children,ie,ve,fe);if(Y(Ve,"core.featureFlagged")){const Et=Ve.props;return("with"in Et?ie.isActive(Et.with):!ie.isActive(Et.without))?_t(Ve.props.children,ie,ve,fe):[]}if(ve===void 0||ve(Ve))return[Ve];if(fe)throw new Error(fe);return _t(Ve.props.children,ie,ve,fe)})}class Ie{constructor(ie,ve){this.node=ie,this.featureFlagsApi=ve}selectByComponentData(ie){const ve=_t(this.node,this.featureFlagsApi,fe=>Y(fe,ie.key)!==void 0,ie.withStrictError);return new Ie(ve,this.featureFlagsApi)}findComponentData(ie){return _t(this.node,this.featureFlagsApi,fe=>Y(fe,ie.key)!==void 0).map(fe=>Y(fe,ie.key)).filter(fe=>fe!==void 0)}getElements(){return _t(this.node,this.featureFlagsApi)}}function ue(le,ie,ve=[]){const fe=w(se),Ve=new Ie(le,fe);return(0,i.useMemo)(()=>ie(Ve),[le,...ve])}class Ze{constructor(ie){this.config=ie}getId(){return this.config.id}getApis(){var ie;return(ie=this.config.apis)!=null?ie:[]}getFeatureFlags(){var ie,ve;return(ve=(ie=this.config.featureFlags)==null?void 0:ie.slice())!=null?ve:[]}get routes(){var ie;return(ie=this.config.routes)!=null?ie:{}}get externalRoutes(){var ie;return(ie=this.config.externalRoutes)!=null?ie:{}}provide(ie){return ie.expose(this)}toString(){return`plugin{${this.config.id}}`}}function rt(le){return new Ze(le)}},32272:function(Tt,l,t){t.d(l,{BD:function(){return s},SP:function(){return f},VL:function(){return U},VZ:function(){return h},dR:function(){return D}});var e=t(24852),i=t.n(e);function h(p){if(typeof p!="object"||p===null||Array.isArray(p))return!1;const d=p;return!(typeof d.name!="string"||d.name===""||typeof d.message!="string")}function s(p){if(typeof p!="object"||p===null||Array.isArray(p))throw new Error(`Encountered invalid error, not an object, got '${p}'`);const d=p;if(typeof d.name!="string"||d.name==="")throw new Error(`Encountered error object without a name, got '${p}'`);if(typeof d.message!="string")throw new Error(`Encountered error object without a message, got '${p}'`)}function n(p,d){const A=serializeError$1(p),N={name:"Unknown",message:"<no reason given>",...A};return d!=null&&d.includeStack||delete N.stack,N}function R(p){const d=(0,e.deserializeError)(p);return p.stack||(d.stack=void 0),d}function P(p){if(h(p)){const d=String(p);return d!=="[object Object]"?d:`${p.name}: ${p.message}`}return`unknown error '${p}'`}async function w(p){var d;try{const A=await p.text();if(A){if((d=p.headers.get("content-type"))!=null&&d.startsWith("application/json"))try{const N=JSON.parse(A);if(N.error&&N.response)return N}catch{}return{error:{name:"Error",message:`Request failed with status ${p.status} ${p.statusText}, ${A}`},response:{statusCode:p.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${p.status} ${p.statusText}`},response:{statusCode:p.status}}}class u extends Error{constructor(d,A){var N;let c=d;if(A!==void 0){const Z=P(A);c?c+=`; caused by ${Z}`:c=`caused by ${Z}`}super(c),(N=Error.captureStackTrace)==null||N.call(Error,this,this.constructor),this.name=this.constructor.name,this.cause=h(A)?A:void 0}}class y extends null{}class O extends null{}class K extends null{}class D extends u{}class g extends null{}class T extends null{}class f extends u{constructor(d,A){super(d,A),this.name=h(A)?A.name:"Error"}}class U extends Error{static async fromResponse(d){const A=await w(d),N=A.response.statusCode||d.status,c=A.error.name||d.statusText,Z=`Request failed with ${N} ${c}`,F=R(A.error);return new U({message:Z,response:d,data:A,cause:F})}constructor(d){super(d.message),this.name="ResponseError",this.response=d.response,this.body=d.data,this.cause=d.cause}}},49462:function(Tt,l,t){t.d(l,{Om:function(){return n},ae:function(){return p},nW:function(){return A},q3:function(){return d},zN:function(){return U}});var e=t(30705),i=t(1854),h=t(73250),s=t(2784);const n=(0,e.T0)({id:"core.scmauth"});var R=(N,c,Z)=>{if(!c.has(N))throw TypeError("Cannot "+Z)},P=(N,c,Z)=>(R(N,c,"read from private field"),Z?Z.call(N):c.get(N)),w=(N,c,Z)=>{if(c.has(N))throw TypeError("Cannot add the same private member more than once");c instanceof WeakSet?c.add(N):c.set(N,Z)},u=(N,c,Z,F)=>(R(N,c,"write to private field"),F?F.call(N,Z):c.set(N,Z),Z),y,O,K,D,g;class T{constructor(c){w(this,y,void 0),u(this,y,c)}async getCredentials(c){const Z=new URL(c.url),F=P(this,y).find(te=>te.isUrlSupported(Z));if(!F)throw new Error(`No auth provider available for '${c.url}', see https://backstage.io/link?scm-auth`);return F.getCredentials(c)}}y=new WeakMap;const f=class{constructor(N,c,Z,F){w(this,O,void 0),w(this,K,void 0),w(this,D,void 0),w(this,g,void 0),u(this,O,c),u(this,K,Z),u(this,D,F),u(this,g,N)}static createDefaultApiFactory(){return(0,e.ni)({api:n,deps:{github:e.F4,gitlab:e.ux,azure:e.p_,bitbucket:e.bq},factory:({github:N,gitlab:c,azure:Z,bitbucket:F})=>f.merge(f.forGithub(N),f.forGitlab(c),f.forAzure(Z),f.forBitbucket(F))})}static forAuthApi(N,c){return new f("generic",N,c.host,c.scopeMapping)}static forGithub(N,c){var Z;const F=(Z=c==null?void 0:c.host)!=null?Z:"github.com";return new f("github",N,F,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(N,c){var Z;const F=(Z=c==null?void 0:c.host)!=null?Z:"gitlab.com";return new f("gitlab",N,F,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(N,c){var Z;const F=(Z=c==null?void 0:c.host)!=null?Z:"dev.azure.com";return new f("azure",N,F,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(N,c){var Z;const F=(Z=c==null?void 0:c.host)!=null?Z:"bitbucket.org";return new f("bitbucket",N,F,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...N){return new T(N)}isUrlSupported(N){return N.host===P(this,K)}getAdditionalScopesForProvider(N){var c,Z;return!(N!=null&&N.customScopes)||P(this,g)==="generic"?[]:(Z=(c=N.customScopes)==null?void 0:c[P(this,g)])!=null?Z:[]}async getCredentials(N){const{url:c,additionalScope:Z,...F}=N,te=P(this,D).default.slice();Z!=null&&Z.repoWrite&&te.push(...P(this,D).repoWrite);const we=this.getAdditionalScopesForProvider(Z);we.length&&te.push(...we);const ct=[...new Set(te)],nt=await P(this,O).getAccessToken(ct,F);return{token:nt,headers:{Authorization:`Bearer ${nt}`}}}};let U=f;O=new WeakMap,K=new WeakMap,D=new WeakMap,g=new WeakMap;class p{static fromConfig(c){return i.Lx.fromConfig(c)}}const d=(0,e.T0)({id:"integration.scmintegrations"}),A=N=>{var c;const{type:Z}=N,F=(0,e.qD)(),te=h.Z,we=Z&&(c=F.getSystemIcon(Z))!=null?c:te;return s.createElement(we,null)}},1854:function(Tt,l,t){t.d(l,{E8:function(){return vt},Lx:function(){return Ae},Pb:function(){return Et}});var e=t(82717),i=t.n(e),h=t(76635),s=t.n(h),n=t(96279),R=t.n(n),P=t(54733),w=t(89393),u=t(96299),y=t(48834).Buffer;function O(_){const S=new URL("http://example.com");return S.host=_,S.host===_}function K(_){try{return new URL(_),!0}catch{return!1}}function D(_,S){return{list(){return _},byUrl(x){try{const ee=typeof x=="string"?new URL(x):x;return _.find(Ee=>S(Ee)===ee.host)}catch{return}},byHost(x){return _.find(ee=>S(ee)===x)}}}function g(_){const{url:S,base:x,lineNumber:ee}=_;try{return new URL(S),S}catch{}let Ee;if(S.startsWith("/")){const{filepath:_e}=i()(x);Ee=new URL(x);const We=(0,h.trimEnd)(Ee.pathname.substring(0,Ee.pathname.length-_e.length),"/");Ee.pathname=`${We}${S}`}else Ee=new URL(S,x);return Ee.search=new URL(x).search,ee&&(Ee.hash=`L${ee}`),Ee.toString()}var T=(_,S,x)=>{if(!S.has(_))throw TypeError("Cannot "+x)},f=(_,S,x)=>(T(_,S,"read from private field"),x?x.call(_):S.get(_)),U=(_,S,x)=>{if(S.has(_))throw TypeError("Cannot add the same private member more than once");S instanceof WeakSet?S.add(_):S.set(_,x)},p=(_,S,x,ee)=>(T(_,S,"write to private field"),ee?ee.call(_,x):S.set(_,x),x),d,A,N,c,Z,F,te;const we="GB",ct=class{constructor(_,S,x,ee,Ee,_e){U(this,d,void 0),U(this,A,void 0),U(this,N,void 0),U(this,c,void 0),U(this,Z,void 0),U(this,F,void 0),U(this,te,(...We)=>{const yt=new URL(f(this,d));return yt.pathname=We.map(kt=>encodeURIComponent(kt)).join("/"),yt}),p(this,d,_),p(this,A,S),p(this,N,x),p(this,c,ee),p(this,Z,Ee),p(this,F,_e)}static fromRepoUrl(_){var S;const x=new URL(_);let ee,Ee,_e;const We=x.pathname.split("/").map(bt=>decodeURIComponent(bt));if(We[2]==="_git"?(ee=We[1],Ee=_e=We[3]):We[3]==="_git"&&(ee=We[1],Ee=We[2],_e=We[4]),!ee||!Ee||!_e)throw new Error("Azure URL must point to a git repository");const yt=(S=x.searchParams.get("path"))!=null?S:void 0;let kt;const Ft=x.searchParams.get("version");if(Ft){if(Ft.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");kt=Ft.slice(2)}return new ct(x.origin,ee,Ee,_e,yt,kt)}toRepoUrl(){let _;return f(this,N)===f(this,c)?_=f(this,te).call(this,f(this,A),"_git",f(this,c)):_=f(this,te).call(this,f(this,A),f(this,N),"_git",f(this,c)),f(this,Z)&&_.searchParams.set("path",f(this,Z)),f(this,F)&&_.searchParams.set("version",we+f(this,F)),_.toString()}toFileUrl(){if(!f(this,Z))throw new Error("Azure URL must point to a specific path to be able to download a file");const _=f(this,te).call(this,f(this,A),f(this,N),"_apis","git","repositories",f(this,c),"items");return _.searchParams.set("api-version","6.0"),_.searchParams.set("path",f(this,Z)),f(this,F)&&_.searchParams.set("version",f(this,F)),_.toString()}toArchiveUrl(){const _=f(this,te).call(this,f(this,A),f(this,N),"_apis","git","repositories",f(this,c),"items");return _.searchParams.set("recursionLevel","full"),_.searchParams.set("download","true"),_.searchParams.set("api-version","6.0"),f(this,Z)&&_.searchParams.set("scopePath",f(this,Z)),f(this,F)&&_.searchParams.set("version",f(this,F)),_.toString()}toCommitsUrl(){const _=f(this,te).call(this,f(this,A),f(this,N),"_apis","git","repositories",f(this,c),"commits");return _.searchParams.set("api-version","6.0"),f(this,F)&&_.searchParams.set("searchCriteria.itemVersion.version",f(this,F)),_.toString()}getOwner(){return f(this,A)}getProject(){return f(this,N)}getRepo(){return f(this,c)}getPath(){return f(this,Z)}getRef(){return f(this,F)}};let nt=ct;d=new WeakMap,A=new WeakMap,N=new WeakMap,c=new WeakMap,Z=new WeakMap,F=new WeakMap,te=new WeakMap;const se="dev.azure.com";function ye(_){var S;const x=(S=_.getOptionalString("host"))!=null?S:se,ee=_.getOptionalString("token");if(!O(x))throw new Error(`Invalid Azure integration config, '${x}' is not a valid host`);return{host:x,token:ee}}function Le(_){const S=_.map(ye);return S.some(x=>x.host===se)||S.push({host:se}),S}const de=class{constructor(_){this.integrationConfig=_}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(_){var S;const{url:x,base:ee}=_;if(K(x))return x;try{const Ee=nt.fromRepoUrl(ee),_e=new URL(ee),We=new URL(`https://a.com${(S=Ee.getPath())!=null?S:""}`),yt=new URL(x,We).pathname;return _e.searchParams.set("path",yt),_.lineNumber&&(_e.searchParams.set("line",String(_.lineNumber)),_e.searchParams.set("lineEnd",String(_.lineNumber+1)),_e.searchParams.set("lineStartColumn","1"),_e.searchParams.set("lineEndColumn","1")),_e.toString()}catch{return new URL(x,ee).toString()}}resolveEditUrl(_){return _}};let V=de;V.factory=({config:_})=>{var S;const x=Le((S=_.getOptionalConfigArray("integrations.azure"))!=null?S:[]);return D(x.map(ee=>new de(ee)),ee=>ee.config.host)};function he(_){return nt.fromRepoUrl(_).toFileUrl()}function C(_){return nt.fromRepoUrl(_).toArchiveUrl()}function Ke(_){return nt.fromRepoUrl(_).toCommitsUrl()}function j(_,S){const x=S?{...S}:{};if(_.token){const ee=y.from(`:${_.token}`,"utf8");x.Authorization=`Basic ${ee.toString("base64")}`}return{headers:x}}const It="bitbucket.org",Be="https://api.bitbucket.org/2.0";function L(_){var S;const x=(S=_.getOptionalString("host"))!=null?S:It;let ee=_.getOptionalString("apiBaseUrl");const Ee=_.getOptionalString("token"),_e=_.getOptionalString("username"),We=_.getOptionalString("appPassword");if(!O(x))throw new Error(`Invalid Bitbucket integration config, '${x}' is not a valid host`);return ee?ee=(0,h.trimEnd)(ee,"/"):x===It?ee=Be:ee=`https://${x}/rest/api/1.0`,{host:x,apiBaseUrl:ee,token:Ee,username:_e,appPassword:We}}function Y(_){const S=_.map(L);return S.some(x=>x.host===It)||S.push({host:It,apiBaseUrl:Be}),S}const z=class{constructor(_){this.integrationConfig=_}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(_){const S=g(_);if(!_.lineNumber)return S;const x=new URL(S);return this.integrationConfig.host==="bitbucket.org"?x.hash=`lines-${_.lineNumber}`:x.hash=`${_.lineNumber}`,x.toString()}resolveEditUrl(_){const S=i()(_),x=new URL(_);return x.searchParams.set("mode","edit"),x.searchParams.set("spa","0"),x.searchParams.set("at",S.ref),x.toString()}};let ge=z;ge.factory=({config:_})=>{var S;const x=Y((S=_.getOptionalConfigArray("integrations.bitbucket"))!=null?S:[]);return D(x.map(ee=>new z(ee)),ee=>ee.config.host)};async function Ue(_,S){const{name:x,owner:ee,resource:Ee}=parseGitUrl(_),_e=Ee==="bitbucket.org";let We=_e?`${S.apiBaseUrl}/repositories/${ee}/${x}`:`${S.apiBaseUrl}/projects/${ee}/repos/${x}/default-branch`,yt=await fetch(We,nn(S));if(yt.status===404&&!_e&&(We=`${S.apiBaseUrl}/projects/${ee}/repos/${x}/branches/default`,yt=await fetch(We,nn(S))),!yt.ok){const Ft=`Failed to retrieve default branch from ${We}, ${yt.status} ${yt.statusText}`;throw new Error(Ft)}let kt;if(_e)kt=(await yt.json()).mainbranch.name;else{const{displayId:Ft}=await yt.json();kt=Ft}if(!kt)throw new Error(`Failed to read default branch from ${We}. Response ${yt.status} ${yt.json()}`);return kt}async function xe(_,S){const{name:x,owner:ee,ref:Ee,protocol:_e,resource:We,filepath:yt}=parseGitUrl(_),kt=We==="bitbucket.org";let Ft=Ee;Ft||(Ft=await Ue(_,S));const bt=yt?`&path=${encodeURIComponent(yt)}`:"";return kt?`${_e}://${We}/${ee}/${x}/get/${Ft}.tar.gz`:`${S.apiBaseUrl}/projects/${ee}/repos/${x}/archive?format=tgz&at=${Ft}&prefix=${ee}-${x}${bt}`}function At(_,S){try{const{owner:x,name:ee,ref:Ee,filepathtype:_e,filepath:We}=parseGitUrl(_);if(!x||!ee||_e!=="browse"&&_e!=="raw"&&_e!=="src")throw new Error("Invalid Bitbucket URL or file path");const yt=We.replace(/^\//,"");if(S.host==="bitbucket.org"){if(!Ee)throw new Error("Invalid Bitbucket URL or file path");return`${S.apiBaseUrl}/repositories/${x}/${ee}/src/${Ee}/${yt}`}return`${S.apiBaseUrl}/projects/${x}/repos/${ee}/raw/${yt}?at=${Ee}`}catch(x){throw new Error(`Incorrect URL: ${_}, ${x}`)}}function nn(_){const S={};if(_.token)S.Authorization=`Bearer ${_.token}`;else if(_.username&&_.appPassword){const x=y.from(`${_.username}:${_.appPassword}`,"utf8");S.Authorization=`Basic ${x.toString("base64")}`}return{headers:S}}function ut(_){const S=_.getString("host");let x=_.getOptionalString("baseUrl");const ee=_.getOptionalString("username"),Ee=_.getOptionalString("password");if(O(S)){if(x&&!K(x))throw new Error(`Invalid Gerrit integration config, '${x}' is not a valid baseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${S}' is not a valid host`);return x?x=(0,h.trimEnd)(x,"/"):x=`https://${S}`,{host:S,baseUrl:x,username:ee,password:Ee}}function Kt(_){return _.map(ut)}const $t=class{constructor(_){this.integrationConfig=_}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(_){const{url:S,base:x,lineNumber:ee}=_;let Ee;return S?Ee=new URL(S,x):Ee=new URL(x),ee&&(Ee.hash=ee.toString()),Ee.toString()}resolveEditUrl(_){return _}};let Pt=$t;Pt.factory=({config:_})=>{var S;const x=Kt((S=_.getOptionalConfigArray("integrations.gerrit"))!=null?S:[]);return D(x.map(ee=>new $t(ee)),ee=>ee.config.host)};const je="github.com",Fe="https://api.github.com",be="https://raw.githubusercontent.com";function pt(_){var S,x;const ee=(S=_.getOptionalString("host"))!=null?S:je;let Ee=_.getOptionalString("apiBaseUrl"),_e=_.getOptionalString("rawBaseUrl");const We=_.getOptionalString("token"),yt=(x=_.getOptionalConfigArray("apps"))==null?void 0:x.map(kt=>({appId:kt.getNumber("appId"),clientId:kt.getString("clientId"),clientSecret:kt.getString("clientSecret"),webhookSecret:kt.getString("webhookSecret"),privateKey:kt.getString("privateKey"),allowedInstallationOwners:kt.getOptionalStringArray("allowedInstallationOwners")}));if(!O(ee))throw new Error(`Invalid GitHub integration config, '${ee}' is not a valid host`);return Ee?Ee=(0,h.trimEnd)(Ee,"/"):ee===je&&(Ee=Fe),_e?_e=(0,h.trimEnd)(_e,"/"):ee===je&&(_e=be),{host:ee,apiBaseUrl:Ee,rawBaseUrl:_e,token:We,apps:yt}}function vt(_){const S=_.map(pt);return S.some(x=>x.host===je)||S.push({host:je,apiBaseUrl:Fe,rawBaseUrl:be}),S}function ze(_,S,x){try{const{owner:ee,name:Ee,ref:_e,filepathtype:We,filepath:yt}=parseGitUrl(_);if(!ee||!Ee||!_e||We!=="blob"&&We!=="raw"&&We!=="tree")throw new Error("Invalid GitHub URL or file path");const kt=yt.replace(/^\//,"");return _t(S,x)==="api"?`${S.apiBaseUrl}/repos/${ee}/${Ee}/contents/${kt}?ref=${_e}`:`${S.rawBaseUrl}/${ee}/${Ee}/${_e}/${kt}`}catch(ee){throw new Error(`Incorrect URL: ${_}, ${ee}`)}}function mt(_,S){const x={};return _t(_,S)==="api"&&(x.Accept="application/vnd.github.v3.raw"),S.token&&(x.Authorization=`token ${S.token}`),{headers:x}}function _t(_,S){return _.apiBaseUrl&&(S.token||!_.rawBaseUrl)?"api":"raw"}class Ie{constructor(){this.tokenCache=new Map,this.isNotExpired=S=>S.diff(u.ou.local(),"minutes").minutes>50}async getOrCreateToken(S,x){const ee=this.tokenCache.get(S);if(ee&&this.isNotExpired(ee.expiresAt))return{accessToken:ee.token};const Ee=await x();return this.tokenCache.set(S,Ee),{accessToken:Ee.token}}}const ue={Accept:"application/vnd.github.machine-man-preview+json"};class Ze{constructor(S,x){this.cache=new Ie,this.allowedInstallationOwners=S.allowedInstallationOwners,this.baseUrl=x,this.baseAuthConfig={appId:S.appId,privateKey:S.privateKey.replace(/\\n/gm,`
`)},this.appClient=new w.v({baseUrl:x,headers:ue,authStrategy:P.i,auth:this.baseAuthConfig})}async getInstallationCredentials(S,x){var ee;const{installationId:Ee,suspended:_e}=await this.getInstallationData(S);if(this.allowedInstallationOwners&&!((ee=this.allowedInstallationOwners)!=null&&ee.includes(S)))return{accessToken:void 0};if(_e)throw new Error(`The GitHub application for ${S} is suspended`);const We=x?`${S}/${x}`:S;return this.cache.getOrCreateToken(We,async()=>{const yt=await this.appClient.apps.createInstallationAccessToken({installation_id:Ee,headers:ue});if(x&&yt.data.repository_selection==="selected"){const kt=new w.v({baseUrl:this.baseUrl,auth:yt.data.token});if(!(await kt.paginate(kt.apps.listReposAccessibleToInstallation)).some(mn=>mn.name===x))throw new Error(`The Backstage GitHub application used in the ${S} organization does not have access to a repository with the name ${x}`)}return{token:yt.data.token,expiresAt:u.ou.fromISO(yt.data.expires_at)}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(S){const ee=(await this.getInstallations()).find(_e=>{var We,yt;return((yt=(We=_e.account)==null?void 0:We.login)==null?void 0:yt.toLocaleLowerCase("en-US"))===S.toLocaleLowerCase("en-US")});if(ee)return{installationId:ee.id,suspended:Boolean(ee.suspended_by)};const Ee=new Error(`No app installation found for ${S} in ${this.baseAuthConfig.appId}`);throw Ee.name="NotFoundError",Ee}}class rt{constructor(S){var x,ee;this.apps=(ee=(x=S.apps)==null?void 0:x.map(Ee=>new Ze(Ee,S.apiBaseUrl)))!=null?ee:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(x=>x.getInstallations()))).flat():[]}async getAppToken(S,x){if(this.apps.length===0)return;const ee=await Promise.all(this.apps.map(yt=>yt.getInstallationCredentials(S,x).then(kt=>({credentials:kt,error:void 0}),kt=>({credentials:void 0,error:kt})))),Ee=ee.find(yt=>yt.credentials);if(Ee)return Ee.credentials.accessToken;const We=ee.map(yt=>yt.error).find(yt=>yt.name!=="NotFoundError");if(We)throw We}}const le=class{constructor(_,S){this.githubAppCredentialsMux=_,this.token=S}async getCredentials(_){const S=i()(_.url),x=S.owner||S.name,ee=S.owner?S.name:void 0;let Ee="app",_e=await this.githubAppCredentialsMux.getAppToken(x,ee);return _e||(Ee="token",_e=this.token),{headers:_e?{Authorization:`Bearer ${_e}`}:void 0,token:_e,type:Ee}}};let ie=le;ie.create=_=>new le(new rt(_),_.token);class ve{constructor(S){this.providers=S}static fromIntegrations(S){const x=new Map;return S.github.list().forEach(ee=>{const Ee=ie.create(ee.config);x.set(ee.config.host,Ee)}),new ve(x)}async getCredentials(S){const x=new URL(S.url),ee=this.providers.get(x.host);if(!ee)throw new Error(`There is no GitHub integration that matches ${S.url}. Please add a configuration for an integration.`);return ee.getCredentials(S)}}const fe=class{constructor(_){this.integrationConfig=_}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(_){return Et(g(_),"tree")}resolveEditUrl(_){return Et(_,"edit")}};let Ve=fe;Ve.factory=({config:_})=>{var S;const x=vt((S=_.getOptionalConfigArray("integrations.github"))!=null?S:[]);return D(x.map(ee=>new fe(ee)),ee=>ee.config.host)};function Et(_,S){return _.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(x,ee,Ee,_e)=>`//${ee}/${Ee}/${_e}/${S}/`)}const ft="gitlab.com",Wt="https://gitlab.com/api/v4";function Yt(_){const S=_.getString("host");let x=_.getOptionalString("apiBaseUrl");const ee=_.getOptionalString("token");let Ee=_.getOptionalString("baseUrl");if(x?x=(0,h.trimEnd)(x,"/"):S===ft&&(x=Wt),Ee?Ee=(0,h.trimEnd)(Ee,"/"):Ee=`https://${S}`,O(S)){if(!x||!K(x))throw new Error(`Invalid GitLab integration config, '${x}' is not a valid apiBaseUrl`);if(!K(Ee))throw new Error(`Invalid GitLab integration config, '${Ee}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${S}' is not a valid host`);return{host:S,token:ee,apiBaseUrl:x,baseUrl:Ee}}function ln(_){const S=_.map(Yt);return S.some(x=>x.host===ft)||S.push({host:ft,apiBaseUrl:Wt,baseUrl:`https://${ft}`}),S}async function gn(_,S){if(_.includes("/-/blob/")){const x=await Xe(_,S);return Re(_,x).toString()}return yn(_).toString()}function Sn(_){const{token:S=""}=_;return{headers:{"PRIVATE-TOKEN":S}}}function yn(_){try{const S=new URL(_),[x,ee,Ee,_e,...We]=S.pathname.split("/");if(x!==""||ee===""||Ee===""||_e!=="blob"||!We.join("/").match(/\.(yaml|yml)$/))throw new Error("Wrong GitLab URL");return S.pathname=[x,ee,Ee,"raw",...We].join("/"),S}catch(S){throw new Error(`Incorrect url: ${_}, ${S}`)}}function Re(_,S){try{const x=new URL(_),ee=x.pathname.split("/-/blob/")[1],[Ee,..._e]=ee.split("/");return x.pathname=["/api/v4/projects",S,"repository/files",encodeURIComponent(decodeURIComponent(_e.join("/"))),"raw"].join("/"),x.search=`?ref=${Ee}`,x}catch(x){throw new Error(`Incorrect url: ${_}, ${x}`)}}async function Xe(_,S){const x=new URL(_);if(!x.pathname.includes("/-/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{const ee=x.pathname.split("/-/blob/")[0],Ee=new URL(`${x.origin}/api/v4/projects/${encodeURIComponent(ee.replace(/^\//,""))}`),_e=await fetch(Ee.toString(),Sn(S)),We=await _e.json();if(!_e.ok)throw new Error(`GitLab Error '${We.error}', ${We.error_description}`);return Number(We.id)}catch(ee){throw new Error(`Could not get GitLab project ID for: ${_}, ${ee}`)}}const dt=class{constructor(_){this.integrationConfig=_}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(_){return g(_)}resolveEditUrl(_){return Bt(_,"edit")}};let Gt=dt;Gt.factory=({config:_})=>{var S;const x=ln((S=_.getOptionalConfigArray("integrations.gitlab"))!=null?S:[]);return D(x.map(ee=>new dt(ee)),ee=>ee.config.host)};function Bt(_,S){return _.replace(/\/\-\/(blob|tree|edit)\//,`/-/${S}/`)}function rn(_){if(!_)return{};if(!_.has("clientEmail")&&!_.has("privateKey"))return{};const S=_.getString("privateKey").split("\\n").join(`
`);return{clientEmail:_.getString("clientEmail"),privateKey:S}}const fn="amazonaws.com";function Pn(_){var S;const x=_.getOptionalString("endpoint"),ee=(S=_.getOptionalBoolean("s3ForcePathStyle"))!=null?S:!1;let Ee,_e;if(x){try{const Ft=new URL(x);Ee=Ft.host,_e=Ft.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${x}' is not a valid URL`)}if(_e!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${x}'`)}else Ee=fn;const We=_.getOptionalString("accessKeyId"),yt=_.getOptionalString("secretAccessKey"),kt=_.getOptionalString("roleArn");return{host:Ee,endpoint:x,s3ForcePathStyle:ee,accessKeyId:We,secretAccessKey:yt,roleArn:kt}}function An(_){const S=_.map(Pn);return S.some(x=>x.host===fn)||S.push({host:fn}),S}const _n=class{constructor(_){this.integrationConfig=_}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(_){return g(_)}resolveEditUrl(_){return _}};let Pe=_n;Pe.factory=({config:_})=>{var S;const x=An((S=_.getOptionalConfigArray("integrations.awsS3"))!=null?S:[]);return D(x.map(ee=>new _n(ee)),ee=>ee.config.host)};class Ae{static fromConfig(S){return new Ae({awsS3:Pe.factory({config:S}),azure:V.factory({config:S}),bitbucket:ge.factory({config:S}),gerrit:Pt.factory({config:S}),github:Ve.factory({config:S}),gitlab:Gt.factory({config:S})})}constructor(S){this.byType=S}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}list(){return Object.values(this.byType).flatMap(S=>S.list())}byUrl(S){return Object.values(this.byType).map(x=>x.byUrl(S)).find(Boolean)}byHost(S){return Object.values(this.byType).map(x=>x.byHost(S)).find(Boolean)}resolveUrl(S){const x=this.byUrl(S.base);return x?x.resolveUrl(S):g(S)}resolveEditUrl(S){const x=this.byUrl(S);return x?x.resolveEditUrl(S):S}}},63115:function(Tt,l,t){t.d(l,{Cy:function(){return U},DC:function(){return Ke},OO:function(){return Be},RE:function(){return g},XQ:function(){return It},Yq:function(){return F},ap:function(){return Y},bM:function(){return nt},cm:function(){return ye},d1:function(){return he},fP:function(){return D},fe:function(){return Le},gC:function(){return L},hK:function(){return C},hs:function(){return de},nE:function(){return te},x1:function(){return j},zJ:function(){return V}});var e=t(2784),i=t(10289),h=t(49558),s=t(30705),n=t(16673),R=t(73495),P=t(99688),w=t(34520),u=t(90436);const y=(0,s.NT)({id:"api-docs"}),O=(0,s.x8)({id:"register-component",optional:!0}),K=[n.Es.columns.createNameColumn({defaultKind:"API"}),n.Es.columns.createSystemColumn(),n.Es.columns.createOwnerColumn(),n.Es.columns.createSpecTypeColumn(),n.Es.columns.createSpecLifecycleColumn(),n.Es.columns.createMetadataDescriptionColumn(),n.Es.columns.createTagsColumn()],D=({initiallySelectedFilter:z="all",columns:ge,actions:Ue})=>{var xe;const nn=`${(xe=(0,s.h_)(s.Ds).getOptionalString("organization.name"))!=null?xe:"Backstage"} API Explorer`,ut=(0,s.tg)(O);return e.createElement(h.g9,{themeId:"apis",title:"APIs",subtitle:nn,pageTitleOverride:"APIs"},e.createElement(h.VY,null,e.createElement(h.yW,{title:""},e.createElement(h.XF,{title:"Register Existing API",to:ut==null?void 0:ut()}),e.createElement(h.qt,null,"All your APIs")),e.createElement(R.UO,null,e.createElement(R._i,null,e.createElement(R._i.Filters,null,e.createElement(R.tW,{initialFilter:"api",hidden:!0}),e.createElement(R.sL,null),e.createElement(R.EW,{initialFilter:z}),e.createElement(R.dq,null),e.createElement(R.df,null),e.createElement(R.xE,null)),e.createElement(R._i.Content,null,e.createElement(n.Es,{columns:ge||K,actions:Ue}))))))},g=z=>(0,i.pC)()||e.createElement(D,{...z}),T=(0,s.T0)({id:"plugin.api-docs.config"}),f=z=>e.createElement(h.Oi,{text:z.definition,language:z.language,showCopyCodeButton:!0}),U=()=>{var z;const{entity:ge}=(0,R.X2)(),Ue=(0,s.h_)(T),{getApiDefinitionWidget:xe}=Ue;if(!ge)return e.createElement(P.Z,{severity:"error"},"Could not fetch the API");const At=xe(ge),nn=(z=ge.metadata.title)!=null?z:ge.metadata.name;return At?e.createElement(h.oZ,{title:nn},e.createElement(h.hB,{label:At.title,key:"widget"},At.component(ge.spec.definition)),e.createElement(h.hB,{label:"Raw",key:"raw"},e.createElement(f,{definition:ge.spec.definition,language:At.rawLanguage||ge.spec.type}))):e.createElement(h.oZ,{title:nn,children:[e.createElement(h.hB,{label:ge.spec.type,key:"raw"},e.createElement(f,{definition:ge.spec.definition,language:ge.spec.type}))]})},p=e.lazy(()=>Promise.all([t.e(1978),t.e(4778),t.e(7700),t.e(9086),t.e(1079)]).then(t.bind(t,1079)).then(z=>({default:z.AsyncApiDefinition}))),d=z=>e.createElement(e.Suspense,{fallback:e.createElement(h.Ex,null)},e.createElement(p,{...z})),A=e.lazy(()=>t.e(896).then(t.bind(t,80896)).then(z=>({default:z.GraphQlDefinition}))),N=z=>e.createElement(e.Suspense,{fallback:e.createElement(h.Ex,null)},e.createElement(A,{...z})),c=e.lazy(()=>Promise.all([t.e(1978),t.e(7700),t.e(6637),t.e(7027)]).then(t.bind(t,27027)).then(z=>({default:z.OpenApiDefinition}))),Z=z=>e.createElement(e.Suspense,{fallback:e.createElement(h.Ex,null)},e.createElement(c,{...z}));function F(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:z=>e.createElement(Z,{definition:z})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:z=>e.createElement(d,{definition:z})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:z=>e.createElement(N,{definition:z})}]}const te=({apiEntity:z})=>{const Ue=(0,s.h_)(T).getApiDefinitionWidget(z),xe=Ue?Ue.title:z.spec.type;return e.createElement("span",null,xe)};function we(){return{title:"Type",field:"spec.type",render:z=>e.createElement(te,{apiEntity:z})}}const ct=[R.u3.columns.createEntityRefColumn({defaultKind:"API"}),R.u3.columns.createSystemColumn(),R.u3.columns.createOwnerColumn(),we(),R.u3.columns.createSpecLifecycleColumn(),R.u3.columns.createMetadataDescriptionColumn()],nt=({variant:z="gridItem"})=>{const{entity:ge}=(0,R.X2)(),{entities:Ue,loading:xe,error:At}=(0,R.eK)(ge,{type:w.Dg});return xe?e.createElement(h.rJ,{variant:z,title:"Consumed APIs"},e.createElement(h.Ex,null)):At||!Ue?e.createElement(h.rJ,{variant:z,title:"Consumed APIs"},e.createElement(h.GB,{severity:"error",title:"Could not load APIs",message:e.createElement(h.Oi,{text:`${At}`,language:"text"})})):e.createElement(R.u3,{title:"Consumed APIs",variant:z,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(u.Z,{variant:"body1"},"This ",ge.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),e.createElement(u.Z,{variant:"body2"},e.createElement(h.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:ct,entities:Ue})},se=[R.u3.columns.createEntityRefColumn({defaultKind:"API"}),R.u3.columns.createOwnerColumn(),we(),R.u3.columns.createSpecLifecycleColumn(),R.u3.columns.createMetadataDescriptionColumn()],ye=({variant:z="gridItem"})=>{const{entity:ge}=(0,R.X2)(),{entities:Ue,loading:xe,error:At}=(0,R.eK)(ge,{type:w.aS,kind:"API"});return xe?e.createElement(h.rJ,{variant:z,title:"APIs"},e.createElement(h.Ex,null)):At||!Ue?e.createElement(h.rJ,{variant:z,title:"APIs"},e.createElement(h.GB,{severity:"error",title:"Could not load APIs",message:e.createElement(h.Oi,{text:`${At}`,language:"text"})})):e.createElement(R.u3,{title:"APIs",variant:z,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(u.Z,{variant:"body1"},"This ",ge.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),e.createElement(u.Z,{variant:"body2"},e.createElement(h.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:se,entities:Ue})},Le=({variant:z="gridItem"})=>{const{entity:ge}=(0,R.X2)(),{entities:Ue,loading:xe,error:At}=(0,R.eK)(ge,{type:w.M_});return xe?e.createElement(h.rJ,{variant:z,title:"Provided APIs"},e.createElement(h.Ex,null)):At||!Ue?e.createElement(h.rJ,{variant:z,title:"Provided APIs"},e.createElement(h.GB,{severity:"error",title:"Could not load APIs",message:e.createElement(h.Oi,{text:`${At}`,language:"text"})})):e.createElement(R.u3,{title:"Provided APIs",variant:z,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(u.Z,{variant:"body1"},"This ",ge.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),e.createElement(u.Z,{variant:"body2"},e.createElement(h.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:ct,entities:Ue})},de=({variant:z="gridItem"})=>{const{entity:ge}=(0,R.X2)(),{entities:Ue,loading:xe,error:At}=(0,R.eK)(ge,{type:w.X9});return xe?e.createElement(h.rJ,{variant:z,title:"Consumers"},e.createElement(h.Ex,null)):At||!Ue?e.createElement(h.rJ,{variant:z,title:"Consumers"},e.createElement(h.GB,{severity:"error",title:"Could not load components",message:e.createElement(h.Oi,{text:`${At}`,language:"text"})})):e.createElement(R.u3,{title:"Consumers",variant:z,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(u.Z,{variant:"body1"},"No component consumes this API."),e.createElement(u.Z,{variant:"body2"},e.createElement(h.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:R.u3.componentEntityColumns,entities:Ue})},V=({variant:z="gridItem"})=>{const{entity:ge}=(0,R.X2)(),{entities:Ue,loading:xe,error:At}=(0,R.eK)(ge,{type:w.Zj});return xe?e.createElement(h.rJ,{variant:z,title:"Providers"},e.createElement(h.Ex,null)):At||!Ue?e.createElement(h.rJ,{variant:z,title:"Providers"},e.createElement(h.GB,{severity:"error",title:"Could not load components",message:e.createElement(h.Oi,{text:`${At}`,language:"text"})})):e.createElement(R.u3,{title:"Providers",variant:z,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(u.Z,{variant:"body1"},"No component provides this API."),e.createElement(u.Z,{variant:"body2"},e.createElement(h.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:R.u3.componentEntityColumns,entities:Ue})},he=(0,s.rx)({id:"api-docs",routes:{root:y},apis:[(0,s.ni)({api:T,deps:{},factory:()=>{const z=F();return{getApiDefinitionWidget:ge=>z.find(Ue=>Ue.type===ge.spec.type)}}})],externalRoutes:{registerApi:O}}),C=he.provide((0,s.P4)({name:"ApiExplorerPage",component:()=>t.e(8885).then(t.bind(t,58885)).then(z=>z.ApiExplorerIndexPage),mountPoint:y})),Ke=he.provide((0,s.CO)({name:"EntityApiDefinitionCard",component:{lazy:()=>t.e(8872).then(t.bind(t,8872)).then(z=>z.ApiDefinitionCard)}})),j=he.provide((0,s.CO)({name:"EntityConsumedApisCard",component:{lazy:()=>t.e(9055).then(t.bind(t,19055)).then(z=>z.ConsumedApisCard)}})),It=he.provide((0,s.CO)({name:"EntityConsumingComponentsCard",component:{lazy:()=>t.e(359).then(t.bind(t,40359)).then(z=>z.ConsumingComponentsCard)}})),Be=he.provide((0,s.CO)({name:"EntityProvidedApisCard",component:{lazy:()=>t.e(9055).then(t.bind(t,19055)).then(z=>z.ProvidedApisCard)}})),L=he.provide((0,s.CO)({name:"EntityProvidingComponentsCard",component:{lazy:()=>t.e(359).then(t.bind(t,40359)).then(z=>z.ProvidingComponentsCard)}})),Y=he.provide((0,s.CO)({name:"EntityHasApisCard",component:{lazy:()=>t.e(9055).then(t.bind(t,19055)).then(z=>z.HasApisCard)}}))},26655:function(Tt,l,t){t.d(l,{j8:function(){return s},x7:function(){return h}});const e="catalog-entity",i={name:"catalog.entity.read",attributes:{action:"read"},resourceType:e},h={name:"catalog.entity.create",attributes:{action:"create"}},s={name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:e},n={name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:e},R={name:"catalog.location.read",attributes:{action:"read"}},P={name:"catalog.location.create",attributes:{action:"create"}},w={name:"catalog.location.delete",attributes:{action:"delete"}}},98487:function(Tt,l,t){t.d(l,{Az:function(){return V},Ho:function(){return ye},Nm:function(){return Z},_U:function(){return se},t0:function(){return he},vw:function(){return c}});var e=t(34520),i=t(49558),h=t(30705),s=t(79692),n=t(60364),R=t(4614),P=t(72779),w=t.n(P),u=t(2784),y=t(10368),O=t(73495),K=t(39412),D=t(48760),g=t(14162),T=t.n(g),f=t(69294);const U=(0,y.Z)(C=>({text:{fill:C.palette.textContrast},secondary:{fill:C.palette.textSubtle}}));function p({edge:{relations:C}}){const Ke=U();return u.createElement("text",{className:Ke.text,textAnchor:"middle"},C.map((j,It)=>u.createElement("tspan",{key:j,className:w()(It>0&&Ke.secondary)},It>0&&u.createElement("tspan",null," / "),j)))}function d({kind:C,...Ke}){var j;const Be=(j=(0,h.qD)().getSystemIcon(`kind:${C.toLocaleLowerCase("en-US")}`))!=null?j:K.Z;return u.createElement(Be,{...Ke})}const A=(0,s.Z)(C=>({node:{fill:C.palette.grey[300],stroke:C.palette.grey[300],"&.primary":{fill:C.palette.primary.light,stroke:C.palette.primary.light},"&.secondary":{fill:C.palette.secondary.light,stroke:C.palette.secondary.light}},text:{fill:C.palette.getContrastText(C.palette.grey[300]),"&.primary":{fill:C.palette.primary.contrastText},"&.secondary":{fill:C.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function N({node:{id:C,kind:Ke,namespace:j,name:It,color:Be="default",focused:L,title:Y,onClick:z}}){const ge=A(),[Ue,xe]=(0,u.useState)(0),[At,nn]=(0,u.useState)(0),ut=(0,u.useRef)(null);(0,u.useLayoutEffect)(()=>{if(ut.current){let{height:pt,width:vt}=ut.current.getBBox();pt=Math.round(pt),vt=Math.round(vt),(pt!==At||vt!==Ue)&&(xe(vt),nn(pt))}},[Ue,At]);const Kt=10,$t=At,Pt=Ke?$t+Kt:0,je=Pt+Ue+Kt*2,Fe=At+Kt*2,be=Y!=null?Y:Ke&&It&&j?(0,O.$3)({kind:Ke,name:It,namespace:j}):C;return u.createElement("g",{onClick:z,className:w()(z&&ge.clickable)},u.createElement("rect",{className:w()(ge.node,Be==="primary"&&"primary",Be==="secondary"&&"secondary"),width:je,height:Fe,rx:10}),Ke&&u.createElement(d,{kind:Ke,y:Kt,x:Kt,width:$t,height:$t,className:w()(ge.text,L&&"focused",Be==="primary"&&"primary",Be==="secondary"&&"secondary")}),u.createElement("text",{ref:ut,className:w()(ge.text,L&&"focused",Be==="primary"&&"primary",Be==="secondary"&&"secondary"),y:Fe/2,x:Pt+(Ue+Kt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},be))}const c=[[e.$1,e.S4],[e.Dg,e.X9],[e.Zj,e.M_],[e.aS,e.cz],[e._b,e.wP],[e.KS,e.hr],[e.nP,e.w$]];var Z=(C=>(C.TOP_BOTTOM="TB",C.BOTTOM_TOP="BT",C.LEFT_RIGHT="LR",C.RIGHT_LEFT="RL",C))(Z||{});const F=T()(10);function te(){const C=(0,h.h_)(O.Ah),Ke=(0,u.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[j,It]=(0,u.useState)({}),Be=(0,u.useCallback)(()=>{const{cachedEntities:xe,requestedEntities:At}=Ke.current,nn={};At.forEach(ut=>{const Kt=xe.get(ut);Kt&&(nn[ut]=Kt)}),It(nn)},[Ke,It]),[L,Y]=(0,f.default)(async()=>{const{requestedEntities:xe,outstandingEntities:At,cachedEntities:nn}=Ke.current;await Promise.all(Array.from(xe).map(ut=>F(async()=>{if(nn.has(ut))return;if(At.has(ut)){await At.get(ut);return}const Kt=C.getEntityByRef(ut);At.set(ut,Kt);try{const $t=await Kt;$t&&(nn.set(ut,$t),Be())}finally{At.delete(ut)}})))},[Ke,Be]),{loading:z,error:ge}=L,Ue=(0,u.useCallback)(xe=>{const At=new Set(xe),{requestedEntities:nn}=Ke.current;(At.size!==nn.size||Array.from(At).some(ut=>!nn.has(ut)))&&(Ke.current.requestedEntities=At,Y(),Be())},[Ke,Y,Be]);return{entities:j,loading:z,error:ge,requestEntities:Ue}}function we({rootEntityRefs:C,filter:{maxDepth:Ke=Number.POSITIVE_INFINITY,relations:j,kinds:It}={}}){const{entities:Be,loading:L,error:Y,requestEntities:z}=te();return(0,u.useEffect)(()=>{const ge=new Set([...C]),Ue=new Set;let xe=[...C],At=0;for(;xe.length>0&&(!isFinite(Ke)||At<Ke);){const nn=xe;for(xe=[];nn.length>0;){const ut=nn.shift(),Kt=Be[ut];if(Ue.add(ut),Kt&&Kt.relations)for(const $t of Kt.relations)(!j||j.includes($t.type))&&(!It||It.some(Pt=>$t.targetRef.startsWith(`${Pt.toLocaleLowerCase("en-US")}:`)))&&(Ue.has($t.targetRef)||(xe.push($t.targetRef),ge.add($t.targetRef)))}++At}z([...ge])},[Be,C,Ke,j,It,z]),{entities:Be,loading:L,error:Y}}function ct({rootEntityRefs:C,maxDepth:Ke=Number.POSITIVE_INFINITY,unidirectional:j=!0,mergeRelations:It=!0,kinds:Be,relations:L,onNodeClick:Y,relationPairs:z=c}){const[ge,Ue]=(0,u.useState)({}),{entities:xe,loading:At,error:nn}=we({rootEntityRefs:C,filter:{maxDepth:Ke,kinds:Be,relations:L}});return(0,D.Z)(()=>{var ut;if(!xe||Object.keys(xe).length===0){Ue({});return}const Kt=Object.entries(xe).map(([Fe,be])=>{var pt,vt,ze;const mt=C.includes(Fe),_t={id:Fe,title:(vt=(pt=be.metadata)==null?void 0:pt.title)!=null?vt:void 0,kind:be.kind,name:be.metadata.name,namespace:(ze=be.metadata.namespace)!=null?ze:e.zG,focused:mt,color:mt?"secondary":"primary"};return Y&&(_t.onClick=Ie=>Y(_t,Ie)),_t}),$t=[],Pt=new Set,je=[...C];for(;je.length>0;){const Fe=je.pop(),be=xe[Fe];Pt.add(Fe),be&&((ut=be==null?void 0:be.relations)==null||ut.forEach(pt=>{var vt;if(!!xe[pt.targetRef]&&!(L&&!L.includes(pt.type))&&!(Be&&!Be.some(ze=>pt.targetRef.startsWith(`${ze.toLocaleLowerCase("en-US")}:`)))){if(!j||!Pt.has(pt.targetRef))if(It){const ze=(vt=z.find(([_t,Ie])=>_t===pt.type||Ie===pt.type))!=null?vt:[pt.type],[mt]=ze;$t.push({from:mt===pt.type?Fe:pt.targetRef,to:mt===pt.type?pt.targetRef:Fe,relations:ze,label:"visible"})}else $t.push({from:Fe,to:pt.targetRef,relations:[pt.type],label:"visible"});Pt.has(pt.targetRef)||(je.push(pt.targetRef),Pt.add(pt.targetRef))}}))}Ue({nodes:Kt,edges:$t})},100,[xe,C,Be,L,j,It,Y,z]),{loading:At,error:nn,...ge}}const nt=(0,s.Z)(C=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${C.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}})),se=({rootEntityNames:C,maxDepth:Ke=Number.POSITIVE_INFINITY,unidirectional:j=!0,mergeRelations:It=!0,kinds:Be,relations:L,direction:Y=Z.LEFT_RIGHT,onNodeClick:z,relationPairs:ge=c,className:Ue,zoom:xe="enabled"})=>{const At=(0,n.Z)(),nn=nt(),ut=(0,u.useMemo)(()=>(Array.isArray(C)?C:[C]).map(be=>(0,e.eE)(be)),[C]),Kt=(0,h.h_)(h.VE),{loading:$t,error:Pt,nodes:je,edges:Fe}=ct({rootEntityRefs:ut,maxDepth:Ke,unidirectional:j,mergeRelations:It,kinds:Be,relations:L,onNodeClick:z,relationPairs:ge});return(0,u.useEffect)(()=>{Pt&&Kt.post(Pt)},[Kt,Pt]),u.createElement("div",{className:w()(nn.container,Ue)},$t&&u.createElement(R.Z,{className:nn.progress}),je&&Fe&&u.createElement(i.mn,{nodes:je,edges:Fe,renderNode:N,renderLabel:p,direction:Y,className:nn.graph,paddingX:At.spacing(4),paddingY:At.spacing(4),labelPosition:i.NX.LabelPosition.RIGHT,labelOffset:At.spacing(1),zoom:xe}))},ye=(0,h.NT)({id:"catalog-graph"}),Le=(0,h.x8)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),de=(0,h.rx)({id:"catalog-graph",routes:{catalogGraph:ye},externalRoutes:{catalogEntity:Le}}),V=de.provide((0,h.CO)({name:"EntityCatalogGraphCard",component:{lazy:()=>t.e(449).then(t.bind(t,60449)).then(C=>C.CatalogGraphCard)}})),he=de.provide((0,h.P4)({name:"CatalogGraphPage",component:()=>t.e(4931).then(t.bind(t,44931)).then(C=>C.CatalogGraphPage),mountPoint:ye}))},93316:function(Tt,l,t){t.d(l,{gA:function(){return _n},vr:function(){return _t},wS:function(){return mt}});var e=t(30705),i=t(49462),h=t(73495),s=t(89393),n=t(49431),R=t(82717),P=t.n(R),w=t(76635),u=t.n(w),y=t(49558),O=t(90436),K=t(7089),D=t(77277),g=t(4614),T=t(11776),f=t(38402),U=t(86136),p=t(49378),d=t(9520),A=t(61837),N=t(82113),c=t(60905),Z=t(86619),F=t(74828),te=t(94339),we=t(32552),ct=t(24579),nt=t(95544),se=t(21324),ye=t(34546),Le=t(5806),de=t(31377),V=t(67471),he=t(31625),C=t(2784),Ke=t(79692),j=t(4989),It=t(84905),Be=t(38016),L=t(39412),Y=t(96795),z=t.n(Y),ge=t(63955),Ue=t(88013),xe=t(60155),At=t.n(xe),nn=t(32272),ut=t(64279),Kt=t(34520);const $t=(0,e.T0)({id:"plugin.catalog-import.service"}),Pt=(Pe,Ae)=>{const _=Pe.github.byUrl(Ae);if(!_)return;const{name:S,owner:x}=P()(Ae);return{repo:S,owner:x,githubIntegrationConfig:_.config}};function je(Pe){const{ref:Ae,..._}=Pe;return{inputRef:Ae,..._}}function Fe(Pe){var Ae;return(Ae=Pe.getOptionalString("catalog.import.entityFilename"))!=null?Ae:"catalog-info.yaml"}function be(Pe){var Ae;return(Ae=Pe.getOptionalString("catalog.import.pullRequestBranchName"))!=null?Ae:"backstage-integration"}class pt{constructor(Ae){this.discoveryApi=Ae.discoveryApi,this.scmAuthApi=Ae.scmAuthApi,this.identityApi=Ae.identityApi,this.scmIntegrationsApi=Ae.scmIntegrationsApi,this.catalogApi=Ae.catalogApi,this.configApi=Ae.configApi}async analyzeUrl(Ae){var _;if(new URL(Ae).pathname.match(/\.ya?ml$/)||((_=new URL(Ae).searchParams.get("path"))==null?void 0:_.match(/.ya?ml$/))){const ee=await this.catalogApi.addLocation({type:"url",target:Ae,dryRun:!0});return{type:"locations",locations:[{exists:ee.exists,target:ee.location.target,entities:ee.entities.map(Ee=>{var _e;return{kind:Ee.kind,namespace:(_e=Ee.metadata.namespace)!=null?_e:"default",name:Ee.metadata.name}})}]}}const S=Pt(this.scmIntegrationsApi,Ae);if(!S){const ee=this.scmIntegrationsApi.byUrl(Ae),Ee=Fe(this.configApi);throw ee?new Error(`The ${ee.title} integration only supports full URLs to ${Ee} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${Ee} file instead.`)}const x=await this.checkGitHubForExistingCatalogInfo({...S,url:Ae});return x.length>0?{type:"locations",locations:x}:{type:"repository",integrationType:"github",url:Ae,generatedEntities:await this.generateEntityDefinitions({repo:Ae})}}async preparePullRequest(){var Ae;const _=(Ae=this.configApi.getOptionalString("app.title"))!=null?Ae:"Backstage",S=this.configApi.getString("app.baseUrl");return{title:`Add ${Fe(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${_} software catalog](${S}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/software-catalog-overview).`}}async submitPullRequest(Ae){const{repositoryUrl:_,fileContent:S,title:x,body:ee}=Ae,Ee=Pt(this.scmIntegrationsApi,_);if(Ee)return await this.submitGitHubPrToRepo({...Ee,repositoryUrl:_,fileContent:S,title:x,body:ee});throw new Error("unimplemented!")}async generateEntityDefinitions(Ae){const{token:_}=await this.identityApi.getCredentials(),S=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",..._&&{Authorization:`Bearer ${_}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:Ae.repo}})}).catch(ee=>{throw new Error(`Failed to generate entity definitions, ${ee.message}`)});if(!S.ok)throw new Error(`Failed to generate entity definitions. Received http response ${S.status}: ${S.statusText}`);return(await S.json()).generateEntities.map(ee=>ee.entity)}async checkGitHubForExistingCatalogInfo(Ae){const{url:_,owner:S,repo:x,githubIntegrationConfig:ee}=Ae,{token:Ee}=await this.scmAuthApi.getCredentials({url:_}),_e=new s.v({auth:Ee,baseUrl:ee.apiBaseUrl}),We=Fe(this.configApi),yt=`repo:${S}/${x}+filename:${We}`,kt=await _e.search.code({q:yt}).catch(bt=>{throw new Error(vt("Couldn't search repository for metadata file.",bt))});if(kt.data.total_count>0){const mn=(await _e.repos.get({owner:S,repo:x}).catch(cn=>{throw new Error(vt("Couldn't fetch repo data",cn))})).data.default_branch;return await Promise.all(kt.data.items.map(cn=>`${(0,w.trimEnd)(_,"/")}/blob/${mn}/${cn.path}`).map(async cn=>{const wn=await this.catalogApi.addLocation({type:"url",target:cn,dryRun:!0});return{target:cn,exists:wn.exists,entities:wn.entities.map(Ce=>{var $e;return{kind:Ce.kind,namespace:($e=Ce.metadata.namespace)!=null?$e:"default",name:Ce.metadata.name}})}}))}return[]}async submitGitHubPrToRepo(Ae){const{owner:_,repo:S,title:x,body:ee,fileContent:Ee,repositoryUrl:_e,githubIntegrationConfig:We}=Ae,{token:yt}=await this.scmAuthApi.getCredentials({url:_e,additionalScope:{repoWrite:!0}}),kt=new s.v({auth:yt,baseUrl:We.apiBaseUrl}),Ft=be(this.configApi),bt=Fe(this.configApi),mn=await kt.repos.get({owner:_,repo:S}).catch(Ce=>{throw new Error(vt("Couldn't fetch repo data",Ce))}),cn=await kt.git.getRef({owner:_,repo:S,ref:`heads/${mn.data.default_branch}`}).catch(Ce=>{throw new Error(vt("Couldn't fetch default branch data",Ce))});return await kt.git.createRef({owner:_,repo:S,ref:`refs/heads/${Ft}`,sha:cn.data.object.sha}).catch(Ce=>{throw new Error(vt(`Couldn't create a new branch with name '${Ft}'`,Ce))}),await kt.repos.createOrUpdateFileContents({owner:_,repo:S,path:bt,message:x,content:n.DS.encode(Ee),branch:Ft}).catch(Ce=>{throw new Error(vt(`Couldn't create a commit with ${bt} file added`,Ce))}),{link:(await kt.pulls.create({owner:_,repo:S,title:x,head:Ft,body:ee,base:mn.data.default_branch}).catch(Ce=>{throw new Error(vt(`Couldn't create a pull request for ${Ft} branch`,Ce))})).data.html_url,location:`https://${We.host}/${_}/${S}/blob/${mn.data.default_branch}/${bt}`}}}function vt(Pe,Ae){return`${Pe}, received http response status code ${Ae.status}: ${Ae.message}`}const ze=(0,e.NT)({id:"catalog-import"}),mt=(0,e.rx)({id:"catalog-import",apis:[(0,e.ni)({api:$t,deps:{discoveryApi:e.NW,scmAuthApi:i.Om,identityApi:e.$4,scmIntegrationsApi:i.q3,catalogApi:h.Ah,configApi:e.Ds},factory:({discoveryApi:Pe,scmAuthApi:Ae,identityApi:_,scmIntegrationsApi:S,catalogApi:x,configApi:ee})=>new pt({discoveryApi:Pe,scmAuthApi:Ae,scmIntegrationsApi:S,identityApi:_,catalogApi:x,configApi:ee})})],routes:{importPage:ze}}),_t=mt.provide((0,e.P4)({name:"CatalogImportPage",component:()=>t.e(4942).then(t.bind(t,84942)).then(Pe=>Pe.ImportPage),mountPoint:ze}));function Ie(){const Pe=(0,e.h_)(e.Ds);return Fe(Pe)}const ue=Pe=>{const{exampleLocationUrl:Ae="https://github.com/backstage/backstage/blob/master/catalog-info.yaml",exampleRepositoryUrl:_="https://github.com/backstage/backstage"}=Pe,S=(0,e.h_)(e.Ds),x=S.getOptional("app.title")||"Backstage",ee=(0,e.h_)($t),_e=S.getConfig("integrations").has("github"),We=Ie();return C.createElement(y.rJ,{title:"Register an existing component",deepLink:{title:"Learn more about the Software Catalog",link:"https://backstage.io/docs/features/software-catalog/software-catalog-overview"}},C.createElement(O.Z,{variant:"body2",paragraph:!0},"Enter the URL to your source code repository to add it to ",x,"."),C.createElement(O.Z,{variant:"h6"},"Link to an existing entity file"),C.createElement(O.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",C.createElement("code",null,Ae)),C.createElement(O.Z,{variant:"body2",paragraph:!0},"The wizard analyzes the file, previews the entities, and adds them to the ",x," catalog."),_e&&C.createElement(C.Fragment,null,C.createElement(O.Z,{variant:"h6"},"Link to a repository"," ",C.createElement(K.Z,{label:"GitHub only",variant:"outlined",size:"small"})),C.createElement(O.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",C.createElement("code",null,_)),C.createElement(O.Z,{variant:"body2",paragraph:!0},"The wizard discovers all ",C.createElement("code",null,We)," files in the repository, previews the entities, and adds them to the ",x," ","catalog."),ee.preparePullRequest&&C.createElement(O.Z,{variant:"body2",paragraph:!0},"If no entities are found, the wizard will prepare a Pull Request that adds an example ",C.createElement("code",null,We)," and prepares the ",x," catalog to load all entities as soon as the Pull Request is merged.")))};function Ze(Pe){return{activeFlow:"unknown",activeState:"analyze",analysisUrl:Pe,previousStates:[]}}function rt(Pe,Ae){switch(Ae.type){case"onAnalysis":{if(Pe.activeState!=="analyze")return Pe;const{activeState:_,previousStates:S}=Pe,[x,ee,Ee,_e]=Ae.args;return{...Pe,analysisUrl:ee,activeFlow:x,analyzeResult:Ee,prepareResult:_e==null?void 0:_e.prepareResult,activeState:(_e==null?void 0:_e.prepareResult)===void 0?"prepare":"review",previousStates:S.concat(_)}}case"onPrepare":{if(Pe.activeState!=="prepare")return Pe;const{activeState:_,previousStates:S}=Pe,[x,ee]=Ae.args;return{...Pe,prepareResult:x,activeState:"review",previousStates:ee!=null&&ee.notRepeatable?[]:S.concat(_)}}case"onReview":{if(Pe.activeState!=="review")return Pe;const{activeState:_,previousStates:S}=Pe,[x]=Ae.args;return{...Pe,reviewResult:x,activeState:"finish",previousStates:S.concat(_)}}case"onGoBack":{const{activeState:_,previousStates:S}=Pe;return{...Pe,activeState:S.length>0?S[S.length-1]:_,previousStates:S.slice(0,S.length-1)}}case"onReset":return{...Ze(Ae.initialUrl),prepareResult:Pe.prepareResult};default:throw new Error}}const le=Pe=>{const[Ae,_]=(0,C.useReducer)(rt,Pe==null?void 0:Pe.initialUrl,Ze),{activeFlow:S,activeState:x,analysisUrl:ee,previousStates:Ee}=Ae;return{activeFlow:S,activeState:x,activeStepNumber:["analyze","prepare","review","finish"].indexOf(x),analysisUrl:ee,analyzeResult:Ae.analyzeResult,prepareResult:Ae.prepareResult,reviewResult:Ae.reviewResult,onAnalysis:(_e,We,yt,kt)=>_({type:"onAnalysis",args:[_e,We,yt,kt]}),onPrepare:(_e,We)=>_({type:"onPrepare",args:[_e,We]}),onReview:_e=>_({type:"onReview",args:[_e]}),onGoBack:Ee.length>0?()=>_({type:"onGoBack"}):void 0,onReset:()=>_({type:"onReset",initialUrl:Pe==null?void 0:Pe.initialUrl})}},ie=(0,Ke.Z)(Pe=>({wrapper:{marginTop:Pe.spacing(1),marginRight:Pe.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{marginTop:Pe.spacing(1),marginRight:Pe.spacing(1)}})),ve=Pe=>{const{loading:Ae,..._}=Pe,S=ie();return C.createElement("div",{className:S.wrapper},C.createElement(D.Z,{color:"primary",variant:"contained",..._,disabled:Pe.disabled||Pe.loading}),Pe.loading&&C.createElement(g.Z,{size:"1.5rem",className:S.buttonProgress}),Pe.loading)},fe=Pe=>{const Ae=ie();return C.createElement(D.Z,{variant:"outlined",className:Ae.button,...Pe},Pe.children||"Back")},Ve=(0,Ke.Z)(Pe=>({nested:{paddingLeft:Pe.spacing(4)}}));function Et(Pe){return Pe.sort((Ae,_)=>(0,h.$3)(Ae).localeCompare((0,h.$3)(_)))}const ft=Pe=>{const{locations:Ae,collapsed:_=!1,locationListItemIcon:S,onItemClick:x,firstListItem:ee,withLinks:Ee=!1}=Pe,_e=(0,e.qD)(),We=Ve(),[yt,kt]=(0,C.useState)([]),Ft=bt=>{kt(mn=>mn.includes(bt)?mn.filter(cn=>cn!==bt):mn.concat(bt))};return C.createElement(T.Z,null,ee,Ae.map(bt=>C.createElement(C.Fragment,{key:bt.target},C.createElement(f.Z,{dense:!0,button:Boolean(x),onClick:()=>x==null?void 0:x.call(void 0,bt.target)},C.createElement(U.Z,null,S(bt.target)),C.createElement(p.Z,{primary:bt.target,secondary:`Entities: ${bt.entities.length}`}),_&&C.createElement(d.Z,null,C.createElement(A.Z,{edge:"end",onClick:()=>Ft(bt.target)},yt.includes(bt.target)?C.createElement(It.Z,null):C.createElement(Be.Z,null)))),C.createElement(N.Z,{in:!_||yt.includes(bt.target),timeout:"auto",unmountOnExit:!0},C.createElement(T.Z,{component:"div",disablePadding:!0,dense:!0},Et(bt.entities).map(mn=>{var cn;const wn=(cn=_e.getSystemIcon(`kind:${mn.kind.toLocaleLowerCase("en-US")}`))!=null?cn:L.Z;return C.createElement(f.Z,{key:(0,h.$3)(mn),className:We.nested,...Ee?{component:h.dx,entityRef:mn,button:Ee}:{}},C.createElement(U.Z,null,C.createElement(wn,null)),C.createElement(p.Z,{primary:(0,h.$3)(mn)}))}))))))},Wt=({prepareResult:Pe,onReset:Ae})=>{const _=C.createElement(c.Z,{container:!0,spacing:0},C.createElement(fe,{onClick:Ae},"Register another"));if(Pe.type==="repository")return C.createElement(C.Fragment,null,C.createElement(O.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",C.createElement(y.rU,{to:Pe.pullRequest.url,target:"_blank",rel:"noreferrer"},Pe.pullRequest.url)),C.createElement(O.Z,{paragraph:!0},"Your entities will be imported as soon as the Pull Request is merged."),_);const[S,x]=z()(Pe.locations,ee=>ee.exists);return C.createElement(C.Fragment,null,x.length>0&&C.createElement(C.Fragment,null,C.createElement(O.Z,null,"The following entities have been added to the catalog:"),C.createElement(ft,{locations:x,locationListItemIcon:()=>C.createElement(j.Z,null),withLinks:!0})),S.length>0&&C.createElement(C.Fragment,null,C.createElement(O.Z,null,"A refresh was triggered for the following locations:"),C.createElement(ft,{locations:S,locationListItemIcon:()=>C.createElement(j.Z,null),withLinks:!0})),_)},Yt=Pe=>{const{onAnalysis:Ae,analysisUrl:_="",disablePullRequest:S=!1,exampleLocationUrl:x="https://github.com/backstage/backstage/blob/master/catalog-info.yaml"}=Pe,ee=(0,e.h_)(e.VE),Ee=(0,e.h_)($t),{register:_e,handleSubmit:We,formState:{errors:yt},watch:kt}=(0,ge.cI)({mode:"onTouched",defaultValues:{url:_}}),[Ft,bt]=(0,C.useState)(!1),[mn,cn]=(0,C.useState)(void 0),wn=(0,C.useCallback)(async({url:Ce})=>{var $e,Je,He;bt(!0);try{const et=await Ee.analyzeUrl(Ce);switch(et.type){case"repository":!S&&et.generatedEntities.length>0?Ae("no-location",Ce,et):(cn("Couldn't generate entities for your repository"),bt(!1));break;case"locations":{et.locations.length===1?Ae("single-location",Ce,et,{prepareResult:et}):et.locations.length>1?Ae("multiple-locations",Ce,et):(cn("There are no entities at this location"),bt(!1));break}default:{const Q=`Received unknown analysis result of type ${et.type}. Please contact the support team.`;cn(Q),bt(!1),ee.post(new Error(Q));break}}}catch(et){cn((He=(Je=($e=et==null?void 0:et.data)==null?void 0:$e.error)==null?void 0:Je.message)!=null?He:et.message),bt(!1)}},[Ee,S,ee,Ae]);return C.createElement("form",{onSubmit:We(wn)},C.createElement(Z.Z,{...je(_e("url",{required:!0,validate:{httpsValidator:Ce=>typeof Ce=="string"&&Ce.match(/^http[s]?:\/\//)!==null||"Must start with http:// or https://."}})),fullWidth:!0,id:"url",label:"Repository URL",placeholder:x,helperText:"Enter the full path to your entity file to start tracking your component",margin:"normal",variant:"outlined",error:Boolean(yt.url),required:!0}),yt.url&&C.createElement(F.Z,{error:!0},yt.url.message),mn&&C.createElement(F.Z,{error:!0},mn),C.createElement(c.Z,{container:!0,spacing:0},C.createElement(ve,{disabled:Boolean(yt.url)||!kt("url"),loading:Ft,type:"submit"},"Analyze")))},ln=Pe=>{const{name:Ae,options:_,required:S,errors:x,rules:ee,loading:Ee=!1,loadingText:_e,helperText:We,errorHelperText:yt,textFieldProps:kt={}}=Pe;return C.createElement(ge.Qr,{name:Ae,rules:ee,render:({field:{onChange:Ft}})=>C.createElement(Ue.ZP,{loading:Ee,loadingText:_e,options:_||[],autoSelect:!0,freeSolo:!0,onChange:(bt,mn)=>Ft(mn),renderInput:bt=>C.createElement(Z.Z,{...bt,helperText:(x==null?void 0:x[Ae])&&yt||We,error:Boolean(x==null?void 0:x[Ae]),margin:"normal",variant:"outlined",required:S,InputProps:{...bt.InputProps,endAdornment:C.createElement(C.Fragment,null,Ee?C.createElement(g.Z,{color:"inherit",size:"1em"}):null,bt.InputProps.endAdornment)},...kt})})})},gn=Pe=>{const{defaultValues:Ae,onSubmit:_,render:S}=Pe,x=(0,ge.cI)({mode:"onTouched",defaultValues:Ae}),{handleSubmit:ee,watch:Ee,control:_e,register:We,formState:yt,setValue:kt}=x;return C.createElement(ge.RV,{...x},C.createElement("form",{onSubmit:ee(_)},S({values:Ee(),formState:yt,register:We,control:_e,setValue:kt})))},Sn=Pe=>{const{repositoryUrl:Ae,entities:_,classes:S}=Pe,x=Ie();return C.createElement(te.Z,{variant:"outlined",className:S==null?void 0:S.card},C.createElement(we.Z,{title:C.createElement("code",null,`${(0,w.trimEnd)(Ae,"/")}/${x}`)}),C.createElement(ct.Z,{className:S==null?void 0:S.cardContent},C.createElement(y.Oi,{text:_.map(ee=>At().stringify(ee)).join(`---
`).trim(),language:"yaml"})))},yn=Pe=>{const{title:Ae,description:_,classes:S}=Pe;return C.createElement(te.Z,{variant:"outlined",className:S==null?void 0:S.card},C.createElement(we.Z,{title:Ae,subheader:"Create a new Pull Request"}),C.createElement(ct.Z,{className:S==null?void 0:S.cardContent},C.createElement(y.SA,{content:_})))},Re=(0,Ke.Z)(Pe=>({previewCard:{marginTop:Pe.spacing(1)},previewCardContent:{paddingTop:0}}));function Xe(Pe,Ae,_){return Pe.map(S=>({...S,apiVersion:S.apiVersion,kind:S.kind,metadata:{...S.metadata,name:Ae},spec:{...S.spec,..._?{owner:_}:{}}}))}const dt=Pe=>{var Ae,_,S,x,ee,Ee;const{analyzeResult:_e,onPrepare:We,onGoBack:yt,renderFormFields:kt}=Pe,Ft=Re(),bt=(0,e.h_)(h.Ah),mn=(0,e.h_)($t),cn=(0,e.h_)(e.VE),[wn,Ce]=(0,C.useState)(!1),[$e,Je]=(0,C.useState)(),He=Ie(),{loading:et,value:Q,error:ne}=(0,ut.default)(()=>mn.preparePullRequest(),[mn.preparePullRequest]);(0,C.useEffect)(()=>{ne&&cn.post(ne)},[ne,cn]);const{loading:ce,value:me}=(0,ut.default)(async()=>(await bt.getEntities({filter:{kind:"group"}})).items.map(st=>(0,h.$3)(st,{defaultKind:"group"})).sort()),tt=(0,C.useCallback)(async ht=>{Ce(!0);try{const st=await mn.submitPullRequest({repositoryUrl:_e.url,title:ht.title,body:ht.body,fileContent:Xe(_e.generatedEntities,ht.componentName,ht.owner).map(Dt=>At().stringify(Dt)).join(`---
`)});We({type:"repository",url:_e.url,integrationType:_e.integrationType,pullRequest:{url:st.link},locations:[{target:st.location,entities:Xe(_e.generatedEntities,ht.componentName,ht.owner).map(Dt=>({kind:Dt.kind,namespace:Dt.metadata.namespace,name:Dt.metadata.name}))}]},{notRepeatable:!0})}catch(st){(0,nn.BD)(st),Je(st.message),Ce(!1)}},[_e.generatedEntities,_e.integrationType,_e.url,mn,We]);return C.createElement(C.Fragment,null,C.createElement(O.Z,null,"You entered a link to a ",_e.integrationType," repository but a"," ",C.createElement("code",null,He)," could not be found. Use this form to open a Pull Request that creates one."),!et&&C.createElement(gn,{onSubmit:tt,defaultValues:{title:(Ae=Q==null?void 0:Q.title)!=null?Ae:"",body:(_=Q==null?void 0:Q.body)!=null?_:"",owner:((x=(S=_e.generatedEntities[0])==null?void 0:S.spec)==null?void 0:x.owner)||"",componentName:((Ee=(ee=_e.generatedEntities[0])==null?void 0:ee.metadata)==null?void 0:Ee.name)||"",useCodeowners:!1},render:({values:ht,formState:st,register:Dt,setValue:qt})=>C.createElement(C.Fragment,null,kt({values:ht,formState:st,register:Dt,setValue:qt,groups:me!=null?me:[],groupsLoading:ce}),C.createElement(nt.Z,{marginTop:2},C.createElement(O.Z,{variant:"h6"},"Preview Pull Request")),C.createElement(yn,{title:ht.title,description:ht.body,classes:{card:Ft.previewCard,cardContent:Ft.previewCardContent}}),C.createElement(nt.Z,{marginTop:2,marginBottom:1},C.createElement(O.Z,{variant:"h6"},"Preview Entities")),C.createElement(Sn,{entities:Xe(_e.generatedEntities,ht.componentName,ht.owner),repositoryUrl:_e.url,classes:{card:Ft.previewCard,cardContent:Ft.previewCardContent}}),$e&&C.createElement(F.Z,{error:!0},$e),C.createElement(c.Z,{container:!0,spacing:0},yt&&C.createElement(fe,{onClick:yt,disabled:wn}),C.createElement(ve,{type:"submit",disabled:Boolean(st.errors.title||st.errors.body||st.errors.owner),loading:wn},"Create PR")))}))},Gt=({analyzeResult:Pe,prepareResult:Ae,onPrepare:_,onGoBack:S})=>{const[x,ee]=(0,C.useState)((Ae==null?void 0:Ae.locations.map(Ft=>Ft.target))||[]),[Ee,_e]=z()(Pe==null?void 0:Pe.locations,Ft=>Ft.exists),We=(0,C.useCallback)(async()=>{_({type:"locations",locations:_e.filter(Ft=>x.includes(Ft.target))})},[_e,_,x]),yt=Ft=>{ee(bt=>bt.includes(Ft)?bt.filter(mn=>mn!==Ft):bt.concat(Ft))},kt=()=>{ee(Ft=>Ft.length<_e.length?_e.map(bt=>bt.target):[])};return C.createElement(C.Fragment,null,_e.length>0&&C.createElement(C.Fragment,null,C.createElement(O.Z,null,"Select one or more locations that are present in your git repository:"),C.createElement(ft,{firstListItem:C.createElement(f.Z,{dense:!0,button:!0,onClick:kt},C.createElement(U.Z,null,C.createElement(se.Z,{edge:"start",checked:x.length===_e.length,indeterminate:x.length>0&&x.length<_e.length,tabIndex:-1,disableRipple:!0})),C.createElement(p.Z,{primary:"Select All"})),onItemClick:yt,locations:_e,locationListItemIcon:Ft=>C.createElement(se.Z,{edge:"start",checked:x.includes(Ft),tabIndex:-1,disableRipple:!0}),collapsed:!0})),Ee.length>0&&C.createElement(C.Fragment,null,C.createElement(O.Z,null,"These locations already exist in the catalog:"),C.createElement(ft,{locations:Ee,locationListItemIcon:()=>C.createElement(j.Z,null),withLinks:!0,collapsed:!0})),C.createElement(c.Z,{container:!0,spacing:0},S&&C.createElement(fe,{onClick:S}),C.createElement(ve,{disabled:x.length===0,onClick:We},"Review")))},Bt=({prepareResult:Pe,onReview:Ae,onGoBack:_})=>{const S=(0,e.h_)(h.Ah),ee=(0,e.h_)(e.Ds).getOptional("app.title")||"Backstage",[Ee,_e]=(0,C.useState)(!1),[We,yt]=(0,C.useState)(),kt=!!(Pe.type==="locations"&&Pe.locations.some(bt=>bt.exists)),Ft=(0,C.useCallback)(async()=>{_e(!0);try{let bt=new Array;Pe.type==="locations"&&(bt=await Promise.all(Pe.locations.filter(cn=>cn.exists).map(async cn=>{var wn;const Ce=(0,Kt.eE)((wn=cn.entities[0])!=null?wn:cn);return await S.refreshEntity(Ce),{target:cn.target}})));const mn=await Promise.all(Pe.locations.filter(cn=>!cn.exists).map(async cn=>{const wn=await S.addLocation({type:"url",target:cn.target});return{target:wn.location.target,entities:wn.entities}}));Ae({...Pe,refreshed:bt,locations:mn})}catch(bt){(0,nn.BD)(bt),Pe.type==="repository"&&bt.message.startsWith("Location was added but has no entities specified yet")?Ae({...Pe,locations:Pe.locations.map(mn=>({target:mn.target,entities:[]}))}):(yt(bt.message),_e(!1))}},[Pe,Ae,S]);return C.createElement(C.Fragment,null,Pe.type==="repository"&&C.createElement(C.Fragment,null,C.createElement(O.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",C.createElement(y.rU,{to:Pe.pullRequest.url,target:"_blank",rel:"noopener noreferrer"},Pe.pullRequest.url)),C.createElement(O.Z,{paragraph:!0},"You can already import the location and ",ee," will fetch the entities as soon as the Pull Request is merged.")),C.createElement(O.Z,null,kt?"The following locations already exist in the catalog:":"The following entities will be added to the catalog:"),C.createElement(ft,{locations:Pe.locations,locationListItemIcon:()=>C.createElement(j.Z,null)}),We&&C.createElement(F.Z,{error:!0},We),C.createElement(c.Z,{container:!0,spacing:0},_&&C.createElement(fe,{onClick:_,disabled:Ee}),C.createElement(ve,{disabled:Ee,loading:Ee,onClick:()=>Ft()},kt?"Refresh":"Import")))};function rn(Pe,Ae){switch(Pe){case"single-location":return{...Ae,prepare:()=>({stepLabel:C.createElement(ye.Z,{optional:C.createElement(O.Z,{variant:"caption"},"Discovered Locations: 1")},"Select Locations"),content:C.createElement(C.Fragment,null)})};case"multiple-locations":return{...Ae,prepare:(_,S)=>_.analyzeResult.type!=="locations"?Ae.prepare(_,S):{stepLabel:C.createElement(ye.Z,{optional:C.createElement(O.Z,{variant:"caption"},"Discovered Locations: ",_.analyzeResult.locations.length)},"Select Locations"),content:C.createElement(Gt,{analyzeResult:_.analyzeResult,prepareResult:_.prepareResult,onPrepare:_.onPrepare,onGoBack:_.onGoBack})}};case"no-location":return{...Ae,prepare:(_,S)=>_.analyzeResult.type!=="repository"?Ae.prepare(_,S):{stepLabel:C.createElement(ye.Z,null,"Create Pull Request"),content:C.createElement(dt,{analyzeResult:_.analyzeResult,onPrepare:_.onPrepare,onGoBack:_.onGoBack,renderFormFields:({values:x,setValue:ee,formState:Ee,groupsLoading:_e,groups:We,register:yt})=>C.createElement(C.Fragment,null,C.createElement(nt.Z,{marginTop:2},C.createElement(O.Z,{variant:"h6"},"Pull Request Details")),C.createElement(Z.Z,{...je(yt("title",{required:!0})),label:"Pull Request Title",placeholder:"Add Backstage catalog entity descriptor files",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ee.errors.title),required:!0}),C.createElement(Z.Z,{...je(yt("body",{required:!0})),label:"Pull Request Body",placeholder:"A describing text with Markdown support",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ee.errors.body),multiline:!0,required:!0}),C.createElement(nt.Z,{marginTop:2},C.createElement(O.Z,{variant:"h6"},"Entity Configuration")),C.createElement(Z.Z,{...je(yt("componentName",{required:!0})),label:"Name of the created component",placeholder:"my-component",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ee.errors.componentName),required:!0}),!x.useCodeowners&&C.createElement(ln,{name:"owner",errors:Ee.errors,options:We||[],loading:_e,loadingText:"Loading groups\u2026",helperText:"Select an owner from the list or enter a reference to a Group or a User",errorHelperText:"required value",textFieldProps:{label:"Entity Owner",placeholder:"my-group"},rules:{required:!0},required:!0}),C.createElement(Le.Z,{control:C.createElement(se.Z,{...je(yt("useCodeowners")),onChange:(kt,Ft)=>{Ft&&ee("owner","")}}),label:C.createElement(C.Fragment,null,"Use ",C.createElement("em",null,"CODEOWNERS")," file as Entity Owner")}),C.createElement(F.Z,null,"WARNING: This may fail if no CODEOWNERS file is found at the target location."))})}};default:return Ae}}const fn={analyze:(Pe,{apis:Ae})=>({stepLabel:C.createElement(ye.Z,null,"Select URL"),content:C.createElement(Yt,{key:"analyze",analysisUrl:Pe.analysisUrl,onAnalysis:Pe.onAnalysis,disablePullRequest:!Ae.catalogImportApi.preparePullRequest})}),prepare:Pe=>({stepLabel:C.createElement(ye.Z,{optional:C.createElement(O.Z,{variant:"caption"},"Optional")},"Import Actions"),content:C.createElement(fe,{onClick:Pe.onGoBack})}),review:Pe=>({stepLabel:C.createElement(ye.Z,null,"Review"),content:C.createElement(Bt,{prepareResult:Pe.prepareResult,onReview:Pe.onReview,onGoBack:Pe.onGoBack})}),finish:Pe=>({stepLabel:C.createElement(ye.Z,null,"Finish"),content:C.createElement(Wt,{prepareResult:Pe.prepareResult,onReset:Pe.onReset})})},Pn=(0,Ke.Z)(()=>({stepperRoot:{padding:0}})),An=Pe=>{const{initialUrl:Ae,generateStepper:_=rn,variant:S}=Pe,x=(0,e.h_)($t),ee=Pn(),Ee=le({initialUrl:Ae}),_e=(0,C.useMemo)(()=>_(Ee.activeFlow,fn),[_,Ee.activeFlow]),We=yt=>C.createElement(de.Z,null,yt.stepLabel,C.createElement(V.Z,null,yt.content));return C.createElement(y.rJ,{variant:S},C.createElement(he.Z,{classes:{root:ee.stepperRoot},activeStep:Ee.activeStepNumber,orientation:"vertical"},We(_e.analyze(Ee,{apis:{catalogImportApi:x}})),We(_e.prepare(Ee,{apis:{catalogImportApi:x}})),We(_e.review(Ee,{apis:{catalogImportApi:x}})),We(_e.finish(Ee,{apis:{catalogImportApi:x}}))))},_n=()=>{const Ae=(0,e.h_)(e.Ds).getOptional("app.title")||"Backstage";return C.createElement(y.T3,{themeId:"home"},C.createElement(y.h4,{title:"Register an existing component"}),C.createElement(y.VY,null,C.createElement(y.yW,{title:`Start tracking your component in ${Ae}`},C.createElement(y.qt,null,"Start tracking your component in ",Ae," by adding it to the software catalog.")),C.createElement(c.Z,{container:!0,spacing:2,direction:"row-reverse"},C.createElement(c.Z,{item:!0,xs:12,md:4,lg:6,xl:8},C.createElement(ue,null)),C.createElement(c.Z,{item:!0,xs:12,md:8,lg:6,xl:4},C.createElement(An,null)))))}},73495:function(Tt,l,t){t.d(l,{$3:function(){return wn},Ah:function(){return Bt},CR:function(){return qt},CV:function(){return We},EW:function(){return or},LH:function(){return b},N$:function(){return Vt},UO:function(){return Ft},U_:function(){return na},Uh:function(){return tt},X2:function(){return S},ZW:function(){return Lt},_i:function(){return _n},ce:function(){return x},df:function(){return it},dq:function(){return wt},dx:function(){return Ce},eK:function(){return st},g9:function(){return yt},h$:function(){return Ae},hF:function(){return _e},hd:function(){return cn},n3:function(){return e.n3},nN:function(){return pn},p3:function(){return rn},pp:function(){return _a},rI:function(){return $e},sL:function(){return Ye},tW:function(){return on},u3:function(){return m},wi:function(){return mn},wp:function(){return bt},xE:function(){return Me},zo:function(){return Je}});var e=t(88285),i=t(30705),h=t(82394),s=t.n(h),n=t(2784),R=t(41156),P=t(60364),w=t(77277),u=t(4190),y=t(95544),O=t(90436),K=t(60905),D=t(80030),g=t(79692),T=t(5806),f=t(21324),U=t(86619),p=t(15223),d=t(42494),A=t(29611),N=t(50581),c=t(61837),Z=t(15459),F=t(55999),te=t(49378),we=t(54506),ct=t(94339),nt=t(24579),se=t(38402),ye=t(86136),Le=t(11776),de=t(8629),V=t(79249),he=t(38724),C=t(99152),Ke=t(6487),j=t(49429),It=t(85256),Be=t(12231),L=t(9520),Y=t(36444),z=t(99688),ge=t(88013),Ue=t(18473),xe=t(76635),At=t.n(xe),nn=t(19126),ut=t.n(nn),Kt=t(10289),$t=t(69294),Pt=t(48760),je=t(90736),Fe=t(34520),be=t(64279),pt=t(18149),vt=t.n(pt),ze=t(829),mt=t.n(ze),_t=t(49558),Ie=t(72164),ue=t(4298),Ze=t(19996),rt=t(25505),le=t(38016),ie=t(33375),ve=t(21853),fe=t(82108),Ve=t.n(fe),Et=t(11640),ft=t(28347),Wt=t(72779),Yt=t.n(Wt),ln=t(39412),gn=t(27685),Sn=t(3440),yn=t.n(Sn),Re=t(60155),Xe=t.n(Re),dt=t(32272),Gt=t(47603);const Bt=(0,i.T0)({id:"plugin.catalog.service"}),rn=(0,i.T0)({id:"catalog-react.starred-entities"});class fn{constructor(){this.starredEntities=new Set,this.subscribers=new Set,this.observable=new ObservableImpl(ae=>(ae.next(new Set(this.starredEntities)),this.subscribers.add(ae),()=>{this.subscribers.delete(ae)}))}async toggleStarred(ae){this.starredEntities.delete(ae)||this.starredEntities.add(ae);for(const Te of this.subscribers)Te.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const Pn=H=>{const ae=(0,R.Z)(Ct=>Ct.breakpoints.down("md")),Te=(0,P.Z)(),[Se,Ge]=(0,n.useState)(!1);return ae?n.createElement(n.Fragment,null,n.createElement(w.Z,{style:{marginTop:Te.spacing(1),marginLeft:Te.spacing(1)},onClick:()=>Ge(!0),startIcon:n.createElement(Y.Z,null)},"Filters"),n.createElement(u.ZP,{open:Se,onClose:()=>Ge(!1),anchor:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},n.createElement(y.Z,{m:2},n.createElement(O.Z,{variant:"h6",component:"h2",style:{marginBottom:Te.spacing(1)}},"Filters"),H.children))):n.createElement(K.Z,{item:!0,lg:2},H.children)},An=H=>n.createElement(K.Z,{item:!0,xs:12,lg:10},H.children),_n=H=>n.createElement(K.Z,{container:!0,style:{position:"relative"}},H.children);_n.Filters=Pn,_n.Content=An;const Pe=(0,Ue.CT)("entity-context"),Ae=({children:H,entity:ae,loading:Te,error:Se,refresh:Ge})=>{const Ct={entity:ae,loading:Te,error:Se,refresh:Ge};return n.createElement(Pe.Provider,{value:(0,Ue.EI)({1:Ct})},H)},_=({entity:H,children:ae})=>React.createElement(Ae,{entity:H,loading:!Boolean(H),error:void 0,refresh:void 0,children:ae});function S(){const H=(0,Ue.Vt)("entity-context");if(!H)throw new Error("Entity context is not available");const ae=H.atVersion(1);if(!ae)throw new Error("EntityContext v1 not available");if(!ae.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:ae.entity}}function x(){const H=(0,Ue.Vt)("entity-context");if(!H)throw new Error("Entity context is not available");const ae=H.atVersion(1);if(!ae)throw new Error("EntityContext v1 not available");const{entity:Te,loading:Se,error:Ge,refresh:Ct}=ae;return{entity:Te,loading:Se,error:Ge,refresh:Ct}}function ee(H){return H.reduce((ae,Te)=>({...ae,...Te.getCatalogFilters?Te.getCatalogFilters():{}}),{})}function Ee(H){return ae=>H.every(Te=>!Te.filterEntity||Te.filterEntity(ae))}function _e(H,ae,Te){var Se;let Ge=((Se=H==null?void 0:H.relations)==null?void 0:Se.filter(Ct=>Ct.type===ae).map(Ct=>(0,Fe.of)(Ct.targetRef)))||[];return Te!=null&&Te.kind&&(Ge=Ge.filter(Ct=>Ct.kind.toLocaleLowerCase("en-US")===Te.kind.toLocaleLowerCase("en-US"))),Ge}function We(H,ae){var Te;const Se=(Te=H.metadata.annotations)==null?void 0:Te[Fe.M6];if(!!Se)try{const Ge=(0,Fe.Ou)(Se),Ct=ae.byUrl(Ge.target);return{locationTargetUrl:Ge.target,integrationType:Ct==null?void 0:Ct.type}}catch{return}}function yt(H,ae){const Te=new Set([..._e(H,Fe.hr,{kind:"group"}),...H?[(0,Fe.iB)(H)]:[]].map(Fe.eE)),Se=_e(ae,Fe.S4).map(Fe.eE);for(const Ge of Se)if(Te.has(Ge))return!0;return!1}const kt=(0,n.createContext)(void 0),Ft=({children:H})=>{const ae=(0,je.default)(),Te=(0,i.h_)(Bt),[Se,Ge]=(0,n.useState)({}),Ct=(0,Kt.TH)(),ot=(0,n.useMemo)(()=>{var bn;return(bn=ut().parse(Ct.search,{ignoreQueryPrefix:!0}).filters)!=null?bn:{}},[Ct]),[xt,tn]=(0,n.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[]})),[{loading:en,error:Ht},Jt]=(0,$t.default)(async()=>{var bn;const dn=(0,xe.compact)(Object.values(Se)),Tn=Ee(dn),Un=ee(dn),ba=ee((0,xe.compact)(Object.values(xt.appliedFilters))),ua=Object.keys(Se).reduce((Qn,la)=>{const da=Se[la];return da!=null&&da.toQueryValue&&(Qn[la]=da.toQueryValue()),Qn},{});if((0,xe.isEqual)(ba,Un))tn({appliedFilters:Se,backendEntities:xt.backendEntities,entities:xt.backendEntities.filter(Tn)});else{const Qn=await Te.getEntities({filter:Un});tn({appliedFilters:Se,backendEntities:Qn.items,entities:Qn.items.filter(Tn)})}if(ae()){const Qn=ut().parse(Ct.search,{ignoreQueryPrefix:!0}),la=ut().stringify({...Qn,filters:ua},{addQueryPrefix:!0,arrayFormat:"repeat"}),da=`${window.location.pathname}${la}`;(bn=window.history)==null||bn.replaceState(null,document.title,da)}},[Te,ot,Se,xt],{loading:!0});(0,Pt.Z)(Jt,10,[Se]);const vn=(0,n.useCallback)(bn=>{Ge(dn=>{const Tn=typeof bn=="function"?bn(dn):bn;return{...dn,...Tn}})},[]),Ln=(0,n.useMemo)(()=>({filters:xt.appliedFilters,entities:xt.entities,backendEntities:xt.backendEntities,updateFilters:vn,queryParameters:ot,loading:en,error:Ht}),[xt,vn,ot,en,Ht]);return n.createElement(kt.Provider,{value:Ln},H)};function bt(){const H=(0,n.useContext)(kt);if(!H)throw new Error("useEntityList must be used within EntityListProvider");return H}const mn=(0,Ue.uW)("catalog:entity-route-ref",()=>(0,i.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function cn(H){var ae,Te;return{kind:H.kind.toLocaleLowerCase("en-US"),namespace:(Te=(ae=H.metadata.namespace)==null?void 0:ae.toLocaleLowerCase("en-US"))!=null?Te:Fe.zG,name:H.metadata.name}}function wn(H,ae){const Te=ae==null?void 0:ae.defaultKind;let Se,Ge,Ct;return"metadata"in H?(Se=H.kind,Ge=H.metadata.namespace,Ct=H.metadata.name):(Se=H.kind,Ge=H.namespace,Ct=H.name),Ge===Fe.zG&&(Ge=void 0),Se=Se.toLocaleLowerCase("en-US"),Se=Te&&Te.toLocaleLowerCase("en-US")===Se?void 0:Se,`${Se?`${Se}:`:""}${Ge?`${Ge}/`:""}${Ct}`}const Ce=(0,n.forwardRef)((H,ae)=>{var Te;const{entityRef:Se,defaultKind:Ge,title:Ct,children:ot,...xt}=H,tn=(0,i.tg)(mn);let en,Ht,Jt;if(typeof Se=="string"){const dn=(0,Fe.of)(Se);en=dn.kind,Ht=dn.namespace,Jt=dn.name}else"metadata"in Se?(en=Se.kind,Ht=Se.metadata.namespace,Jt=Se.metadata.name):(en=Se.kind,Ht=Se.namespace,Jt=Se.name);en=en.toLocaleLowerCase("en-US"),Ht=(Te=Ht==null?void 0:Ht.toLocaleLowerCase("en-US"))!=null?Te:Fe.zG;const vn={kind:en,namespace:Ht,name:Jt},Ln=wn({kind:en,namespace:Ht,name:Jt},{defaultKind:Ge}),bn=n.createElement(_t.rU,{...xt,ref:ae,to:tn(vn)},ot,!ot&&(Ct!=null?Ct:Ln));return Ct?n.createElement(D.ZP,{title:Ln},bn):bn}),$e=({entityRefs:H,defaultKind:ae,...Te})=>n.createElement(n.Fragment,null,H.map((Se,Ge)=>n.createElement(n.Fragment,{key:Ge},Ge>0&&", ",n.createElement(Ce,{...Te,entityRef:Se,defaultKind:ae}))));class Je{constructor(ae){this.value=ae}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class He{constructor(ae){this.value=ae}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class et{constructor(ae){this.values=ae}filterEntity(ae){return this.values.every(Te=>{var Se;return((Se=ae.metadata.tags)!=null?Se:[]).includes(Te)})}toQueryValue(){return this.values}}class Q{constructor(ae){this.value=ae}filterEntity(ae){var Te;const Se=this.value.toLocaleUpperCase("en-US");return ae.metadata.name.toLocaleUpperCase("en-US").includes(Se)||`${ae.metadata.title}`.toLocaleUpperCase("en-US").includes(Se)||((Te=ae.metadata.tags)==null?void 0:Te.join("").toLocaleUpperCase("en-US").indexOf(Se))!==-1}}class ne{constructor(ae){this.values=ae}filterEntity(ae){return this.values.some(Te=>_e(ae,Fe.S4).some(Se=>wn(Se,{defaultKind:"group"})===Te))}toQueryValue(){return this.values}}class ce{constructor(ae){this.values=ae}filterEntity(ae){return this.values.some(Te=>{var Se;return((Se=ae.spec)==null?void 0:Se.lifecycle)===Te})}toQueryValue(){return this.values}}class me{constructor(ae,Te,Se){this.value=ae,this.isOwnedEntity=Te,this.isStarredEntity=Se}filterEntity(ae){switch(this.value){case"owned":return this.isOwnedEntity(ae);case"starred":return this.isStarredEntity(ae);default:return!0}}toQueryValue(){return this.value}}function tt(){var H;const ae=(0,i.h_)(Bt),{filters:{kind:Te,type:Se},queryParameters:Ge,updateFilters:Ct}=bt(),ot=(0,n.useMemo)(()=>[Ge.type].flat().filter(Boolean),[Ge]),[xt,tn]=(0,n.useState)(ot.length?ot:(H=Se==null?void 0:Se.getTypes())!=null?H:[]);(0,n.useEffect)(()=>{ot.length&&tn(ot)},[ot]);const[en,Ht]=(0,n.useState)([]),Jt=(0,n.useMemo)(()=>Te==null?void 0:Te.value,[Te]),{error:vn,loading:Ln,value:bn}=(0,be.default)(async()=>Jt?await ae.getEntityFacets({filter:{kind:Jt},facets:["spec.type"]}).then(Un=>Un.facets["spec.type"]||[]):[],[Jt,ae]),dn=(0,n.useRef)(bn);return(0,n.useEffect)(()=>{const Tn=dn.current;if(dn.current=bn,Ln||!Jt||Tn===bn||!bn)return;const Un=mt()(bn,ua=>-ua.count).map(ua=>ua.value);Ht(Un);const ba=xt.filter(ua=>Un.includes(ua));vt()(xt,ba)||tn(ba)},[Ln,Jt,xt,tn,bn]),(0,n.useEffect)(()=>{Ct({type:xt.length?new He(xt):void 0})},[xt,Ct]),{loading:Ln,error:vn,availableTypes:en,selectedTypes:xt,setSelectedTypes:tn}}const ht=20;function st(H,ae){var Te,Se;const Ge=(Te=ae==null?void 0:ae.type)==null?void 0:Te.toLocaleLowerCase("en-US"),Ct=(Se=ae==null?void 0:ae.kind)==null?void 0:Se.toLocaleLowerCase("en-US"),ot=(0,i.h_)(Bt),{loading:xt,value:tn,error:en}=(0,be.default)(async()=>{var Ht;const Jt=(Ht=H.relations)==null?void 0:Ht.map(dn=>({type:dn.type,target:(0,Fe.of)(dn.targetRef)})).filter(dn=>(!Ge||dn.type.toLocaleLowerCase("en-US")===Ge)&&(!Ct||dn.target.kind===Ct));if(!Jt)return[];const vn=Object.values((0,xe.groupBy)(Jt,({target:dn})=>`${dn.kind}:${dn.namespace}`.toLocaleLowerCase("en-US"))),Ln=[];for(const dn of vn)Ln.push({kind:dn[0].target.kind,namespace:dn[0].target.namespace,nameBatches:(0,xe.chunk)(dn.map(Tn=>Tn.target.name),ht)});return(await Promise.all(Ln.flatMap(dn=>dn.nameBatches.map(Tn=>ot.getEntities({filter:{kind:dn.kind,"metadata.namespace":dn.namespace,"metadata.name":Tn}}))))).flatMap(dn=>dn.items)},[H,Ge,Ct]);return{entities:tn,loading:xt,error:en}}function Dt(H){return typeof H=="string"?H:(0,Fe.eE)(H)}function qt(){const H=(0,i.h_)(rn),ae=(0,Ie.Z)(H.starredEntitie$(),new Set),Te=(0,n.useCallback)(Ge=>ae.has(Dt(Ge)),[ae]),Se=(0,n.useCallback)(Ge=>H.toggleStarred(Dt(Ge)).then(),[H]);return{starredEntities:ae,toggleStarredEntity:Se,isStarredEntity:Te}}function un(H){return typeof H=="string"?H:(0,Fe.eE)(H)}function Ut(H){const ae=(0,i.h_)(rn),[Te,Se]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{const Ct=ae.starredEntitie$().subscribe({next(ot){Se(ot.has(un(H)))}});return()=>{Ct.unsubscribe()}},[H,ae]),{toggleStarredEntity:(0,n.useCallback)(()=>ae.toggleStarred(un(H)).then(),[H,ae]),isStarredEntity:Te}}function Lt(){const H=(0,i.h_)(i.$4),{loading:ae,value:Te}=(0,be.default)(async()=>{const{ownershipEntityRefs:Ge}=await H.getBackstageIdentity();return Ge},[]),Se=(0,n.useMemo)(()=>{const Ge=new Set(Te!=null?Te:[]);return Ct=>{const ot=_e(Ct,Fe.S4).map(Fe.eE);for(const xt of ot)if(Ge.has(xt))return!0;return!1}},[Te]);return(0,n.useMemo)(()=>({loading:ae,isOwnedEntity:Se}),[ae,Se])}function Vt(H){const{entity:ae,loading:Te,error:Se}=x(),{allowed:Ge,loading:Ct,error:ot}=(0,ue.gI)(H,ae?(0,Fe.eE)(ae):void 0);return Te||Ct?{loading:!0,allowed:!1}:Se?{loading:!1,allowed:!1,error:Se}:{loading:!1,allowed:Ge,error:ot}}const on=H=>{var ae;const{initialFilter:Te,hidden:Se}=H,{updateFilters:Ge,queryParameters:Ct}=bt(),[ot]=(0,n.useState)((ae=[Ct.kind].flat()[0])!=null?ae:Te);return(0,n.useEffect)(()=>{Ge({kind:ot?new Je(ot):void 0})},[ot,Ge]),Se?null:n.createElement(z.Z,{severity:"warning"},"Kind filter not yet available")},sn=(0,g.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),X=n.createElement(rt.Z,{fontSize:"small"}),Ne=n.createElement(Ze.Z,{fontSize:"small"}),it=()=>{var H,ae;const Te=sn(),{updateFilters:Se,backendEntities:Ge,filters:Ct,queryParameters:ot}=bt(),xt=(0,n.useMemo)(()=>[ot.lifecycles].flat().filter(Boolean),[ot]),[tn,en]=(0,n.useState)(xt.length?xt:(ae=(H=Ct.lifecycles)==null?void 0:H.values)!=null?ae:[]);(0,n.useEffect)(()=>{xt.length&&en(xt)},[xt]),(0,n.useEffect)(()=>{Se({lifecycles:tn.length?new ce(tn):void 0})},[tn,Se]);const Ht=(0,n.useMemo)(()=>[...new Set(Ge.map(Jt=>{var vn;return(vn=Jt.spec)==null?void 0:vn.lifecycle}).filter(Boolean))].sort(),[Ge]);return Ht.length?n.createElement(y.Z,{pb:1,pt:1},n.createElement(O.Z,{variant:"button"},"Lifecycle"),n.createElement(ge.ZP,{"aria-label":"Lifecycle",multiple:!0,options:Ht,value:tn,onChange:(Jt,vn)=>en(vn),renderOption:(Jt,{selected:vn})=>n.createElement(T.Z,{control:n.createElement(f.Z,{icon:X,checkedIcon:Ne,checked:vn}),label:Jt}),size:"small",popupIcon:n.createElement(le.Z,{"data-testid":"lifecycle-picker-expand"}),renderInput:Jt=>n.createElement(U.Z,{...Jt,className:Te.input,variant:"outlined"})})):null},St=(0,g.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),at=n.createElement(rt.Z,{fontSize:"small"}),Ot=n.createElement(Ze.Z,{fontSize:"small"}),wt=()=>{var H,ae;const Te=St(),{updateFilters:Se,backendEntities:Ge,filters:Ct,queryParameters:ot}=bt(),xt=(0,n.useMemo)(()=>[ot.owners].flat().filter(Boolean),[ot]),[tn,en]=(0,n.useState)(xt.length?xt:(ae=(H=Ct.owners)==null?void 0:H.values)!=null?ae:[]);(0,n.useEffect)(()=>{xt.length&&en(xt)},[xt]),(0,n.useEffect)(()=>{Se({owners:tn.length?new ne(tn):void 0})},[tn,Se]);const Ht=(0,n.useMemo)(()=>[...new Set(Ge.flatMap(Jt=>_e(Jt,Fe.S4).map(vn=>wn(vn,{defaultKind:"group"}))).filter(Boolean))].sort(),[Ge]);return Ht.length?n.createElement(y.Z,{pb:1,pt:1},n.createElement(O.Z,{variant:"button"},"Owner"),n.createElement(ge.ZP,{multiple:!0,"aria-label":"Owner",options:Ht,value:tn,onChange:(Jt,vn)=>en(vn),renderOption:(Jt,{selected:vn})=>n.createElement(T.Z,{control:n.createElement(f.Z,{icon:at,checkedIcon:Ot,checked:vn}),label:Jt}),size:"small",popupIcon:n.createElement(le.Z,{"data-testid":"owner-picker-expand"}),renderInput:Jt=>n.createElement(U.Z,{...Jt,className:Te.input,variant:"outlined"})})):null},hn=(0,g.Z)(H=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),pn=()=>{var H,ae;const Te=hn(),{filters:Se,updateFilters:Ge}=bt(),[Ct,ot]=(0,n.useState)((ae=(H=Se.text)==null?void 0:H.value)!=null?ae:"");return(0,Pt.Z)(()=>{Ge({text:Ct.length?new Q(Ct):void 0})},250,[Ct,Ge]),n.createElement(p.Z,{className:Te.searchToolbar},n.createElement(d.Z,null,n.createElement(A.Z,{id:"input-with-icon-adornment",className:Te.input,placeholder:"Search",autoComplete:"off",onChange:xt=>ot(xt.target.value),value:Ct,startAdornment:n.createElement(N.Z,{position:"start"},n.createElement(ve.Z,null)),endAdornment:n.createElement(N.Z,{position:"end"},n.createElement(c.Z,{"aria-label":"clear search",onClick:()=>ot(""),edge:"end",disabled:Ct.length===0},n.createElement(ie.Z,null)))})))},Xt=Object.freeze({createEntityRefColumn(H){const{defaultKind:ae}=H;function Te(Se){var Ge;return((Ge=Se.metadata)==null?void 0:Ge.title)||wn(Se,{defaultKind:ae})}return{title:"Name",highlight:!0,customFilterAndSearch(Se,Ge){return Te(Ge).includes(Se)},customSort(Se,Ge){return Te(Se).localeCompare(Te(Ge))},render:Se=>{var Ge;return n.createElement(Ce,{entityRef:Se,defaultKind:ae,title:(Ge=Se.metadata)==null?void 0:Ge.title})}}},createEntityRelationColumn({title:H,relation:ae,defaultKind:Te,filter:Se}){function Ge(ot){return _e(ot,ae,Se)}function Ct(ot){return Ge(ot).map(xt=>wn(xt,{defaultKind:Te})).join(", ")}return{title:H,customFilterAndSearch(ot,xt){return Ct(xt).includes(ot)},customSort(ot,xt){return Ct(ot).localeCompare(Ct(xt))},render:ot=>n.createElement($e,{entityRefs:Ge(ot),defaultKind:Te})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:Fe.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:Fe.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:Fe.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:H=>n.createElement(_t.Or,{text:H.metadata.description,placement:"bottom-start",line:2}),width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),En=[Xt.createEntityRefColumn({defaultKind:"system"}),Xt.createDomainColumn(),Xt.createOwnerColumn(),Xt.createMetadataDescriptionColumn()],J=[Xt.createEntityRefColumn({defaultKind:"component"}),Xt.createSystemColumn(),Xt.createOwnerColumn(),Xt.createSpecTypeColumn(),Xt.createSpecLifecycleColumn(),Xt.createMetadataDescriptionColumn()],o=(0,g.Z)(H=>({empty:{padding:H.spacing(2),display:"flex",justifyContent:"center"}})),m=H=>{const{entities:ae,title:Te,emptyContent:Se,variant:Ge="gridItem",columns:Ct}=H,ot=o(),xt={minWidth:"0",width:"100%"};return Ge==="gridItem"&&(xt.height="calc(100% - 10px)"),n.createElement(_t.iA,{columns:Ct,title:Te,style:xt,emptyContent:Se&&n.createElement("div",{className:ot.empty},Se),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense"},data:ae})};m.columns=Xt,m.systemEntityColumns=En,m.componentEntityColumns=J;const I=(0,g.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),k=n.createElement(rt.Z,{fontSize:"small"}),G=n.createElement(Ze.Z,{fontSize:"small"}),Me=()=>{var H,ae;const Te=I(),{updateFilters:Se,backendEntities:Ge,filters:Ct,queryParameters:ot}=bt(),xt=(0,n.useMemo)(()=>[ot.tags].flat().filter(Boolean),[ot]),[tn,en]=(0,n.useState)(xt.length?xt:(ae=(H=Ct.tags)==null?void 0:H.values)!=null?ae:[]);(0,n.useEffect)(()=>{xt.length&&en(xt)},[xt]),(0,n.useEffect)(()=>{Se({tags:tn.length?new et(tn):void 0})},[tn,Se]);const Ht=(0,n.useMemo)(()=>[...new Set(Ge.flatMap(Jt=>Jt.metadata.tags).filter(Boolean))].sort(),[Ge]);return Ht.length?n.createElement(y.Z,{pb:1,pt:1},n.createElement(O.Z,{variant:"button"},"Tags"),n.createElement(ge.ZP,{multiple:!0,"aria-label":"Tags",options:Ht,value:tn,onChange:(Jt,vn)=>en(vn),renderOption:(Jt,{selected:vn})=>n.createElement(T.Z,{control:n.createElement(f.Z,{icon:k,checkedIcon:G,checked:vn}),label:Jt}),size:"small",popupIcon:n.createElement(le.Z,{"data-testid":"tag-picker-expand"}),renderInput:Jt=>n.createElement(U.Z,{...Jt,className:Te.input,variant:"outlined"})})):null},Ye=H=>{var ae;const{hidden:Te,initialFilter:Se}=H,Ge=(0,i.h_)(i.$v),{error:Ct,availableTypes:ot,selectedTypes:xt,setSelectedTypes:tn}=tt();if((0,n.useEffect)(()=>{Ct&&Ge.post({message:"Failed to load entity types",severity:"error"}),Se&&tn([Se])},[Ct,Ge,Se,tn]),ot.length===0||Ct)return null;const en=[{value:"all",label:"All"},...ot.map(Ht=>({value:Ht,label:Ve()(Ht)}))];return Te?null:n.createElement(y.Z,{pb:1,pt:1},n.createElement(_t.Ph,{label:"Type",items:en,selected:(ae=en.length>1?xt[0]:void 0)!=null?ae:"all",onChange:Ht=>tn(Ht==="all"?[]:[String(Ht)])}))},oe=(0,Z.Z)({root:{color:"#f3ba37"}})(Et.Z),b=H=>{const{toggleStarredEntity:ae,isStarredEntity:Te}=Ut(H.entity);return n.createElement(c.Z,{color:"inherit",...H,onClick:()=>ae()},n.createElement(D.ZP,{title:Te?"Remove from favorites":"Add to favorites"},Te?n.createElement(oe,null):n.createElement(ft.Z,null)))},M=ln.Z;function B(H,ae){if(H)return H.toLocaleLowerCase("en-US");if(ae)try{return(0,Fe.of)(ae).kind.toLocaleLowerCase("en-US")}catch{return}}function re(H,ae){const Te=(0,i.qD)(),Se=B(H,ae);return Se&&Te.getSystemIcon(`kind:${Se}`)||M}function ke(H){const{kind:ae,entityRef:Te,...Se}=H,Ge=re(ae,Te);return n.createElement(Ge,{...Se})}const lt=(0,g.Z)(H=>({node:{fill:H.palette.grey[300],stroke:H.palette.grey[300],"&.primary":{fill:H.palette.primary.light,stroke:H.palette.primary.light},"&.secondary":{fill:H.palette.secondary.light,stroke:H.palette.secondary.light}},text:{fill:H.palette.getContrastText(H.palette.grey[300]),"&.primary":{fill:H.palette.primary.contrastText},"&.secondary":{fill:H.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function qe(H){const ae=(0,i.h_)(Bt),Te=(0,Fe.eE)(H),{loading:Se,error:Ge,value:Ct}=(0,be.default)(async()=>{const ot=await ae.getEntityAncestors({entityRef:Te}),xt=new Array,tn=new Array;for(const en of ot.items){const Ht=(0,Fe.eE)(en.entity),Jt=Ht===ot.rootEntityRef;xt.push({id:Ht,root:Jt,...en.entity});for(const vn of en.parentEntityRefs)tn.push({from:Ht,to:vn})}return{nodes:xt,edges:tn}},[Te]);return{loading:Se,error:Ge,nodes:(Ct==null?void 0:Ct.nodes)||[],edges:(Ct==null?void 0:Ct.edges)||[]}}function Rt({node:H}){const ae=lt(),Te=(0,Kt.s0)(),Se=(0,i.tg)(mn),[Ge,Ct]=(0,n.useState)(0),[ot,xt]=(0,n.useState)(0),tn=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{if(tn.current){let{height:Tn,width:Un}=tn.current.getBBox();Tn=Math.round(Tn),Un=Math.round(Un),(Tn!==ot||Un!==Ge)&&(Ct(Un),xt(Tn))}},[Ge,ot]);const en=10,Ht=ot,Jt=Ht+en,vn=Jt+Ge+en*2,Ln=ot+en*2,bn=H.metadata.title||(H.kind&&H.metadata.name&&H.metadata.namespace?wn({kind:H.kind,name:H.metadata.name,namespace:H.metadata.namespace||""}):H.id),dn=()=>{Te(Se({kind:H.kind,namespace:H.metadata.namespace||Fe.zG,name:H.metadata.name}))};return n.createElement("g",{onClick:dn,className:ae.clickable},n.createElement("rect",{className:Yt()(ae.node,H.root?"secondary":"primary"),width:vn,height:Ln,rx:10}),n.createElement(ke,{kind:H.kind,y:en,x:en,width:Ht,height:Ht,className:Yt()(ae.text,H.root?"secondary":"primary")}),n.createElement("text",{ref:tn,className:Yt()(ae.text,H.root?"secondary":"primary"),y:Ln/2,x:Jt+(Ge+en*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},bn))}function zt(H){const{loading:ae,error:Te,nodes:Se,edges:Ge}=qe(H.entity);return ae?n.createElement(_t.Ex,null):Te?n.createElement(_t.Gk,{error:Te}):n.createElement(n.Fragment,null,n.createElement(F.Z,{variant:"h2"},"Ancestry"),n.createElement(F.Z,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",n.createElement(_t.rU,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),n.createElement(y.Z,{mt:4},n.createElement(_t.mn,{nodes:Se,edges:Ge,renderNode:Rt,direction:_t.NX.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const an=(0,g.Z)(H=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:H.spacing(2)},helpIcon:{marginLeft:H.spacing(1),color:H.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Qt(H){const ae=an();return n.createElement(te.Z,{...H,primaryTypographyProps:{className:ae.monospace},secondaryTypographyProps:{className:ae.monospace}})}function Cn(H){const ae=an();return n.createElement(we.Z,{className:ae.monospace},H.children)}function Zt(H){return n.createElement(y.Z,{mt:2},n.createElement(ct.Z,{variant:"outlined"},n.createElement(nt.Z,null,n.createElement(O.Z,{variant:"h6",gutterBottom:!0},H.title,H.helpLink&&n.createElement(Fn,{to:H.helpLink})),H.children)))}function Rn(H){const[ae,Te]=H.entry;return n.createElement(se.Z,null,H.indent&&n.createElement(ye.Z,null),n.createElement(Qt,{primary:ae,secondary:Te.match(/^url:https?:\/\//)?n.createElement(n.Fragment,null,Te.substring(0,4),n.createElement(_t.rU,{to:Te.substring(4)},Te.substring(4))):Te}))}function Fn(H){const ae=an();return n.createElement(_t.rU,{to:H.to,className:ae.helpIcon},n.createElement(gn.Z,{fontSize:"inherit"}))}const zn=(0,g.Z)({root:{display:"flex",flexDirection:"column"}});function Zn(H){var ae,Te;const Se=(0,i.h_)(Bt),Ge=(0,Fe.eE)(H),Ct=(ae=H.metadata.annotations)==null?void 0:ae[Fe.P1],ot=(Te=H.metadata.annotations)==null?void 0:Te[Fe.q1],{loading:xt,error:tn,value:en}=(0,be.default)(async()=>!Ct&&!ot?[]:(await Se.getEntities({filter:[...Ct?[{[`metadata.annotations.${Fe.P1}`]:Ct}]:[],...ot?[{[`metadata.annotations.${Fe.q1}`]:ot}]:[]]})).items,[Ct,ot]);return{loading:xt,error:tn,location:Ct,originLocation:ot,colocatedEntities:en==null?void 0:en.filter(Ht=>(0,Fe.eE)(Ht)!==Ge)}}function oa(H){return n.createElement(Le.Z,{dense:!0},H.header&&n.createElement(Rn,{key:"header",entry:H.header}),H.entities.map(ae=>n.createElement(se.Z,{key:(0,Fe.eE)(ae)},n.createElement(ye.Z,null,n.createElement(ke,{kind:ae.kind})),n.createElement(Qt,{primary:n.createElement(Ce,{entityRef:ae})}))))}function sa(H){const{entity:ae}=H,{loading:Te,error:Se,location:Ge,originLocation:Ct,colocatedEntities:ot}=Zn(ae);if(Te)return n.createElement(_t.Ex,null);if(Se)return n.createElement(_t.Gk,{error:Se});if(!Ge&&!Ct)return n.createElement(z.Z,{severity:"warning"},"Entity had no location information.");if(!(ot!=null&&ot.length))return n.createElement(z.Z,{severity:"info"},"There were no other entities on this location.");if(Ge===Ct)return n.createElement(oa,{entities:ot});const xt=ot.filter(en=>{var Ht;return((Ht=en.metadata.annotations)==null?void 0:Ht[Fe.P1])===Ge}),tn=ot.filter(en=>{var Ht;return((Ht=en.metadata.annotations)==null?void 0:Ht[Fe.q1])===Ct});return n.createElement(n.Fragment,null,xt.length>0&&n.createElement(oa,{entities:xt,header:["At the same location",Ge]}),tn.length>0&&n.createElement(oa,{entities:tn,header:["At the same origin",Ct]}))}function ya(H){const ae=zn();return n.createElement(n.Fragment,null,n.createElement(F.Z,{variant:"h2"},"Colocated"),n.createElement(F.Z,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),n.createElement("div",{className:ae.root},n.createElement(sa,{entity:H.entity})))}function va(H){return Object.fromEntries([...Object.entries(H)].sort((ae,Te)=>ae[0]<Te[0]?-1:1))}function Bn(H){return n.createElement(n.Fragment,null,n.createElement(F.Z,{variant:"h2"},"Entity as JSON"),n.createElement(F.Z,null,"This is the raw entity data as received from the catalog, on JSON form."),n.createElement(F.Z,null,n.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},n.createElement(_t.Oi,{text:JSON.stringify(va(H.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const Mn=(0,g.Z)({root:{display:"flex",flexDirection:"column"}});function Nn(H){var ae,Te;const Se=Mn(),{apiVersion:Ge,kind:Ct,metadata:ot,spec:xt,relations:tn=[],status:en={}}=H.entity,Ht=yn()(mt()(tn,Jt=>Jt.targetRef),"type");return n.createElement(n.Fragment,null,n.createElement(F.Z,{variant:"h2"},"Overview"),n.createElement("div",{className:Se.root},n.createElement(Zt,{title:"Identity"},n.createElement(Le.Z,{dense:!0},n.createElement(se.Z,null,n.createElement(Qt,{primary:"apiVersion",secondary:Ge})),n.createElement(se.Z,null,n.createElement(Qt,{primary:"kind",secondary:Ct})),(xt==null?void 0:xt.type)&&n.createElement(se.Z,null,n.createElement(Qt,{primary:"spec.type",secondary:xt.type})),ot.uid&&n.createElement(se.Z,null,n.createElement(Qt,{primary:"uid",secondary:ot.uid})),ot.etag&&n.createElement(se.Z,null,n.createElement(Qt,{primary:"etag",secondary:ot.etag})))),n.createElement(Zt,{title:"Metadata"},!!Object.keys(ot.annotations||{}).length&&n.createElement(Le.Z,{dense:!0,subheader:n.createElement(Cn,null,"Annotations",n.createElement(Fn,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(ot.annotations).map(Jt=>n.createElement(Rn,{key:Jt[0],indent:!0,entry:Jt}))),!!Object.keys(ot.labels||{}).length&&n.createElement(Le.Z,{dense:!0,subheader:n.createElement(Cn,null,"Labels",n.createElement(Fn,{to:"https://backstage.io/docs/features/software-catalog/well-known-labels"}))},Object.entries(ot.labels).map(Jt=>n.createElement(Rn,{key:Jt[0],indent:!0,entry:Jt}))),!!((ae=ot.tags)!=null&&ae.length)&&n.createElement(Le.Z,{dense:!0,subheader:n.createElement(Cn,null,"Tags")},ot.tags.map((Jt,vn)=>n.createElement(se.Z,{key:`${Jt}-${vn}`},n.createElement(ye.Z,null),n.createElement(Qt,{primary:Jt}))))),!!tn.length&&n.createElement(Zt,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(Ht).map(([Jt,vn],Ln)=>n.createElement("div",{key:Ln},n.createElement(Le.Z,{dense:!0,subheader:n.createElement(Cn,null,Jt)},vn.map(bn=>n.createElement(se.Z,{key:bn.targetRef},n.createElement(ye.Z,null,n.createElement(ke,{entityRef:bn.targetRef})),n.createElement(Qt,{primary:n.createElement(Ce,{entityRef:bn.targetRef})}))))))),!!((Te=en.items)!=null&&Te.length)&&n.createElement(Zt,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},en.items.map((Jt,vn)=>n.createElement("div",{key:vn},n.createElement(O.Z,null,Jt.level,": ",Jt.type),n.createElement(y.Z,{ml:2},Jt.message))))))}function Xn(H){return n.createElement(n.Fragment,null,n.createElement(F.Z,{variant:"h2"},"Entity as YAML"),n.createElement(F.Z,null,"This is the raw entity data as received from the catalog, on YAML form."),n.createElement(F.Z,null,n.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},n.createElement(_t.Oi,{text:Xe().stringify(va(H.entity)),language:"yaml",showCopyCodeButton:!0}))))}const ta=(0,g.Z)(H=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:H.palette.background.paper},tabs:{borderRight:`1px solid ${H.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function ia(H){const{children:ae,value:Te,index:Se,...Ge}=H,Ct=ta();return n.createElement("div",{role:"tabpanel",hidden:Te!==Se,id:`vertical-tabpanel-${Se}`,"aria-labelledby":`vertical-tab-${Se}`,className:Ct.tabContents,...Ge},Te===Se&&n.createElement(y.Z,{pl:3,pr:3},ae))}function ca(H){return{id:`vertical-tab-${H}`,"aria-controls":`vertical-tabpanel-${H}`}}function na(H){const ae=ta(),[Te,Se]=n.useState(0);return(0,n.useEffect)(()=>{Se(0)},[H.open]),H.entity?n.createElement(de.Z,{fullWidth:!0,maxWidth:"xl",open:H.open,onClose:H.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:ae.fullHeightDialog}},n.createElement(V.Z,{id:"entity-inspector-dialog-title"},"Entity Inspector"),n.createElement(he.Z,{dividers:!0},n.createElement("div",{className:ae.root},n.createElement(C.Z,{orientation:"vertical",variant:"scrollable",value:Te,onChange:(Ge,Ct)=>Se(Ct),"aria-label":"Inspector options",className:ae.tabs},n.createElement(Ke.Z,{label:"Overview",...ca(0)}),n.createElement(Ke.Z,{label:"Ancestry",...ca(1)}),n.createElement(Ke.Z,{label:"Colocated",...ca(2)}),n.createElement(Ke.Z,{label:"Raw JSON",...ca(3)}),n.createElement(Ke.Z,{label:"Raw YAML",...ca(4)})),n.createElement(ia,{value:Te,index:0},n.createElement(Nn,{entity:H.entity})),n.createElement(ia,{value:Te,index:1},n.createElement(zt,{entity:H.entity})),n.createElement(ia,{value:Te,index:2},n.createElement(ya,{entity:H.entity})),n.createElement(ia,{value:Te,index:3},n.createElement(Bn,{entity:H.entity})),n.createElement(ia,{value:Te,index:4},n.createElement(Xn,{entity:H.entity})))),n.createElement(j.Z,null,n.createElement(w.Z,{onClick:H.onClose,color:"primary"},"Close"))):null}function ja(H){var ae;const Te=(0,i.h_)(Bt),Se=(ae=H.metadata.annotations)==null?void 0:ae[Fe.q1],Ge=H.metadata.uid,Ct=Se==="bootstrap:bootstrap",ot=(0,be.default)(async()=>{const bn=Te.getLocationByRef(Se);let dn;if(!Se)dn=Promise.resolve([]);else{const Tn=`metadata.annotations.${Fe.q1}`;dn=Te.getEntities({filter:{[Tn]:Se},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(Un=>Un.items)}return Promise.all([bn,dn]).then(([Tn,Un])=>({location:Tn,colocatedEntities:Un}))},[Te,H]),xt=(0,n.useCallback)(async function(){const{location:dn,colocatedEntities:Tn}=ot.value;await Te.removeLocationById(dn.id),await Promise.allSettled(Tn.map(Un=>Te.removeEntityByUid(Un.metadata.uid)))},[Te,ot]),tn=(0,n.useCallback)(async function(){await Te.removeEntityByUid(Ge)},[Te,Ge]);if(Ct)return{type:"bootstrap",location:Se,deleteEntity:tn};const{loading:en,error:Ht,value:Jt}=ot;if(en)return{type:"loading"};if(Ht)return{type:"error",error:Ht};const{location:vn,colocatedEntities:Ln}=Jt;return vn?{type:"unregister",location:Se,colocatedEntities:Ln.map(Fe.iB),unregisterLocation:xt,deleteEntity:tn}:{type:"only-delete",deleteEntity:tn}}const Na=(0,g.Z)({advancedButton:{fontSize:"0.7em"}}),Wa=({entity:H,onConfirm:ae})=>{var Te;const Se=(0,i.h_)(i.$v),Ge=(0,i.h_)(i.Ds),Ct=Na(),ot=ja(H),[xt,tn]=(0,n.useState)(!1),[en,Ht]=(0,n.useState)(!1),Jt=(Te=Ge.getOptionalString("app.title"))!=null?Te:"Backstage",vn=(0,n.useCallback)(async function(){if("unregisterLocation"in ot){Ht(!0);try{await ot.unregisterLocation(),ae()}catch(dn){(0,dt.BD)(dn),Se.post({message:dn.message})}finally{Ht(!1)}}},[Se,ae,ot]),Ln=(0,n.useCallback)(async function(){if("deleteEntity"in ot){Ht(!0);try{await ot.deleteEntity(),ae()}catch(dn){(0,dt.BD)(dn),Se.post({message:dn.message})}finally{Ht(!1)}}},[Se,ae,ot]);return ot.type==="loading"?n.createElement(_t.Ex,null):ot.type==="error"?n.createElement(_t.Gk,{error:ot.error}):ot.type==="bootstrap"?n.createElement(n.Fragment,null,n.createElement(z.Z,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',ot.location,'"). If you believe this is in error, please contact the ',Jt," ","integrator."),n.createElement(y.Z,{marginTop:2},!xt&&n.createElement(w.Z,{variant:"text",size:"small",color:"primary",className:Ct.advancedButton,onClick:()=>tn(!0)},"Advanced Options"),xt&&n.createElement(n.Fragment,null,n.createElement(F.Z,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),n.createElement(w.Z,{variant:"contained",color:"secondary",disabled:en,onClick:Ln},"Delete Entity")))):ot.type==="only-delete"?n.createElement(n.Fragment,null,n.createElement(F.Z,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),n.createElement(w.Z,{variant:"contained",color:"secondary",disabled:en,onClick:Ln},"Delete Entity")):ot.type==="unregister"?n.createElement(n.Fragment,null,n.createElement(F.Z,null,"This action will unregister the following entities:"),n.createElement(F.Z,{component:"ul"},ot.colocatedEntities.map(bn=>n.createElement("li",{key:`${bn.kind}:${bn.namespace}/${bn.name}`},n.createElement(Ce,{entityRef:bn})))),n.createElement(F.Z,null,"Located at the following location:"),n.createElement(F.Z,{component:"ul"},n.createElement("li",null,ot.location)),n.createElement(F.Z,null,"To undo, just re-register the entity in ",Jt,"."),n.createElement(y.Z,{marginTop:2},n.createElement(w.Z,{variant:"contained",color:"secondary",disabled:en,onClick:vn},"Unregister Location"),!xt&&n.createElement(y.Z,{component:"span",marginLeft:2},n.createElement(w.Z,{variant:"text",size:"small",color:"primary",className:Ct.advancedButton,onClick:()=>tn(!0)},"Advanced Options"))),xt&&n.createElement(n.Fragment,null,n.createElement(y.Z,{paddingTop:4,paddingBottom:4},n.createElement(It.Z,null)),n.createElement(F.Z,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),n.createElement(w.Z,{variant:"contained",color:"secondary",disabled:en,onClick:Ln},"Delete Entity"))):n.createElement(z.Z,{severity:"error"},"Internal error: Unknown state")},_a=H=>{const{open:ae,onConfirm:Te,onClose:Se,entity:Ge}=H;return n.createElement(de.Z,{open:ae,onClose:Se},n.createElement(V.Z,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),n.createElement(he.Z,null,n.createElement(Wa,{entity:Ge,onConfirm:Te})),n.createElement(j.Z,null,n.createElement(w.Z,{onClick:Se,color:"primary"},"Cancel")))},Sa=(0,g.Z)(H=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:H.spacing(1,0,1,0)},title:{margin:H.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:H.palette.text.primary},menuItem:{minHeight:H.spacing(6)},groupWrapper:{margin:H.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function rr(H){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:Gt.Z},{id:"starred",label:"Starred",icon:Et.Z}]},{name:H!=null?H:"Company",items:[{id:"all",label:"All"}]}]}const or=H=>{var ae;const{initialFilter:Te,availableFilters:Se}=H,Ge=Sa(),ot=(ae=(0,i.h_)(i.Ds).getOptionalString("organization.name"))!=null?ae:"Company",{filters:xt,updateFilters:tn,backendEntities:en,queryParameters:Ht,loading:Jt}=bt(),vn=["starred","all"],Ln=rr(ot).map(aa=>({...aa,items:aa.items.filter(({id:qn})=>["group","user"].some(La=>La===Ht.kind)?vn.includes(qn):!Se||Se.includes(qn))})).filter(({items:aa})=>!!aa.length),{isStarredEntity:bn}=qt(),{isOwnedEntity:dn,loading:Tn}=Lt(),Un=Jt||Tn,ba=(0,n.useMemo)(()=>new me("owned",dn,bn),[dn,bn]),ua=(0,n.useMemo)(()=>new me("starred",dn,bn),[dn,bn]),Qn=(0,n.useMemo)(()=>[Ht.user].flat()[0],[Ht]),[la,da]=(0,n.useState)(Qn!=null?Qn:Te),Da=(0,n.useMemo)(()=>en.filter(Ee((0,xe.compact)(Object.values({...xt,user:void 0})))),[xt,en]),Ma=(0,n.useMemo)(()=>({all:Da.length,starred:Da.filter(aa=>ua.filterEntity(aa)).length,owned:Da.filter(aa=>ba.filterEntity(aa)).length}),[Da,ua,ba]);return(0,n.useEffect)(()=>{Qn&&da(Qn)},[Qn]),(0,n.useEffect)(()=>{!Un&&!!la&&la!=="all"&&Ma[la]===0&&da("all")},[Un,Ma,la,da]),(0,n.useEffect)(()=>{tn({user:la?new me(la,dn,bn):void 0})},[la,dn,bn,tn]),n.createElement(ct.Z,{className:Ge.root},Ln.map(aa=>n.createElement(n.Fragment,{key:aa.name},n.createElement(O.Z,{variant:"subtitle2",className:Ge.title},aa.name),n.createElement(ct.Z,{className:Ge.groupWrapper},n.createElement(Le.Z,{disablePadding:!0,dense:!0},aa.items.map(qn=>{var La,xa;return n.createElement(Be.Z,{key:qn.id,button:!0,divider:!0,onClick:()=>da(qn.id),selected:qn.id===((La=xt.user)==null?void 0:La.value),className:Ge.menuItem,disabled:Ma[qn.id]===0,"data-testid":`user-picker-${qn.id}`},qn.icon&&n.createElement(ye.Z,{className:Ge.listIcon},n.createElement(qn.icon,{fontSize:"small"})),n.createElement(te.Z,null,n.createElement(O.Z,{variant:"body1"},qn.label)),n.createElement(L.Z,null,(xa=Ma[qn.id])!=null?xa:"-"))}))))))},br=({children:H,value:ae})=>{var Te;const[Se,Ge]=useState((Te=ae==null?void 0:ae.filters)!=null?Te:{}),Ct=useCallback(tn=>{Ge(en=>{const Ht=typeof tn=="function"?tn(en):tn;return{...en,...Ht}})},[]),ot=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),xt=useMemo(()=>{var tn,en,Ht,Jt,vn;return{entities:(tn=ae==null?void 0:ae.entities)!=null?tn:ot.entities,backendEntities:(en=ae==null?void 0:ae.backendEntities)!=null?en:ot.backendEntities,updateFilters:(Ht=ae==null?void 0:ae.updateFilters)!=null?Ht:Ct,filters:Se,loading:(Jt=ae==null?void 0:ae.loading)!=null?Jt:!1,queryParameters:(vn=ae==null?void 0:ae.queryParameters)!=null?vn:ot.queryParameters,error:ae==null?void 0:ae.error}},[ae,ot,Se,Ct]);return React.createElement(kt.Provider,{value:xt},H)}},70220:function(Tt,l,t){t.d(l,{A:function(){return ue},C:function(){return rt},E:function(){return Ft},a:function(){return Ve},b:function(){return _t},c:function(){return Fe},d:function(){return ze},e:function(){return kt},f:function(){return yt},g:function(){return We},i:function(){return $e},j:function(){return He},k:function(){return cn},l:function(){return Ce},m:function(){return wn},n:function(){return mn},o:function(){return bt},p:function(){return ie},q:function(){return yn},r:function(){return dt},s:function(){return Xe},t:function(){return fn},u:function(){return rn},v:function(){return _n},w:function(){return _},y:function(){return S}});var e=t(82394),i=t.n(e),h=t(34520),s=t(76635),n=t.n(s),R=t(49558),P=t(30705),w=t(49462),u=t(73495),y=t(79692),O=t(90436),K=t(60905),D=t(7089),g=t(94339),T=t(32552),f=t(61837),U=t(85256),p=t(24579),d=t(12420),A=t(97580),N=t(73698),c=t(74603),Z=t(12231),F=t(38402),te=t(49378),we=t(95544),ct=t(86136),nt=t(79784),se=t(50758),ye=t(8629),Le=t(79249),de=t(49429),V=t(77277),he=t(52866),C=t(30254),Ke=t(27604),j=t(2784),It=t(64279),Be=t(2997),L=t(28347),Y=t(15459),z=t(11640),ge=t(99688),Ue=t(10289),xe=t(49166),At=t(31654),nn=t(43054),ut=t(26655),Kt=t(32272),$t=t(88285);async function Pt({storageApi:Q}){var ne;const ce=Q.forBucket("settings"),me=Q.forBucket("starredEntities"),tt=ce.snapshot("starredEntities").value;if(!(0,s.isArray)(tt))return;const ht=new Set((ne=me.snapshot("entityRefs").value)!=null?ne:[]);tt.filter(s.isString).map(st=>st.split(":")).filter(st=>st.length===4&&st[0]==="entity").map(([st,Dt,qt,un])=>(0,h.eE)({kind:Dt,namespace:qt,name:un})).forEach(st=>ht.add(st)),await me.set("entityRefs",Array.from(ht)),await ce.remove("starredEntities")}class je{constructor(ne){this.subscribers=new Set,this.observable=new(i())(me=>(me.next(new Set(this.starredEntities)),this.subscribers.add(me),()=>{this.subscribers.delete(me)}));var ce;Pt(ne).then(),this.settingsStore=ne.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((ce=this.settingsStore.snapshot("entityRefs").value)!=null?ce:[]),this.settingsStore.observe$("entityRefs").subscribe({next:me=>{var tt;this.starredEntities=new Set((tt=me.value)!=null?tt:[]),this.notifyChanges()}})}async toggleStarred(ne){this.starredEntities.has(ne)?this.starredEntities.delete(ne):this.starredEntities.add(ne),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const ne of this.subscribers)ne.next(new Set(this.starredEntities))}}const Fe=(0,P.x8)({id:"create-component",optional:!0}),be=(0,P.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),pt=(0,P.NT)({id:"catalog"}),vt=(0,y.Z)(Q=>({value:{fontWeight:"bold",overflow:"hidden",lineHeight:"24px",wordBreak:"break-word"},label:{color:Q.palette.text.secondary,textTransform:"uppercase",fontSize:"10px",fontWeight:"bold",letterSpacing:.5,overflow:"hidden",whiteSpace:"nowrap"}}));function ze(Q){const{label:ne,value:ce,gridSizes:me,children:tt}=Q,ht=vt(),st=(0,P.vJ)(tt,qt=>qt.getElements()),Dt=st.length>0?st:j.createElement(O.Z,{variant:"body2",className:ht.value},ce||"unknown");return j.createElement(K.Z,{item:!0,...me},j.createElement(O.Z,{variant:"subtitle2",className:ht.label},ne),Dt)}const mt=(0,y.Z)({description:{wordBreak:"break-word"}});function _t(Q){var ne,ce,me,tt,ht,st;const{entity:Dt}=Q,qt=mt(),un=Dt.kind.toLocaleLowerCase("en-US")==="system",Ut=Dt.kind.toLocaleLowerCase("en-US")==="resource",Lt=Dt.kind.toLocaleLowerCase("en-US")==="component",Vt=Dt.kind.toLocaleLowerCase("en-US")==="api",on=Dt.kind.toLocaleLowerCase("en-US")==="template",sn=Dt.kind.toLocaleLowerCase("en-US")==="location",X=Dt.kind.toLocaleLowerCase("en-US")==="group",Ne=(0,u.hF)(Dt,h.cz,{kind:"system"}),it=(0,u.hF)(Dt,h.cz,{kind:"component"}),St=(0,u.hF)(Dt,h.cz,{kind:"domain"}),at=(0,u.hF)(Dt,h.S4);return j.createElement(K.Z,{container:!0},j.createElement(ze,{label:"Description",gridSizes:{xs:12}},j.createElement(O.Z,{variant:"body2",paragraph:!0,className:qt.description},((ne=Dt==null?void 0:Dt.metadata)==null?void 0:ne.description)||"No description")),j.createElement(ze,{label:"Owner",value:"No Owner",gridSizes:{xs:12,sm:6,lg:4}},at.length>0&&j.createElement(u.rI,{entityRefs:at,defaultKind:"group"})),(un||St.length>0)&&j.createElement(ze,{label:"Domain",value:"No Domain",gridSizes:{xs:12,sm:6,lg:4}},St.length>0&&j.createElement(u.rI,{entityRefs:St,defaultKind:"domain"})),(Vt||Lt||Ut||Ne.length>0)&&j.createElement(ze,{label:"System",value:"No System",gridSizes:{xs:12,sm:6,lg:4}},Ne.length>0&&j.createElement(u.rI,{entityRefs:Ne,defaultKind:"system"})),Lt&&it.length>0&&j.createElement(ze,{label:"Parent Component",value:"No Parent Component",gridSizes:{xs:12,sm:6,lg:4}},j.createElement(u.rI,{entityRefs:it,defaultKind:"component"})),(Vt||Lt||Ut||on||X||sn||typeof((ce=Dt==null?void 0:Dt.spec)==null?void 0:ce.type)=="string")&&j.createElement(ze,{label:"Type",value:(me=Dt==null?void 0:Dt.spec)==null?void 0:me.type,gridSizes:{xs:12,sm:6,lg:4}}),(Vt||Lt||typeof((tt=Dt==null?void 0:Dt.spec)==null?void 0:tt.lifecycle)=="string")&&j.createElement(ze,{label:"Lifecycle",value:(ht=Dt==null?void 0:Dt.spec)==null?void 0:ht.lifecycle,gridSizes:{xs:12,sm:6,lg:4}}),j.createElement(ze,{label:"Tags",value:"No Tags",gridSizes:{xs:12,sm:6,lg:4}},(((st=Dt==null?void 0:Dt.metadata)==null?void 0:st.tags)||[]).map(Ot=>j.createElement(D.Z,{key:Ot,size:"small",label:Ot}))))}const Ie=(0,y.Z)({gridItemCard:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"},fullHeightCard:{display:"flex",flexDirection:"column",height:"100%"},gridItemCardContent:{flex:1},fullHeightCardContent:{flex:1}});function ue(Q){var ne,ce,me;const{variant:tt}=Q,ht=Ie(),{entity:st}=(0,u.X2)(),Dt=(0,P.h_)(w.q3),qt=(0,P.h_)(u.Ah),un=(0,P.h_)(P.$v),Ut=(0,P.tg)(be),Lt=(0,u.CV)(st,Dt),Vt=(ne=st.metadata.annotations)==null?void 0:ne[h.Tf],on={label:"View Source",disabled:!Lt,icon:j.createElement(w.nW,{type:Lt==null?void 0:Lt.integrationType}),href:Lt==null?void 0:Lt.locationTargetUrl},sn={label:"View TechDocs",disabled:!((ce=st.metadata.annotations)!=null&&ce["backstage.io/techdocs-ref"])||!Ut,icon:j.createElement(C.Z,null),href:Ut&&Ut({namespace:st.metadata.namespace||h.zG,kind:st.kind,name:st.metadata.name})};let X="";tt==="gridItem"?X=ht.gridItemCard:tt==="fullHeight"&&(X=ht.fullHeightCard);let Ne="";tt==="gridItem"?Ne=ht.gridItemCardContent:tt==="fullHeight"&&(Ne=ht.fullHeightCardContent);const it=(me=st.metadata.annotations)==null?void 0:me[h.P1],St=(it==null?void 0:it.startsWith("url:"))||(it==null?void 0:it.startsWith("file:")),at=(0,j.useCallback)(async()=>{await qt.refreshEntity((0,h.eE)(st)),un.post({message:"Refresh scheduled",severity:"info"})},[qt,un,st]);return j.createElement(g.Z,{className:X},j.createElement(T.Z,{title:"About",action:j.createElement(j.Fragment,null,St&&j.createElement(f.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:at},j.createElement(he.Z,null)),j.createElement(f.Z,{component:R.rU,"aria-label":"Edit",disabled:!Vt,title:"Edit Metadata",to:Vt!=null?Vt:"#"},j.createElement(Ke.Z,null))),subheader:j.createElement(R.M6,{links:[on,sn]})}),j.createElement(U.Z,null),j.createElement(p.Z,{className:Ne},j.createElement(_t,{entity:st})))}const Ze=(0,y.Z)(Q=>(0,d.Z)({root:{...Q.typography.h4}}));function rt(Q){var ne;const{initialFilter:ce="component",allowedKinds:me}=Q,tt=Ze(),ht=(0,P.h_)(u.Ah),{value:st}=(0,It.default)(async()=>await ht.getEntityFacets({facets:["kind"]}).then(sn=>{var X;return((X=sn.facets.kind)==null?void 0:X.map(Ne=>Ne.value).sort())||[]})),{updateFilters:Dt,queryParameters:{kind:qt}}=(0,u.wp)(),un=(0,j.useMemo)(()=>{var sn;return(sn=[qt].flat()[0])==null?void 0:sn.toLocaleLowerCase("en-US")},[qt]),[Ut,Lt]=(0,j.useState)(un!=null?un:ce);(0,j.useEffect)(()=>{Dt({kind:Ut?new u.zo(Ut):void 0})},[Ut,Dt]),(0,j.useEffect)(()=>{un&&Lt(un)},[un]);const on=[(0,A.Z)(Ut)].concat((ne=st==null?void 0:st.filter(sn=>me?me.some(X=>X.toLocaleLowerCase("en-US")===sn.toLocaleLowerCase("en-US")):!0))!=null?ne:[]).sort().reduce((sn,X)=>(sn[X.toLocaleLowerCase("en-US")]=X,sn),{});return j.createElement(N.Z,{input:j.createElement(c.Z,{value:Ut}),value:Ut,onChange:sn=>Lt(sn.target.value),classes:tt},Object.keys(on).map(sn=>j.createElement(Z.Z,{value:sn,key:sn},`${on[sn]}s`)))}const le=(0,y.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",wordBreak:"break-all",marginBottom:"1rem"}});function ie(Q){const ne=Q.result,ce=le();return j.createElement(R.rU,{to:ne.location},j.createElement(F.Z,{alignItems:"flex-start",className:ce.flexContainer},j.createElement(te.Z,{className:ce.itemText,primaryTypographyProps:{variant:"h6"},primary:ne.title,secondary:ne.text}),j.createElement(we.Z,null,ne.kind&&j.createElement(D.Z,{label:`Kind: ${ne.kind}`,size:"small"}),ne.lifecycle&&j.createElement(D.Z,{label:`Lifecycle: ${ne.lifecycle}`,size:"small"}))),j.createElement(U.Z,{component:"li"}))}const ve=Object.freeze({createNameColumn(Q){function ne(ce){var me;return((me=ce.metadata)==null?void 0:me.title)||(0,u.$3)(ce,{defaultKind:Q==null?void 0:Q.defaultKind})}return{title:"Name",field:"resolved.name",highlight:!0,customSort({entity:ce},{entity:me}){return ne(ce).localeCompare(ne(me))},render:({entity:ce})=>{var me;return j.createElement(u.dx,{entityRef:ce,defaultKind:(Q==null?void 0:Q.defaultKind)||"Component",title:(me=ce.metadata)==null?void 0:me.title})}}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:Q})=>j.createElement(u.rI,{entityRefs:Q.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:Q})=>j.createElement(u.rI,{entityRefs:Q.ownedByRelations,defaultKind:"group"})}},createSpecTypeColumn(){return{title:"Type",field:"entity.spec.type",hidden:!0}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:Q})=>j.createElement(R.Or,{text:Q.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:Q})=>j.createElement(j.Fragment,null,Q.metadata.tags&&Q.metadata.tags.map(ne=>j.createElement(D.Z,{key:ne,label:ne,size:"small",variant:"outlined",style:{marginBottom:"0px"}})))}}}),fe=(0,Y.Z)({root:{color:"#f3ba37"}})(z.Z),Ve=Q=>{var ne,ce,me;const{columns:tt,actions:ht}=Q,{isStarredEntity:st,toggleStarredEntity:Dt}=(0,u.CR)(),{loading:qt,error:un,entities:Ut,filters:Lt}=(0,u.wp)(),Vt=(0,j.useMemo)(()=>{var at;return[ve.createNameColumn({defaultKind:(at=Lt.kind)==null?void 0:at.value}),ve.createSystemColumn(),ve.createOwnerColumn(),ve.createSpecTypeColumn(),ve.createSpecLifecycleColumn(),ve.createMetadataDescriptionColumn(),ve.createTagsColumn()]},[(ne=Lt.kind)==null?void 0:ne.value]),on=Lt.type===void 0,sn=(0,s.capitalize)((me=(ce=Lt.user)==null?void 0:ce.value)!=null?me:"all");if(un)return j.createElement("div",null,j.createElement(R.GB,{severity:"error",title:"Could not fetch catalog entities."},j.createElement(R.Oi,{language:"text",text:un.toString()})));const X=[({entity:at})=>{var Ot;const wt=(Ot=at.metadata.annotations)==null?void 0:Ot[h.l2];return{icon:()=>j.createElement(Be.Z,{"aria-label":"View",fontSize:"small"}),tooltip:"View",disabled:!wt,onClick:()=>{!wt||window.open(wt,"_blank")}}},({entity:at})=>{var Ot;const wt=(Ot=at.metadata.annotations)==null?void 0:Ot[h.Tf];return{icon:()=>j.createElement(Ke.Z,{"aria-label":"Edit",fontSize:"small"}),tooltip:"Edit",disabled:!wt,onClick:()=>{!wt||window.open(wt,"_blank")}}},({entity:at})=>{const Ot=st(at);return{cellStyle:{paddingLeft:"1em"},icon:()=>Ot?j.createElement(fe,null):j.createElement(L.Z,null),tooltip:Ot?"Remove from favorites":"Add to favorites",onClick:()=>Dt(at)}}],Ne=Ut.map(at=>{const Ot=(0,u.hF)(at,h.cz,{kind:"system"}),wt=(0,u.hF)(at,h.S4);return{entity:at,resolved:{name:(0,u.$3)(at,{defaultKind:"Component"}),ownedByRelationsTitle:wt.map(hn=>(0,u.$3)(hn,{defaultKind:"group"})).join(", "),ownedByRelations:wt,partOfSystemRelationTitle:Ot.map(hn=>(0,u.$3)(hn,{defaultKind:"system"})).join(", "),partOfSystemRelations:Ot}}}),it=(tt||Vt).find(at=>at.title==="Type");it&&(it.hidden=!on);const St=Ne.length>20;return j.createElement(R.iA,{isLoading:qt,columns:tt||Vt,options:{paging:St,pageSize:20,actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!qt,padding:"dense",pageSizeOptions:[20,50,100]},title:`${sn} (${Ut.length})`,data:Ne,actions:ht||X})};Ve.columns=ve;const Et=(0,y.Z)({button:{color:"white"}});function ft(Q){var ne;const{UNSTABLE_extraContextMenuItems:ce,UNSTABLE_contextMenuOptions:me,onUnregisterEntity:tt,onInspectEntity:ht}=Q,[st,Dt]=(0,j.useState)(),qt=Et(),un=(0,u.N$)(ut.j8),Ut=sn=>{Dt(sn.currentTarget)},Lt=()=>{Dt(void 0)},Vt=ce&&[...ce.map(sn=>j.createElement(Z.Z,{key:sn.title,onClick:()=>{Lt(),sn.onClick()}},j.createElement(ct.Z,null,j.createElement(sn.Icon,{fontSize:"small"})),j.createElement(te.Z,{primary:sn.title}))),j.createElement(U.Z,{key:"the divider is here!"})],on=(ne=!un.allowed||(me==null?void 0:me.disableUnregister))!=null?ne:!1;return j.createElement(j.Fragment,null,j.createElement(f.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:Ut,"data-testid":"menu-button",className:qt.button},j.createElement(nn.Z,null)),j.createElement(nt.ZP,{open:Boolean(st),onClose:Lt,anchorEl:st,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},j.createElement(se.Z,null,Vt,j.createElement(Z.Z,{onClick:()=>{Lt(),tt()},disabled:on},j.createElement(ct.Z,null,j.createElement(xe.Z,{fontSize:"small"})),j.createElement(te.Z,{primary:"Unregister entity"})),j.createElement(Z.Z,{onClick:()=>{Lt(),ht()}},j.createElement(ct.Z,null,j.createElement(At.Z,{fontSize:"small"})),j.createElement(te.Z,{primary:"Inspect entity"})))))}const Wt="plugin.catalog.entityLayoutRoute",Yt=()=>null;(0,P.R5)(Yt,Wt,!0),(0,P.R5)(Yt,"core.gatherMountPoints",!0);function ln(Q){const{entity:ne,title:ce}=Q;return j.createElement(we.Z,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},j.createElement(we.Z,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},ce),ne&&j.createElement(u.LH,{entity:ne}))}function gn(Q,ne,ce,me){var tt,ht,st,Dt,qt;const un=(tt=Q!=null?Q:me==null?void 0:me.kind)!=null?tt:"",Ut=(ht=ne!=null?ne:me==null?void 0:me.metadata.namespace)!=null?ht:"";return{headerTitle:`${(qt=(Dt=(st=me==null?void 0:me.metadata.title)!=null?st:ce)!=null?Dt:me==null?void 0:me.metadata.name)!=null?qt:""}${Ut&&Ut!==h.zG?` in ${Ut}`:""}`,headerType:(()=>{let Vt=un.toLocaleLowerCase("en-US");return me&&me.spec&&"type"in me.spec&&(Vt+=" \u2014 ",Vt+=me.spec.type.toLocaleLowerCase("en-US")),Vt})()}}function Sn(Q){var ne;const{entity:ce}=Q,me=(0,u.hF)(ce,h.S4);return j.createElement(j.Fragment,null,me.length>0&&j.createElement(R.i9,{label:"Owner",value:j.createElement(u.rI,{entityRefs:me,defaultKind:"Group",color:"inherit"})}),((ne=ce.spec)==null?void 0:ne.lifecycle)&&j.createElement(R.i9,{label:"Lifecycle",value:ce.spec.lifecycle}))}const yn=Q=>{var ne,ce,me;const{UNSTABLE_extraContextMenuItems:tt,UNSTABLE_contextMenuOptions:ht,children:st}=Q,{kind:Dt,namespace:qt,name:un}=(0,P.Oi)(u.wi),{entity:Ut,loading:Lt,error:Vt}=(0,u.ce)(),on=(0,Ue.TH)(),sn=(0,P.vJ)(st,pn=>pn.selectByComponentData({key:Wt,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:Xt})=>{if(Ut){if(Xt.if&&!Xt.if(Ut))return[]}else return[];return[{path:Xt.path,title:Xt.title,children:Xt.children,tabProps:Xt.tabProps}]}),[Ut]),{headerTitle:X,headerType:Ne}=gn(Dt,qt,un,Ut),[it,St]=(0,j.useState)(!1),[at,Ot]=(0,j.useState)(!1),wt=(0,Ue.s0)(),hn=async()=>{St(!1),Ot(!1),wt("/")};return(0,j.useEffect)(()=>{St(!1),Ot(!1)},[on.pathname]),j.createElement(R.T3,{themeId:(me=(ce=(ne=Ut==null?void 0:Ut.spec)==null?void 0:ne.type)==null?void 0:ce.toString())!=null?me:"home"},j.createElement(R.h4,{title:j.createElement(ln,{title:X,entity:Ut}),pageTitleOverride:X,type:Ne},Ut&&j.createElement(j.Fragment,null,j.createElement(Sn,{entity:Ut}),j.createElement(ft,{UNSTABLE_extraContextMenuItems:tt,UNSTABLE_contextMenuOptions:ht,onUnregisterEntity:()=>St(!0),onInspectEntity:()=>Ot(!0)}))),Lt&&j.createElement(R.Ex,null),Ut&&j.createElement(R.tn,{routes:sn}),Vt&&j.createElement(R.VY,null,j.createElement(ge.Z,{severity:"error"},Vt.toString())),!Lt&&!Vt&&!Ut&&j.createElement(R.VY,null,j.createElement(R.GB,{title:"Entity not found"},"There is no ",Dt," with the requested"," ",j.createElement(R.rU,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),j.createElement(u.pp,{open:it,entity:Ut,onConfirm:hn,onClose:()=>St(!1)}),j.createElement(u.U_,{open:at,entity:Ut,onClose:()=>Ot(!1)}))};yn.Route=Yt;function Re(Q){const{open:ne,onClose:ce,onConfirm:me,entity:tt}=Q,[ht,st]=(0,j.useState)(!1),Dt=(0,P.h_)(u.Ah),qt=(0,P.h_)(P.$v),un=async()=>{st(!0);try{const Ut=tt.metadata.uid;await Dt.removeEntityByUid(Ut),me()}catch(Ut){(0,Kt.BD)(Ut),qt.post({message:Ut.message})}finally{st(!1)}};return j.createElement(ye.Z,{open:ne,onClose:ce},j.createElement(Le.Z,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),j.createElement(de.Z,null,j.createElement(V.Z,{variant:"contained",color:"secondary",disabled:ht,onClick:un},"Delete"),j.createElement(V.Z,{onClick:ce,color:"primary"},"Cancel")))}function Xe(Q){var ne,ce;return((ce=(ne=Q==null?void 0:Q.metadata)==null?void 0:ne.annotations)==null?void 0:ce["backstage.io/orphan"])==="true"}function dt(){const Q=(0,Ue.s0)(),ne=(0,P.tg)(pt),[ce,me]=(0,j.useState)(!1),{entity:tt}=(0,u.X2)(),ht=async()=>{me(!1),Q(ne())};return j.createElement(j.Fragment,null,j.createElement(ge.Z,{severity:"warning",onClick:()=>me(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),j.createElement(Re,{open:ce,entity:tt,onConfirm:ht,onClose:()=>me(!1)}))}const Gt=Q=>Q.error&&Q.level==="error"&&Q.type===$t.mk;async function Bt(Q,ne){return{items:(await ne.getEntityAncestors({entityRef:Q})).items.map(tt=>{var ht,st;return{errors:((st=(ht=tt.entity.status)==null?void 0:ht.items)!=null?st:[]).filter(Gt).map(un=>un.error).filter(un=>Boolean(un)),entity:tt.entity}}).filter(tt=>tt.errors.length>0)}}async function rn(Q,ne){const ce=ne.apis.get(u.Ah);if(!ce)throw new Error(`No implementation available for ${u.Ah}`);return(await Bt((0,h.eE)(Q),ce)).items.length>0}function fn(){const{entity:Q}=(0,u.X2)(),ne=(0,h.eE)(Q),ce=(0,P.h_)(u.Ah),{loading:me,error:tt,value:ht}=(0,It.default)(async()=>Bt(ne,ce),[ne,ce]);return tt?j.createElement(we.Z,{mb:1},j.createElement(R.Gk,{error:tt})):me||!ht?null:j.createElement(j.Fragment,null,ht.items.map((st,Dt)=>j.createElement(we.Z,{key:Dt,mb:1},(0,h.eE)(Q)!==(0,h.eE)(st.entity)&&j.createElement(we.Z,{p:1},"The error below originates from"," ",j.createElement(u.dx,{entityRef:st.entity})),st.errors.map((qt,un)=>j.createElement(R.Gk,{key:un,error:qt})))))}const Pn="core.backstage.entitySwitch",An=Q=>null;(0,P.R5)(An,Pn,!0);const _n=Q=>{var ne,ce;const{entity:me,loading:tt}=(0,u.ce)(),ht=(0,P.I_)(),st=(0,P.vJ)(Q.children,qt=>qt.selectByComponentData({key:Pn,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(un=>{var Ut;if(tt)return[];const{if:Lt,children:Vt}=un.props;return me?[{if:(Ut=Lt==null?void 0:Lt(me,{apis:ht}))!=null?Ut:!0,children:Vt}]:[{if:Lt===void 0,children:Vt}]}),[ht,me,tt]);return st.some(qt=>typeof qt.if=="object"&&"then"in qt.if)?j.createElement(Pe,{results:st}):(ce=(ne=st.find(qt=>qt.if))==null?void 0:ne.children)!=null?ce:null};function Pe({results:Q}){const{loading:ne,value:ce}=(0,It.default)(async()=>{var me;const tt=Q.map(async({if:ht,children:st})=>{try{if(await ht)return st}catch{}return null});return(me=(await Promise.all(tt)).find(Boolean))!=null?me:null},[Q]);return ne||!ce?null:ce}_n.Case=An;function Ae(Q,ne){return Boolean(Q&&(Q==null?void 0:Q.toLocaleLowerCase("en-US"))===(ne==null?void 0:ne.toLocaleLowerCase("en-US")))}function _(Q){return ne=>Ae(ne.kind,Q)}function S(Q){return ne=>Ae(ne.kind,"component")?Ae(ne.spec.type,Q):!1}function x(Q){return ne=>{var ce;return Ae((ce=ne.metadata)==null?void 0:ce.namespace,Q)}}const ee=null,Ee=u._i.Filters,_e=u._i.Content,We=(0,P.rx)({id:"catalog",apis:[(0,P.ni)({api:u.Ah,deps:{discoveryApi:P.NW,fetchApi:P.gP},factory:({discoveryApi:Q,fetchApi:ne})=>new $t.MS({discoveryApi:Q,fetchApi:ne})}),(0,P.ni)({api:u.p3,deps:{storageApi:P.E6},factory:({storageApi:Q})=>new je({storageApi:Q})})],routes:{catalogIndex:pt,catalogEntity:u.wi},externalRoutes:{createComponent:Fe,viewTechDoc:be}}),yt=We.provide((0,P.P4)({name:"CatalogIndexPage",component:()=>t.e(5615).then(t.bind(t,95615)).then(Q=>Q.CatalogPage),mountPoint:pt})),kt=We.provide((0,P.P4)({name:"CatalogEntityPage",component:()=>t.e(8129).then(t.bind(t,78129)).then(Q=>Q.CatalogEntityPage),mountPoint:u.wi})),Ft=We.provide((0,P.CO)({name:"EntityAboutCard",component:{lazy:()=>t.e(3134).then(t.bind(t,13134)).then(Q=>Q.AboutCard)}})),bt=We.provide((0,P.CO)({name:"EntityLinksCard",component:{lazy:()=>t.e(4591).then(t.bind(t,64591)).then(Q=>Q.EntityLinksCard)}})),mn=We.provide((0,P.CO)({name:"EntityHasSystemsCard",component:{lazy:()=>t.e(8669).then(t.bind(t,38669)).then(Q=>Q.HasSystemsCard)}})),cn=We.provide((0,P.CO)({name:"EntityHasComponentsCard",component:{lazy:()=>t.e(9018).then(t.bind(t,29018)).then(Q=>Q.HasComponentsCard)}})),wn=We.provide((0,P.CO)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>t.e(657).then(t.bind(t,90657)).then(Q=>Q.HasSubcomponentsCard)}})),Ce=We.provide((0,P.CO)({name:"EntityHasResourcesCard",component:{lazy:()=>t.e(5153).then(t.bind(t,65153)).then(Q=>Q.HasResourcesCard)}})),$e=We.provide((0,P.CO)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>t.e(7110).then(t.bind(t,7110)).then(Q=>Q.DependsOnComponentsCard)}})),Je=We.provide((0,P.CO)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>t.e(2879).then(t.bind(t,72879)).then(Q=>Q.DependencyOfComponentsCard)}})),He=We.provide((0,P.CO)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>t.e(6973).then(t.bind(t,36973)).then(Q=>Q.DependsOnResourcesCard)}})),et=We.provide((0,P.CO)({name:"RelatedEntitiesCard",component:{lazy:()=>t.e(6497).then(t.bind(t,56497)).then(Q=>Q.RelatedEntitiesCard)}}))},16673:function(Tt,l,t){t.d(l,{BL:function(){return e.n},Cy:function(){return e.l},Eq:function(){return e.r},Es:function(){return e.a},FZ:function(){return e.p},Hz:function(){return e.q},Kf:function(){return e.y},PA:function(){return e.s},Tu:function(){return e.f},_l:function(){return e.w},bM:function(){return e.E},dN:function(){return e.e},f2:function(){return e.o},im:function(){return e.u},jF:function(){return e.i},mr:function(){return e.t},o6:function(){return e.j},oU:function(){return e.m},p$:function(){return e.v},rR:function(){return e.g},yf:function(){return e.k}});var e=t(70220),i=t(82394),h=t.n(i),s=t(34520),n=t(76635),R=t.n(n),P=t(49558),w=t(30705),u=t(49462),y=t(73495),O=t(2784),K=t(26655),D=t(32272),g=t(88285)},42214:function(Tt,l,t){t.d(l,{IJ:function(){return gn},Oz:function(){return yn},Q3:function(){return Ve},fX:function(){return At},i4:function(){return ln}});var e=t(30705),i=t(1854),h=t(89393),s=t(2784),n=t(73495),R=t(10289),P=t(79692),w=t(27616),u=t(8284),y=t(90436),O=t(4614),K=t(80030),D=t(69087),g=t(35111),T=t(14498),f=t(89571),U=t(15584),p=t(49378),d=t(70660),A=t(91256),N=t(37390),c=t(95544),Z=t(67358),F=t(27556),te=t(97485),we=t(86689),ct=t(61837),nt=t(77277),se=t(38016),ye=t(69001),Le=t(96299),de=t(49558),V=t(64279),he=t(30254),C=t(43266),Ke=t(58838),j=t(62833),It=t(77446),Be=t(26883);const L=(0,e.T0)({id:"plugin.githubactions.service"});class Y{constructor(Xe){this.configApi=Xe.configApi,this.githubAuthApi=Xe.githubAuthApi}async getOctokit(Xe){var dt;const Gt=await this.githubAuthApi.getAccessToken(["repo"]),rn=(0,i.E8)((dt=this.configApi.getOptionalConfigArray("integrations.github"))!=null?dt:[]).find(Pn=>Pn.host===Xe),fn=rn==null?void 0:rn.apiBaseUrl;return new h.v({auth:Gt,baseUrl:fn})}async reRunWorkflow({hostname:Xe,owner:dt,repo:Gt,runId:Bt}){return(await this.getOctokit(Xe)).actions.reRunWorkflow({owner:dt,repo:Gt,run_id:Bt})}async listWorkflowRuns({hostname:Xe,owner:dt,repo:Gt,pageSize:Bt=100,page:rn=0,branch:fn}){return(await(await this.getOctokit(Xe)).actions.listWorkflowRunsForRepo({owner:dt,repo:Gt,per_page:Bt,page:rn,...fn?{branch:fn}:{}})).data}async getWorkflow({hostname:Xe,owner:dt,repo:Gt,id:Bt}){return(await(await this.getOctokit(Xe)).actions.getWorkflow({owner:dt,repo:Gt,workflow_id:Bt})).data}async getWorkflowRun({hostname:Xe,owner:dt,repo:Gt,id:Bt}){return(await(await this.getOctokit(Xe)).actions.getWorkflowRun({owner:dt,repo:Gt,run_id:Bt})).data}async listJobsForWorkflowRun({hostname:Xe,owner:dt,repo:Gt,id:Bt,pageSize:rn=100,page:fn=0}){return(await(await this.getOctokit(Xe)).actions.listJobsForWorkflowRun({owner:dt,repo:Gt,run_id:Bt,per_page:rn,page:fn})).data}async downloadJobLogsForWorkflowRun({hostname:Xe,owner:dt,repo:Gt,runId:Bt}){return(await(await this.getOctokit(Xe)).actions.downloadJobLogsForWorkflowRun({owner:dt,repo:Gt,job_id:Bt})).data}}var z=(Re=>(Re[Re.success=0]="success",Re[Re.failure=1]="failure",Re[Re.pending=2]="pending",Re[Re.running=3]="running",Re))(z||{});const ge=(0,e.NT)({id:"github-actions"}),Ue=(0,e.Rz)({id:"github-actions/build",path:"/:id",parent:ge}),xe=(0,e.rx)({id:"github-actions",apis:[(0,e.ni)({api:L,deps:{configApi:e.Ds,githubAuthApi:e.F4},factory:({configApi:Re,githubAuthApi:Xe})=>new Y({configApi:Re,githubAuthApi:Xe})})],routes:{entityContent:ge}}),At=xe.provide((0,e.P4)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return ft}).then(Re=>Re.Router),mountPoint:ge})),nn=xe.provide((0,e.CO)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>t.e(8720).then(t.bind(t,88720)).then(Re=>Re.LatestWorkflowRunCard)}})),ut=xe.provide((0,e.CO)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>t.e(8720).then(t.bind(t,88720)).then(Re=>Re.LatestWorkflowsForBranchCard)}})),Kt=xe.provide((0,e.CO)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>t.e(8720).then(t.bind(t,88720)).then(Re=>Re.RecentWorkflowRunsCard)}})),$t="github.com/project-slug",Pt=Re=>{var Xe,dt;return(dt=(Xe=Re==null?void 0:Re.metadata.annotations)==null?void 0:Xe[$t])!=null?dt:""},je=({status:Re,conclusion:Xe})=>{if(Re===void 0)return null;switch(Re.toLocaleLowerCase("en-US")){case"queued":return s.createElement(s.Fragment,null,s.createElement(de.wA,null)," Queued");case"in_progress":return s.createElement(s.Fragment,null,s.createElement(de.VC,null)," In progress");case"completed":switch(Xe==null?void 0:Xe.toLocaleLowerCase("en-US")){case"skipped":return s.createElement(s.Fragment,null,s.createElement(de.dh,null)," Aborted");case"timed_out":return s.createElement(s.Fragment,null,s.createElement(de.Pd,null)," Timed out");case"failure":return s.createElement(s.Fragment,null,s.createElement(de.vK,null)," Error");default:return s.createElement(s.Fragment,null,s.createElement(de.Kq,null)," Completed")}default:return s.createElement(s.Fragment,null,s.createElement(de.wA,null)," Pending")}},Fe=({hostname:Re,owner:Xe,repo:dt})=>{const Gt=(0,e.h_)(L),{id:Bt}=(0,e.Oi)(Ue);return(0,V.default)(async()=>dt&&Xe?Gt.listJobsForWorkflowRun({hostname:Re,owner:Xe,repo:dt,id:parseInt(Bt,10)}):Promise.reject(new Error("No repo/owner provided")),[dt,Xe,Bt])},be=({hostname:Re,owner:Xe,repo:dt})=>{const Gt=(0,e.h_)(L),{id:Bt}=(0,e.Oi)(Ue);return(0,V.default)(async()=>dt&&Xe?Gt.getWorkflowRun({hostname:Re,owner:Xe,repo:dt,id:parseInt(Bt,10)}):Promise.reject(new Error("No repo/owner provided")),[dt,Xe,Bt])},pt=({hostname:Re,owner:Xe,repo:dt,id:Gt})=>{const Bt=(0,e.h_)(L);return(0,V.default)(async()=>dt&&Xe?Bt.downloadJobLogsForWorkflowRun({hostname:Re,owner:Xe,repo:dt,runId:Gt}):Promise.reject("No repo/owner provided"),[dt,Xe,Gt])},vt=(0,P.Z)(Re=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:Re.palette.background.default}})),ze=({entity:Re,runId:Xe,inProgress:dt})=>{var Gt;const Bt=(0,e.h_)(e.Ds),rn=vt(),fn=Pt(Re),Pn=(0,i.E8)((Gt=Bt.getOptionalConfigArray("integrations.github"))!=null?Gt:[])[0].host,[An,_n]=fn&&fn.split("/")||[],Pe=pt({hostname:Pn,owner:An,repo:_n,id:Xe}),Ae=Pe.value?String(Pe.value):void 0,[_,S]=s.useState(!1),x=()=>{S(!0)},ee=()=>{S(!1)};return s.createElement(w.Z,{TransitionProps:{unmountOnExit:!0},disabled:dt},s.createElement(u.Z,{expandIcon:s.createElement(se.Z,null),"aria-controls":`panel-${name}-content`,id:`panel-${name}-header`,IconButtonProps:{className:rn.button}},s.createElement(y.Z,{variant:"button"},Pe.loading?s.createElement(O.Z,null):"Job Log"),s.createElement(K.ZP,{title:"Open Log",TransitionComponent:D.Z,arrow:!0},s.createElement(he.Z,{onClick:Ee=>{Ee.stopPropagation(),x()},style:{marginLeft:"auto"}})),s.createElement(g.Z,{className:rn.modal,onClick:Ee=>Ee.stopPropagation(),open:_,onClose:ee},s.createElement(T.Z,{in:_},s.createElement("div",{className:rn.modalLogContainer},s.createElement(de.nU,{text:Ae!=null?Ae:"No Values Found",classes:{root:rn.log}}))))),Ae&&s.createElement("div",{className:rn.normalLogContainer},s.createElement(de.nU,{text:Ae,classes:{root:rn.log}})))},mt=(0,P.Z)(Re=>({root:{maxWidth:720,margin:Re.spacing(2)},title:{padding:Re.spacing(1,0,2,0)},table:{padding:Re.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),_t=(Re,Xe)=>{const dt=Le.ou.fromISO(Re);return(Xe?Le.ou.fromISO(Xe):Le.ou.now()).diff(dt).toFormat("m 'minutes' s 'seconds'")},Ie=({step:Re})=>{var Xe;return s.createElement(f.Z,null,s.createElement(U.Z,null,s.createElement(p.Z,{primary:Re.name,secondary:_t(Re.started_at,Re.completed_at)})),s.createElement(U.Z,null,s.createElement(je,{status:Re.status.toLocaleUpperCase("en-US"),conclusion:(Xe=Re.conclusion)==null?void 0:Xe.toLocaleUpperCase("en-US")})))},ue=({job:Re,className:Xe,entity:dt})=>{const Gt=mt();return s.createElement(w.Z,{TransitionProps:{unmountOnExit:!0},className:Xe},s.createElement(u.Z,{expandIcon:s.createElement(se.Z,null),"aria-controls":`panel-${name}-content`,id:`panel-${name}-header`,IconButtonProps:{className:Gt.button}},s.createElement(y.Z,{variant:"button"},Re.name," (",_t(Re.started_at,Re.completed_at),")")),s.createElement(d.Z,{className:Gt.accordionDetails},s.createElement(A.Z,null,s.createElement(N.Z,null,Re.steps.map(Bt=>s.createElement(Ie,{key:Bt.number,step:Bt}))))),Re.status==="queued"||Re.status==="in_progress"?s.createElement(ze,{runId:Re.id,inProgress:!0,entity:dt}):s.createElement(ze,{runId:Re.id,inProgress:!1,entity:dt}))},Ze=({jobs:Re,entity:Xe})=>{const dt=mt();return s.createElement(c.Z,null,Re&&Re.total_count>0&&Re.jobs.map(Gt=>s.createElement(ue,{key:Gt.id,job:Gt,className:Gt.status!=="success"?dt.failed:dt.success,entity:Xe})))},rt=({entity:Re})=>{var Xe,dt,Gt,Bt,rn,fn,Pn,An,_n,Pe,Ae,_,S,x,ee,Ee;const _e=(0,e.h_)(e.Ds),We=Pt(Re),yt=(0,i.E8)((Xe=_e.getOptionalConfigArray("integrations.github"))!=null?Xe:[])[0].host,[kt,Ft]=We&&We.split("/")||[],bt=be({hostname:yt,owner:kt,repo:Ft}),mn=Fe({hostname:yt,owner:kt,repo:Ft}),cn=mt();return bt.error&&bt.error.message?s.createElement(y.Z,{variant:"h6",color:"error"},"Failed to load build, ",bt.error.message):bt.loading?s.createElement(Z.Z,null):s.createElement("div",{className:cn.root},s.createElement(c.Z,{mb:3},s.createElement(de.Oo,{"aria-label":"breadcrumb"},s.createElement(de.rU,{to:".."},"Workflow runs"),s.createElement(y.Z,null,"Workflow run details"))),s.createElement(A.Z,{component:F.Z,className:cn.table},s.createElement(N.Z,null,s.createElement(te.Z,null,s.createElement(f.Z,null,s.createElement(U.Z,null,s.createElement(y.Z,{noWrap:!0},"Branch")),s.createElement(U.Z,null,(dt=bt.value)==null?void 0:dt.head_branch)),s.createElement(f.Z,null,s.createElement(U.Z,null,s.createElement(y.Z,{noWrap:!0},"Message")),s.createElement(U.Z,null,(Bt=(Gt=bt.value)==null?void 0:Gt.head_commit)==null?void 0:Bt.message)),s.createElement(f.Z,null,s.createElement(U.Z,null,s.createElement(y.Z,{noWrap:!0},"Commit ID")),s.createElement(U.Z,null,(fn=(rn=bt.value)==null?void 0:rn.head_commit)==null?void 0:fn.id)),s.createElement(f.Z,null,s.createElement(U.Z,null,s.createElement(y.Z,{noWrap:!0},"Workflow")),s.createElement(U.Z,null,(Pn=bt.value)==null?void 0:Pn.name)),s.createElement(f.Z,null,s.createElement(U.Z,null,s.createElement(y.Z,{noWrap:!0},"Status")),s.createElement(U.Z,null,s.createElement(je,{status:((An=bt.value)==null?void 0:An.status)||void 0,conclusion:((_n=bt.value)==null?void 0:_n.conclusion)||void 0}))),s.createElement(f.Z,null,s.createElement(U.Z,null,s.createElement(y.Z,{noWrap:!0},"Author")),s.createElement(U.Z,null,`${(_=(Ae=(Pe=bt.value)==null?void 0:Pe.head_commit)==null?void 0:Ae.author)==null?void 0:_.name} (${(ee=(x=(S=bt.value)==null?void 0:S.head_commit)==null?void 0:x.author)==null?void 0:ee.email})`)),s.createElement(f.Z,null,s.createElement(U.Z,null,s.createElement(y.Z,{noWrap:!0},"Links")),s.createElement(U.Z,null,((Ee=bt.value)==null?void 0:Ee.html_url)&&s.createElement(we.Z,{target:"_blank",href:bt.value.html_url},"Workflow runs on GitHub"," ",s.createElement(ye.Z,{className:cn.externalLinkIcon})))),s.createElement(f.Z,null,s.createElement(U.Z,{colSpan:2},s.createElement(y.Z,{noWrap:!0},"Jobs"),mn.loading?s.createElement(O.Z,null):s.createElement(Ze,{jobs:mn.value,entity:Re})))))))};function le({hostname:Re,owner:Xe,repo:dt,branch:Gt,initialPageSize:Bt=5}){const rn=(0,e.h_)(L),fn=(0,e.h_)(e.VE),[Pn,An]=(0,s.useState)(0),[_n,Pe]=(0,s.useState)(0),[Ae,_]=(0,s.useState)(Bt),{loading:S,value:x,retry:ee,error:Ee}=(0,It.Z)(async()=>{const _e=await rn.listWorkflowRuns({hostname:Re,owner:Xe,repo:dt,pageSize:Ae,page:_n+1,branch:Gt});return An(_e.total_count),_e.workflow_runs.map(We=>{var yt,kt;return{workflowName:We.name,message:We.head_commit.message,id:`${We.id}`,onReRunClick:async()=>{try{await rn.reRunWorkflow({hostname:Re,owner:Xe,repo:dt,runId:We.id})}catch(Ft){fn.post(Ft)}},source:{branchName:We.head_branch,commit:{hash:We.head_commit.id,url:(kt=(yt=We.head_repository)==null?void 0:yt.branches_url)==null?void 0:kt.replace("{/branch}",We.head_branch)}},status:We.status,conclusion:We.conclusion,url:We.url,githubUrl:We.html_url}})},[_n,Ae,dt,Xe]);return[{page:_n,pageSize:Ae,loading:S,runs:x,projectName:`${Xe}/${dt}`,total:Pn,error:Ee},{runs:x,setPage:Pe,setPageSize:_,retry:ee}]}const ie=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:Re=>{const Xe=()=>{const dt=(0,e.tg)(Ue);return s.createElement(we.Z,{component:j.rU,to:dt({id:Re.id})},Re.message)};return s.createElement(Xe,null)}},{title:"Source",render:Re=>{var Xe,dt;return s.createElement(y.Z,{variant:"body2",noWrap:!0},s.createElement("p",null,(Xe=Re.source)==null?void 0:Xe.branchName),s.createElement("p",null,(dt=Re.source)==null?void 0:dt.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",width:"150px",render:Re=>s.createElement(c.Z,{display:"flex",alignItems:"center"},s.createElement(je,{status:Re.status,conclusion:Re.conclusion}))},{title:"Actions",render:Re=>s.createElement(K.ZP,{title:"Rerun workflow"},s.createElement(ct.Z,{onClick:Re.onReRunClick},s.createElement(C.Z,null))),width:"10%"}],ve=({projectName:Re,loading:Xe,pageSize:dt,page:Gt,retry:Bt,runs:rn,onChangePage:fn,onChangePageSize:Pn,total:An})=>s.createElement(de.iA,{isLoading:Xe,options:{paging:!0,pageSize:dt,padding:"dense"},totalCount:An,page:Gt,actions:[{icon:()=>s.createElement(Be.Z,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>Bt()}],data:rn!=null?rn:[],onPageChange:fn,onRowsPerPageChange:Pn,style:{width:"100%"},title:s.createElement(c.Z,{display:"flex",alignItems:"center"},s.createElement(Ke.Z,null),s.createElement(c.Z,{mr:1}),s.createElement(y.Z,{variant:"h6"},Re)),columns:ie}),fe=({entity:Re,branch:Xe})=>{var dt;const Gt=(0,e.h_)(e.Ds),Bt=Pt(Re),rn=(0,i.E8)((dt=Gt.getOptionalConfigArray("integrations.github"))!=null?dt:[])[0].host,[fn,Pn]=(Bt!=null?Bt:"/").split("/"),[{runs:An,..._n},{retry:Pe,setPage:Ae,setPageSize:_}]=le({hostname:rn,owner:fn,repo:Pn,branch:Xe}),S=rn||"github.com";return!_n.loading&&!An?s.createElement(de.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:s.createElement(nt.Z,{variant:"contained",color:"primary",href:`https://${S}/${Bt}/actions/new`},"Create new Workflow")}):s.createElement(ve,{..._n,runs:An,loading:_n.loading,retry:Pe,onChangePageSize:_,onChangePage:Ae})},Ve=Re=>{var Xe;return Boolean((Xe=Re.metadata.annotations)==null?void 0:Xe[$t])};var ft=Object.freeze({__proto__:null,isGithubActionsAvailable:Ve,Router:()=>{const{entity:Re}=(0,n.X2)();return Ve(Re)?s.createElement(R.Z5,null,s.createElement(R.AW,{path:"/",element:s.createElement(fe,{entity:Re})}),s.createElement(R.AW,{path:`${Ue.path}`,element:s.createElement(rt,{entity:Re})}),")"):s.createElement(de.sk,{annotation:$t})}});const Wt=(0,P.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),Yt=({error:Re,loading:Xe,lastRun:dt,branch:Gt})=>{var Bt;const rn=Wt();return Re?s.createElement(y.Z,null,"Couldn't fetch latest ",Gt," run"):Xe?s.createElement(Z.Z,null):s.createElement(de.xT,{metadata:{status:s.createElement(s.Fragment,null,s.createElement(je,{status:dt.status,conclusion:dt.conclusion})),message:dt.message,url:s.createElement(de.rU,{to:(Bt=dt.githubUrl)!=null?Bt:""},"See more on GitHub"," ",s.createElement(ye.Z,{className:rn.externalLinkIcon}))}})},ln=({branch:Re="master",variant:Xe})=>{var dt,Gt,Bt,rn;const{entity:fn}=(0,n.X2)(),Pn=(0,e.h_)(e.Ds),An=(0,e.h_)(e.VE),_n=(0,i.E8)((dt=Pn.getOptionalConfigArray("integrations.github"))!=null?dt:[])[0].host,[Pe,Ae]=((Bt=(Gt=fn==null?void 0:fn.metadata.annotations)==null?void 0:Gt[$t])!=null?Bt:"/").split("/"),[{runs:_,loading:S,error:x}]=le({hostname:_n,owner:Pe,repo:Ae,branch:Re}),ee=(rn=_==null?void 0:_[0])!=null?rn:{};return(0,s.useEffect)(()=>{x&&An.post(x)},[x,An]),s.createElement(de.rJ,{title:`Last ${Re} build`,variant:Xe},s.createElement(Yt,{error:x,loading:S,branch:Re,lastRun:ee}))},gn=({branch:Re="master",variant:Xe})=>{const{entity:dt}=(0,n.X2)();return s.createElement(de.rJ,{title:`Last ${Re} build`,variant:Xe},s.createElement(fe,{branch:Re,entity:dt}))},Sn=Re=>Re.split(`
`)[0],yn=({branch:Re,dense:Xe=!1,limit:dt=5,variant:Gt})=>{var Bt,rn,fn;const{entity:Pn}=(0,n.X2)(),An=(0,e.h_)(e.Ds),_n=(0,e.h_)(e.VE),Pe=(0,i.E8)((Bt=An.getOptionalConfigArray("integrations.github"))!=null?Bt:[])[0].host,[Ae,_]=((fn=(rn=Pn==null?void 0:Pn.metadata.annotations)==null?void 0:rn[$t])!=null?fn:"/").split("/"),[{runs:S=[],loading:x,error:ee}]=le({hostname:Pe,owner:Ae,repo:_,branch:Re,initialPageSize:dt});(0,s.useEffect)(()=>{ee&&_n.post(ee)},[ee,_n]);const Ee=Pe||"github.com";return s.createElement(de.rJ,{title:"Recent Workflow Runs",subheader:Re?`Branch: ${Re}`:"All Branches",noPadding:!0,variant:Gt},S.length?s.createElement(de.iA,{isLoading:x,options:{search:!1,paging:!1,padding:Xe?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:_e=>s.createElement(de.rU,{component:j.rU,to:(0,R.Gn)("./ci-cd/:id",{id:_e.id})},Sn(_e.message))},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:je}],data:S}):s.createElement("div",{style:{textAlign:"center"}},s.createElement(y.Z,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),s.createElement(y.Z,{variant:"body2"},s.createElement(de.rU,{to:`https://${Ee}/${Ae}/${_}/actions/new`},"Create a new workflow"))))}},59235:function(Tt,l,t){t.d(l,{$M:function(){return V},Eg:function(){return C},Jh:function(){return ge},Yq:function(){return nn},jQ:function(){return Ke},oy:function(){return Y},qJ:function(){return Be},rw:function(){return he},w1:function(){return de}});var e=t(30705),i=t(34520),h=t(73495),s=t(79692),n=t(12420),R=t(60905),P=t(95544),w=t(90436),u=t(61837),y=t(11776),O=t(38402),K=t(86136),D=t(80030),g=t(49378),T=t(76637),f=t(2784),U=t(10289),p=t(64279),d=t(49558),A=t(73655),N=t(13384),c=t(62367),Z=t(27604),F=t(52866),te=t(99688),we=t(98685),ct=t(19126),nt=t.n(ct),se=t(19928),ye=t.n(se);const Le=(0,e.x8)({id:"catalog-index"}),de=(0,e.rx)({id:"org",externalRoutes:{catalogIndex:Le}}),V=de.provide((0,e.CO)({name:"EntityGroupProfileCard",component:{lazy:()=>t.e(5745).then(t.bind(t,55745)).then(ut=>ut.GroupProfileCard)}})),he=de.provide((0,e.CO)({name:"EntityMembersListCard",component:{lazy:()=>t.e(5745).then(t.bind(t,55745)).then(ut=>ut.MembersListCard)}})),C=de.provide((0,e.CO)({name:"EntityOwnershipCard",component:{lazy:()=>t.e(5745).then(t.bind(t,55745)).then(ut=>ut.OwnershipCard)}})),Ke=de.provide((0,e.CO)({name:"EntityUserProfileCard",component:{lazy:()=>t.e(5745).then(t.bind(t,55745)).then(ut=>ut.UserProfileCard)}})),j=(0,s.Z)(ut=>(0,n.Z)({card:{border:`1px solid ${ut.palette.divider}`,boxShadow:ut.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:ut.spacing(4,1,1),flex:"1",minWidth:"0px"}})),It=({member:ut})=>{var Kt;const $t=j(),{metadata:{name:Pt},spec:{profile:je}}=ut,Fe=(Kt=je==null?void 0:je.displayName)!=null?Kt:Pt;return f.createElement(R.Z,{item:!0,container:!0,xs:12,sm:6,md:4,xl:2},f.createElement(P.Z,{className:$t.card},f.createElement(P.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},f.createElement(d.qE,{displayName:Fe,picture:je==null?void 0:je.picture,customStyles:{position:"absolute",top:"-2rem"}}),f.createElement(P.Z,{pt:2,textAlign:"center"},f.createElement(w.Z,{variant:"h5"},f.createElement(d.rU,{to:(0,U.Gn)(`/catalog/:namespace/user/${Pt}`,(0,h.hd)(ut))},Fe)),(je==null?void 0:je.email)&&f.createElement(d.rU,{to:`mailto:${je.email}`},je.email)))))},Be=ut=>{var Kt;const{entity:$t}=(0,h.X2)();let{memberDisplayTitle:Pt,pageSize:je}=ut;const{metadata:{name:Fe,namespace:be},spec:{profile:pt}}=$t,vt=(0,e.h_)(h.Ah),ze=(Kt=pt==null?void 0:pt.displayName)!=null?Kt:Fe,mt=be||i.zG,[_t,Ie]=f.useState(1),ue=(Ve,Et)=>{Ie(Et)};je=je||50,Pt=Pt||"Members";const{loading:Ze,error:rt,value:le}=(0,p.default)(async()=>(await vt.getEntities({filter:{kind:"User","relations.memberof":[(0,i.eE)({kind:"group",namespace:mt.toLocaleLowerCase("en-US"),name:Fe.toLocaleLowerCase("en-US")})]}})).items,[vt,$t]);if(Ze)return f.createElement(d.Ex,null);if(rt)return f.createElement(d.Gk,{error:rt});const ie=Math.ceil(((le==null?void 0:le.length)||0)/je),ve=ie<2?"":`, page ${_t} of ${ie}`,fe=f.createElement(T.Z,{count:ie,page:_t,onChange:ue,showFirstButton:!0,showLastButton:!0});return f.createElement(R.Z,{item:!0},f.createElement(d.rJ,{title:`${Pt} (${(le==null?void 0:le.length)||0}${ve})`,subheader:`of ${ze}`,...ie<=1?{}:{actions:fe}},f.createElement(R.Z,{container:!0,spacing:3},le&&le.length>0?le.slice(je*(_t-1),je*_t).map(Ve=>f.createElement(It,{member:Ve,key:Ve.metadata.uid})):f.createElement(P.Z,{p:2},f.createElement(w.Z,null,"This group has no ",Pt.toLocaleLowerCase(),".")))))},L=({title:ut})=>f.createElement(P.Z,{display:"flex",alignItems:"center"},f.createElement(c.Z,{fontSize:"inherit"}),f.createElement(P.Z,{ml:1},ut)),Y=({variant:ut})=>{var Kt,$t;const Pt=(0,e.h_)(h.Ah),je=(0,e.h_)(e.$v),{entity:Fe}=(0,h.X2)(),be=(0,f.useCallback)(async()=>{await Pt.refreshEntity((0,i.eE)(Fe)),je.post({message:"Refresh scheduled",severity:"info"})},[Pt,je,Fe]);if(!Fe)return f.createElement(te.Z,{severity:"error"},"Group not found");const{metadata:{name:pt,description:vt,annotations:ze},spec:{profile:mt}}=Fe,_t=(0,h.hF)(Fe,i._b,{kind:"Group"}),Ie=(0,h.hF)(Fe,i.wP,{kind:"group"}),ue=ze==null?void 0:ze[i.P1],Ze=(ue==null?void 0:ue.startsWith("url:"))||(ue==null?void 0:ue.startsWith("file:")),rt=(Kt=Fe.metadata.annotations)==null?void 0:Kt[i.Tf],le=($t=mt==null?void 0:mt.displayName)!=null?$t:pt,ie=mt!=null&&mt.email?`mailto:${mt.email}`:"#",ve=rt?f.createElement(u.Z,{"aria-label":"Edit",title:"Edit Metadata",component:d.rU,to:rt},f.createElement(Z.Z,null)):f.createElement(u.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},f.createElement(Z.Z,null));return f.createElement(d.rJ,{title:f.createElement(L,{title:le}),subheader:vt,variant:ut,action:f.createElement(f.Fragment,null,Ze&&f.createElement(u.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:be},f.createElement(F.Z,null)),ve)},f.createElement(R.Z,{container:!0,spacing:3},f.createElement(R.Z,{item:!0,xs:12,sm:2,xl:1},f.createElement(d.qE,{displayName:le,picture:mt==null?void 0:mt.picture})),f.createElement(R.Z,{item:!0,md:10,xl:11},f.createElement(y.Z,null,(mt==null?void 0:mt.email)&&f.createElement(O.Z,null,f.createElement(K.Z,null,f.createElement(D.ZP,{title:"Email"},f.createElement(N.Z,null))),f.createElement(g.Z,null,f.createElement(d.rU,{to:ie},mt.email))),Ie.length?f.createElement(O.Z,null,f.createElement(K.Z,null,f.createElement(D.ZP,{title:"Parent Group"},f.createElement(A.Z,null))),f.createElement(g.Z,null,f.createElement(h.rI,{entityRefs:Ie,defaultKind:"Group"}))):null,_t.length?f.createElement(O.Z,null,f.createElement(K.Z,null,f.createElement(D.ZP,{title:"Child Groups"},f.createElement(c.Z,null))),f.createElement(g.Z,null,f.createElement(h.rI,{entityRefs:_t,defaultKind:"Group"}))):null))))},z=({title:ut})=>ut?f.createElement(P.Z,{display:"flex",alignItems:"center"},f.createElement(we.Z,{fontSize:"inherit"}),f.createElement(P.Z,{ml:1},ut)):null,ge=({variant:ut})=>{var Kt;const{entity:$t}=(0,h.X2)();if(!$t)return f.createElement(te.Z,{severity:"error"},"User not found");const{metadata:{name:Pt,description:je},spec:{profile:Fe}}=$t,be=(Kt=Fe==null?void 0:Fe.displayName)!=null?Kt:Pt,pt=Fe!=null&&Fe.email?`mailto:${Fe.email}`:void 0,vt=(0,h.hF)($t,i.hr,{kind:"Group"});return f.createElement(d.rJ,{title:f.createElement(z,{title:be}),subheader:je,variant:ut},f.createElement(R.Z,{container:!0,spacing:3,alignItems:"flex-start"},f.createElement(R.Z,{item:!0,xs:12,sm:2,xl:1},f.createElement(d.qE,{displayName:be,picture:Fe==null?void 0:Fe.picture})),f.createElement(R.Z,{item:!0,md:10,xl:11},f.createElement(y.Z,null,(Fe==null?void 0:Fe.email)&&f.createElement(O.Z,null,f.createElement(K.Z,null,f.createElement(D.ZP,{title:"Email"},f.createElement(N.Z,null))),f.createElement(g.Z,null,f.createElement(d.rU,{to:pt!=null?pt:""},Fe.email))),f.createElement(O.Z,null,f.createElement(K.Z,null,f.createElement(D.ZP,{title:"Member of"},f.createElement(c.Z,null))),f.createElement(g.Z,null,f.createElement(h.rI,{entityRefs:vt,defaultKind:"Group"})))))))},Ue=(0,s.Z)(ut=>(0,n.Z)({card:{border:`1px solid ${ut.palette.divider}`,boxShadow:ut.shadows[2],borderRadius:"4px",padding:ut.spacing(2),color:"#fff",transition:`${ut.transitions.duration.standard}ms`,"&:hover":{boxShadow:ut.shadows[4]}},bold:{fontWeight:ut.typography.fontWeightBold},entityTypeBox:{background:Kt=>ut.getPageTheme({themeId:Kt.type}).backgroundImage}})),xe=({counter:ut,type:Kt,name:$t,url:Pt})=>{const je=Ue({type:Kt});return f.createElement(d.rU,{to:Pt,variant:"body2"},f.createElement(P.Z,{className:`${je.card} ${je.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},f.createElement(w.Z,{className:je.bold,variant:"h6"},ut),f.createElement(w.Z,{className:je.bold,variant:"h6"},ye()($t,ut))))},At=(ut,Kt)=>{var $t;const Pt=(0,h.$3)(ut,{defaultKind:"group"}),{kind:je,type:Fe}=Kt,be={kind:je,type:Fe,owners:[Pt],user:"all"};if(ut.kind==="User"){const vt=ut;be.owners=[...be.owners,...($t=vt.spec.memberOf)!=null?$t:[]]}return nt().stringify({filters:be},{arrayFormat:"repeat"})},nn=({variant:ut,entityFilterKind:Kt})=>{const{entity:$t}=(0,h.X2)(),Pt=(0,e.h_)(h.Ah),je=(0,e.tg)(Le),{loading:Fe,error:be,value:pt}=(0,p.default)(async()=>{const vt=Kt!=null?Kt:["Component","API"];return(await Pt.getEntities({filter:{kind:vt},fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]})).items.filter(ue=>(0,h.g9)($t,ue)).reduce((ue,Ze)=>{var rt,le,ie;const ve=ue.find(fe=>{var Ve,Et;return fe.kind===Ze.kind&&fe.type===((Et=(Ve=Ze.spec)==null?void 0:Ve.type)!=null?Et:Ze.kind)});return ve?ve.count+=1:ue.push({kind:Ze.kind,type:(ie=(le=(rt=Ze.spec)==null?void 0:rt.type)==null?void 0:le.toString())!=null?ie:Ze.kind,count:1}),ue},[]).sort((ue,Ze)=>Ze.count-ue.count).slice(0,6).map(ue=>({counter:ue.count,type:ue.type,name:ue.type.toLocaleUpperCase("en-US"),queryParams:At($t,ue)}))},[Pt,$t]);return Fe?f.createElement(d.Ex,null):be?f.createElement(d.Gk,{error:be}):f.createElement(d.rJ,{title:"Ownership",variant:ut},f.createElement(R.Z,{container:!0},pt==null?void 0:pt.map(vt=>f.createElement(R.Z,{item:!0,xs:6,md:6,lg:4,key:vt.name},f.createElement(xe,{counter:vt.counter,type:vt.type,name:vt.name,url:`${je()}/?${vt.queryParams}`})))))}},4298:function(Tt,l,t){t.d(l,{iM:function(){return d},po:function(){return N},RV:function(){return p},gI:function(){return A}});var e=t(2784),i=t(10289),h=t(30705),s=t(32272),n=t(96279),R=t.n(n),P=t(9571),w=t(30195),u=(c=>(c.DENY="DENY",c.ALLOW="ALLOW",c.CONDITIONAL="CONDITIONAL",c))(u||{});function y(c){return c.attributes.action==="create"}function O(c){return c.attributes.action==="read"}function K(c){return c.attributes.action==="update"}function D(c){return c.attributes.action==="delete"}const g=w.z.lazy(()=>w.z.object({rule:w.z.string(),params:w.z.array(w.z.unknown())}).strict().or(w.z.object({anyOf:w.z.array(g).nonempty()}).strict()).or(w.z.object({allOf:w.z.array(g).nonempty()}).strict()).or(w.z.object({not:g}).strict())),T=w.z.object({items:w.z.array(w.z.object({id:w.z.string(),result:w.z.literal(u.ALLOW).or(w.z.literal(u.DENY))}).or(w.z.object({id:w.z.string(),result:w.z.literal(u.CONDITIONAL),conditions:g})))});class f{constructor(Z){var F;this.discovery=Z.discovery,this.enabled=(F=Z.config.getOptionalBoolean("permission.enabled"))!=null?F:!1}async authorize(Z,F){if(!this.enabled)return Z.map(ye=>({result:u.ALLOW}));const te={items:Z.map(ye=>({id:P.Z(),...ye}))},we=await this.discovery.getBaseUrl("permission"),ct=await R()(`${we}/authorize`,{method:"POST",body:JSON.stringify(te),headers:{...this.getAuthorizationHeader(F==null?void 0:F.token),"content-type":"application/json"}});if(!ct.ok)throw await s.VL.fromResponse(ct);const nt=await ct.json();this.assertValidResponse(te,nt);const se=nt.items.reduce((ye,Le)=>(ye[Le.id]=Le,ye),{});return te.items.map(ye=>se[ye.id])}getAuthorizationHeader(Z){return Z?{Authorization:`Bearer ${Z}`}:{}}assertValidResponse(Z,F){const we=T.parse(F).items.map(nt=>nt.id);if(!Z.items.every(nt=>we.includes(nt.id)))throw new Error("Unexpected authorization response from permission-backend")}}var U=t(49857);const p=(0,h.T0)({id:"plugin.permission.api"});class d{constructor(Z,F){this.permissionClient=Z,this.identityApi=F}static create(Z){const{config:F,discovery:te,identity:we}=Z,ct=new f({discovery:te,config:F});return new d(ct,we)}async authorize(Z){return(await this.permissionClient.authorize([Z],await this.identityApi.getCredentials()))[0]}}const A=(c,Z)=>{const F=(0,h.h_)(p),{data:te,error:we}=(0,U.ZP)({permission:c,resourceRef:Z},async ct=>{const{result:nt}=await F.authorize(ct);return nt});return we?{error:we,loading:!1,allowed:!1}:te===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:te===u.ALLOW}},N=c=>{const{permission:Z,resourceRef:F,errorComponent:te,...we}=c,ct=A(Z,F),nt=(0,h.qD)(),{NotFoundErrorPage:se}=nt.getComponents();let ye=te===void 0?e.createElement(se,null):te;return ct.loading?ye=null:ct.allowed&&(ye=c.element),e.createElement(i.AW,{...we,element:ye})}},96575:function(Tt,l,t){t.d(l,{E:function(){return je},F:function(){return Wt},O:function(){return vt},R:function(){return fe},S:function(){return le},T:function(){return _},a:function(){return Fe},b:function(){return pt},c:function(){return Et},d:function(){return Sn},e:function(){return be},f:function(){return $t},g:function(){return Xe},h:function(){return yn},i:function(){return Yt},j:function(){return ie},k:function(){return wn},r:function(){return Ve},s:function(){return Re},w:function(){return Pn},x:function(){return dt}});var e=t(34520),i=t(30705),h=t(32272),s=t(19126),n=t.n(s),R=t(82394),P=t.n(R),w=t(73495),u=t(86619),y=t(42494),O=t(95544),K=t(90436),D=t(5806),g=t(21324),T=t(79692),f=t(60905),U=t(4614),p=t(97136),d=t(27556),A=t(77277),N=t(88013),c=t(2784),Z=t(64279),F=t(62155),te=t(49462),we=t(74828),ct=t(29611),nt=t(56939),se=t(49558),ye=t(48760),Le=t(82108),de=t.n(Le),V=t(19996),he=t(25505),C=t(38016),Ke=t(31377),j=t(34546),It=t(31625),Be=t(12420),L=t(49166),Y=t(98281),z=t(16874),ge=t(72779),Ue=t.n(ge),xe=t(96299),At=t(10289),nn=t(70218),ut=t(22690),Kt=t(52160);const $t=(0,i.T0)({id:"plugin.scaffolder.service"});class Pt{constructor($e){var Je,He;this.discoveryApi=$e.discoveryApi,this.fetchApi=(Je=$e.fetchApi)!=null?Je:{fetch},this.scmIntegrationsApi=$e.scmIntegrationsApi,this.useLongPollingLogs=(He=$e.useLongPollingLogs)!=null?He:!1}async getIntegrationsList($e){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(He=>({type:He.type,title:He.title,host:He.config.host})).filter(He=>$e.allowedHosts.includes(He.host))}}async getTemplateParameterSchema($e){const{namespace:Je,kind:He,name:et}=(0,e.of)($e,{defaultKind:"template"}),Q=await this.discoveryApi.getBaseUrl("scaffolder"),ne=[Je,He,et].map(ht=>encodeURIComponent(ht)).join("/"),ce=`${Q}/v2/templates/${ne}/parameter-schema`,me=await this.fetchApi.fetch(ce);if(!me.ok)throw await h.VL.fromResponse(me);return await me.json()}async scaffold($e){const{templateRef:Je,values:He,secrets:et={}}=$e,Q=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,ne=await this.fetchApi.fetch(Q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:Je,values:{...He},secrets:et})});if(ne.status!==201){const me=`${ne.status} ${ne.statusText}`,tt=await ne.text();throw new Error(`Backend request failed, ${me} ${tt.trim()}`)}const{id:ce}=await ne.json();return{taskId:ce}}async getTask($e){const He=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent($e)}`,et=await this.fetchApi.fetch(He);if(!et.ok)throw await h.VL.fromResponse(et);return await et.json()}streamLogs($e){return this.useLongPollingLogs?this.streamLogsPolling($e):this.streamLogsEventStream($e)}streamLogsEventStream({taskId:$e,after:Je}){return new(P())(He=>{const et=new URLSearchParams;Je!==void 0&&et.set("after",String(Number(Je))),this.discoveryApi.getBaseUrl("scaffolder").then(Q=>{const ne=`${Q}/v2/tasks/${encodeURIComponent($e)}/eventstream`,ce=new EventSource(ne,{withCredentials:!0});ce.addEventListener("log",me=>{if(me.data)try{He.next(JSON.parse(me.data))}catch(tt){He.error(tt)}}),ce.addEventListener("completion",me=>{if(me.data)try{He.next(JSON.parse(me.data))}catch(tt){He.error(tt)}ce.close(),He.complete()}),ce.addEventListener("error",me=>{He.error(me)})},Q=>{He.error(Q)})})}streamLogsPolling({taskId:$e,after:Je}){let He=Je;return new(P())(et=>{this.discoveryApi.getBaseUrl("scaffolder").then(async Q=>{for(;!et.closed;){const ne=`${Q}/v2/tasks/${encodeURIComponent($e)}/events?${n().stringify({after:He})}`,ce=await this.fetchApi.fetch(ne);if(!ce.ok){await new Promise(tt=>setTimeout(tt,1e3));continue}const me=await ce.json();for(const tt of me)if(He=Number(tt.id),et.next(tt),tt.type==="completion"){et.complete();return}}})})}async listActions(){const $e=await this.discoveryApi.getBaseUrl("scaffolder"),Je=await this.fetchApi.fetch(`${$e}/v2/actions`);if(!Je.ok)throw await h.VL.fromResponse(Je);return await Je.json()}}const je=Ce=>{var $e,Je,He,et;const{onChange:Q,schema:{title:ne="Entity",description:ce="An entity from the catalog"},required:me,uiSchema:tt,rawErrors:ht,formData:st,idSchema:Dt}=Ce,qt=($e=tt["ui:options"])==null?void 0:$e.allowedKinds,un=(Je=tt["ui:options"])==null?void 0:Je.defaultKind,Ut=(0,i.h_)(w.Ah),{value:Lt,loading:Vt}=(0,Z.default)(()=>Ut.getEntities(qt?{filter:{kind:qt}}:void 0)),on=Lt==null?void 0:Lt.items.map(X=>(0,w.$3)(X,{defaultKind:un})),sn=(0,c.useCallback)((X,Ne)=>{Q(Ne||"")},[Q]);return(0,c.useEffect)(()=>{(on==null?void 0:on.length)===1&&Q(on[0])},[on,Q]),c.createElement(y.Z,{margin:"normal",required:me,error:(ht==null?void 0:ht.length)>0&&!st},c.createElement(N.ZP,{disabled:(on==null?void 0:on.length)===1,id:Dt==null?void 0:Dt.$id,value:st||"",loading:Vt,onChange:sn,options:on||[],autoSelect:!0,freeSolo:(et=(He=tt["ui:options"])==null?void 0:He.allowArbitraryValues)!=null?et:!0,renderInput:X=>c.createElement(u.Z,{...X,label:ne,margin:"normal",helperText:ce,variant:"outlined",required:me,InputProps:X.InputProps})}))},Fe=Ce=>{const{onChange:$e,required:Je,schema:{title:He="Name",description:et="Unique name of the component"},rawErrors:Q,formData:ne,uiSchema:{"ui:autofocus":ce},idSchema:me,placeholder:tt}=Ce;return c.createElement(u.Z,{id:me==null?void 0:me.$id,label:He,placeholder:tt,helperText:et,required:Je,value:ne!=null?ne:"",onChange:({target:{value:ht}})=>$e(ht),margin:"normal",error:(Q==null?void 0:Q.length)>0&&!ne,inputProps:{autoFocus:ce}})},be=(Ce,$e)=>{e.y$.isValidObjectName(Ce)||$e.addError("must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},pt=Ce=>{var $e;const{formData:Je,onChange:He,uiSchema:et}=Ce,Q=(0,i.h_)(w.Ah),[ne,ce]=(0,c.useState)(""),[me,tt]=(0,c.useState)(!1),ht=(0,e.In)().isValidTag,st=($e=et["ui:options"])==null?void 0:$e.kinds,{loading:Dt,value:qt}=(0,Z.default)(async()=>{const Ut={fields:["metadata.tags"]};st&&(Ut.filter={kind:st});const Lt=await Q.getEntities(Ut);return[...new Set(Lt.items.flatMap(Vt=>{var on;return(on=Vt.metadata)==null?void 0:on.tags}).filter(Boolean))].sort()}),un=(Ut,Lt)=>{let Vt=!1,on=!1;const sn=Je||[];if((Lt==null?void 0:Lt.length)&&sn.length<Lt.length){const X=Lt[Lt.length-1]=Lt[Lt.length-1].toLocaleLowerCase("en-US").trim();Vt=!ht(X),on=sn.indexOf(X)!==-1}tt(Vt),ce(Vt?ne:""),!Vt&&!on&&He(Lt||[])};return(0,F.Z)(()=>He(Je||[])),c.createElement(y.Z,{margin:"normal"},c.createElement(N.ZP,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:un,value:Je||[],inputValue:ne,loading:Dt,options:qt||[],ChipProps:{size:"small"},renderInput:Ut=>c.createElement(u.Z,{...Ut,label:"Tags",onChange:Lt=>ce(Lt.target.value),error:me,helperText:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},vt=Ce=>{var $e;const{schema:{title:Je="Owner",description:He="The owner of the component"},uiSchema:et,...Q}=Ce,ne={...et,"ui:options":{allowedKinds:(($e=et["ui:options"])==null?void 0:$e.allowedKinds)||["Group","User"],defaultKind:"Group"}};return c.createElement(je,{...Q,schema:{title:Je,description:He},uiSchema:ne})},ze=Ce=>{const{allowedOwners:$e=[],rawErrors:Je,state:He,onChange:et}=Ce,Q=$e?$e.map(me=>({label:me,value:me})):[{label:"Loading...",value:"loading"}],{owner:ne,repoName:ce}=He;return c.createElement(c.Fragment,null,c.createElement(y.Z,{margin:"normal",required:!0,error:(Je==null?void 0:Je.length)>0&&!ne},$e!=null&&$e.length?c.createElement(se.Ph,{native:!0,label:"Owner Available",onChange:me=>et({owner:String(Array.isArray(me)?me[0]:me)}),disabled:$e.length===1,selected:ne,items:Q}):c.createElement(c.Fragment,null,c.createElement(nt.Z,{htmlFor:"ownerInput"},"Owner"),c.createElement(ct.Z,{id:"ownerInput",onChange:me=>et({owner:me.target.value}),value:ne})),c.createElement(we.Z,null,"The organization, user or project that this repo will belong to")),c.createElement(y.Z,{margin:"normal",required:!0,error:(Je==null?void 0:Je.length)>0&&!ce},c.createElement(nt.Z,{htmlFor:"repoNameInput"},"Repository"),c.createElement(ct.Z,{id:"repoNameInput",onChange:me=>et({repoName:me.target.value}),value:ce}),c.createElement(we.Z,null,"The name of the repository")))},mt=Ce=>{const{allowedOwners:$e=[],rawErrors:Je,state:He,onChange:et}=Ce,Q=$e?$e.map(me=>({label:me,value:me})):[{label:"Loading...",value:"loading"}],{owner:ne,repoName:ce}=He;return c.createElement(c.Fragment,null,c.createElement(y.Z,{margin:"normal",required:!0,error:(Je==null?void 0:Je.length)>0&&!ne},$e!=null&&$e.length?c.createElement(se.Ph,{native:!0,label:"Owner Available",onChange:me=>et({owner:String(Array.isArray(me)?me[0]:me)}),disabled:$e.length===1,selected:ne,items:Q}):c.createElement(c.Fragment,null,c.createElement(nt.Z,{htmlFor:"ownerInput"},"Owner"),c.createElement(ct.Z,{id:"ownerInput",onChange:me=>et({owner:me.target.value}),value:ne})),c.createElement(we.Z,null,"The organization, user or project that this repo will belong to")),c.createElement(y.Z,{margin:"normal",required:!0,error:(Je==null?void 0:Je.length)>0&&!ce},c.createElement(nt.Z,{htmlFor:"repoNameInput"},"Repository"),c.createElement(ct.Z,{id:"repoNameInput",onChange:me=>et({repoName:me.target.value}),value:ce}),c.createElement(we.Z,null,"The name of the repository")))},_t=Ce=>{const{rawErrors:$e,state:Je,onChange:He}=Ce,{organization:et,repoName:Q,owner:ne}=Je;return c.createElement(c.Fragment,null,c.createElement(y.Z,{margin:"normal",required:!0,error:($e==null?void 0:$e.length)>0&&!et},c.createElement(nt.Z,{htmlFor:"orgInput"},"Organization"),c.createElement(ct.Z,{id:"orgInput",onChange:ce=>He({organization:ce.target.value}),value:et}),c.createElement(we.Z,null,"The organization that this repo will belong to")),c.createElement(y.Z,{margin:"normal",required:!0,error:($e==null?void 0:$e.length)>0&&!ne},c.createElement(nt.Z,{htmlFor:"ownerInput"},"Owner"),c.createElement(ct.Z,{id:"ownerInput",onChange:ce=>He({owner:ce.target.value}),value:ne}),c.createElement(we.Z,null,"The Owner that this repo will belong to")),c.createElement(y.Z,{margin:"normal",required:!0,error:($e==null?void 0:$e.length)>0&&!Q},c.createElement(nt.Z,{htmlFor:"repoNameInput"},"Repository"),c.createElement(ct.Z,{id:"repoNameInput",onChange:ce=>He({repoName:ce.target.value}),value:Q}),c.createElement(we.Z,null,"The name of the repository")))},Ie=Ce=>{const{onChange:$e,rawErrors:Je,state:He}=Ce,{host:et,workspace:Q,project:ne,repoName:ce}=He;return c.createElement(c.Fragment,null,et==="bitbucket.org"&&c.createElement(y.Z,{margin:"normal",required:!0,error:(Je==null?void 0:Je.length)>0&&!Q},c.createElement(nt.Z,{htmlFor:"workspaceInput"},"Workspace"),c.createElement(ct.Z,{id:"workspaceInput",onChange:me=>$e({workspace:me.target.value}),value:Q}),c.createElement(we.Z,null,"The Organization that this repo will belong to")),c.createElement(y.Z,{margin:"normal",required:!0,error:(Je==null?void 0:Je.length)>0&&!ne},c.createElement(nt.Z,{htmlFor:"projectInput"},"Project"),c.createElement(ct.Z,{id:"projectInput",onChange:me=>$e({project:me.target.value}),value:ne}),c.createElement(we.Z,null,"The Project that this repo will belong to")),c.createElement(y.Z,{margin:"normal",required:!0,error:(Je==null?void 0:Je.length)>0&&!ce},c.createElement(nt.Z,{htmlFor:"repoNameInput"},"Repository"),c.createElement(ct.Z,{id:"repoNameInput",onChange:me=>$e({repoName:me.target.value}),value:ce}),c.createElement(we.Z,null,"The name of the repository")))},ue=Ce=>{const{host:$e,hosts:Je,onChange:He,rawErrors:et}=Ce,Q=(0,i.h_)($t),{value:{integrations:ne}={integrations:[]},loading:ce}=(0,Z.default)(async()=>await Q.getIntegrationsList({allowedHosts:Je!=null?Je:[]}));(0,c.useEffect)(()=>{$e||(Je!=null&&Je.length?He(Je[0]):ne!=null&&ne.length&&He(ne[0].host))},[Je,$e,He,ne]);const me=ne?ne.filter(tt=>Je!=null&&Je.length?Je==null?void 0:Je.includes(tt.host):!0).map(tt=>({label:tt.title,value:tt.host})):[{label:"Loading...",value:"loading"}];return ce?c.createElement(se.Ex,null):c.createElement(c.Fragment,null,c.createElement(y.Z,{margin:"normal",required:!0,error:(et==null?void 0:et.length)>0&&!$e},c.createElement(se.Ph,{native:!0,disabled:(Je==null?void 0:Je.length)===1,label:"Host",onChange:tt=>He(String(Array.isArray(tt)?tt[0]:tt)),selected:$e,items:me,"data-testid":"host-select"}),c.createElement(we.Z,null,"The host where the repository will be created")))};function Ze(Ce){if(!Ce.host)return;const $e=new URLSearchParams;return Ce.owner&&$e.set("owner",Ce.owner),Ce.repoName&&$e.set("repo",Ce.repoName),Ce.organization&&$e.set("organization",Ce.organization),Ce.workspace&&$e.set("workspace",Ce.workspace),Ce.project&&$e.set("project",Ce.project),`${Ce.host}?${$e.toString()}`}function rt(Ce){let $e="",Je="",He="",et="",Q="",ne="";try{if(Ce){const ce=new URL(`https://${Ce}`);$e=ce.host,Je=ce.searchParams.get("owner")||"",He=ce.searchParams.get("repo")||"",et=ce.searchParams.get("organization")||"",Q=ce.searchParams.get("workspace")||"",ne=ce.searchParams.get("project")||""}}catch{}return{host:$e,owner:Je,repoName:He,organization:et,workspace:Q,project:ne}}const le=(0,c.createContext)(void 0),ie=({children:Ce})=>{const[$e,Je]=(0,c.useState)({});return c.createElement(le.Provider,{value:{secrets:$e,setSecrets:Je}},Ce)},ve=()=>{const Ce=(0,c.useContext)(le);if(!Ce)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:$e}=Ce;return{setSecrets:(0,c.useCallback)(He=>{$e(et=>({...et,...He}))},[$e])}},fe=Ce=>{var $e,Je;const{uiSchema:He,onChange:et,rawErrors:Q,formData:ne}=Ce,[ce,me]=(0,c.useState)(rt(ne)),tt=(0,i.h_)(te.q3),ht=(0,i.h_)(te.Om),{setSecrets:st}=ve(),Dt=(0,c.useMemo)(()=>{var Lt,Vt;return(Vt=(Lt=He==null?void 0:He["ui:options"])==null?void 0:Lt.allowedHosts)!=null?Vt:[]},[He]),qt=(0,c.useMemo)(()=>{var Lt,Vt;return(Vt=(Lt=He==null?void 0:He["ui:options"])==null?void 0:Lt.allowedOwners)!=null?Vt:[]},[He]);(0,c.useEffect)(()=>{et(Ze(ce))},[ce,et]),(0,c.useEffect)(()=>{qt.length===1&&me(Lt=>({...Lt,owner:qt[0]}))},[me,qt]);const un=(0,c.useCallback)(Lt=>{me(Vt=>({...Vt,...Lt}))},[me]);(0,ye.Z)(async()=>{var Lt;const{requestUserCredentials:Vt}=(Lt=He==null?void 0:He["ui:options"])!=null?Lt:{};if(!Vt||!(ce.host&&ce.owner&&ce.repoName))return;const[on,sn,X]=[ce.host,ce.owner,ce.repoName].map(encodeURIComponent),{token:Ne}=await ht.getCredentials({url:`https://${on}/${sn}/${X}`,additionalScope:{repoWrite:!0,customScopes:Vt.additionalScopes}});st({[Vt.secretsKey]:Ne})},500,[ce,He]);const Ut=(Je=ce.host&&(($e=tt.byHost(ce.host))==null?void 0:$e.type))!=null?Je:null;return c.createElement(c.Fragment,null,c.createElement(ue,{host:ce.host,hosts:Dt,onChange:Lt=>me(Vt=>({...Vt,host:Lt})),rawErrors:Q}),Ut==="github"&&c.createElement(ze,{allowedOwners:qt,rawErrors:Q,state:ce,onChange:un}),Ut==="gitlab"&&c.createElement(mt,{allowedOwners:qt,rawErrors:Q,state:ce,onChange:un}),Ut==="bitbucket"&&c.createElement(Ie,{rawErrors:Q,state:ce,onChange:un}),Ut==="azure"&&c.createElement(_t,{rawErrors:Q,state:ce,onChange:un}))},Ve=(Ce,$e,Je)=>{var He;try{const{host:et,searchParams:Q}=new URL(`https://${Ce}`),ne=Je.apiHolder.get(te.q3);et?(((He=ne==null?void 0:ne.byHost(et))==null?void 0:He.type)==="bitbucket"?(et==="bitbucket.org"&&!Q.get("workspace")&&$e.addError("Incomplete repository location provided, workspace not provided"),Q.get("project")||$e.addError("Incomplete repository location provided, project not provided")):Q.get("owner")||$e.addError("Incomplete repository location provided, owner not provided"),Q.get("repo")||$e.addError("Incomplete repository location provided, repo not provided")):$e.addError("Incomplete repository location provided, host not provided")}catch{$e.addError("Unable to parse the Repository URL")}},Et=Ce=>{var $e,Je;const{onChange:He,schema:{title:et="Entity",description:Q="An entity from the catalog"},required:ne,uiSchema:ce,rawErrors:me,formData:tt,idSchema:ht}=Ce,st=($e=ce["ui:options"])==null?void 0:$e.allowedKinds,Dt=(Je=ce["ui:options"])==null?void 0:Je.defaultKind,{ownedEntities:qt,loading:un}=ft(st),Ut=qt==null?void 0:qt.items.map(Vt=>(0,w.$3)(Vt,{defaultKind:Dt})).filter(Vt=>Vt),Lt=(Vt,on)=>{He(on||"")};return c.createElement(y.Z,{margin:"normal",required:ne,error:(me==null?void 0:me.length)>0&&!tt},c.createElement(N.ZP,{id:ht==null?void 0:ht.$id,value:tt||"",loading:un,onChange:Lt,options:Ut||[],autoSelect:!0,freeSolo:!0,renderInput:Vt=>c.createElement(u.Z,{...Vt,label:et,margin:"normal",helperText:Q,variant:"outlined",required:ne,InputProps:Vt.InputProps})}))};function ft(Ce){const $e=(0,i.h_)(i.$4),Je=(0,i.h_)(w.Ah),{loading:He,value:et}=(0,Z.default)(async()=>{const ce=(await $e.getBackstageIdentity()).ownershipEntityRefs;return await Je.getEntities(Ce?{filter:{kind:Ce,[`relations.${e.S4}`]:ce||[]}}:{filter:{[`relations.${e.S4}`]:ce||[]}})},[]),Q=(0,c.useMemo)(()=>et,[et]);return(0,c.useMemo)(()=>({loading:He,ownedEntities:Q}),[He,Q])}const Wt="scaffolder.extensions.wrapper.v1",Yt="scaffolder.extensions.field.v1";function ln(Ce){return{expose(){const $e=()=>null;return(0,i.R5)($e,Yt,Ce),$e}}}const gn=()=>null;(0,i.R5)(gn,Wt,!0);const Sn=(0,i.x8)({id:"register-component",optional:!0}),yn=(0,i.NT)({id:"scaffolder"}),Re=(0,i.Rz)({id:"scaffolder/selected-template",parent:yn,path:"/templates/:templateName"}),Xe=(0,i.Rz)({id:"scaffolder/task",parent:yn,path:"/tasks/:taskId"});(0,i.Rz)({id:"scaffolder/actions",parent:yn,path:"/actions"});const dt=(0,i.rx)({id:"scaffolder",apis:[(0,i.ni)({api:$t,deps:{discoveryApi:i.NW,scmIntegrationsApi:te.q3,fetchApi:i.gP},factory:({discoveryApi:Ce,scmIntegrationsApi:$e,fetchApi:Je})=>new Pt({discoveryApi:Ce,scmIntegrationsApi:$e,fetchApi:Je})})],routes:{root:yn},externalRoutes:{registerComponent:Sn}}),Gt=dt.provide(ln({component:je,name:"EntityPicker"})),Bt=dt.provide(ln({component:Fe,name:"EntityNamePicker",validation:be})),rn=dt.provide(ln({component:fe,name:"RepoUrlPicker",validation:Ve})),fn=dt.provide(ln({component:vt,name:"OwnerPicker"})),Pn=dt.provide((0,i.P4)({name:"ScaffolderPage",component:()=>Promise.all([t.e(4778),t.e(6637),t.e(6970)]).then(t.bind(t,6970)).then(Ce=>Ce.Router),mountPoint:yn})),An=dt.provide(ln({component:Et,name:"OwnedEntityPicker"})),_n=dt.provide(ln({component:pt,name:"EntityTagsPicker"})),Pe=c.createElement(he.Z,{fontSize:"small"}),Ae=c.createElement(V.Z,{fontSize:"small"}),_=()=>{const Ce=(0,i.h_)(i.$v),{error:$e,loading:Je,availableTypes:He,selectedTypes:et,setSelectedTypes:Q}=(0,w.Uh)();return Je?c.createElement(se.Ex,null):He?$e?(Ce.post({message:"Failed to load entity types",severity:"error"}),null):c.createElement(O.Z,{pb:1,pt:1},c.createElement(K.Z,{variant:"button"},"Categories"),c.createElement(N.ZP,{multiple:!0,"aria-label":"Categories",options:He,value:et,onChange:(ne,ce)=>Q(ce),renderOption:(ne,{selected:ce})=>c.createElement(D.Z,{control:c.createElement(g.Z,{icon:Pe,checkedIcon:Ae,checked:ce}),label:de()(ne)}),size:"small",popupIcon:c.createElement(C.Z,{"data-testid":"categories-picker-expand"}),renderInput:ne=>c.createElement(u.Z,{...ne,variant:"outlined"})})):null};function S(Ce,$e){var Je,He,et;switch($e.type){case"INIT":{Ce.steps=$e.data.spec.steps.reduce((Q,ne)=>(Q[ne.id]={status:"open",id:ne.id},Q),{}),Ce.stepLogs=$e.data.spec.steps.reduce((Q,ne)=>(Q[ne.id]=[],Q),{}),Ce.loading=!1,Ce.error=void 0,Ce.completed=!1,Ce.task=$e.data;return}case"LOGS":{const Q=$e.data;for(const ne of Q){const ce=`${ne.createdAt} ${ne.body.message}`;if(!ne.body.stepId||!((Je=Ce.steps)!=null&&Je[ne.body.stepId]))continue;const me=(He=Ce.stepLogs)==null?void 0:He[ne.body.stepId],tt=(et=Ce.steps)==null?void 0:et[ne.body.stepId];ne.body.status&&ne.body.status!==tt.status&&(tt.status=ne.body.status,tt.status==="processing"&&(tt.startedAt=ne.createdAt),["cancelled","failed","completed"].includes(tt.status)&&(tt.endedAt=ne.createdAt)),me==null||me.push(ce)}return}case"COMPLETED":{Ce.completed=!0,Ce.output=$e.data.body.output;return}case"ERROR":{Ce.error=$e.data,Ce.loading=!1,Ce.completed=!0;return}default:return}}const x=Ce=>{const $e=(0,i.h_)($t),[Je,He]=(0,ut.C)(S,{loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,c.useEffect)(()=>{let et=!1,Q,ne;return $e.getTask(Ce).then(ce=>{if(et)return;He({type:"INIT",data:ce});const me=$e.streamLogs({taskId:Ce}),tt=new Array;function ht(){if(tt.length){const st=tt.splice(0,tt.length);He({type:"LOGS",data:st})}}ne=setInterval(ht,500),Q=me.subscribe({next:st=>{switch(st.type){case"log":return tt.push(st);case"completion":ht(),He({type:"COMPLETED",data:st});return;default:throw new Error(`Unhandled event type ${st.type} in observer`)}},error:st=>{ht(),He({type:"ERROR",data:st})}})},ce=>{et||He({type:"ERROR",data:ce})}),()=>{et=!0,Q&&Q.unsubscribe(),ne&&clearInterval(ne)}},[$e,He,Ce]),Je},ee=(0,T.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}}),Ee=Ce=>{const{href:$e,text:Je,Icon:He,...et}=Ce,Q=ee();return c.createElement(f.Z,{container:!0,direction:"row",spacing:1},c.createElement(f.Z,{item:!0},c.createElement(K.Z,{component:"div",className:Q.svgIcon},He?c.createElement(He,null):c.createElement(Kt.Z,null))),c.createElement(f.Z,{item:!0},c.createElement(se.rU,{to:$e,...et},Je||$e)))},_e=({output:Ce})=>{const{links:$e=[]}=Ce,Je=(0,i.qD)(),He=(0,i.tg)(w.wi),et=Q=>{var ne;return Q&&(ne=Je.getSystemIcon(Q))!=null?ne:Kt.Z};return c.createElement(O.Z,{px:3,pb:3},$e.filter(({url:Q,entityRef:ne})=>Q||ne).map(({url:Q,entityRef:ne,title:ce,icon:me})=>{if(ne){const tt=(0,e.of)(ne),ht=He(tt);return{title:ce,icon:me,url:ht}}return{title:ce,icon:me,url:Q}}).map(({url:Q,title:ne,icon:ce},me)=>c.createElement(Ee,{key:`output-link-${me}`,href:Q,text:ne!=null?ne:Q,Icon:et(ce),target:"_blank"})))},We=t(75951),yt=(0,T.Z)(Ce=>(0,Be.Z)({root:{width:"100%"},button:{marginBottom:Ce.spacing(2),marginLeft:Ce.spacing(2)},actionsContainer:{marginBottom:Ce.spacing(2)},resetContainer:{padding:Ce.spacing(3)},labelWrapper:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between"},stepWrapper:{width:"100%"}})),kt=({step:Ce})=>{const[$e,Je]=(0,c.useState)("");return(0,nn.Z)(()=>{if(!Ce.startedAt){Je("");return}const He=Ce.endedAt?xe.ou.fromISO(Ce.endedAt):xe.ou.local(),et=xe.ou.fromISO(Ce.startedAt),Q=xe.Xp.fromDateTimes(et,He).toDuration().valueOf();Je(We(Q,{round:!0}))},1e3),c.createElement(K.Z,{variant:"caption"},$e)},Ft=(0,T.Z)(Ce=>(0,Be.Z)({root:{color:Ce.palette.text.disabled,display:"flex",height:22,alignItems:"center"},completed:{color:Ce.palette.status.ok},error:{color:Ce.palette.status.error}}));function bt(Ce){const $e=Ft(),{active:Je,completed:He,error:et}=Ce,Q=()=>Je?c.createElement(U.Z,{size:"24px"}):He?c.createElement(Y.Z,null):et?c.createElement(L.Z,null):c.createElement(z.Z,null);return c.createElement("div",{className:Ue()($e.root,{[$e.completed]:He,[$e.error]:et})},Q())}const mn=(0,c.memo)(({steps:Ce,currentStepId:$e,onUserStepChange:Je})=>{const He=yt();return c.createElement("div",{className:He.root},c.createElement(It.Z,{activeStep:Ce.findIndex(et=>et.id===$e),orientation:"vertical",nonLinear:!0},Ce.map((et,Q)=>{const ne=et.status==="completed",ce=et.status==="failed",me=et.status==="processing",tt=et.status==="skipped";return c.createElement(Ke.Z,{key:String(Q),expanded:!0},c.createElement(p.Z,{onClick:()=>Je(et.id)},c.createElement(j.Z,{StepIconProps:{completed:ne,error:ce,active:me},StepIconComponent:bt,className:He.stepWrapper},c.createElement("div",{className:He.labelWrapper},c.createElement(K.Z,{variant:"subtitle2"},et.name),tt?c.createElement(K.Z,{variant:"caption"},"Skipped"):c.createElement(kt,{step:et})))))})))}),cn=({links:Ce=[]})=>Ce.length>0,wn=({loadingText:Ce})=>{const $e=yt(),Je=(0,At.s0)(),He=(0,i.tg)(yn),et=(0,i.tg)(Re),[Q,ne]=(0,c.useState)(void 0),[ce,me]=(0,c.useState)(void 0),{taskId:tt}=(0,At.UO)(),ht=x(tt),st=ht.completed,Dt=(0,c.useMemo)(()=>{var on,sn;return(sn=(on=ht.task)==null?void 0:on.spec.steps.map(X=>{var Ne;return{...X,...(Ne=ht==null?void 0:ht.steps)==null?void 0:Ne[X.id]}}))!=null?sn:[]},[ht]);(0,c.useEffect)(()=>{var on;const sn=Dt.find(X=>["failed","processing"].includes(X.status));if(st&&!sn){me((on=Dt[Dt.length-1])==null?void 0:on.id);return}me(sn==null?void 0:sn.id)},[Dt,st]);const qt=Q!=null?Q:ce,un=(0,c.useMemo)(()=>{if(!qt)return Ce||"Loading...";const on=ht.stepLogs[qt];return on!=null&&on.length?on.join(`
`):"Waiting for logs..."},[ht.stepLogs,qt,Ce]),Ut=ht.completed===!0&&ht.loading===!1&&!ht.task,{output:Lt}=ht,Vt=()=>{var on,sn,X;if(!ht.task||!((sn=(on=ht.task)==null?void 0:on.spec.templateInfo)!=null&&sn.entityRef)){Je(He());return}const Ne=ht.task.spec.parameters,{name:it}=(0,e.of)((X=ht.task.spec.templateInfo)==null?void 0:X.entityRef);Je(`${et({templateName:it})}?${n().stringify({formData:JSON.stringify(Ne)})}`)};return c.createElement(se.T3,{themeId:"home"},c.createElement(se.h4,{pageTitleOverride:`Task ${tt}`,title:"Task Activity",subtitle:`Activity for task: ${tt}`}),c.createElement(se.VY,null,Ut?c.createElement(se.mf,{status:"404",statusMessage:"Task not found",additionalInfo:"No task found with this ID"}):c.createElement("div",null,c.createElement(f.Z,{container:!0},c.createElement(f.Z,{item:!0,xs:3},c.createElement(d.Z,null,c.createElement(mn,{steps:Dt,currentStepId:qt,onUserStepChange:ne}),Lt&&cn(Lt)&&c.createElement(_e,{output:Lt}),c.createElement(A.Z,{className:$e.button,onClick:Vt,disabled:!st,variant:"contained",color:"primary"},"Start Over"))),c.createElement(f.Z,{item:!0,xs:9},!qt&&c.createElement(se.Ex,null),c.createElement("div",{style:{height:"80vh"}},c.createElement(se.nU,{text:un})))))))}},78990:function(Tt,l,t){t.d(l,{Ho:function(){return e.x},sG:function(){return e.w}});var e=t(96575),i=t(34520),h=t(30705),s=t(32272),n=t(19126),R=t.n(n),P=t(82394),w=t.n(P),u=t(73495),y=t(2784),O=t(49462),K=t(49558),D=t(82108),g=t.n(D),T=t(72779),f=t.n(T)},86607:function(Tt,l,t){t.d(l,{D:function(){return An},S:function(){return Dt},a:function(){return yn},b:function(){return Sn},c:function(){return _n},d:function(){return cn},f:function(){return Wt},g:function(){return Yt},h:function(){return fn},k:function(){return on},m:function(){return kt},o:function(){return ee},r:function(){return _},t:function(){return We},u:function(){return wn},v:function(){return yt}});var e=t(30705),i=t(32272),h=t(19126),s=t.n(h),n=t(2784),R=t(36444),P=t(79692),w=t(50581),u=t(61837),y=t(74603),O=t(86619),K=t(7089),D=t(42494),g=t(84899),T=t(5806),f=t(21324),U=t(56939),p=t(73698),d=t(12231),A=t(38402),N=t(86136),c=t(49378),Z=t(95544),F=t(85256),te=t(77277),we=t(60364),ct=t(79249),nt=t(27556),se=t(38724),ye=t(60905),Le=t(11776),de=t(49429),V=t(8629),he=t(90436),C=t(94339),Ke=t(32552),j=t(24579),It=t(27616),Be=t(8284),L=t(70660),Y=t(99152),z=t(6487),ge=t(48760),Ue=t(21853),xe=t(33375),At=t(64279),nn=t(25557),ut=t(88013),Kt=t(99688),$t=t(69294),Pt=t(69001),je=t(49558),Fe=t(15277),be=t.n(Fe),pt=t(35352),vt=t(27742),ze=t(10289),mt=t(73495),_t=t(34520),Ie=t(62155),ue=t(38016),Ze=t(56881);const rt=(0,e.T0)({id:"plugin.search.queryservice"});class le{constructor(Ne){this.discoveryApi=Ne.discoveryApi,this.identityApi=Ne.identityApi}async query(Ne){const{token:it}=await this.identityApi.getCredentials(),St=s().stringify(Ne),at=`${await this.discoveryApi.getBaseUrl("search/query")}?${St}`,Ot=await fetch(at,{headers:it?{Authorization:`Bearer ${it}`}:{}});if(!Ot.ok)throw await i.VL.fromResponse(Ot);return Ot.json()}}const ie=(0,P.Z)(X=>({filters:{width:"250px",display:"flex"},icon:{margin:X.spacing(-1,0,0,0)}})),ve=({numberOfSelectedFilters:X,handleToggleFilters:Ne})=>{const it=ie();return React.createElement("div",{className:it.filters},React.createElement(IconButton,{className:it.icon,"aria-label":"settings",onClick:Ne},React.createElement(FilterListIcon,null)),React.createElement(Typography,{variant:"h6"},"Filters (",X||0,")"))},fe=(0,P.Z)(X=>({filters:{background:"transparent",boxShadow:"0px 0px 0px 0px"},checkbox:{padding:X.spacing(0,1,0,1)},dropdown:{width:"100%"}})),Ve=({filters:X,filterOptions:Ne,resetFilters:it,updateSelected:St,updateChecked:at})=>{const Ot=fe();return React.createElement(Card,{className:Ot.filters},React.createElement(CardHeader,{title:React.createElement(Typography,{variant:"h6"},"Filters"),action:React.createElement(Button,{color:"primary",onClick:()=>it()},"CLEAR ALL")}),React.createElement(Divider,null),Ne.kind.length===0&&Ne.lifecycle.length===0&&React.createElement(CardContent,null,React.createElement(Typography,{variant:"subtitle2"},"Filters cannot be applied to available results")),Ne.kind.length>0&&React.createElement(CardContent,null,React.createElement(Typography,{variant:"subtitle2"},"Kind"),React.createElement(Select,{id:"outlined-select",onChange:wt=>{var hn;return St((hn=wt==null?void 0:wt.target)==null?void 0:hn.value)},variant:"outlined",className:Ot.dropdown,value:X.selected},Ne.kind.map(wt=>React.createElement(MenuItem,{selected:wt==="",dense:!0,key:wt,value:wt},wt)))),Ne.lifecycle.length>0&&React.createElement(CardContent,null,React.createElement(Typography,{variant:"subtitle2"},"Lifecycle"),React.createElement(List,{disablePadding:!0,dense:!0},Ne.lifecycle.map(wt=>React.createElement(ListItem,{key:wt,dense:!0,button:!0,onClick:()=>at(wt)},React.createElement(Checkbox,{edge:"start",disableRipple:!0,className:Ot.checkbox,color:"primary",checked:X.checked.includes(wt),tabIndex:-1,value:wt,name:wt}),React.createElement(ListItemText,{id:wt,primary:wt}))))))},Et=(0,n.createContext)(void 0),ft={term:"",pageCursor:void 0,filters:{},types:[]},Wt=({initialState:X=ft,children:Ne})=>{var it,St,at,Ot;const wt=(0,e.h_)(rt),[hn,pn]=(0,n.useState)(X.pageCursor),[Xt,En]=(0,n.useState)(X.filters),[J,o]=(0,n.useState)(X.term),[m,I]=(0,n.useState)(X.types),k=(0,nn.Z)(J),G=(0,At.default)(()=>wt.query({term:J,filters:Xt,pageCursor:hn,types:m}),[J,Xt,m,hn]),Me=!G.loading&&!G.error&&((it=G.value)==null?void 0:it.nextPageCursor),Ye=!G.loading&&!G.error&&((St=G.value)==null?void 0:St.previousPageCursor),oe=(0,n.useCallback)(()=>{var B;pn((B=G.value)==null?void 0:B.nextPageCursor)},[(at=G.value)==null?void 0:at.nextPageCursor]),b=(0,n.useCallback)(()=>{var B;pn((B=G.value)==null?void 0:B.previousPageCursor)},[(Ot=G.value)==null?void 0:Ot.previousPageCursor]);(0,n.useEffect)(()=>{J&&k&&J!==k&&pn(void 0)},[J,k,X.pageCursor]);const M={result:G,filters:Xt,setFilters:En,term:J,setTerm:o,types:m,setTypes:I,pageCursor:hn,setPageCursor:pn,fetchNextPage:Me?oe:void 0,fetchPreviousPage:Ye?b:void 0};return n.createElement(e.fC,{attributes:{searchTypes:m.sort().join(",")}},n.createElement(Et.Provider,{value:M,children:Ne}))},Yt=()=>{const X=(0,n.useContext)(Et);if(X===void 0)throw new Error("useSearch must be used within a SearchContextProvider");return X},ln=({children:X})=>{const Ne=(0,e.z$)(),{term:it}=Yt();return(0,n.useEffect)(()=>{it&&Ne.captureEvent("search",it)},[Ne,it]),n.createElement(n.Fragment,null,X)},gn=()=>(0,n.useContext)(Et)!==void 0,Sn=({onChange:X,onKeyDown:Ne,onSubmit:it,debounceTime:St=200,clearButton:at=!0,fullWidth:Ot=!0,value:wt,inputProps:hn={},endAdornment:pn,...Xt})=>{const En=(0,e.h_)(e.Ds),[J,o]=(0,n.useState)(wt),m=gn();(0,n.useEffect)(()=>{o(M=>M!==wt?wt:M)},[wt]),(0,ge.Z)(()=>X(J),St,[J]);const I=(0,n.useCallback)(M=>{o(M.target.value)},[o]),k=(0,n.useCallback)(M=>{Ne&&Ne(M),it&&M.key==="Enter"&&it()},[Ne,it]),G=(0,n.useCallback)(()=>{X("")},[X]),Me=`Search in ${En.getOptionalString("app.title")||"Backstage"}`,Ye=n.createElement(w.Z,{position:"start"},n.createElement(u.Z,{"aria-label":"Query",disabled:!0},n.createElement(Ue.Z,null))),oe=n.createElement(w.Z,{position:"end"},n.createElement(u.Z,{"aria-label":"Clear",onClick:G},n.createElement(xe.Z,null))),b=n.createElement(ln,null,n.createElement(y.Z,{"data-testid":"search-bar-next",value:J,placeholder:Me,startAdornment:Ye,endAdornment:at?oe:pn,inputProps:{"aria-label":"Search",...hn},fullWidth:Ot,onChange:I,onKeyDown:k,...Xt}));return m?b:n.createElement(Wt,null,b)},yn=({onChange:X,...Ne})=>{const{term:it,setTerm:St}=Yt(),at=(0,n.useCallback)(Ot=>{X?X(Ot):St(Ot)},[X,St]);return n.createElement(Sn,{value:it,onChange:at,...Ne})},Re=(X,Ne,it=[],St=250)=>{const at=(0,n.useRef)({}),Ot=X||(()=>Promise.resolve([])),[wt,hn]=(0,$t.default)(Ot,[Ne],{loading:!0});if((0,ge.Z)(()=>{at.current[Ne]===void 0&&(at.current[Ne]=hn(Ne).then(Xt=>(at.current[Ne]=Xt,Xt)))},St,[hn,Ne]),it.length)return{loading:!1,value:it};const pn=at.current[Ne];return Array.isArray(pn)?{loading:!1,value:pn}:wt},Xe=(X,Ne)=>{const{setFilters:it}=Yt();(0,n.useEffect)(()=>{Ne&&[Ne].flat().length>0&&it(St=>({...St,[X]:Ne}))},[])},dt=X=>{const{className:Ne,defaultValue:it,name:St,values:at,valuesDebounceMs:Ot,label:wt,filterSelectedOptions:hn,limitTags:pn,multiple:Xt}=X,[En,J]=(0,n.useState)("");Xe(St,it);const o=typeof at=="function"?at:void 0,m=typeof at=="function"?void 0:at,{value:I,loading:k}=Re(o,En,m,Ot),{filters:G,setFilters:Me}=Yt(),Ye=G[St]||(Xt?[]:null),oe=(B,re)=>{Me(ke=>{const{[St]:lt,...qe}=ke;return re?{...qe,[St]:re}:{...qe}})},b=B=>n.createElement(O.Z,{...B,name:"search",variant:"outlined",label:wt,fullWidth:!0}),M=(B,re)=>B.map((ke,lt)=>n.createElement(K.Z,{label:ke,color:"primary",...re({index:lt})}));return n.createElement(ut.ZP,{filterSelectedOptions:hn,limitTags:pn,multiple:Xt,className:Ne,id:`${Xt?"multi-":""}select-filter-${St}--select`,options:I||[],loading:k,value:Ye,onChange:oe,onInputChange:(B,re)=>J(re),renderInput:b,renderTags:M})},Gt=(0,P.Z)({label:{textTransform:"capitalize"}}),Bt=X=>{const{className:Ne,defaultValue:it,label:St,name:at,values:Ot=[],valuesDebounceMs:wt}=X,hn=Gt(),{filters:pn,setFilters:Xt}=Yt();Xe(at,it);const En=typeof Ot=="function"?Ot:void 0,J=typeof Ot=="function"?void 0:Ot,{value:o=[],loading:m}=Re(En,"",J,wt),I=k=>{const{target:{value:G,checked:Me}}=k;Xt(Ye=>{const{[at]:oe,...b}=Ye,M=(oe||[]).filter(re=>re!==G),B=Me?[...M,G]:M;return B.length?{...b,[at]:B}:b})};return n.createElement(D.Z,{className:Ne,disabled:m,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},St?n.createElement(g.Z,{className:hn.label},St):null,o.map(k=>{var G;return n.createElement(T.Z,{key:k,control:n.createElement(f.Z,{color:"primary",tabIndex:-1,inputProps:{"aria-labelledby":k},value:k,name:k,onChange:I,checked:((G=pn[at])!=null?G:[]).includes(k)}),label:k})}))},rn=X=>{const{className:Ne,defaultValue:it,label:St,name:at,values:Ot,valuesDebounceMs:wt}=X,hn=Gt();Xe(at,it);const pn=typeof Ot=="function"?Ot:void 0,Xt=typeof Ot=="function"?void 0:Ot,{value:En=[],loading:J}=Re(pn,"",Xt,wt),{filters:o,setFilters:m}=Yt(),I=k=>{const{target:{value:G}}=k;m(Me=>{const{[at]:Ye,...oe}=Me;return G?{...oe,[at]:G}:oe})};return n.createElement(D.Z,{disabled:J,className:Ne,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},St?n.createElement(U.Z,{className:hn.label,margin:"dense"},St):null,n.createElement(p.Z,{variant:"outlined",value:o[at]||"",onChange:I},n.createElement(d.Z,{value:""},n.createElement("em",null,"All")),En.map(k=>n.createElement(d.Z,{key:k,value:k},k))))},fn=({component:X,...Ne})=>n.createElement(X,{...Ne});fn.Checkbox=X=>n.createElement(fn,{...X,component:Bt}),fn.Select=X=>n.createElement(fn,{...X,component:rn}),fn.Autocomplete=X=>n.createElement(fn,{...X,component:dt});const Pn=null,An=({result:X,icon:Ne,secondaryAction:it,lineClamp:St=5})=>n.createElement(je.rU,{to:X.location},n.createElement(A.Z,{alignItems:"center"},Ne&&n.createElement(N.Z,null,Ne),n.createElement(c.Z,{primaryTypographyProps:{variant:"h6"},primary:X.title,secondary:n.createElement(be(),{line:St,truncateText:"\u2026",text:X.text,element:"span"})}),it&&n.createElement(Z.Z,{alignItems:"flex-end"},it)),n.createElement(F.Z,null)),_n=({children:X})=>{const{result:{loading:Ne,error:it,value:St}}=Yt();return Ne?n.createElement(je.Ex,null):it?n.createElement(je.Gk,{title:"Error encountered while fetching search results",error:it}):St!=null&&St.results.length?n.createElement(n.Fragment,null,X({results:St.results})):n.createElement(je.ub,{missing:"data",title:"Sorry, no results were found"})},Pe=(0,P.Z)(X=>({root:{display:"flex",justifyContent:"space-between",gap:X.spacing(2),margin:X.spacing(2,0)}})),Ae=()=>{const{fetchNextPage:X,fetchPreviousPage:Ne}=Yt(),it=Pe();return!X&&!Ne?n.createElement(n.Fragment,null):n.createElement("nav",{"arial-label":"pagination navigation",className:it.root},n.createElement(te.Z,{"aria-label":"previous page",disabled:!Ne,onClick:Ne,startIcon:n.createElement(pt.Z,null)},"Previous"),n.createElement(te.Z,{"aria-label":"next page",disabled:!X,onClick:X,endIcon:n.createElement(vt.Z,null)},"Next"))},_=(0,e.NT)({id:"search"}),S=(0,e.NT)({id:"search:next"}),x=(0,e.rx)({id:"search",apis:[(0,e.ni)({api:rt,deps:{discoveryApi:e.NW,identityApi:e.$4},factory:({discoveryApi:X,identityApi:Ne})=>new le({discoveryApi:X,identityApi:Ne})})],routes:{root:_,nextRoot:S}}),ee=x.provide((0,e.P4)({name:"SearchPage",component:()=>t.e(2550).then(t.bind(t,12550)).then(X=>X.SearchPage),mountPoint:_})),Ee=x.provide((0,e.P4)({name:"SearchPageNext",component:()=>t.e(2550).then(t.bind(t,12550)).then(X=>X.SearchPage),mountPoint:S}));x.provide((0,e.CO)({name:"SearchBar",component:{lazy:()=>t.e(9637).then(t.bind(t,19637)).then(X=>X.SearchBar)}}));const _e=x.provide((0,e.CO)({name:"SearchBarNext",component:{lazy:()=>t.e(9637).then(t.bind(t,19637)).then(X=>X.SearchBar)}})),We=x.provide((0,e.CO)({name:"SearchResult",component:{lazy:()=>t.e(6336).then(t.bind(t,56336)).then(X=>X.SearchResult)}}));x.provide((0,e.CO)({name:"SearchResultNext",component:{lazy:()=>t.e(6336).then(t.bind(t,56336)).then(X=>X.SearchResult)}}));const yt=x.provide((0,e.CO)({name:"SidebarSearchModal",component:{lazy:()=>t.e(1925).then(t.bind(t,81925)).then(X=>X.SidebarSearchModal)}})),kt=x.provide((0,e.CO)({name:"DefaultResultListItem",component:{lazy:()=>t.e(6182).then(t.bind(t,16182)).then(X=>X.DefaultResultListItem)}})),Ft=x.provide((0,e.CO)({name:"HomePageSearchBar",component:{lazy:()=>t.e(2717).then(t.bind(t,12409)).then(X=>X.HomePageSearchBar)}})),bt=(0,P.Z)(X=>({container:{borderRadius:30,display:"flex",height:"2.4em"},input:{flex:1},paperFullWidth:{height:"calc(100% - 128px)"},dialogActionsContainer:{padding:X.spacing(1,3)},viewResultsLink:{verticalAlign:"0.5em"}})),mn=({toggleModal:X})=>{const Ne=(0,e.tg)(_),it=bt(),{term:St}=Yt(),{focusContent:at}=(0,je.r0)(),{transitions:Ot}=(0,we.Z)(),wt=()=>{X(),setTimeout(at,Ot.duration.leavingScreen)},hn=()=>{wt()};return n.createElement(n.Fragment,null,n.createElement(ct.Z,null,n.createElement(nt.Z,{className:it.container},n.createElement(yn,{className:it.input}))),n.createElement(se.Z,null,n.createElement(ye.Z,{container:!0,direction:"row-reverse",justifyContent:"flex-start",alignItems:"center"},n.createElement(ye.Z,{item:!0},n.createElement(je.rU,{onClick:()=>{X(),setTimeout(at,Ot.duration.leavingScreen)},to:`${Ne()}?query=${St}`},n.createElement("span",{className:it.viewResultsLink},"View Full Results"),n.createElement(Pt.Z,{color:"primary"})))),n.createElement(F.Z,null),n.createElement(_n,null,({results:pn})=>n.createElement(Le.Z,null,pn.map(({document:Xt})=>n.createElement("div",{role:"button",tabIndex:0,key:`${Xt.location}-btn`,onClick:wt,onKeyPress:hn},n.createElement(An,{key:Xt.location,result:Xt})))))),n.createElement(de.Z,{className:it.dialogActionsContainer},n.createElement(ye.Z,{container:!0,direction:"row"},n.createElement(ye.Z,{item:!0,xs:12},n.createElement(Ae,null)))))},cn=({open:X=!0,hidden:Ne,toggleModal:it})=>{const St=bt();return n.createElement(V.Z,{classes:{paperFullWidth:St.paperFullWidth},onClose:it,"aria-labelledby":"search-modal-title",fullWidth:!0,maxWidth:"lg",open:X,hidden:Ne},X&&n.createElement(Wt,null,n.createElement(mn,{toggleModal:it})))};function wn(X=!1){const[Ne,it]=(0,n.useState)({hidden:!X,open:X}),St=(0,n.useCallback)(()=>it(Ot=>({open:!0,hidden:!Ot.hidden})),[]),at=(0,n.useCallback)(Ot=>it(wt=>({open:wt.open||Ot,hidden:!Ot})),[]);return{state:Ne,toggleModal:St,setOpen:at}}const Ce=(0,P.Z)(()=>({root:{display:"flex",alignItems:"center"},input:{flex:1}})),$e=({searchQuery:X,handleSearch:Ne,handleClearSearchBar:it})=>{const St=Ce();return n.createElement(nt.Z,{component:"form",onSubmit:at=>Ne(at),className:St.root},n.createElement(u.Z,{disabled:!0,type:"submit","aria-label":"search"},n.createElement(Ue.Z,null)),n.createElement(y.Z,{className:St.input,placeholder:"Search in Backstage",value:X,onChange:at=>Ne(at),inputProps:{"aria-label":"search backstage"}}),n.createElement(u.Z,{"aria-label":"search",onClick:()=>it()},n.createElement(xe.Z,null)))},Je=(0,P.Z)(X=>({filters:{width:"250px",display:"flex"},icon:{margin:X.spacing(-1,0,0,0)}})),He=({numberOfSelectedFilters:X,handleToggleFilters:Ne})=>{const it=Je();return n.createElement("div",{className:it.filters},n.createElement(u.Z,{className:it.icon,"aria-label":"settings",onClick:Ne},n.createElement(R.Z,null)),n.createElement(he.Z,{variant:"h6"},"Filters (",X||0,")"))},et=(0,P.Z)(X=>({filters:{background:"transparent",boxShadow:"0px 0px 0px 0px"},checkbox:{padding:X.spacing(0,1,0,1)},dropdown:{width:"100%"}})),Q=({filters:X,filterOptions:Ne,resetFilters:it,updateSelected:St,updateChecked:at})=>{const Ot=et();return n.createElement(C.Z,{className:Ot.filters},n.createElement(Ke.Z,{title:n.createElement(he.Z,{variant:"h6"},"Filters"),action:n.createElement(te.Z,{color:"primary",onClick:()=>it()},"CLEAR ALL")}),n.createElement(F.Z,null),Ne.kind.length===0&&Ne.lifecycle.length===0&&n.createElement(j.Z,null,n.createElement(he.Z,{variant:"subtitle2"},"Filters cannot be applied to available results")),Ne.kind.length>0&&n.createElement(j.Z,null,n.createElement(he.Z,{variant:"subtitle2"},"Kind"),n.createElement(p.Z,{id:"outlined-select",onChange:wt=>{var hn;return St((hn=wt==null?void 0:wt.target)==null?void 0:hn.value)},variant:"outlined",className:Ot.dropdown,value:X.selected},Ne.kind.map(wt=>n.createElement(d.Z,{selected:wt==="",dense:!0,key:wt,value:wt},wt)))),Ne.lifecycle.length>0&&n.createElement(j.Z,null,n.createElement(he.Z,{variant:"subtitle2"},"Lifecycle"),n.createElement(Le.Z,{disablePadding:!0,dense:!0},Ne.lifecycle.map(wt=>n.createElement(A.Z,{key:wt,dense:!0,button:!0,onClick:()=>at(wt)},n.createElement(f.Z,{edge:"start",disableRipple:!0,className:Ot.checkbox,color:"primary",checked:X.checked.includes(wt),tabIndex:-1,value:wt,name:wt}),n.createElement(c.Z,{id:wt,primary:wt}))))))},ne=(0,P.Z)(X=>({searchQuery:{color:X.palette.text.primary,background:X.palette.background.default,borderRadius:"10%"},tableHeader:{margin:X.spacing(1,0,0,0),display:"flex"},divider:{width:"1px",margin:X.spacing(0,2),padding:X.spacing(2,0)}})),ce=[{title:"Name",field:"name",highlight:!0,render:X=>n.createElement(je.rU,{to:X.url||""},X.name)},{title:"Description",field:"description"},{title:"Owner",field:"owner"},{title:"Kind",field:"kind"},{title:"LifeCycle",field:"lifecycle"}],me=({searchQuery:X,numberOfSelectedFilters:Ne,numberOfResults:it,handleToggleFilters:St})=>{const at=ne();return n.createElement("div",{className:at.tableHeader},n.createElement(He,{numberOfSelectedFilters:Ne,handleToggleFilters:St}),n.createElement(F.Z,{className:at.divider,orientation:"vertical"}),n.createElement(ye.Z,{item:!0,xs:12},X?n.createElement(he.Z,{variant:"h6"},`${it} `,it>1?"results for ":"result for ",n.createElement("span",{className:at.searchQuery},'"',X,'"')," "):n.createElement(he.Z,{variant:"h6"},`${it} results`)))},tt=({searchQuery:X})=>{const Ne=(0,e.h_)(mt.Ah),[it,St]=(0,n.useState)(!1),[at,Ot]=(0,n.useState)({selected:"",checked:[]}),[wt,hn]=(0,n.useState)([]),{loading:pn,error:Xt,value:En}=(0,At.default)(async()=>(await Ne.getEntities()).items.map(G=>{var Me,Ye,oe,b,M;return{name:G.metadata.name,description:G.metadata.description,owner:typeof((Me=G.spec)==null?void 0:Me.owner)=="string"?(Ye=G.spec)==null?void 0:Ye.owner:void 0,kind:G.kind,lifecycle:typeof((oe=G.spec)==null?void 0:oe.lifecycle)=="string"?(b=G.spec)==null?void 0:b.lifecycle:void 0,url:`/catalog/${((M=G.metadata.namespace)==null?void 0:M.toLocaleLowerCase("en-US"))||_t.zG}/${G.kind.toLocaleLowerCase("en-US")}/${G.metadata.name}`}}),[]);if((0,n.useEffect)(()=>{if(En){let k=En;at.selected!==""&&(k=En.filter(G=>at.selected.includes(G.kind))),at.checked.length>0&&(k=k.filter(G=>G.lifecycle&&at.checked.includes(G.lifecycle))),X&&(k=k.filter(G=>{var Me,Ye,oe;return((Me=G.name)==null?void 0:Me.toLocaleLowerCase("en-US").includes(X))||((Ye=G.name)==null?void 0:Ye.toLocaleLowerCase("en-US").includes(X.split(" ").join("-")))||((oe=G.description)==null?void 0:oe.toLocaleLowerCase("en-US").includes(X))})),hn(k)}},[at,X,En]),pn)return n.createElement(je.Ex,null);if(Xt)return n.createElement(Kt.Z,{severity:"error"},"Error encountered while fetching search results. ",Xt.toString());if(!En||En.length===0)return n.createElement(je.ub,{missing:"data",title:"Sorry, no results were found"});const J=()=>{Ot({selected:"",checked:[]})},o=k=>{Ot(G=>({...G,selected:k}))},m=k=>{if(at.checked.includes(k)){Ot(G=>({...G,checked:G.checked.filter(Me=>Me!==k)}));return}Ot(G=>({...G,checked:[...G.checked,k]}))},I=En.reduce((k,G)=>(G.kind&&k.kind.indexOf(G.kind)<0&&k.kind.push(G.kind),G.lifecycle&&k.lifecycle.indexOf(G.lifecycle)<0&&k.lifecycle.push(G.lifecycle),k),{kind:[],lifecycle:[]});return n.createElement(n.Fragment,null,n.createElement(ye.Z,{container:!0},it&&n.createElement(ye.Z,{item:!0,xs:3},n.createElement(Q,{filters:at,filterOptions:I,resetFilters:J,updateSelected:o,updateChecked:m})),n.createElement(ye.Z,{item:!0,xs:it?9:12},n.createElement(je.iA,{options:{paging:!0,pageSize:20,search:!1},data:wt,columns:ce,title:n.createElement(me,{searchQuery:X,numberOfResults:wt.length,numberOfSelectedFilters:(at.selected!==""?1:0)+at.checked.length,handleToggleFilters:()=>St(!it)})}))))},ht=()=>{const[X,Ne]=(0,je.tA)("query"),[it,St]=(0,n.useState)(X!=null?X:""),at=wt=>{wt.preventDefault(),St(wt.target.value)};(0,n.useEffect)(()=>St(X!=null?X:""),[X]),(0,ge.Z)(()=>{Ne(it)},200,[it]);const Ot=()=>{St("")};return n.createElement(je.T3,{themeId:"home"},n.createElement(je.h4,{title:"Search"}),n.createElement(je.VY,null,n.createElement(ye.Z,{container:!0,direction:"row"},n.createElement(ye.Z,{item:!0,xs:12},n.createElement($e,{handleSearch:at,handleClearSearchBar:Ot,searchQuery:it})),n.createElement(ye.Z,{item:!0,xs:12},n.createElement(tt,{searchQuery:(X!=null?X:"").toLocaleLowerCase("en-US")})))))},st=()=>{const X=(0,ze.TH)(),{term:Ne,setTerm:it,types:St,setTypes:at,pageCursor:Ot,setPageCursor:wt,filters:hn,setFilters:pn}=Yt(),Xt=(0,nn.Z)(X.search);return(0,n.useEffect)(()=>{if(X.search===Xt)return;const En=s().parse(X.search.substring(1),{arrayLimit:0})||{};En.filters&&pn(En.filters),En.query&&it(En.query),En.pageCursor&&wt(En.pageCursor),En.types&&at(En.types)},[Xt,X,it,at,wt,pn]),(0,n.useEffect)(()=>{const En=s().stringify({query:Ne,types:St,pageCursor:Ot,filters:hn},{arrayFormat:"brackets"}),J=`${window.location.pathname}?${En}`;window.history.replaceState(null,document.title,J)},[Ne,St,Ot,hn]),null},Dt=()=>{const X=(0,ze.pC)();return n.createElement(Wt,null,n.createElement(st,null),X||n.createElement(ht,null))},qt=(0,P.Z)(X=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:X.spacing(1)},icon:{color:X.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:X.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:X.spacing(2,0),"&.Mui-expanded":{margin:X.spacing(2,0)}},accordionDetails:{padding:X.spacing(0,0,1)}})),un=X=>{const Ne=qt(),{setPageCursor:it,setTypes:St,types:at}=Yt(),[Ot,wt]=(0,n.useState)(!0),{defaultValue:hn,name:pn,types:Xt}=X,En=()=>wt(I=>!I),J=I=>()=>{St(I!==""?[I]:[]),it(void 0),wt(!1)};(0,n.useEffect)(()=>{hn&&St([hn])},[]);const o=[{value:"",name:"All",icon:n.createElement(Ze.Z,null)},...Xt],m=at[0]||"";return n.createElement(C.Z,{className:Ne.card},n.createElement(Ke.Z,{title:pn,titleTypographyProps:{variant:"overline"}}),n.createElement(j.Z,{className:Ne.cardContent},n.createElement(It.Z,{className:Ne.accordion,expanded:Ot,onChange:En},n.createElement(Be.Z,{classes:{root:Ne.accordionSummary,content:Ne.accordionSummaryContent},expandIcon:n.createElement(ue.Z,{className:Ne.icon}),IconButtonProps:{size:"small"}},Ot?"Collapse":o.filter(I=>I.value===m)[0].name),n.createElement(L.Z,{classes:{root:Ne.accordionDetails}},n.createElement(Le.Z,{className:Ne.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},o.map(I=>n.createElement(n.Fragment,{key:I.value},n.createElement(F.Z,null),n.createElement(A.Z,{selected:at[0]===I.value||at.length===0&&I.value==="",onClick:J(I.value),button:!0},n.createElement(N.Z,null,(0,n.cloneElement)(I.icon,{className:Ne.listItemIcon})),n.createElement(c.Z,{primary:I.name})))))))))},Ut=(0,P.Z)(X=>({tabs:{borderBottom:`1px solid ${X.palette.textVerySubtle}`,padding:X.spacing(0,4)},tab:{height:"50px",fontWeight:X.typography.fontWeightBold,fontSize:X.typography.pxToRem(13),color:X.palette.textSubtle,minWidth:"130px"}})),Lt=X=>{const Ne=Ut(),{setPageCursor:it,setTypes:St,types:at}=Yt(),{defaultValue:Ot,types:wt}=X,hn=(Xt,En)=>{St(En!==""?[En]:[]),it(void 0)};(0,n.useEffect)(()=>{Ot&&St([Ot])},[]);const pn=[{value:"",name:"All"},...wt];return n.createElement(Y.Z,{className:Ne.tabs,indicatorColor:"primary",value:at.length===0?"":at[0],onChange:hn},pn.map(Xt=>n.createElement(z.Z,{className:Ne.tab,disableRipple:!0,label:Xt.name,value:Xt.value})))},Vt=(0,P.Z)(X=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:X.spacing(1)},chip:{margin:2}})),on=X=>{const{className:Ne,defaultValue:it,name:St,values:at=[]}=X,Ot=Vt(),{types:wt,setTypes:hn}=Yt();(0,Ie.Z)(()=>{wt.length||(it&&Array.isArray(it)?hn(it):it&&hn([it]))});const pn=Xt=>{const En=Xt.target.value;hn(En)};return n.createElement(D.Z,{className:Ne,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},n.createElement(U.Z,{className:Ot.label,margin:"dense"},St),n.createElement(p.Z,{multiple:!0,variant:"outlined",value:wt,onChange:pn,placeholder:"All Results",renderValue:Xt=>n.createElement("div",{className:Ot.chips},Xt.map(En=>n.createElement(K.Z,{key:En,label:En,className:Ot.chip,size:"small"})))},at.map(Xt=>n.createElement(d.Z,{key:Xt,value:Xt},n.createElement(f.Z,{checked:wt.indexOf(Xt)>-1}),n.createElement(c.Z,{primary:Xt})))))};on.Accordion=X=>n.createElement(un,{...X}),on.Tabs=X=>n.createElement(Lt,{...X});const sn=X=>{const Ne=useRouteRef(_),{focusContent:it}=useContent(),St=useNavigate(),at=useCallback(Ot=>{const wt=qs.stringify({query:Ot},{addQueryPrefix:!0});it(),St(`${Ne()}${wt}`)},[it,St,Ne]);return React.createElement(SidebarSearchField,{icon:X.icon,onSearch:at,to:"/search"})}},23778:function(Tt,l,t){t.d(l,{E1:function(){return e.a},Nd:function(){return e.f},Rx:function(){return e.g},Sc:function(){return e.k},YC:function(){return e.v},Z9:function(){return e.o},ay:function(){return e.h},lt:function(){return e.t},yu:function(){return e.m}});var e=t(86607),i=t(30705),h=t(32272),s=t(19126),n=t.n(s),R=t(2784),P=t(49558),w=t(15277),u=t.n(w),y=t(73495),O=t(34520)},44741:function(Tt,l,t){t.d(l,{Wf:function(){return mt}});var e=t(49558),i=t(30705),h=t(2784),s=t(64279),n=t(79692),R=t(38724),P=t(49429),w=t(77277),u=t(29611),y=t(60905),O=t(8629),K=t(79249),D=t(35292),g=t(71346),T=t.n(g),f=t(45469),U=t(52669);const p=(0,i.T0)({id:"plugin.techradar.service"});var d=(Ie=>(Ie[Ie.Down=-1]="Down",Ie[Ie.NoChange=0]="NoChange",Ie[Ie.Up=1]="Up",Ie))(d||{});const A=(0,n.Z)(Ie=>({ring:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},axis:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},text:{pointerEvents:"none",userSelect:"none",fill:Ie.palette.text.primary,fontSize:"25px",fontWeight:800}})),N=Ie=>{const{radius:ue,rings:Ze}=Ie,rt=A(Ie),le=(fe,Ve)=>[h.createElement("circle",{key:`c${fe}`,cx:0,cy:0,r:Ve,className:rt.ring}),h.createElement("text",{key:`t${fe}`,y:Ve!==void 0?-Ve+42:void 0,textAnchor:"middle",className:rt.text},Ze[fe].name)],ie=[h.createElement("line",{key:"x",x1:0,y1:-ue,x2:0,y2:ue,className:rt.axis,"data-testid":"radar-grid-x-line"}),h.createElement("line",{key:"y",x1:-ue,y1:0,x2:ue,y2:0,className:rt.axis,"data-testid":"radar-grid-y-line"})],ve=Ze.map(fe=>fe.outerRadius).map((fe,Ve)=>le(Ve,fe));return h.createElement(h.Fragment,null,ie.concat(...ve))};function c(Ie){return Boolean(Ie&&Ie!=="#"&&Ie.length>0)}const Z=({url:Ie,className:ue,children:Ze})=>c(Ie)?h.createElement(e.rU,{className:ue,to:Ie},Ze):h.createElement(h.Fragment,null,Ze),F=Ie=>{const{open:ue,onClose:Ze,title:rt,description:le,url:ie}=Ie;return h.createElement(O.Z,{"data-testid":"radar-description",open:ue,onClose:Ze},h.createElement(K.Z,{"data-testid":"radar-description-dialog-title"},rt),h.createElement(R.Z,{dividers:!0},h.createElement(e.SA,{content:le})),c(ie)&&h.createElement(P.Z,null,h.createElement(w.Z,{component:e.rU,to:ie,onClick:Ze,color:"primary",startIcon:h.createElement(D.Z,null)},"LEARN MORE")))},te=(0,n.Z)(()=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"9px",fill:"#fff",textAnchor:"middle"},link:{cursor:"pointer"}})),we=(Ie,ue)=>{const Ze={fill:Ie};let rt=h.createElement("circle",{r:9,style:Ze});return ue&&ue>0?rt=h.createElement("path",{d:"M -11,5 11,5 0,-13 z",style:Ze}):ue&&ue<0&&(rt=h.createElement("path",{d:"M -11,-5 11,-5 0,13 z",style:Ze})),rt},ct=Ie=>{const ue=te(Ie),[Ze,rt]=h.useState(!1),{moved:le,description:ie,title:ve,color:fe,url:Ve,value:Et,x:ft,y:Wt,onMouseEnter:Yt,onMouseLeave:ln,onClick:gn}=Ie,Sn=we(fe,le),yn=()=>{rt(!0)},Re=()=>{rt(!1)},Xe=()=>{rt(!Ze)};return h.createElement("g",{transform:`translate(${ft}, ${Wt})`,onMouseEnter:Yt,onMouseLeave:ln,onClick:gn,"data-testid":"radar-entry"}," ",Ze&&h.createElement(F,{open:Ze,onClose:Re,title:ve||"no title",description:ie||"no description",url:Ve}),ie?h.createElement("a",{className:ue.link,onClick:yn,role:"button",href:"#",tabIndex:0,onKeyPress:Xe},Sn):h.createElement(Z,{url:Ve,className:ue.link},Sn),h.createElement("text",{y:3,className:ue.text},Et))},nt=(0,n.Z)(()=>({bubble:{pointerEvents:"none",userSelect:"none",opacity:0},visibleBubble:{pointerEvents:"none",userSelect:"none",opacity:.8},background:{fill:"#333"},text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:"#fff"}})),se=Ie=>{const ue=nt(Ie),{visible:Ze,text:rt}=Ie,le=(0,h.useRef)(null),ie=(0,h.useRef)(null),ve=(0,h.useRef)(null),fe=(0,h.useRef)(null),Ve=()=>{if(le.current){const{x:Et,y:ft}=Ie,Wt=le.current.getBBox(),Yt=5,ln=4;ie.current&&ie.current.setAttribute("transform",`translate(${Et-Wt.width/2}, ${ft-Wt.height-ln})`),ve.current&&(ve.current.setAttribute("x",String(-Yt)),ve.current.setAttribute("y",String(-Wt.height)),ve.current.setAttribute("width",String(Wt.width+2*Yt)),ve.current.setAttribute("height",String(Wt.height+ln))),fe.current&&fe.current.setAttribute("transform",`translate(${Wt.width/2-Yt}, ${ln-1})`)}};return(0,h.useLayoutEffect)(()=>{Ve()}),h.createElement("g",{ref:ie,x:0,y:0,className:Ze?ue.visibleBubble:ue.bubble,"data-testid":"radar-bubble"},h.createElement("rect",{ref:ve,rx:4,ry:4,className:ue.background}),h.createElement("text",{ref:le,className:ue.text},rt),h.createElement("path",{ref:fe,d:"M 0,0 10,0 5,8 z",className:ue.background}))},ye=(0,n.Z)(Ie=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:Ie.palette.text.secondary}})),Le=Ie=>{const{x:ue,y:Ze}=Ie,rt=ye(Ie);return h.createElement("text",{"data-testid":"radar-footer",transform:`translate(${ue}, ${Ze})`,className:rt.text},"\u25B2 moved up\xA0\xA0\xA0\xA0\xA0\u25BC moved down")},de=(0,n.Z)(Ie=>({quadrantLegend:{overflowY:"auto",scrollbarWidth:"thin"},quadrant:{height:"100%",width:"100%",scrollbarWidth:"thin",pointerEvents:"none"},quadrantHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:Ie.spacing(2),fontSize:"18px"},rings:{columns:3},ring:{breakInside:"avoid-column",pageBreakInside:"avoid","-webkit-column-break-inside":"avoid",fontSize:"12px",marginBottom:Ie.spacing(2)},ringEmpty:{color:Ie.palette.text.secondary},ringHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:Ie.spacing(1),fontSize:"12px",fontWeight:800},ringList:{listStylePosition:"inside",marginTop:0,paddingLeft:0,fontVariantNumeric:"proportional-nums","-moz-font-feature-settings":"pnum","-webkit-font-feature-settings":"pnum","font-feature-settings":"pnum"},entry:{pointerEvents:"visiblePainted",userSelect:"none",fontSize:"11px"},entryLink:{pointerEvents:"visiblePainted"}})),V=Ie=>{const ue=de(Ie),Ze=(ln,gn,Sn,yn=0)=>{const Re=gn.index,Xe=Sn.index,dt=Re===void 0?{}:ln[Re]||{};return Xe===void 0?[]:dt[Xe+yn]||[]},rt=({url:ln,description:gn,title:Sn})=>{const[yn,Re]=h.useState(!1),Xe=()=>{Re(!0)},dt=()=>{Re(!1)},Gt=()=>{Re(!yn)};return gn?h.createElement(h.Fragment,null,h.createElement("span",{className:ue.entryLink,onClick:Xe,role:"button",tabIndex:0,onKeyPress:Gt},h.createElement("span",{className:ue.entry},Sn)),yn&&h.createElement(F,{open:yn,onClose:dt,title:Sn||"no title",url:ln,description:gn})):h.createElement(Z,{url:ln,className:ue.entryLink},h.createElement("span",{className:ue.entry},Sn))},le=({ring:ln,entries:gn,onEntryMouseEnter:Sn,onEntryMouseLeave:yn})=>h.createElement("div",{"data-testid":"radar-ring",key:ln.id,className:ue.ring},h.createElement("h3",{className:ue.ringHeading},ln.name),gn.length===0?h.createElement("p",{className:ue.ringEmpty},"(empty)"):h.createElement("ol",{className:ue.ringList},gn.map(Re=>h.createElement("li",{key:Re.id,value:(Re.index||0)+1,onMouseEnter:Sn&&(()=>Sn(Re)),onMouseLeave:yn&&(()=>yn(Re))},h.createElement(rt,{url:Re.url,title:Re.title,description:Re.description}))))),ie=({segments:ln,quadrant:gn,rings:Sn,onEntryMouseEnter:yn,onEntryMouseLeave:Re})=>h.createElement("foreignObject",{key:gn.id,x:gn.legendX,y:gn.legendY,width:gn.legendWidth,height:gn.legendHeight,className:ue.quadrantLegend,"data-testid":"radar-quadrant"},h.createElement("div",{className:ue.quadrant},h.createElement("h2",{className:ue.quadrantHeading},gn.name),h.createElement("div",{className:ue.rings},Sn.map(Xe=>h.createElement(le,{key:Xe.id,ring:Xe,entries:Ze(ln,gn,Xe),onEntryMouseEnter:yn,onEntryMouseLeave:Re}))))),ve=ln=>{const gn={};for(const Sn of ln){const yn=Sn.quadrant.index,Re=Sn.ring.index;let Xe={};yn!==void 0&&(gn[yn]===void 0&&(gn[yn]={}),Xe=gn[yn]);let dt=[];Re!==void 0&&(Xe[Re]===void 0&&(Xe[Re]=[]),dt=Xe[Re]),dt.push(Sn)}return gn},{quadrants:fe,rings:Ve,entries:Et,onEntryMouseEnter:ft,onEntryMouseLeave:Wt}=Ie,Yt=ve(Et);return h.createElement("g",{"data-testid":"radar-legend"},fe.map(ln=>h.createElement(ie,{key:ln.id,segments:Yt,quadrant:ln,rings:Ve,onEntryMouseEnter:ft,onEntryMouseLeave:Wt})))},he=Ie=>{const{width:ue,height:Ze,radius:rt,quadrants:le,rings:ie,entries:ve,activeEntry:fe,onEntryMouseEnter:Ve,onEntryMouseLeave:Et}=Ie;return h.createElement("g",{"data-testid":"radar-plot"},h.createElement(V,{quadrants:le,rings:ie,entries:ve,onEntryMouseEnter:Ve&&(ft=>Ve(ft)),onEntryMouseLeave:Et&&(ft=>Et(ft))}),h.createElement("g",{transform:`translate(${ue/2}, ${Ze/2})`},h.createElement(N,{radius:rt,rings:ie}),h.createElement(Le,{x:-.5*ue,y:.5*Ze}),ve.map(ft=>h.createElement(ct,{key:ft.id,x:ft.x||0,y:ft.y||0,color:ft.color||"",value:((ft==null?void 0:ft.index)||0)+1,url:ft.url,description:ft.description,moved:ft.moved,title:ft.title,onMouseEnter:Ve&&(()=>Ve(ft)),onMouseLeave:Et&&(()=>Et(ft))})),h.createElement(se,{visible:!!fe,text:(fe==null?void 0:fe.title)||"",x:(fe==null?void 0:fe.x)||0,y:(fe==null?void 0:fe.y)||0})))};class C{constructor(ue,Ze,rt,le){this.nextSeed=le,this.polarMin={t:ue.radialMin,r:Ze.innerRadius},this.polarMax={t:ue.radialMax,r:Ze.outerRadius},this.cartesianMin={x:15*ue.offsetX,y:15*ue.offsetY},this.cartesianMax={x:rt*ue.offsetX,y:rt*ue.offsetY}}clipx(ue){const Ze=L(ue,this.cartesianMin,this.cartesianMax),rt=Be(Ke(Ze),this.polarMin.r+15,this.polarMax.r-15);return ue.x=j(rt).x,ue.x}clipy(ue){const Ze=L(ue,this.cartesianMin,this.cartesianMax),rt=Be(Ke(Ze),this.polarMin.r+15,this.polarMax.r-15);return ue.y=j(rt).y,ue.y}random(){return j({t:this._randomBetween(this.polarMin.t,this.polarMax.t),r:this._normalBetween(this.polarMin.r,this.polarMax.r)})}_random(){const ue=Math.sin(this.nextSeed())*1e4;return ue-Math.floor(ue)}_randomBetween(ue,Ze){return ue+this._random()*(Ze-ue)}_normalBetween(ue,Ze){return ue+(this._random()+this._random())*.5*(Ze-ue)}}function Ke({x:Ie,y:ue}){return{t:Math.atan2(ue,Ie),r:Math.sqrt(Ie*Ie+ue*ue)}}function j({r:Ie,t:ue}){return{x:Ie*Math.cos(ue),y:Ie*Math.sin(ue)}}function It(Ie,ue,Ze){const rt=Math.min(ue,Ze),le=Math.max(ue,Ze);return Math.min(Math.max(Ie,rt),le)}function Be(Ie,ue,Ze){return{t:Ie.t,r:It(Ie.r,ue,Ze)}}function L(Ie,ue,Ze){return{x:It(Ie.x,ue.x,Ze.x),y:It(Ie.y,ue.y,Ze.y)}}const Y=(Ie,ue,Ze,rt)=>{const ie=[16,Ze/2-ue-16,Ze/2+ue+16,Ze-16],ve=[16,rt/2-16,rt/2,rt-16],fe=[{x:ie[2],y:ve[2],width:ie[3]-ie[2],height:ve[3]-ve[2]},{x:ie[0],y:ve[2],width:ie[1]-ie[0],height:ve[3]-ve[2]},{x:ie[0],y:ve[0],width:ie[1]-ie[0],height:ve[1]-ve[0]},{x:ie[2],y:ve[0],width:ie[3]-ie[2],height:ve[1]-ve[0]}];Ie.forEach((Ve,Et)=>{const ft=fe[Et%4];Ve.index=Et,Ve.radialMin=Et*Math.PI/2,Ve.radialMax=(Et+1)*Math.PI/2,Ve.offsetX=Et%4===0||Et%4===3?1:-1,Ve.offsetY=Et%4===0||Et%4===1?1:-1,Ve.legendX=ft.x,Ve.legendY=ft.y,Ve.legendWidth=ft.width,Ve.legendHeight=ft.height})},z=(Ie,ue,Ze,rt,le)=>{let ie=42;Ie.forEach((fe,Ve)=>{const Et=ue.find(Yt=>{const ln=typeof fe.quadrant=="object"?fe.quadrant.id:fe.quadrant;return Yt.id===ln}),ft=Ze.find(Yt=>{const ln=typeof fe.ring=="object"?fe.ring.id:fe.ring;return Yt.id===ln});if(!Et)throw new Error(`Unknown quadrant ${fe.quadrant} for entry ${fe.id}!`);if(!ft)throw new Error(`Unknown ring ${fe.ring} for entry ${fe.id}!`);fe.index=Ve,fe.quadrant=Et,fe.ring=ft,fe.segment=new C(Et,ft,rt,()=>ie++);const Wt=fe.segment.random();fe.x=Wt.x,fe.y=Wt.y,fe.active=le?fe.id===le.id:!1,fe.color=fe.active?fe.ring.color:T()(fe.ring.color).desaturate(.5).lighten(.1).string()});const ve=(0,f.Z)().nodes(Ie).velocityDecay(.19).force("collision",(0,U.Z)().radius(12).strength(.85)).stop();for(let fe=0,Ve=Math.ceil(Math.log(ve.alphaMin())/Math.log(1-ve.alphaDecay()));fe<Ve;++fe){ve.tick();for(const Et of Ie)Et.segment&&(Et.x=Et.segment.clipx(Et),Et.y=Et.segment.clipy(Et))}},ge=(Ie,ue)=>{Ie.forEach((Ze,rt)=>{Ze.index=rt,Ze.outerRadius=(rt+2)/(Ie.length+1)*ue,Ze.innerRadius=(rt===0?0:rt+1)/(Ie.length+1)*ue})},Ue=Ie=>{const{width:ue,height:Ze,quadrants:rt,rings:le,entries:ie}=Ie,ve=Math.min(ue,Ze)/2,[fe,Ve]=(0,h.useState)(),Et=(0,h.useRef)(null);return Y(rt,ve,ue,Ze),ge(le,ve),z(ie,rt,le,ve,fe),h.createElement("svg",{ref:Et,width:ue,height:Ze,...Ie.svgProps},h.createElement(he,{width:ue,height:Ze,radius:ve,entries:ie,quadrants:rt,rings:le,activeEntry:fe,onEntryMouseEnter:ft=>Ve(ft),onEntryMouseLeave:()=>Ve(void 0)}))},xe=Ie=>{const ue=(0,i.h_)(i.VE),Ze=(0,i.h_)(p),{error:rt,value:le,loading:ie}=(0,s.default)(async()=>Ze.load(Ie),[Ze]);return(0,h.useEffect)(()=>{rt&&ue.post(rt)},[rt,ue]),{loading:ie,value:le,error:rt}};function At(Ie){const ue=Ie==null?void 0:Ie.toLocaleLowerCase("en-US").split(/\s/).map(Ze=>Ze.trim()).filter(Boolean);return ue!=null&&ue.length?Ze=>{var rt;const le=`${Ze.title} ${((rt=Ze.timeline[0])==null?void 0:rt.description)||""}`.toLocaleLowerCase("en-US");return ue.every(ie=>le.includes(ie))}:()=>!0}function nn(Ie){const{loading:ue,error:Ze,value:rt}=xe(Ie.id),le=ie=>ie.entries.filter(At(Ie.searchText)).map(ve=>({id:ve.key,quadrant:ie.quadrants.find(fe=>fe.id===ve.quadrant),title:ve.title,ring:ie.rings.find(fe=>fe.id===ve.timeline[0].ringId),timeline:ve.timeline.map(fe=>({date:fe.date,ring:ie.rings.find(Ve=>Ve.id===fe.ringId),description:fe.description,moved:fe.moved})),moved:ve.timeline[0].moved,description:ve.description||ve.timeline[0].description,url:ve.url}));return h.createElement(h.Fragment,null,ue&&h.createElement(e.Ex,null),!ue&&!Ze&&rt&&h.createElement(Ue,{...Ie,rings:rt.rings,quadrants:rt.quadrants,entries:le(rt)}))}const ut=(0,n.Z)(()=>({overflowXScroll:{overflowX:"scroll"}}));function Kt(Ie){const{title:ue="Tech Radar",subtitle:Ze="Pick the recommended technologies for your projects",pageTitle:rt="Company Radar",...le}=Ie,ie=ut(),[ve,fe]=h.useState("");return h.createElement(e.T3,{themeId:"tool"},h.createElement(e.h4,{title:ue,subtitle:Ze}),h.createElement(e.VY,{className:ie.overflowXScroll},h.createElement(e.yW,{title:rt},h.createElement(u.Z,{id:"tech-radar-filter",type:"search",placeholder:"Filter",onChange:Ve=>fe(Ve.target.value)}),h.createElement(e.qt,null,"This is used for visualizing the official guidelines of different areas of software development such as languages, frameworks, infrastructure and processes.")),h.createElement(y.Z,{container:!0,spacing:3,direction:"row"},h.createElement(y.Z,{item:!0,xs:12,sm:6,md:4},h.createElement(nn,{searchText:ve,...le})))))}var $t=Object.freeze({__proto__:null,RadarPage:Kt});const Pt=new Array;Pt.push({id:"use",name:"USE",color:"#93c47d"}),Pt.push({id:"trial",name:"TRIAL",color:"#93d2c2"}),Pt.push({id:"assess",name:"ASSESS",color:"#fbdb84"}),Pt.push({id:"hold",name:"HOLD",color:"#efafa9"});const je=new Array;je.push({id:"infrastructure",name:"Infrastructure"}),je.push({id:"frameworks",name:"Frameworks"}),je.push({id:"languages",name:"Languages"}),je.push({id:"process",name:"Process"});const Fe=new Array;Fe.push({timeline:[{moved:0,ringId:"use",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],url:"#",key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),Fe.push({timeline:[{moved:-1,ringId:"use",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],url:"#",key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),Fe.push({timeline:[{moved:1,ringId:"use",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],url:"https://webpack.js.org/",key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),Fe.push({timeline:[{moved:0,ringId:"use",date:new Date("2020-08-06")}],url:"https://reactjs.org/",key:"react",id:"react",title:"React",quadrant:"frameworks"}),Fe.push({timeline:[{moved:0,ringId:"use",date:new Date("2020-08-06")}],url:"#",key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),Fe.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],url:"#",key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),Fe.push({timeline:[{moved:0,ringId:"use",date:new Date("2020-08-06")}],url:"#",key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),Fe.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],url:"#",key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),Fe.push({timeline:[{ringId:"use",date:new Date("2020-08-06"),description:"long description"}],url:"https://github.com",key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const be={entries:Fe,quadrants:je,rings:Pt};class pt{async load(){return be}}const vt=(0,i.NT)({id:"tech-radar"}),mt=(0,i.rx)({id:"tech-radar",routes:{root:vt},apis:[(0,i.ni)(p,new pt)]}).provide((0,i.P4)({name:"TechRadarPage",component:()=>Promise.resolve().then(function(){return $t}).then(Ie=>Ie.RadarPage),mountPoint:vt})),_t=null},70557:function(Tt,l,t){t.d(l,{$d:function(){return wt},HM:function(){return on},I6:function(){return Xt},Jl:function(){return pn},bf:function(){return Ae},fI:function(){return Dt},jR:function(){return X},s4:function(){return at}});var e=t(30705),i=t(32272),h=t(76372),s=t.n(h),n=t(2784),R=t(10289),P=t(15459),w=t(80030),u=t(72379),y=t(41547),O=t(79692),K=t(49378),D=t(38402),g=t(85256),T=t(86619),f=t(50581),U=t(61837),p=t(4614),d=t(12420),A=t(60905),N=t(90436),c=t(77277),Z=t(4190),F=t(60364),te=t(41128),we=t(94339),ct=t(16111),nt=t(24579),se=t(14503),ye=t(49462),Le=t(49558),de=t(1854),V=t(67097),he=t(47093),C=t(82717),Ke=t.n(C),j=t(44882),It=t(35368),Be=t.n(It),L=t(15277),Y=t.n(L),z=t(23778),ge=t(21853),Ue=t(88013),xe=t(48760),At=t(99688),nn=t(87685),ut=t(64279),Kt=t(77446),$t=t(73250),Pt=t(34520),je=t(73495),Fe=t(95074),be=t(76635),pt=t.n(be),vt=t(39981),ze=t(2337),mt=t(11640),_t=t(28347);const Ie=(0,e.T0)({id:"plugin.techdocs.storageservice"}),ue=(0,e.T0)({id:"plugin.techdocs.service"});class Ze{constructor(M){this.configApi=M.configApi,this.discoveryApi=M.discoveryApi,this.fetchApi=M.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(M){const{kind:B,namespace:re,name:ke}=M,qe=`${await this.getApiOrigin()}/metadata/techdocs/${re}/${B}/${ke}`,Rt=await this.fetchApi.fetch(`${qe}`);if(!Rt.ok)throw await i.VL.fromResponse(Rt);return await Rt.json()}async getEntityMetadata(M){const{kind:B,namespace:re,name:ke}=M,qe=`${await this.getApiOrigin()}/metadata/entity/${re}/${B}/${ke}`,Rt=await this.fetchApi.fetch(`${qe}`);if(!Rt.ok)throw await i.VL.fromResponse(Rt);return await Rt.json()}}class rt{constructor(M){this.configApi=M.configApi,this.discoveryApi=M.discoveryApi,this.identityApi=M.identityApi,this.fetchApi=M.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var M;return(M=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?M:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(M,B){const{kind:re,namespace:ke,name:lt}=M,Rt=`${await this.getStorageUrl()}/${ke}/${re}/${lt}/${B}`,zt=await this.fetchApi.fetch(`${Rt.endsWith("/")?Rt:`${Rt}/`}index.html`);let an="";switch(zt.status){case 404:throw an="Page not found. ",B||(an+="This could be because there is no index.md file in the root of the docs directory of this repository."),new i.dR(an);case 500:throw an="Could not generate documentation or an error in the TechDocs backend. ",new Error(an)}return zt.text()}async syncEntityDocs(M,B=()=>{}){const{kind:re,namespace:ke,name:lt}=M,Rt=`${await this.getApiOrigin()}/sync/${ke}/${re}/${lt}`,{token:zt}=await this.identityApi.getCredentials();return new Promise((an,Qt)=>{const Cn=new h.EventSourcePolyfill(Rt,{withCredentials:!0,headers:zt?{Authorization:`Bearer ${zt}`}:{}});Cn.addEventListener("log",Zt=>{Zt.data&&B(JSON.parse(Zt.data))}),Cn.addEventListener("finish",Zt=>{let Rn=!1;Zt.data&&({updated:Rn}=JSON.parse(Zt.data)),an(Rn?"updated":"cached")}),Cn.onerror=Zt=>{switch(Cn.close(),Zt.status){case 404:Qt(new i.dR(Zt.message));return;default:Qt(new Error(Zt.data));return}}})}async getBaseUrl(M,B,re){const{kind:ke,namespace:lt,name:qe}=B,zt=`${await this.getApiOrigin()}/static/docs/${lt}/${ke}/${qe}/${re}`;return new URL(M,zt.endsWith("/")?zt:`${zt}/`).toString()}}const le=(b,M,B)=>{const re=b==="src"&&M.endsWith(".svg"),ke=!M.match(/^([a-z]*:)?\/\//i),lt=M.startsWith(B);return re&&(ke||lt)},ie=({techdocsStorageApi:b,entityId:M,path:B})=>async re=>{const ke=await b.getApiOrigin(),lt=async(qe,Rt)=>{for(const zt of qe)if(zt.hasAttribute(Rt)){const an=zt.getAttribute(Rt);if(!an)return;const Qt=await b.getBaseUrl(an,M,B);if(le(Rt,an,ke))try{const Zt=await(await fetch(Qt,{credentials:"include"})).text();zt.setAttribute(Rt,`data:image/svg+xml;base64,${btoa(Zt)}`)}catch{zt.setAttribute("alt",`Error: ${an}`)}else zt.setAttribute(Rt,Qt)}};return await Promise.all([lt(re.querySelectorAll("img"),"src"),lt(re.querySelectorAll("script"),"src"),lt(re.querySelectorAll("source"),"src"),lt(re.querySelectorAll("link"),"href"),lt(re.querySelectorAll("a[download]"),"href")]),re},ve=b=>M=>{const B=M.querySelector('[title="Edit this page"]');if(!B||!B.href)return M;const re=new URL(B.href),ke=b.byUrl(re);if((ke==null?void 0:ke.type)!=="github"&&(ke==null?void 0:ke.type)!=="gitlab")return M;const lt=M.querySelector("article>h1").childNodes[0].textContent,qe=encodeURIComponent(`Documentation Feedback: ${lt}`),Rt=encodeURIComponent(`Page source:
${B.href}

Feedback:`),zt=(ke==null?void 0:ke.type)==="github"?(0,de.Pb)(re.href,"blob"):re.href,an=Ke()(zt),Qt=`/${an.organization}/${an.name}`,Cn=B.cloneNode();switch(ke==null?void 0:ke.type){case"gitlab":Cn.href=`${re.origin}${Qt}/issues/new?issue[title]=${qe}&issue[description]=${Rt}`;break;case"github":Cn.href=`${re.origin}${Qt}/issues/new?title=${qe}&body=${Rt}`;break;default:return M}return he.render(n.createElement(V.Z),Cn),Cn.style.paddingLeft="5px",Cn.title="Leave feedback for this page",Cn.id="git-feedback-link",B==null||B.insertAdjacentElement("beforebegin",Cn),M},fe=()=>b=>{const M=b.querySelector('.md-header label[for="__drawer"]'),B=b.querySelector("article");if(!M||!B)return b;const re=M.cloneNode();return he.render(n.createElement(j.Z),re),re.style.paddingLeft="5px",re.classList.add("md-content__button"),re.title="Toggle Sidebar",re.id="toggle-sidebar",B==null||B.prepend(re),b},Ve=()=>b=>(((B,re)=>{Array.from(B).filter(ke=>ke.hasAttribute(re)).forEach(ke=>{const lt=ke.getAttribute(re);if(lt){lt.match(/^https?:\/\//i)&&ke.setAttribute("target","_blank");try{const qe=Et(window.location.href);ke.setAttribute(re,new URL(lt,qe).toString())}catch{ke.replaceWith(ke.textContent||lt)}}})})(Array.from(b.getElementsByTagName("a")),"href"),b);function Et(b){const M=new URL(b);return!M.pathname.endsWith("/")&&!M.pathname.endsWith(".html")&&(M.pathname+="/"),M.toString()}const ft=({baseUrl:b,onClick:M})=>B=>(Array.from(B.getElementsByTagName("a")).forEach(re=>{re.addEventListener("click",ke=>{const qe=re.getAttribute("href");!qe||qe.startsWith(b)&&!re.hasAttribute("download")&&(ke.preventDefault(),M(ke,qe))})}),B),Wt=(0,P.Z)(b=>({tooltip:{fontSize:"inherit",color:b.palette.text.primary,margin:0,padding:b.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(w.ZP),Yt=()=>n.createElement(u.Z,null,n.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),ln=({text:b})=>{const[M,B]=(0,n.useState)(!1),re=(0,n.useCallback)(()=>{navigator.clipboard.writeText(b),B(!0)},[b]),ke=(0,n.useCallback)(()=>{B(!1)},[B]);return n.createElement(Wt,{title:"Copied to clipboard",placement:"left",open:M,onClose:ke,leaveDelay:1e3},n.createElement("button",{className:"md-clipboard md-icon",onClick:re},n.createElement(Yt,null)))},gn=b=>M=>{var B;const re=M.querySelectorAll("pre > code");for(const ke of re){const lt=ke.textContent||"",qe=document.createElement("div");(B=ke==null?void 0:ke.parentElement)==null||B.prepend(qe),he.render(n.createElement(y.Z,{theme:b},n.createElement(ln,{text:lt})),qe)}return M},Sn=()=>b=>{var M;return(M=b.querySelector(".md-header"))==null||M.remove(),b},yn=()=>b=>{var M,B;return(M=b.querySelector(".md-footer .md-copyright"))==null||M.remove(),(B=b.querySelector(".md-footer-copyright"))==null||B.remove(),b},Re=({docStorageUrl:b,onLoading:M,onLoaded:B})=>re=>{const ke=Array.from(re.querySelectorAll('head > link[rel="stylesheet"]')).filter(qe=>{var Rt;return(Rt=qe.getAttribute("href"))==null?void 0:Rt.startsWith(b)});let lt=ke.length;return lt>0&&M(re),ke.forEach(qe=>qe.addEventListener("load",()=>{lt-=1,lt===0&&B(re)})),re},Xe=/main\.[A-Fa-f0-9]{8}\.min\.css$/,dt=/^https:\/\/fonts\.googleapis\.com/,Gt=/^https:\/\/fonts\.gstatic\.com/,Bt=b=>{if(b.nodeName&&b.nodeName==="LINK"){const M=b.getAttribute("href")||"";M.match(Xe)&&b.setAttribute("rel","stylesheet"),M.match(dt)&&b.setAttribute("rel","stylesheet"),M.match(Gt)&&b.setAttribute("rel","preconnect")}return b},rn=b=>M=>{if(M.nodeName==="IFRAME"){const B=M.getAttribute("src");if(!B)return M.remove(),M;try{const re=new URL(B);b.some(lt=>re.host===lt)||M.remove()}catch(re){console.warn(`Invalid iframe src, ${re}`),M.remove()}}return M},fn=b=>{const M=(b==null?void 0:b.getOptionalStringArray("allowedIframeHosts"))||[];return B=>{Be().addHook("afterSanitizeAttributes",Bt);const re=["link"];return M.length>0&&(Be().addHook("beforeSanitizeElements",rn(M)),re.push("iframe")),Be().sanitize(B.innerHTML,{ADD_TAGS:re,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})}},Pn=({css:b})=>M=>(M.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${b}</style>`),M),An=()=>b=>(setTimeout(()=>{var M;if(window.location.hash){const B=window.location.hash.slice(1);(M=b==null?void 0:b.querySelector(`#${B}`))==null||M.scrollIntoView()}},200),b),_n=async(b,M)=>{let B;if(typeof b=="string")B=new DOMParser().parseFromString(b,"text/html").documentElement;else if(b instanceof Element)B=b;else throw new Error("dom is not a recognized type");for(const re of M)B=await re(B);return B},Pe=(0,O.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),Ae=b=>{const{result:M,lineClamp:B=5,asListItem:re=!0,asLink:ke=!0,title:lt}=b,qe=Pe(),Rt=()=>{var Qt;return n.createElement(K.Z,{className:qe.itemText,primaryTypographyProps:{variant:"h6"},primary:lt||`${M.title} | ${(Qt=M.entityTitle)!=null?Qt:M.name} docs`,secondary:n.createElement(Y(),{line:B,truncateText:"\u2026",text:M.text,element:"span"})})},zt=({children:Qt})=>ke?n.createElement(Le.rU,{to:M.location},Qt):n.createElement(n.Fragment,null,Qt),an=({children:Qt})=>re?n.createElement(n.Fragment,null,n.createElement(D.Z,{alignItems:"flex-start",className:qe.flexContainer},Qt),n.createElement(g.Z,{component:"li"})):n.createElement(n.Fragment,null,Qt);return n.createElement(zt,null,n.createElement(an,null,n.createElement(Rt,null)))},_=(0,O.Z)({root:{width:"100%"}}),S=b=>{const{entityId:M,debounceTime:B=150}=b,[re,ke]=(0,n.useState)(!1),lt=(0,R.s0)(),{term:qe,setTerm:Rt,setFilters:zt,result:{loading:an,value:Qt}}=(0,z.Rx)(),Cn=_(),[Zt,Rn]=(0,n.useState)([]);(0,n.useEffect)(()=>{let Bn=!0;if(Bn&&Qt){const Mn=Qt.results.slice(0,10);Rn(Mn)}return()=>{Bn=!1}},[an,Qt]);const[Fn,zn]=(0,n.useState)(qe);(0,xe.Z)(()=>Rt(Fn),B,[Fn]);const{kind:Zn,name:oa,namespace:sa}=M;(0,n.useEffect)(()=>{zt(Bn=>({...Bn,kind:Zn,namespace:sa,name:oa}))},[Zn,sa,oa,zt]);const ya=Bn=>{re||ke(!0),zn(Bn.target.value)},va=(Bn,Mn)=>{if(Mn!=null&&Mn.document){const{location:Nn}=Mn.document;lt(Nn)}};return n.createElement(Ue.ZP,{classes:{root:Cn.root},"data-testid":"techdocs-search-bar",size:"small",open:re,getOptionLabel:()=>"",filterOptions:Bn=>Bn,onClose:()=>{ke(!1)},onFocus:()=>{ke(!0)},onChange:va,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:Zt,renderOption:({document:Bn})=>n.createElement(Ae,{result:Bn,lineClamp:3,asListItem:!1,asLink:!1,title:Bn.title}),loading:an,renderInput:Bn=>n.createElement(T.Z,{...Bn,"data-testid":"techdocs-search-bar-input",variant:"outlined",fullWidth:!0,placeholder:`Search ${M.name} docs`,value:Fn,onChange:ya,InputProps:{...Bn.InputProps,startAdornment:n.createElement(f.Z,{position:"start"},n.createElement(U.Z,{"aria-label":"Query",disabled:!0},n.createElement(ge.Z,null))),endAdornment:n.createElement(n.Fragment,null,an?n.createElement(p.Z,{color:"inherit",size:20}):null,Bn.InputProps.endAdornment)}})})},x=b=>{const M={term:"",types:["techdocs"],pageCursor:"",filters:b.entityId};return n.createElement(z.Nd,{initialState:M},n.createElement(S,{...b}))},ee=(0,O.Z)(b=>(0,d.Z)({paper:{width:"100%",[b.breakpoints.up("sm")]:{width:"75%"},[b.breakpoints.up("md")]:{width:"50%"},padding:b.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:b.palette.background.default}})),Ee=({buildLog:b,onClose:M})=>{const B=ee(),re=b.length===0?"Waiting for logs...":b.join(`
`);return n.createElement(A.Z,{container:!0,direction:"column",className:B.root,spacing:0,wrap:"nowrap"},n.createElement(A.Z,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},n.createElement(N.Z,{variant:"h5"},"Build Details"),n.createElement(U.Z,{key:"dismiss",title:"Close the drawer",onClick:M,color:"inherit"},n.createElement(nn.Z,null))),n.createElement(Le.nU,{text:re,classes:{root:B.logs}}))},_e=({buildLog:b})=>{const M=ee(),[B,re]=(0,n.useState)(!1);return n.createElement(n.Fragment,null,n.createElement(c.Z,{color:"inherit",onClick:()=>re(!0)},"Show Build Logs"),n.createElement(Z.ZP,{classes:{paper:M.paper},anchor:"right",open:B,onClose:()=>re(!1)},n.createElement(Ee,{buildLog:b,onClose:()=>re(!1)})))},We=({errorMessage:b})=>{const M=(0,e.h_)(e.Ds).getOptionalString("techdocs.builder");let B="";return M!=="local"&&(B="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),n.createElement(Le.mf,{status:"404",statusMessage:b||"Documentation not found",additionalInfo:B})},yt=(0,O.Z)(b=>({root:{marginBottom:b.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),kt=()=>{let b=null;const M=yt(),{state:B,contentReload:re,contentErrorMessage:ke,syncErrorMessage:lt,buildLog:qe}=Je(),Rt=B==="CHECKING"?n.createElement(Le.Ex,null):null;return B==="INITIAL_BUILD"&&(b=n.createElement(At.Z,{classes:{root:M.root},variant:"outlined",severity:"info",icon:n.createElement(p.Z,{size:"24px"}),action:n.createElement(_e,{buildLog:qe})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),B==="CONTENT_STALE_REFRESHING"&&(b=n.createElement(At.Z,{variant:"outlined",severity:"info",icon:n.createElement(p.Z,{size:"24px"}),action:n.createElement(_e,{buildLog:qe}),classes:{root:M.root}},"A newer version of this documentation is being prepared and will be available shortly.")),B==="CONTENT_STALE_READY"&&(b=n.createElement(At.Z,{variant:"outlined",severity:"success",action:n.createElement(c.Z,{color:"inherit",onClick:()=>re()},"Refresh"),classes:{root:M.root}},"A newer version of this documentation is now available, please refresh to view.")),B==="CONTENT_STALE_ERROR"&&(b=n.createElement(At.Z,{variant:"outlined",severity:"error",action:n.createElement(_e,{buildLog:qe}),classes:{root:M.root,message:M.message}},"Building a newer version of this documentation failed."," ",lt)),B==="CONTENT_NOT_FOUND"&&(b=n.createElement(n.Fragment,null,lt&&n.createElement(At.Z,{variant:"outlined",severity:"error",action:n.createElement(_e,{buildLog:qe}),classes:{root:M.root,message:M.message}},"Building a newer version of this documentation failed."," ",lt),n.createElement(We,{errorMessage:ke}))),n.createElement(n.Fragment,null,Rt,b)};function Ft({contentLoading:b,content:M,activeSyncState:B}){return b||B==="BUILD_READY_RELOAD"||!M&&B==="CHECKING"?"CHECKING":!M&&B==="BUILDING"?"INITIAL_BUILD":M?B==="BUILDING"?"CONTENT_STALE_REFRESHING":B==="BUILD_READY"?"CONTENT_STALE_READY":B==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function bt(b,M){const B={...b};switch(M.type){case"sync":M.state==="CHECKING"&&(B.buildLog=[]),B.activeSyncState=M.state,B.syncError=M.syncError;break;case"contentLoading":B.contentLoading=!0,B.contentError=void 0;break;case"content":typeof M.path=="string"&&(B.path=M.path),B.contentLoading=!1,B.content=M.content,B.contentError=M.contentError;break;case"buildLog":B.buildLog=B.buildLog.concat(M.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(B.activeSyncState)&&["contentLoading","content"].includes(M.type)&&(B.activeSyncState="UP_TO_DATE",B.buildLog=[]),B}function mn(b,M,B,re){var ke,lt;const[qe,Rt]=(0,n.useReducer)(bt,{activeSyncState:"CHECKING",path:re,contentLoading:!0,buildLog:[]}),zt=(0,e.h_)(Ie),{retry:an}=(0,Kt.Z)(async()=>{Rt({type:"contentLoading"});try{const Zt=await zt.getEntityDocs({kind:b,namespace:M,name:B},re);return Rt({type:"content",content:Zt,path:re}),Zt}catch(Zt){Rt({type:"content",contentError:Zt,path:re})}},[zt,b,M,B,re]),Qt=(0,n.useRef)({content:void 0,reload:()=>{}});return Qt.current={content:qe.content,reload:an},(0,ut.default)(async()=>{Rt({type:"sync",state:"CHECKING"});const Zt=setTimeout(()=>{Rt({type:"sync",state:"BUILDING"})},1e3);try{switch(await zt.syncEntityDocs({kind:b,namespace:M,name:B},Fn=>{Rt({type:"buildLog",log:Fn})})){case"updated":Qt.current.content?Rt({type:"sync",state:"BUILD_READY"}):(Qt.current.reload(),Rt({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":Rt({type:"sync",state:"UP_TO_DATE"});break;default:Rt({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(Rn){Rt({type:"sync",state:"ERROR",syncError:Rn})}finally{clearTimeout(Zt)}},[b,B,M,zt,Rt,Qt]),{state:(0,n.useMemo)(()=>Ft({activeSyncState:qe.activeSyncState,contentLoading:qe.contentLoading,content:qe.content}),[qe.activeSyncState,qe.content,qe.contentLoading]),contentReload:an,path:qe.path,content:qe.content,contentErrorMessage:(ke=qe.contentError)==null?void 0:ke.toString(),syncErrorMessage:(lt=qe.syncError)==null?void 0:lt.toString(),buildLog:qe.buildLog}}const cn=(0,O.Z)(b=>({searchBar:{maxWidth:"calc(100% - 16rem * 2 - 2.4rem)",marginTop:0,marginBottom:b.spacing(1),marginLeft:"calc(16rem + 1.2rem)","@media screen and (max-width: 76.1875em)":{marginLeft:"0",maxWidth:"100%"}}})),wn=(0,n.createContext)({}),Ce=({children:b,entityRef:M})=>{const{"*":B}=(0,R.UO)(),{kind:re,namespace:ke,name:lt}=M,qe=mn(re,ke,lt,B);return n.createElement(wn.Provider,{value:qe},b)},$e=(b,M)=>B=>React.createElement(Ce,{entityRef:M},React.createElement(b,{...B})),Je=()=>(0,n.useContext)(wn),He=["h1","h2","h3","h4","h5","h6"],et=b=>{const M=(0,R.s0)(),B=(0,F.Z)(),re=(0,e.h_)(Ie),ke=(0,e.h_)(ye.q3),lt=(0,e.h_)(e.Ds),{namespace:qe="",kind:Rt="",name:zt=""}=b,{state:an,path:Qt,content:Cn}=Je(),Zt=B.palette.type==="dark",[Rn,Fn]=(0,n.useState)(),[zn,Zn]=(0,n.useState)(null),{isPinned:oa}=(0,n.useContext)(Le.qn),sa=(0,n.useCallback)(()=>{if(!zn||!Rn)return;const Mn=zn.querySelector(".md-container > .md-tabs"),Nn=window.matchMedia("screen and (max-width: 76.1875em)").matches,Xn=Math.max(zn.getBoundingClientRect().top,0);Rn.forEach(ta=>{Nn?ta.style.top="0px":Mn?ta.style.top=`${Xn+Mn.getBoundingClientRect().height}px`:ta.style.top=`${Xn}px`})},[zn,Rn]);(0,n.useEffect)(()=>(sa(),window.addEventListener("scroll",sa,!0),window.addEventListener("resize",sa),()=>{window.removeEventListener("scroll",sa,!0),window.removeEventListener("resize",sa)}),[sa,an]);const ya=(0,n.useCallback)(()=>{if(!zn)return;const Mn=zn.querySelector(".md-footer");Mn&&(Mn.style.width=`${zn.getBoundingClientRect().width}px`)},[zn]);(0,n.useEffect)(()=>(ya(),window.addEventListener("resize",ya),()=>{window.removeEventListener("resize",ya)}));const va=(0,n.useCallback)((Mn,Nn)=>_n(Mn,[fn(lt.getOptionalConfig("techdocs.sanitizer")),ie({techdocsStorageApi:re,entityId:{kind:Rt,name:zt,namespace:qe},path:Nn}),Ve(),fe(),Sn(),yn(),ve(ke),Pn({css:`
          /*
            As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
            As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
          */
          :host {
            /* FONT */
            --md-default-fg-color: ${B.palette.text.primary};
            --md-default-fg-color--light: ${B.palette.text.secondary};
            --md-default-fg-color--lighter: ${(0,te.$n)(B.palette.text.secondary,.7)};
            --md-default-fg-color--lightest: ${(0,te.$n)(B.palette.text.secondary,.3)};

            /* BACKGROUND */
            --md-default-bg-color:${B.palette.background.default};
            --md-default-bg-color--light: ${B.palette.background.paper};
            --md-default-bg-color--lighter: ${(0,te.$n)(B.palette.background.paper,.7)};
            --md-default-bg-color--lightest: ${(0,te.$n)(B.palette.background.paper,.3)};

            /* PRIMARY */
            --md-primary-fg-color: ${B.palette.primary.main};
            --md-primary-fg-color--light: ${B.palette.primary.light};
            --md-primary-fg-color--dark: ${B.palette.primary.dark};
            --md-primary-bg-color: ${B.palette.primary.contrastText};
            --md-primary-bg-color--light: ${(0,te.$n)(B.palette.primary.contrastText,.7)};

            /* ACCENT */
            --md-accent-fg-color: var(--md-primary-fg-color);

            /* SHADOW */
            --md-shadow-z1: ${B.shadows[1]};
            --md-shadow-z2: ${B.shadows[2]};
            --md-shadow-z3: ${B.shadows[3]};

            /* EXTENSIONS */
            --md-admonition-fg-color: var(--md-default-fg-color);
            --md-admonition-bg-color: var(--md-default-bg-color);
            /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
            --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
            --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
            --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
            --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
            --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
            --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
            --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
            --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
            --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
            --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
            --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
            --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
            --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
            --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
            --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
            --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
            --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
            --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
            --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
            --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
            --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
            --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
            --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
            --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
            --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
            --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
          }

          :host > * {
            /* CODE */
            --md-code-fg-color: ${B.palette.text.primary};
            --md-code-bg-color: ${B.palette.background.paper};
            --md-code-hl-color: ${(0,te.Fq)(B.palette.warning.main,.5)};
            --md-code-hl-keyword-color: ${Zt?B.palette.primary.light:B.palette.primary.dark};
            --md-code-hl-function-color: ${Zt?B.palette.secondary.light:B.palette.secondary.dark};
            --md-code-hl-string-color: ${Zt?B.palette.success.light:B.palette.success.dark};
            --md-code-hl-number-color: ${Zt?B.palette.error.light:B.palette.error.dark};
            --md-code-hl-constant-color: var(--md-code-hl-function-color);
            --md-code-hl-special-color: var(--md-code-hl-function-color);
            --md-code-hl-name-color: var(--md-code-fg-color);
            --md-code-hl-comment-color: var(--md-default-fg-color--light);
            --md-code-hl-generic-color: var(--md-default-fg-color--light);
            --md-code-hl-variable-color: var(--md-default-fg-color--light);
            --md-code-hl-operator-color: var(--md-default-fg-color--light);
            --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

            /* TYPESET */
            --md-typeset-font-size: 1rem;
            --md-typeset-color: var(--md-default-fg-color);
            --md-typeset-a-color: var(--md-accent-fg-color);
            --md-typeset-table-color: ${B.palette.text.primary};
            --md-typeset-del-color: ${Zt?(0,te.Fq)(B.palette.error.dark,.5):(0,te.Fq)(B.palette.error.light,.5)};
            --md-typeset-ins-color: ${Zt?(0,te.Fq)(B.palette.success.dark,.5):(0,te.Fq)(B.palette.success.light,.5)};
            --md-typeset-mark-color: ${Zt?(0,te.Fq)(B.palette.warning.dark,.5):(0,te.Fq)(B.palette.warning.light,.5)};
          }

          @media screen and (max-width: 76.1875em) {
            :host > * {
              /* TYPESET */
              --md-typeset-font-size: .9rem;
            }
          }

          @media screen and (max-width: 600px) {
            :host > * {
              /* TYPESET */
              --md-typeset-font-size: .7rem;
            }
          }
          `}),Pn({css:`
            body {
              --md-text-color: var(--md-default-fg-color);
              --md-text-link-color: var(--md-accent-fg-color);
              --md-text-font-family: ${B.typography.fontFamily};
              font-family: var(--md-text-font-family);
              background-color: unset;
            }
          `}),Pn({css:`
            .md-grid {
              max-width: 100%;
              margin: 0;
            }

            .md-nav {
              font-size: calc(var(--md-typeset-font-size) * 0.9);
            }
            .md-nav__link {
              display: flex;
              align-items: center;
              justify-content: space-between;
            }
            .md-nav__icon {
              height: 20px !important;
              width: 20px !important;
              margin-left:${B.spacing(1)}px;
            }
            .md-nav__icon svg {
              margin: 0;
              width: 20px !important;
              height: 20px !important;
            }
            .md-nav__icon:after {
              width: 20px !important;
              height: 20px !important;
            }

            .md-main__inner {
              margin-top: 0;
            }

            .md-sidebar {
              bottom: 75px;
              position: fixed;
              width: 16rem;
              overflow-y: auto;
              overflow-x: hidden;
              scrollbar-color: rgb(193, 193, 193) #eee;
              scrollbar-width: thin;
            }
            .md-sidebar .md-sidebar__scrollwrap {
              width: calc(16rem - 10px);
            }
            .md-sidebar--secondary {
              right: ${B.spacing(3)}px;
            }
            .md-sidebar::-webkit-scrollbar {
              width: 5px;
            }
            .md-sidebar::-webkit-scrollbar-button {
              width: 5px;
              height: 5px;
            }
            .md-sidebar::-webkit-scrollbar-track {
              background: #eee;
              border: 1 px solid rgb(250, 250, 250);
              box-shadow: 0px 0px 3px #dfdfdf inset;
              border-radius: 3px;
            }
            .md-sidebar::-webkit-scrollbar-thumb {
              width: 5px;
              background: rgb(193, 193, 193);
              border: transparent;
              border-radius: 3px;
            }
            .md-sidebar::-webkit-scrollbar-thumb:hover {
              background: rgb(125, 125, 125);
            }

            .md-content {
              max-width: calc(100% - 16rem * 2);
              margin-left: 16rem;
              margin-bottom: 50px;
            }

            .md-footer {
              position: fixed;
              bottom: 0px;
            }
            .md-footer__title {
              background-color: unset;
            }
            .md-footer-nav__link {
              width: 16rem;
            }

            .md-dialog {
              background-color: unset;
            }

            @media screen and (min-width: 76.25em) {
              .md-sidebar {
                height: auto;
              }
            }
            
            @media screen and (max-width: 76.1875em) {
              .md-nav {
                transition: none !important;
                background-color: var(--md-default-bg-color)
              }
              .md-nav--primary .md-nav__title {
                cursor: auto;
                color: var(--md-default-fg-color);
                font-weight: 700;
                white-space: normal;
                line-height: 1rem;
                height: auto;
                display: flex;
                flex-flow: column;
                row-gap: 1.6rem;
                padding: 1.2rem .8rem .8rem;
                background-color: var(--md-default-bg-color);
              }
              .md-nav--primary .md-nav__title~.md-nav__list {
                box-shadow: none;
              }
              .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
                border-top: none;
              }
              .md-nav--primary .md-nav__title .md-nav__button {
                display: none;
              }
              .md-nav--primary .md-nav__title .md-nav__icon {
                color: var(--md-default-fg-color);
                position: static;
                height: auto;
                margin: 0 0 0 -0.2rem;
              }
              .md-nav--primary > .md-nav__title [for="none"] {
                padding-top: 0;
              }
              .md-nav--primary .md-nav__item {
                border-top: none;
              }
              .md-nav--primary :is(.md-nav__title,.md-nav__item) {
                font-size : var(--md-typeset-font-size);
              }
              .md-nav .md-source {
                display: none;
              }

              .md-sidebar {
                height: 100%;
              }
              .md-sidebar--primary {
                width: 12.1rem !important;
                z-index: 200;
                left: ${oa?"calc(-12.1rem + 242px)":"calc(-12.1rem + 72px)"} !important;
              }
              .md-sidebar--secondary:not([hidden]) {
                display: none;
              }

              .md-content {
                max-width: 100%;
                margin-left: 0;
              }

              .md-header__button {
                margin: 0.4rem 0;
                margin-left: 0.4rem;
                padding: 0;
              }

              .md-overlay {
                left: 0;
              }

              .md-footer {
                position: static;
                padding-left: 0;
              }
              .md-footer-nav__link {
                /* footer links begin to overlap at small sizes without setting width */
                width: 50%;
              }
            }

            @media screen and (max-width: 600px) {
              .md-sidebar--primary {
                left: -12.1rem !important;
                width: 12.1rem;
              }
            }
          `}),Pn({css:`
            .md-typeset {
              font-size: var(--md-typeset-font-size);
            }

            ${He.reduce((Xn,ta)=>{const ia=B.typography[ta],{lineHeight:ca,fontFamily:na,fontWeight:ja,fontSize:Na}=ia,Wa=_a=>{let Sa=1;return typeof _a=="number"&&(Sa=_a/16*.6),typeof _a=="string"&&(Sa=_a.replace("rem","")),`calc(${Sa} * var(--md-typeset-font-size))`};return Xn.concat(`
                .md-typeset ${ta} {
                  color: var(--md-default-fg-color);
                  line-height: ${ca};
                  font-family: ${na};
                  font-weight: ${ja};
                  font-size: ${Wa(Na)};
                }
              `)},"")}

            .md-typeset .md-content__button {
              color: var(--md-default-fg-color);
            }

            .md-typeset hr {
              border-bottom: 0.05rem dotted ${B.palette.divider};
            }

            .md-typeset details {
              font-size: var(--md-typeset-font-size) !important;
            }
            .md-typeset details summary {
              padding-left: 2.5rem !important;
            }
            .md-typeset details summary:before,
            .md-typeset details summary:after {
              top: 50% !important;
              width: 20px !important;
              height: 20px !important;
              transform: rotate(0deg) translateY(-50%) !important;
            }
            .md-typeset details[open] > summary:after {
              transform: rotate(90deg) translateX(-50%) !important;
            }

            .md-typeset blockquote {
              color: var(--md-default-fg-color--light);
              border-left: 0.2rem solid var(--md-default-fg-color--light);
            }

            .md-typeset table:not([class]) {
              font-size: var(--md-typeset-font-size);
              border: 1px solid var(--md-default-fg-color);
              border-bottom: none;
              border-collapse: collapse;
            }
            .md-typeset table:not([class]) th {
              font-weight: bold;
            }
            .md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
              border-bottom: 1px solid var(--md-default-fg-color);
            }

            .md-typeset pre > code::-webkit-scrollbar-thumb {
              background-color: hsla(0, 0%, 0%, 0.32);
            }
            .md-typeset pre > code::-webkit-scrollbar-thumb:hover {
              background-color: hsla(0, 0%, 0%, 0.87);
            }
          `}),Pn({css:`
            /*
              Disable CSS animations on link colors as they lead to issues in dark mode.
              The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
            */
            .md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
              transition: none;
            }
          `}),Pn({css:`
            /* HIGHLIGHT */
            .highlight .md-clipboard:after {
              content: unset;
            }

            .highlight .nx {
              color: ${Zt?"#ff53a3":"#ec407a"};
            }

            /* CODE HILITE */
            .codehilite .gd {
              background-color: ${Zt?"rgba(248,81,73,0.65)":"#fdd"};
            }

            .codehilite .gi {
              background-color: ${Zt?"rgba(46,160,67,0.65)":"#dfd"};
            }

            /* TABBED */
            .tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
            .tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
            .tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
            .tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
            .tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
            .tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
            .tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
            .tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
            .tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
            .tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
            .tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
            .tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
            .tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
            .tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
            .tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
            .tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
            .tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
            .tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
            .tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
            .tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
              color: var(--md-accent-fg-color);
              border-color: var(--md-accent-fg-color);
            }

            /* TASK-LIST */
            .task-list-control .task-list-indicator::before {
              background-color: ${B.palette.action.disabledBackground};
            }
            .task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
             background-color: ${B.palette.success.main};
            }

            /* ADMONITION */
            .admonition {
              font-size: var(--md-typeset-font-size) !important;
            }
            .admonition .admonition-title {
              padding-left: 2.5rem !important;
            }

            .admonition .admonition-title:before {
              top: 50% !important;
              width: 20px !important;
              height: 20px !important;
              transform: translateY(-50%) !important;
            }
          `})]),[Rt,zt,qe,ke,lt,re,B,Zt,oa]),Bn=(0,n.useCallback)(async Mn=>_n(Mn,[An(),gn(B),ft({baseUrl:window.location.origin,onClick:(Nn,Xn)=>{var ta,ia;const ca=Nn.ctrlKey||Nn.metaKey,na=new URL(Xn);na.hash?ca?window.open(`${na.pathname}${na.hash}`,"_blank"):(M(`${na.pathname}${na.hash}`),(ta=Mn==null?void 0:Mn.querySelector(`#${na.hash.slice(1)}`))==null||ta.scrollIntoView()):ca?window.open(na.pathname,"_blank"):(M(na.pathname),(ia=Mn==null?void 0:Mn.querySelector(".md-content__inner"))==null||ia.scrollIntoView())}}),Re({docStorageUrl:await re.getApiOrigin(),onLoading:Nn=>{Nn.style.setProperty("opacity","0")},onLoaded:Nn=>{var Xn;Nn.style.removeProperty("opacity"),(Xn=Nn.querySelector(".md-nav__title"))==null||Xn.removeAttribute("for"),Fn(Array.from(Nn.querySelectorAll(".md-sidebar")))}})]),[B,M,re]);return(0,n.useEffect)(()=>{if(!Cn)return()=>{};let Mn=!0;return va(Cn,Qt).then(async Nn=>{if(!(Nn!=null&&Nn.innerHTML)||!Mn)return;window.scroll({top:0});const Xn=await Bn(Nn);Zn(Xn)}),()=>{Mn=!1}},[Cn,Qt,va,Bn]),zn},Q=({entityRef:b,onReady:M=()=>{},withSearch:B=!0})=>{var re,ke;const lt=cn(),qe=et(b),Rt=(0,n.useRef)(null),zt=(0,n.useRef)(M);return(0,n.useEffect)(()=>{zt.current=M},[M]),(0,n.useEffect)(()=>{if(!qe||!Rt.current)return;const an=Rt.current,Qt=an.shadowRoot||an.attachShadow({mode:"open"});Array.from(Qt.children).forEach(Cn=>Qt.removeChild(Cn)),Qt.appendChild(qe),zt.current()},[qe]),n.createElement(n.Fragment,null,n.createElement(kt,null),B&&((ke=(re=Rt==null?void 0:Rt.current)==null?void 0:re.shadowRoot)==null?void 0:ke.innerHTML)&&n.createElement(A.Z,{container:!0,className:lt.searchBar},n.createElement(x,{entityId:b})),n.createElement("div",{"data-testid":"techdocs-content-shadowroot",ref:Rt}))},ne=b=>{const{entityRef:M,onReady:B=()=>{},withSearch:re=!0}=b;return n.createElement(Ce,{entityRef:M},n.createElement(Q,{entityRef:M,onReady:B,withSearch:re}))},ce=(0,e.NT)({id:"techdocs:index-page"}),me=(0,e.NT)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),tt=(0,e.NT)({id:"techdocs:catalog-reader-view"}),ht=b=>{const{entityRef:M,entityMetadata:B,techDocsMetadata:re,children:ke}=b,{name:lt}=M,{site_name:qe,site_description:Rt}=re||{},{locationMetadata:zt,spec:an}=B||{},Qt=an==null?void 0:an.lifecycle,Cn=B?(0,je.hF)(B,Pt.S4):[],Zt=(0,e.tg)(ce)(),Rn=n.createElement(n.Fragment,null,n.createElement(Le.i9,{label:"Component",value:n.createElement(je.dx,{color:"inherit",entityRef:M,defaultKind:"Component"})}),Cn.length>0&&n.createElement(Le.i9,{label:"Owner",value:n.createElement(je.rI,{color:"inherit",entityRefs:Cn,defaultKind:"group"})}),Qt?n.createElement(Le.i9,{label:"Lifecycle",value:Qt}):null,zt&&zt.type!=="dir"&&zt.type!=="file"?n.createElement(Le.i9,{label:"",value:n.createElement("a",{href:zt.target,target:"_blank",rel:"noopener noreferrer"},n.createElement($t.Z,{style:{marginTop:"-25px",fill:"#fff"}}))}):null);return n.createElement(Le.h4,{title:qe||".",pageTitleOverride:qe||lt,subtitle:Rt&&Rt!=="None"?Rt:"",type:"Docs",typeLink:Zt},Rn,ke)};function st(b,M){return M.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?b:b.toLocaleLowerCase("en-US")}const Dt=b=>{const{entities:M}=b,B=(0,e.tg)(me),re=(0,e.h_)(e.Ds);return M?n.createElement(Le.Oh,{"data-testid":"docs-explore"},M!=null&&M.length?M.map((ke,lt)=>{var qe,Rt;return n.createElement(we.Z,{key:lt},n.createElement(ct.Z,null,n.createElement(Le.hu,{title:(qe=ke.metadata.title)!=null?qe:ke.metadata.name})),n.createElement(nt.Z,null,ke.metadata.description),n.createElement(se.Z,null,n.createElement(Le.zx,{to:B({namespace:st((Rt=ke.metadata.namespace)!=null?Rt:"default",re),kind:st(ke.kind,re),name:st(ke.metadata.name,re)}),color:"primary","data-testid":"read_docs"},"Read Docs")))}):null):null},qt=()=>{const{loading:b,error:M,entities:B}=useEntityList();return M?React.createElement(WarningPanel,{severity:"error",title:"Could not load available documentation."},React.createElement(CodeSnippet,{language:"text",text:M.toString()})):b||!B?React.createElement(Progress,null):(B.sort((re,ke)=>{var lt,qe;return((lt=re.metadata.title)!=null?lt:re.metadata.name).localeCompare((qe=ke.metadata.title)!=null?qe:ke.metadata.name)}),React.createElement(Dt,{entities:B}))},un=(0,ze.Z)({root:{color:"#f3ba37"}})(mt.Z),Ut={createCopyDocsUrlAction(b){return M=>({icon:()=>n.createElement(vt.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>b(`${window.location.origin}${M.resolved.docsUrl}`)})},createStarEntityAction(b,M){return({entity:B})=>{const re=b(B);return{cellStyle:{paddingLeft:"1em"},icon:()=>re?n.createElement(un,null):n.createElement(_t.Z,null),tooltip:re?"Remove from favorites":"Add to favorites",onClick:()=>M(B)}}}};function Lt(b){return b.metadata.title||b.metadata.name}const Vt={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:b=>n.createElement(Le.uw,{value:n.createElement(Le.rU,{to:b.resolved.docsUrl},Lt(b.entity)),subvalue:b.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:b})=>n.createElement(je.rI,{entityRefs:b.ownedByRelations,defaultKind:"group"})}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},on=b=>{const{entities:M,title:B,loading:re,columns:ke,actions:lt}=b,[,qe]=(0,Fe.Z)(),Rt=(0,e.tg)(me),zt=(0,e.h_)(e.Ds);if(!M)return null;const an=M.map(Zt=>{var Rn;const Fn=(0,je.hF)(Zt,Pt.S4);return{entity:Zt,resolved:{docsUrl:Rt({namespace:st((Rn=Zt.metadata.namespace)!=null?Rn:"default",zt),kind:st(Zt.kind,zt),name:st(Zt.metadata.name,zt)}),ownedByRelations:Fn,ownedByRelationsTitle:Fn.map(zn=>(0,je.$3)(zn,{defaultKind:"group"})).join(", ")}}}),Qt=[Vt.createNameColumn(),Vt.createOwnerColumn(),Vt.createTypeColumn()],Cn=[Ut.createCopyDocsUrlAction(qe)];return n.createElement(n.Fragment,null,re||an&&an.length>0?n.createElement(Le.iA,{isLoading:re,options:{paging:!0,pageSize:20,search:!0,actionsColumnIndex:-1},data:an,columns:ke||Qt,actions:lt||Cn,title:B?`${B} (${an.length})`:`All (${an.length})`}):n.createElement(Le.ub,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:n.createElement(Le.zx,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};on.columns=Vt,on.actions=Ut;const sn=b=>{var M,B;const{columns:re,actions:ke}=b,{loading:lt,error:qe,entities:Rt,filters:zt}=(0,je.wp)(),{isStarredEntity:an,toggleStarredEntity:Qt}=(0,je.CR)(),[,Cn]=(0,Fe.Z)(),Zt=(0,be.capitalize)((B=(M=zt.user)==null?void 0:M.value)!=null?B:"all"),Rn=[Ut.createCopyDocsUrlAction(Cn),Ut.createStarEntityAction(an,Qt)];return qe?n.createElement(Le.GB,{severity:"error",title:"Could not load available documentation."},n.createElement(Le.Oi,{language:"text",text:qe.toString()})):n.createElement(on,{title:Zt,entities:Rt,loading:lt,actions:ke||Rn,columns:re})};sn.columns=Vt,sn.actions=Ut;const X=b=>{var M;const{children:B}=b,ke=`Documentation available in ${(M=(0,e.h_)(e.Ds).getOptionalString("organization.name"))!=null?M:"Backstage"}`;return n.createElement(Le.g9,{title:"Documentation",subtitle:ke,themeId:"documentation"},B)};class Ne{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":je.n3}}}const it=()=>{const{updateFilters:b}=(0,je.wp)();return(0,n.useEffect)(()=>{b({techdocs:new Ne})},[b]),null},St=b=>{const{initialFilter:M="all",columns:B,actions:re}=b;return n.createElement(X,null,n.createElement(Le.VY,null,n.createElement(Le.yW,{title:""},n.createElement(Le.qt,null,"Discover documentation in your ecosystem.")),n.createElement(je.UO,null,n.createElement(je._i,null,n.createElement(je._i.Filters,null,n.createElement(it,null),n.createElement(je.EW,{initialFilter:M}),n.createElement(je.dq,null),n.createElement(je.xE,null)),n.createElement(je._i.Content,null,n.createElement(sn,{actions:re,columns:B}))))))},at=(0,e.rx)({id:"techdocs",apis:[(0,e.ni)({api:Ie,deps:{configApi:e.Ds,discoveryApi:e.NW,identityApi:e.$4,fetchApi:e.gP},factory:({configApi:b,discoveryApi:M,identityApi:B,fetchApi:re})=>new rt({configApi:b,discoveryApi:M,identityApi:B,fetchApi:re})}),(0,e.ni)({api:ue,deps:{configApi:e.Ds,discoveryApi:e.NW,fetchApi:e.gP},factory:({configApi:b,discoveryApi:M,fetchApi:B})=>new Ze({configApi:b,discoveryApi:M,fetchApi:B})})],routes:{root:ce,docRoot:me,entityContent:tt}}),Ot=at.provide((0,e.P4)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return oe}).then(b=>b.Router),mountPoint:ce})),wt=at.provide((0,e.P4)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return oe}).then(b=>b.EmbeddedDocsRouter),mountPoint:tt})),hn=at.provide((0,e.P4)({name:"TechDocsCustomHome",component:()=>t.e(1123).then(t.bind(t,1123)).then(b=>b.TechDocsCustomHome),mountPoint:ce})),pn=at.provide((0,e.P4)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(function(){return J}).then(b=>b.TechDocsIndexPage),mountPoint:ce})),Xt=at.provide((0,e.P4)({name:"TechDocsReaderPage",component:()=>Promise.resolve().then(function(){return m}).then(b=>b.TechDocsReaderPage),mountPoint:me})),En=()=>(0,R.pC)()||n.createElement(St,null);var J=Object.freeze({__proto__:null,TechDocsIndexPage:En});const o=b=>{const{children:M}=b,{NotFoundErrorPage:B}=(0,e.qD)().getComponents(),re=(0,R.pC)(),[ke,lt]=(0,n.useState)(!1),{namespace:qe,kind:Rt,name:zt}=(0,R.UO)(),an=(0,e.h_)(ue),{value:Qt}=(0,ut.default)(()=>ke?an.getTechDocsMetadata({kind:Rt,namespace:qe,name:zt}):Promise.resolve(void 0),[Rt,qe,zt,an,ke]),{value:Cn,error:Zt}=(0,ut.default)(()=>an.getEntityMetadata({kind:Rt,namespace:qe,name:zt}),[Rt,qe,zt,an]),Rn=(0,n.useCallback)(()=>{lt(!0)},[lt]);return Zt?n.createElement(B,null):M?n.createElement(Le.T3,{themeId:"documentation"},M instanceof Function?M({techdocsMetadataValue:Qt,entityMetadataValue:Cn,entityRef:{kind:Rt,namespace:qe,name:zt},onReady:Rn}):M):re||n.createElement(Le.T3,{themeId:"documentation"},n.createElement(ht,{techDocsMetadata:Qt,entityMetadata:Cn,entityRef:{kind:Rt,namespace:qe,name:zt}}),n.createElement(Le.VY,{"data-testid":"techdocs-content"},n.createElement(ne,{onReady:Rn,entityRef:{kind:Rt,namespace:qe,name:zt}})))};var m=Object.freeze({__proto__:null,TechDocsReaderPage:o});const I=({entity:b})=>{var M;const B=(0,e.h_)(e.Ds);return n.createElement(ne,{withSearch:!1,entityRef:{namespace:st((M=b.metadata.namespace)!=null?M:"default",B),kind:st(b.kind,B),name:st(b.metadata.name,B)}})},k="backstage.io/techdocs-ref";var oe=Object.freeze({__proto__:null,isTechDocsAvailable:b=>{var M,B;return Boolean((B=(M=b==null?void 0:b.metadata)==null?void 0:M.annotations)==null?void 0:B[k])},Router:()=>n.createElement(R.Z5,null,n.createElement(R.AW,{path:"/",element:n.createElement(En,null)}),n.createElement(R.AW,{path:"/:namespace/:kind/:name/*",element:n.createElement(o,null)})),EmbeddedDocsRouter:()=>{var b;const{entity:M}=(0,je.X2)();return((b=M.metadata.annotations)==null?void 0:b[k])?n.createElement(R.Z5,null,n.createElement(R.AW,{path:"/*",element:n.createElement(I,{entity:M})})):n.createElement(Le.sk,{annotation:k})}})},43229:function(Tt,l,t){t.d(l,{H2:function(){return de},Zr:function(){return V},kG:function(){return xe}});var e=t(30705),i=t(2784),h=t(47603),s=t(49558),n=t(90436),R=t(77277),P=t(38402),w=t(86136),u=t(49378),y=t(80030),O=t(9520),K=t(11776),D=t(82938),g=t(60905),T=t(86619),f=t(61837),U=t(79692),p=t(43434),d=t(48348),A=t(12231),N=t(11640),c=t(33375),Z=t(64279),F=t(71554),te=t(43054),we=t(72164),ct=t(59324),nt=t(13737),se=t(31168);const ye=(0,e.NT)({id:"user-settings"}),de=(0,e.rx)({id:"user-settings",routes:{settingsPage:ye}}).provide((0,e.P4)({name:"UserSettingsPage",component:()=>Promise.resolve().then(function(){return vt}).then(ze=>ze.SettingsPage),mountPoint:ye})),V=ze=>{const mt=(0,e.tg)(ye),_t=ze.icon?ze.icon:h.Z;return i.createElement(s.R6,{text:"Settings",to:mt(),icon:_t})},he=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,C=()=>i.createElement(s.ub,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:i.createElement(i.Fragment,null,i.createElement(n.Z,{variant:"body1"},"Open ",i.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),i.createElement(s.Oi,{text:he,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),i.createElement(R.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),Ke=({title:ze,description:mt,icon:_t,apiRef:Ie})=>{const ue=(0,e.h_)(Ie),[Ze,rt]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let le=!1;const ie=ue.sessionState$().subscribe(ve=>{le||rt(ve===e.sM.SignedIn)});return()=>{le=!0,ie.unsubscribe()}},[ue]),i.createElement(P.Z,null,i.createElement(w.Z,null,i.createElement(_t,null)),i.createElement(u.Z,{primary:ze,secondary:i.createElement(y.ZP,{placement:"top",arrow:!0,title:mt},i.createElement("span",null,mt)),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),i.createElement(O.Z,null,i.createElement(y.ZP,{placement:"top",arrow:!0,title:Ze?`Sign out from ${ze}`:`Sign in to ${ze}`},i.createElement(R.Z,{variant:"outlined",color:"primary",onClick:()=>Ze?ue.signOut():ue.signIn()},Ze?"Sign out":"Sign in"))))},j=({configuredProviders:ze})=>i.createElement(i.Fragment,null,ze.includes("google")&&i.createElement(Ke,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:e.Kp,icon:N.Z}),ze.includes("microsoft")&&i.createElement(Ke,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:e.p_,icon:N.Z}),ze.includes("github")&&i.createElement(Ke,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:e.F4,icon:N.Z}),ze.includes("gitlab")&&i.createElement(Ke,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:e.ux,icon:N.Z}),ze.includes("okta")&&i.createElement(Ke,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:e.D,icon:N.Z}),ze.includes("bitbucket")&&i.createElement(Ke,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:e.bq,icon:N.Z}),ze.includes("atlassian")&&i.createElement(Ke,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:e.uB,icon:N.Z})),It=({providerSettings:ze})=>{const _t=(0,e.h_)(e.Ds).getOptionalConfig("auth.providers"),Ie=(_t==null?void 0:_t.keys())||[],ue=ze!=null?ze:i.createElement(j,{configuredProviders:Ie});return!ze&&!(Ie!=null&&Ie.length)?i.createElement(C,null):i.createElement(s.rJ,{title:"Available Providers"},i.createElement(K.Z,{dense:!0},ue))},Be=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,L=()=>i.createElement(s.ub,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:i.createElement(i.Fragment,null,i.createElement(n.Z,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),i.createElement(s.Oi,{text:Be,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),i.createElement(R.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),Y=({flag:ze,enabled:mt,toggleHandler:_t})=>i.createElement(P.Z,{divider:!0,button:!0,onClick:()=>_t(ze.name)},i.createElement(w.Z,null,i.createElement(y.ZP,{placement:"top",arrow:!0,title:mt?"Disable":"Enable"},i.createElement(D.Z,{color:"primary",checked:mt,name:ze.name}))),i.createElement(u.Z,{primary:ze.name,secondary:`Registered in ${ze.pluginId} plugin`})),z=()=>{const ze=(0,e.h_)(e.W0),mt=ze.getRegisteredFlags(),_t=Object.fromEntries(mt.map(({name:ft})=>[ft,ze.isActive(ft)])),[Ie,ue]=(0,i.useState)(_t),[Ze,rt]=(0,i.useState)(""),le=i.useRef(),ie=(0,i.useCallback)(ft=>{const Wt=ze.isActive(ft)?e.CL.None:e.CL.Active;ze.save({states:{[ft]:Wt},merge:!0}),ue(Yt=>({...Yt,[ft]:Wt===e.CL.Active}))},[ze]);if(!mt.length)return i.createElement(L,null);const ve=()=>{var ft;rt(""),(ft=le==null?void 0:le.current)==null||ft.focus()};let fe=Array.from(mt);Ze.split(/\s/).map(ft=>ft.trim().toLocaleLowerCase("en-US")).forEach(ft=>fe=fe.filter(Wt=>Wt.name.toLocaleLowerCase("en-US").includes(ft)));const Et=()=>i.createElement(g.Z,{container:!0,style:{justifyContent:"space-between"}},i.createElement(g.Z,{item:!0,xs:6,md:8},i.createElement(n.Z,{variant:"h5"},"Feature Flags")),mt.length>=10&&i.createElement(g.Z,{item:!0,xs:6,md:4},i.createElement(T.Z,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:ft=>ft&&ft.focus(),InputProps:{...Ze.length&&{endAdornment:i.createElement(f.Z,{"aria-label":"Clear filter",onClick:ve,edge:"end"},i.createElement(c.Z,null))}},onChange:ft=>rt(ft.target.value),value:Ze})));return i.createElement(s.rJ,{title:i.createElement(Et,null)},i.createElement(K.Z,{dense:!0},fe.map(ft=>{const Wt=Boolean(Ie[ft.name]);return i.createElement(Y,{key:ft.name,flag:ft,enabled:Wt,toggleHandler:ie})})))},ge=()=>{var ze;const mt=(0,e.h_)(e.$4),_t=(0,e.h_)(e.$v),{value:Ie,loading:ue,error:Ze}=(0,Z.default)(async()=>({profile:await mt.getProfileInfo(),identity:await mt.getBackstageIdentity()}),[]);return(0,i.useEffect)(()=>{Ze&&_t.post({message:`Failed to load user identity: ${Ze}`,severity:"error"})},[Ze,_t]),ue||Ze?{profile:{},displayName:"",loading:ue}:{profile:Ie.profile,displayName:(ze=Ie.profile.displayName)!=null?ze:Ie.identity.userEntityRef,loading:ue}},Ue=(0,U.Z)(ze=>({avatar:{width:({size:mt})=>mt,height:({size:mt})=>mt,fontSize:({size:mt})=>mt*.7,border:`1px solid ${ze.palette.textSubtle}`}})),xe=({size:ze})=>{const{iconSize:mt}=s.po,_t=Ue(ze?{size:ze}:{size:mt}),{profile:Ie}=ge();return i.createElement(p.Z,{src:Ie.picture,className:_t.avatar})},At=()=>{const ze=(0,e.h_)(e.$4),[mt,_t]=i.useState(!1),[Ie,ue]=i.useState(void 0),Ze=le=>{ue(le.currentTarget),_t(!0)},rt=()=>{ue(void 0),_t(!1)};return i.createElement(i.Fragment,null,i.createElement(f.Z,{"data-testid":"user-settings-menu","aria-label":"more",onClick:Ze},i.createElement(te.Z,null)),i.createElement(d.Z,{anchorEl:Ie,open:mt,onClose:rt},i.createElement(A.Z,{"data-testid":"sign-out",onClick:()=>ze.signOut()},i.createElement(w.Z,null,i.createElement(F.Z,null)),"Sign Out")))},nn=()=>{const{profile:ze,displayName:mt}=ge();return i.createElement(s.rJ,{title:"Profile",variant:"gridItem"},i.createElement(g.Z,{container:!0,spacing:6},i.createElement(g.Z,{item:!0},i.createElement(xe,{size:96})),i.createElement(g.Z,{item:!0,xs:12,sm:!0,container:!0},i.createElement(g.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},i.createElement(g.Z,{item:!0,xs:!0},i.createElement(n.Z,{variant:"subtitle1",gutterBottom:!0},mt),i.createElement(n.Z,{variant:"body2",color:"textSecondary"},ze.email))),i.createElement(g.Z,{item:!0},i.createElement(At,null)))))},ut=()=>{const{isPinned:ze,toggleSidebarPinState:mt}=(0,i.useContext)(s.qn);return i.createElement(P.Z,null,i.createElement(u.Z,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),i.createElement(O.Z,null,i.createElement(y.ZP,{placement:"top",arrow:!0,title:`${ze?"Unpin":"Pin"} Sidebar`},i.createElement(D.Z,{color:"primary",checked:ze,onChange:()=>mt(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},Kt=({id:ze,activeId:mt,icon:_t})=>_t?(0,i.cloneElement)(_t,{color:mt===ze?"primary":void 0}):i.createElement(ct.Z,{color:mt===ze?"primary":void 0}),$t=(0,U.Z)(ze=>({list:{[ze.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[ze.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[ze.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),Pt=({children:ze,title:mt,value:_t,...Ie})=>i.createElement(y.ZP,{placement:"top",arrow:!0,title:mt},i.createElement(nt.Z,{value:_t,...Ie},ze)),je=()=>{const ze=$t(),mt=(0,e.h_)(e.hg),_t=(0,we.Z)(mt.activeThemeId$(),mt.getActiveThemeId()),Ie=mt.getInstalledThemes(),ue=(Ze,rt)=>{Ie.some(le=>le.id===rt)?mt.setActiveThemeId(rt):mt.setActiveThemeId(void 0)};return i.createElement(P.Z,{className:ze.list},i.createElement(u.Z,{className:ze.listItemText,primary:"Theme",secondary:"Change the theme mode"}),i.createElement(O.Z,{className:ze.listItemSecondaryAction},i.createElement(se.Z,{exclusive:!0,size:"small",value:_t!=null?_t:"auto",onChange:ue},Ie.map(Ze=>{var rt;const le=(rt=Ie.find(ie=>ie.id===Ze.id))==null?void 0:rt.icon;return i.createElement(Pt,{key:Ze.id,title:`Select ${Ze.title}`,value:Ze.id},i.createElement(i.Fragment,null,Ze.title,"\xA0",i.createElement(Kt,{id:Ze.id,icon:le,activeId:_t})))}),i.createElement(y.ZP,{placement:"top",arrow:!0,title:"Select auto theme"},i.createElement(nt.Z,{value:"auto",selected:_t===void 0},"Auto\xA0",i.createElement(ct.Z,{color:_t===void 0?"primary":void 0}))))))},Fe=()=>{const{isMobile:ze}=(0,i.useContext)(s.qn);return i.createElement(s.rJ,{title:"Appearance",variant:"gridItem"},i.createElement(K.Z,{dense:!0},i.createElement(je,null),!ze&&i.createElement(ut,null)))},be=()=>i.createElement(g.Z,{container:!0,direction:"row",spacing:3},i.createElement(g.Z,{item:!0,xs:12,md:6},i.createElement(nn,null)),i.createElement(g.Z,{item:!0,xs:12,md:6},i.createElement(Fe,null)));var vt=Object.freeze({__proto__:null,SettingsPage:({providerSettings:ze})=>{const{isMobile:mt}=(0,i.useContext)(s.qn);return i.createElement(s.T3,{themeId:"home"},!mt&&i.createElement(s.h4,{title:"Settings"}),i.createElement(s.WD,null,i.createElement(s.WD.Route,{path:"general",title:"General"},i.createElement(be,null)),i.createElement(s.WD.Route,{path:"auth-providers",title:"Authentication Providers"},i.createElement(It,{providerSettings:ze})),i.createElement(s.WD.Route,{path:"feature-flags",title:"Feature Flags"},i.createElement(z,null))))}})},18473:function(Tt,l,t){t.d(l,{CT:function(){return P},EI:function(){return R},Vt:function(){return w},uW:function(){return n}});var e=t(2784);function i(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const h=i(),s=y=>`__@backstage/${y}__`;function n(y,O){const K=s(y);let D=h[K];return D||(D=O(),h[K]=D,D)}function R(y){return Object.freeze(y),{atVersion(O){return y[O]}}}function P(y){return n(y,()=>(0,e.createContext)(void 0))}function w(y){return(0,e.useContext)(P(y))}function u(y){return{set(O){globalThis[`__@backstage/${y}__`]=createContext(R(O))},reset(){delete globalThis[`__@backstage/${y}__`]}}}},85310:function(Tt){Tt.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},51020:function(Tt){Tt.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}}]);})();

//# sourceMappingURL=module-backstage.fa12016b.js.map