"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4931],{44931:function(q,K,n){n.r(K),n.d(K,{CatalogGraphPage:function(){return Re}});var D=n(34520),p=n(49558),M=n(30705),f=n(73495),P=n(95544),C=n(79692),ee=n(42494),W=n(90436),te=n(20633),ae=n(50581),ne=n(61837),S=n(5806),z=n(21324),H=n(86619),le=n(82938),b=n(60905),oe=n(27556),re=n(36444),se=n(60008),$=n(88013),ie=n(13737),e=n(2784),k=n(10289),v=n(98487),ce=n(33375),G=n(19996),V=n(25505),Y=n(38016),me=n(64279),Ee=n(19126),j=n.n(Ee),Q=n(25557),_e=n(72779),ye=n.n(_e),ue=n(14162),Ie=n.n(ue);const de={[v.Nm.LEFT_RIGHT]:"Left to right",[v.Nm.RIGHT_LEFT]:"Right to left",[v.Nm.TOP_BOTTOM]:"Top to bottom",[v.Nm.BOTTOM_TOP]:"Bottom to top"},he=({value:a,onChange:o})=>{const t=(0,e.useCallback)(r=>o(r),[o]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(p.Ph,{label:"Direction",selected:a,items:Object.values(v.Nm).map(r=>({label:de[r],value:r})),onChange:t}))},ge=(0,C.Z)({formControl:{width:"100%",maxWidth:300}}),pe=({value:a,onChange:o})=>{const t=ge(),r=(0,e.useCallback)(E=>{const i=Number(E.target.value);o(i<=0?Number.POSITIVE_INFINITY:i)},[o]),m=(0,e.useCallback)(()=>{o(Number.POSITIVE_INFINITY)},[o]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(ee.Z,{variant:"outlined",className:t.formControl},e.createElement(W.Z,{variant:"button"},"Max Depth"),e.createElement(te.Z,{type:"number",placeholder:"\u221E Infinite",value:isFinite(a)?a:"",onChange:r,endAdornment:e.createElement(ae.Z,{position:"end"},e.createElement(ne.Z,{"aria-label":"clear max depth",onClick:m,edge:"end"},e.createElement(ce.Z,null))),inputProps:{"aria-label":"maxp"},labelWidth:0})))},ve=(0,C.Z)({formControl:{maxWidth:300}}),Oe=({value:a,onChange:o})=>{const t=ve(),r=(0,M.h_)(M.$v),m=(0,M.h_)(f.Ah),{error:E,value:i}=(0,me.default)(async()=>await m.getEntityFacets({facets:["kind"]}).then(c=>{var _;return((_=c.facets.kind)==null?void 0:_.map(h=>h.value).sort())||[]}));(0,e.useEffect)(()=>{E&&r.post({message:"Failed to load entity kinds",severity:"error"})},[E,r]);const s=(0,e.useMemo)(()=>i&&i.map(c=>c.toLocaleLowerCase("en-US")),[i]),u=(0,e.useCallback)((c,_)=>{o(s&&s.every(h=>_.includes(h))?void 0:_)},[s,o]),d=(0,e.useCallback)(()=>{o(a!=null&&a.length?a:void 0)},[a,o]);return!(i!=null&&i.length)||!(s!=null&&s.length)||E?e.createElement(e.Fragment,null):e.createElement(P.Z,{pb:1,pt:1},e.createElement(W.Z,{variant:"button"},"Kinds"),e.createElement($.ZP,{className:t.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":"Kinds",options:s,value:a!=null?a:s,getOptionLabel:c=>{var _;return(_=i[s.indexOf(c)])!=null?_:c},onChange:u,onBlur:d,renderOption:(c,{selected:_})=>{var h;return e.createElement(S.Z,{control:e.createElement(z.Z,{icon:e.createElement(V.Z,{fontSize:"small"}),checkedIcon:e.createElement(G.Z,{fontSize:"small"}),checked:_}),label:(h=i[s.indexOf(c)])!=null?h:c})},size:"small",popupIcon:e.createElement(Y.Z,{"data-testid":"selected-kinds-expand"}),renderInput:c=>e.createElement(H.Z,{...c,variant:"outlined"})}))},De=(0,C.Z)({formControl:{maxWidth:300}}),Me=({relationPairs:a,value:o,onChange:t})=>{const r=De(),m=(0,e.useMemo)(()=>a.flat(),[a]),E=(0,e.useCallback)((s,u)=>{t(m.every(d=>u.includes(d))?void 0:u)},[m,t]),i=(0,e.useCallback)(()=>{t(o!=null&&o.length?o:void 0)},[o,t]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(W.Z,{variant:"button"},"Relations"),e.createElement($.ZP,{className:r.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":"Relations",options:m,value:o!=null?o:m,onChange:E,onBlur:i,renderOption:(s,{selected:u})=>e.createElement(S.Z,{control:e.createElement(z.Z,{icon:e.createElement(V.Z,{fontSize:"small"}),checkedIcon:e.createElement(G.Z,{fontSize:"small"}),checked:u}),label:s}),size:"small",popupIcon:e.createElement(Y.Z,{"data-testid":"selected-relations-expand"}),renderInput:s=>e.createElement(H.Z,{...s,variant:"outlined"})}))},fe=(0,C.Z)({root:{width:"100%",maxWidth:300}}),J=({label:a,value:o,onChange:t})=>{const r=fe(),m=(0,e.useCallback)(E=>{t(E.target.checked)},[t]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(S.Z,{control:e.createElement(le.Z,{checked:o,onChange:m,name:a,color:"primary"}),label:a,className:r.root}))};function Pe({initialState:a={}}){const o=(0,k.TH)(),t=(0,e.useMemo)(()=>j().parse(o.search,{arrayLimit:0,ignoreQueryPrefix:!0})||{},[o.search]),[r,m]=(0,e.useState)(()=>{var l;return(Array.isArray(t.rootEntityRefs)?t.rootEntityRefs:(l=a==null?void 0:a.rootEntityRefs)!=null?l:[]).map(g=>(0,D.of)(g))}),[E,i]=(0,e.useState)(()=>{var l;return typeof t.maxDepth=="string"?X(t.maxDepth):(l=a==null?void 0:a.maxDepth)!=null?l:Number.POSITIVE_INFINITY}),[s,u]=(0,e.useState)(()=>Array.isArray(t.selectedRelations)?t.selectedRelations:a==null?void 0:a.selectedRelations),[d,c]=(0,e.useState)(()=>{var l;return(l=Array.isArray(t.selectedKinds)?t.selectedKinds:a==null?void 0:a.selectedKinds)==null?void 0:l.map(g=>g.toLocaleLowerCase("en-US"))}),[_,h]=(0,e.useState)(()=>{var l;return typeof t.unidirectional=="string"?t.unidirectional==="true":(l=a==null?void 0:a.unidirectional)!=null?l:!0}),[y,Z]=(0,e.useState)(()=>{var l;return typeof t.mergeRelations=="string"?t.mergeRelations==="true":(l=a==null?void 0:a.mergeRelations)!=null?l:!0}),[I,U]=(0,e.useState)(()=>{var l;return typeof t.direction=="string"?t.direction:(l=a==null?void 0:a.direction)!=null?l:v.Nm.LEFT_RIGHT}),[T,R]=(0,e.useState)(()=>{var l;return typeof t.showFilters=="string"?t.showFilters==="true":(l=a==null?void 0:a.showFilters)!=null?l:!0}),B=(0,e.useCallback)(()=>R(l=>!l),[R]),N=(0,Q.Z)(o.search);(0,e.useEffect)(()=>{o.search!==N&&(Array.isArray(t.rootEntityRefs)&&m(t.rootEntityRefs.map(l=>(0,D.of)(l))),typeof t.maxDepth=="string"&&i(X(t.maxDepth)),Array.isArray(t.selectedKinds)&&c(t.selectedKinds),Array.isArray(t.selectedRelations)&&u(t.selectedRelations),typeof t.unidirectional=="string"&&h(t.unidirectional==="true"),typeof t.mergeRelations=="string"&&Z(t.mergeRelations==="true"),typeof t.direction=="string"&&U(t.direction),typeof t.showFilters=="string"&&R(t.showFilters==="true"))},[N,o.search,t,m,i,c,u,h,Z,U,R]);const O=(0,Q.Z)(r.map(l=>(0,D.eE)(l)));return(0,e.useEffect)(()=>{const l=r.map(A=>(0,D.eE)(A)),g=j().stringify({rootEntityRefs:l,maxDepth:isFinite(E)?E:"\u221E",selectedKinds:d,selectedRelations:s,unidirectional:_,mergeRelations:y,direction:I,showFilters:T},{arrayFormat:"brackets",addQueryPrefix:!0}),x=`${window.location.pathname}${g}`;!O||l.length===O.length&&l.every((A,F)=>A===O[F])?window.history.replaceState(null,document.title,x):window.history.pushState(null,document.title,x)},[r,E,d,s,_,y,I,T,O]),{rootEntityNames:r,setRootEntityNames:m,maxDepth:E,setMaxDepth:i,selectedRelations:s,setSelectedRelations:u,selectedKinds:d,setSelectedKinds:c,unidirectional:_,setUnidirectional:h,mergeRelations:y,setMergeRelations:Z,direction:I,setDirection:U,showFilters:T,toggleShowFilters:B}}function X(a){return a==="\u221E"?Number.POSITIVE_INFINITY:Number(a)}const Ce=(0,C.Z)(a=>({content:{minHeight:0},container:{height:"100%",maxHeight:"100%",minHeight:0},fullHeight:{maxHeight:"100%",display:"flex",minHeight:0},graphWrapper:{position:"relative",flex:1,minHeight:0,display:"flex"},graph:{flex:1,minHeight:0},legend:{position:"absolute",bottom:0,right:0,padding:a.spacing(1),"& .icon":{verticalAlign:"bottom"}},filters:{display:"grid",gridGap:a.spacing(1),gridAutoRows:"auto",[a.breakpoints.up("lg")]:{display:"block"},[a.breakpoints.only("md")]:{gridTemplateColumns:"repeat(3, 1fr)"},[a.breakpoints.only("sm")]:{gridTemplateColumns:"repeat(2, 1fr)"},[a.breakpoints.down("xs")]:{gridTemplateColumns:"repeat(1, 1fr)"}}})),Re=({relationPairs:a=v.vw,initialState:o})=>{const t=(0,k.s0)(),r=Ce(),m=(0,M.tg)(f.wi),{maxDepth:E,setMaxDepth:i,selectedKinds:s,setSelectedKinds:u,selectedRelations:d,setSelectedRelations:c,unidirectional:_,setUnidirectional:h,mergeRelations:y,setMergeRelations:Z,direction:I,setDirection:U,rootEntityNames:T,setRootEntityNames:R,showFilters:B,toggleShowFilters:N}=Pe({initialState:o}),O=(0,M.z$)(),l=(0,e.useCallback)((g,x)=>{var A,F;const L=(0,D.of)(g.id);if(x.shiftKey){const w=m({kind:L.kind.toLocaleLowerCase("en-US"),namespace:L.namespace.toLocaleLowerCase("en-US"),name:L.name});O.captureEvent("click",(A=g.title)!=null?A:(0,f.$3)(L),{attributes:{to:w}}),t(w)}else O.captureEvent("click",(F=g.title)!=null?F:(0,f.$3)(L)),R([L])},[m,t,R,O]);return e.createElement(p.T3,{themeId:"home"},e.createElement(p.h4,{title:"Catalog Graph",subtitle:T.map(g=>(0,f.$3)(g)).join(", ")}),e.createElement(p.VY,{stretch:!0,className:r.content},e.createElement(p.yW,{titleComponent:e.createElement(ie.Z,{value:"show filters",selected:B,onChange:()=>N()},e.createElement(re.Z,null)," Filters")},e.createElement(p.qt,null,"Start tracking your component in by adding it to the software catalog.")),e.createElement(b.Z,{container:!0,alignItems:"stretch",className:r.container},B&&e.createElement(b.Z,{item:!0,xs:12,lg:2,className:r.filters},e.createElement(pe,{value:E,onChange:i}),e.createElement(Oe,{value:s,onChange:u}),e.createElement(Me,{value:d,onChange:c,relationPairs:a}),e.createElement(he,{value:I,onChange:U}),e.createElement(J,{value:_,onChange:h,label:"Simplified"}),e.createElement(J,{value:y,onChange:Z,label:"Merge Relations"})),e.createElement(b.Z,{item:!0,xs:!0,className:r.fullHeight},e.createElement(oe.Z,{className:r.graphWrapper},e.createElement(W.Z,{variant:"caption",color:"textSecondary",display:"block",className:r.legend},e.createElement(se.Z,{className:"icon"})," Use pinch & zoom to move around the diagram. Click to change active node, shift click to navigate to entity."),e.createElement(v._U,{rootEntityNames:T,maxDepth:E,kinds:s&&s.length>0?s:void 0,relations:d&&d.length>0?d:void 0,mergeRelations:y,unidirectional:_,onNodeClick:l,direction:I,relationPairs:a,className:r.graph,zoom:"enabled"}))))))}},60008:function(q,K,n){var D,p=n(14859),M=n(93291);D={value:!0},K.Z=void 0;var f=M(n(2784)),P=p(n(50175)),C=(0,P.default)(f.createElement("path",{d:"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3v6zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6h6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6v-6z"}),"ZoomOutMap");K.Z=C}}]);})();

//# sourceMappingURL=4931.62ffa418.chunk.js.map